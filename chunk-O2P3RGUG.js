import{a as u,b as Q,d as De}from"./chunk-4IK4TLYG.js";import"./chunk-OCLT3HR4.js";import{a as Ee}from"./chunk-5EEIOBZW.js";import{$ as oe,B as c,C as O,Hb as Ce,L as d,Mb as Se,Na as F,Nb as xe,O as l,Oa as pe,Ob as M,P as te,Pb as B,Q as b,Qa as ce,Qb as R,R as ie,Ra as me,S as ne,Sb as N,T as re,Tb as be,U as se,V as ae,Vb as W,W as o,Wb as U,X as s,Xb as H,Y as f,Ya as h,Yb as q,a as C,aa as le,b as G,ba as a,ca as v,da as _,ea as L,fa as de,ga as P,i as S,ia as J,ja as z,kb as ue,mb as fe,ob as he,pb as ye,ta as m,tb as V,u as K,va as E,wb as ge,x as ee,xa as j,xb as ve,y as g}from"./chunk-7IRLRVY6.js";var ke=(()=>{let t=class t{constructor(){this.dataService=c(u),this.list=h(this.dataService.getList()),this.id=l(void 0),this.index=l(void 0),this.data=l(void 0),this.fieldConfiguration=l({type:"object",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=m(()=>this.isDirty()?B:M),E(()=>{this.data.set(structuredClone(this.list()?.find(e=>e.id==this.id())?.savedAddresses.at(Number(this.index()))))},{allowSignalWrites:!0})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(n=>e.isDirty??n)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,n){switch(e){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(i=>i.id==this.id())?.savedAddresses.at(Number(this.index())))),this.updateState({isDirty:!1});break}case"save":{let i=this.updatedValue();i&&(this.dataService.updateAddress(this.id(),Number(this.index()),i),this.updateState({isDirty:!1}));break}}}onParamsChange(e,n){this.id.set(e.id),this.index.set(e.index)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac});let r=t;return r})();var Ne=r=>["./",r],Oe=r=>({"border-primary-300 dark:border-primary-700 bg-hover":r});function Pe(r,t){if(r&1&&(o(0,"a",4,0)(2,"div",5)(3,"span",6),a(4),s(),o(5,"span",6),a(6),s(),o(7,"span",7),a(8),s()()()),r&2){let y=t.$implicit,e=t.$index,n=le(1);b("routerLink",J(6,Ne,e))("ngClass",J(8,Oe,n.isActive)),d(4),_(" ",y.line1," "),d(2),_(" ",y.line2," "),d(2),L("",y.city,", ",y.state,"")}}var we=(()=>{let t=class t{constructor(){this.dataService=c(u),this.route=c(F),this.list=h(this.dataService.getList()),this.id=h(this.route.params.pipe(S(e=>e.id))),this.data=m(()=>this.list()?.find(e=>e.id==this.id())?.savedAddresses??[])}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=O({type:t,selectors:[["demo-customer-address"]],hostAttrs:[1,"contents"],standalone:!0,features:[P],decls:6,vars:0,consts:[["active","routerLinkActive"],[1,"flex","flex-row","gap-8","grow"],[1,"pui-card","rounded-4","basis-80","shrink-0","grow-0","p-4","h-fit","max-h-[calc(100svh_-_8.5rem)]","overflow-y-auto","sticky","top-26"],[1,"flex","flex-col","gap-4"],["routerLinkActive","","puiHoverable","",1,"rounded-3","pui-card--subtle","border","p-4","text-start","justify-start",3,"routerLink","ngClass"],[1,"flex","flex-col"],[1,"text-base","truncate"],[1,"text-sm","truncate","font-medium","text-neutral-800","dark:text-neutral-200"]],template:function(n,i){n&1&&(o(0,"div",1)(1,"div",2)(2,"div",3),se(3,Pe,9,10,"a",4,re),s()(),f(5,"router-outlet"),s()),n&2&&(d(3),ae(i.data()))},dependencies:[Ce,fe,ce,me,j,pe]});let r=t;return r})();var Y=(()=>{let t=class t{constructor(){this.dataService=c(u),this.list=h(this.dataService.getList()),this.id=l(""),this.heading=m(()=>this.list()?.find(e=>e.id==this.id())?.name??"--"),this.tabs=l([{label:"Info",route:["info"]},{label:"Addresses",route:["address"]},{label:"Raw",route:["raw"]}]),this.routeToFullContent=m(()=>["/","user","customer",{outlets:{primary:["detail",this.id()],peek:null}}])}onParamsChange(e,n){this.id.set(e.id)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac});let r=t;return r})();var Ae=(()=>{let t=class t{constructor(){this.dataService=c(u),this.list=h(this.dataService.getList()),this.id=l(void 0),this.data=l(void 0),this.fieldConfiguration=l({type:"object",properties:{name:{type:"string",description:"Name"},username:{type:"string",description:"Username"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},address:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}},savedAddresses:{type:"array",description:"Saved Address",items:{type:"object",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}},registeredSince:{type:"date-time",description:"Registered Since"}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=m(()=>this.isDirty()?B:M),E(()=>{this.data.set(structuredClone(this.list()?.find(e=>e.id==this.id())))},{allowSignalWrites:!0})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(n=>e.isDirty??n)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,n){switch(e){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(i=>i.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let i=this.updatedValue();i&&(this.dataService.save(i),this.updateState({isDirty:!1}));break}}}onParamsChange(e,n){this.id.set(e.id)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac});let r=t;return r})();var je=(r,t)=>({"bg-emerald-300 dark:bg-emerald-800":r,"border-emerald-300/70 dark:border-emerald-800/70":t}),Fe=(r,t)=>({"bg-amber-300 dark:bg-amber-800":r,"border-amber-300/70 dark:border-amber-800/70":t});function Ve(r,t){if(r&1&&(o(0,"span",29),a(1),s(),o(2,"span",29),a(3),s(),o(4,"span",29),a(5),s(),o(6,"span",29),a(7),s()),r&2){let y,e,n,i,p=oe();d(),v((y=p.customer())==null||y.address==null?null:y.address.line1),d(2),v((e=p.customer())==null||e.address==null?null:e.address.line2),d(2),L("",(n=p.customer())==null||n.address==null?null:n.address.city,", ",(n=p.customer())==null||n.address==null?null:n.address.state,""),d(2),L("",(i=p.customer())==null||i.address==null?null:i.address.country," ",(i=p.customer())==null||i.address==null?null:i.address.postalCode,"")}}function Me(r,t){r&1&&(o(0,"span",29),a(1,"----"),s())}var Ie=(()=>{let t=class t{constructor(){this.dataService=c(u),this.inventoryItemService=c(De),this.route=c(F),this.list=h(this.dataService.getList()),this.id=h(this.route.params.pipe(S(e=>e.id))),this.allInventoryItems=h(this.inventoryItemService.getList()),this.customer=m(()=>this.list()?.find(e=>e.id==this.id())),this.inventoryItems=m(()=>this.allInventoryItems()?.filter(e=>e.belongsTo==this.customer()?.id)??[]),this.awaitingPaymentsCount=m(()=>this.inventoryItems()?.filter(e=>e.status==Q.OPEN).length),this.repackageCount=m(()=>this.inventoryItems()?.filter(e=>e.status==Q.REPACKAGING).length),this.data=m(()=>this.inventoryItems().slice(0,5)),this.columnsConfig=l([{key:"netWeight",label:"Net Weight (g)",fieldConfiguration:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",fieldConfiguration:{type:"number"}},{key:"isContainFragile",label:"Fragile",fieldConfiguration:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l({default:["netWeight","status"],768:["netWeight","status","arrivedAt"],1280:["netWeight","grossWeight","isContainFragile","status","arrivedAt"]}),this.controlsConfig=l([])}routeToDetail(e){return["/","inventory","item","detail",e.id]}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=O({type:t,selectors:[["demo-customer-info"]],hostAttrs:[1,"contents"],standalone:!0,features:[de([{provide:W,useExisting:ee(()=>t)}]),P],decls:96,vars:23,consts:[[1,"@container","grow"],[1,"pui-card","rounded-4","p-8"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"pui-card--subtle","rounded-4","p-8","overflow-hidden","@screen-md:col-span-2"],[1,"flex","flex-col","sm:flex-row","gap-4","items-stretch","h-full","overflow-x-auto"],[1,"rounded-3","flex-1","border","dark:bg-blue-800","flex","flex-col","p-4","transition-colors"],[1,"dark:text-blue-200"],[1,"spacer"],[1,"text-2xl","font-bold","self-end","text-end","tabular-nums"],[1,"rounded-3","flex-1","border","dark:bg-emerald-800","flex","flex-col","p-4","transition-colors",3,"ngClass"],[1,"dark:text-emerald-200"],[1,"rounded-3","flex-1","border","flex","flex-col","p-4","transition-colors",3,"ngClass"],[1,"text-amber-700","dark:text-amber-200"],[1,"pui-card--subtle","rounded-4","p-8","overflow-hidden"],[1,"flex","flex-col","items-center","gap-2"],[1,"p-4","rounded-full","bg-neutral-500","shadow-md","shadow-neutral-500","transition-colors"],[1,"icon-10","font-variation-fill"],[1,"w-full","text-center","break-anywhere","whitespace-normal"],[1,"text-sm","text-center","text-neutral-800","dark:text-neutral-200","before:content-['#']"],[1,"text-base","text-center"],[3,"date","format"],[1,"pui-card--subtle","rounded-4","p-8","overflow-hidden","@screen-md:col-span-2","flex","flex-col"],[1,"flex","flex-row","justify-end","items-center"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2"],[1,"flex","flex-col","pt-6","gap-4"],[1,"flex","flex-row","items-center","gap-2"],[1,"icon-6","font-variation-weight-light","text-neutral-800","dark:text-neutral-200"],[1,"flex","flex-col","gap-1"],[1,"text-sm","text-neutral-800","dark:text-neutral-200"],[1,"text-base"],[1,"text-base","break-anywhere"]],template:function(n,i){if(n&1&&(o(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),a(7,"Completed"),f(8,"br"),a(9,"Sales"),s(),f(10,"div",7),o(11,"span",8),a(12,"$2,000"),s()(),o(13,"div",9)(14,"h3",10),a(15,"Awaiting"),f(16,"br"),a(17,"Payments"),s(),f(18,"div",7),o(19,"span",8),a(20),s()(),o(21,"div",11)(22,"h3",12),a(23,"Repackage"),f(24,"br"),a(25,"Requests"),s(),f(26,"div",7),o(27,"span",8),a(28),s()()()(),o(29,"div",13)(30,"div",14)(31,"div",15)(32,"i",16),a(33),s()(),o(34,"h2",17),a(35),s(),o(36,"span",18),a(37),s(),o(38,"span",19),a(39,"Joined since "),f(40,"pui-time-display",20),s()()(),o(41,"div",21)(42,"h3"),a(43,"Recent Inventory"),s(),f(44,"pui-table-content"),o(45,"div",22)(46,"button",23),a(47),s()()(),o(48,"div",13)(49,"h3"),a(50,"Detailed information"),s(),o(51,"div",24)(52,"div",25)(53,"i",26),a(54,"person"),s(),o(55,"div",27)(56,"span",28),a(57,"Fullname"),s(),o(58,"span",29),a(59),s()()(),f(60,"pui-divider"),o(61,"div",25)(62,"i",26),a(63,"person"),s(),o(64,"div",27)(65,"span",28),a(66,"Username"),s(),o(67,"span",30),a(68),s()()(),f(69,"pui-divider"),o(70,"div",25)(71,"i",26),a(72,"phone"),s(),o(73,"div",27)(74,"span",28),a(75,"Phone number"),s(),o(76,"span",30),a(77),s()()(),f(78,"pui-divider"),o(79,"div",25)(80,"i",26),a(81,"email"),s(),o(82,"div",27)(83,"span",28),a(84,"Email address"),s(),o(85,"span",30),a(86),s()()(),f(87,"pui-divider"),o(88,"div",25)(89,"i",26),a(90,"location_on"),s(),o(91,"div",27)(92,"span",28),a(93,"Main address"),s(),te(94,Ve,8,6)(95,Me,2,0,"span",29),s()()()()()()()),n&2){let p,$,D,k,X,w,A,I,T,Z;d(13),b("ngClass",z(17,je,i.awaitingPaymentsCount()>0,i.awaitingPaymentsCount()==0)),d(7),v(i.awaitingPaymentsCount()),d(),b("ngClass",z(20,Fe,i.repackageCount()>0,i.repackageCount()==0)),d(7),v(i.repackageCount()),d(3),ie("--color-neutral-500",(p=i.customer())==null||p.profile==null?null:p.profile.color),d(2),v(($=i.customer())==null||$.profile==null?null:$.profile.icon),d(2),v((D=(D=i.customer())==null?null:D.username)!==null&&D!==void 0?D:"---"),d(2),v((k=(k=i.customer())==null?null:k.id)!==null&&k!==void 0?k:"----"),d(3),b("date",(X=i.customer())==null?null:X.registeredSince)("format","dd MMM yyyy"),d(7),_(" View all (",i.inventoryItems().length,") "),d(12),v((w=(w=i.customer())==null?null:w.name)!==null&&w!==void 0?w:"----"),d(9),v((A=(A=i.customer())==null?null:A.username)!==null&&A!==void 0?A:"----"),d(9),v((I=(I=i.customer())==null?null:I.phone)!==null&&I!==void 0?I:"----"),d(9),v((T=(T=i.customer())==null?null:T.email)!==null&&T!==void 0?T:"----"),d(8),ne((Z=i.customer())!=null&&Z.address?94:95)}},dependencies:[ve,ge,U,ye,he,j],styles:["demo-customer-info .pui-table-content main{background-color:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);-webkit-backdrop-filter:none;backdrop-filter:none;padding-left:0;padding-right:0}"]});let r=t;return r})();var Te=(()=>{let t=class t{constructor(){this.heading=l("Customers"),this.tabs=l([])}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac});let r=t;return r})();var _e=(()=>{let t=class t{constructor(){this.dataService=c(u),this.configuration={content:N},this.data=l(null),this.fieldConfiguration=l({type:"object",properties:{name:{type:"string",description:"Name"},username:{type:"string",description:"Username"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},address:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}},savedAddresses:{type:"array",description:"Saved Addresses",items:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}},registeredSince:{type:"date-time",description:"Registered Since"}}}),this.controlsConfig=l([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=l(void 0),this.heading=l("Add Customer")}registerUpdateState(e){this.updateState=e,this.updateState({isDirty:!0})}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,n){switch(e){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let i=this.updatedValue();i&&(i=Object.assign(i,{id:Ee.string.nanoid()}),this.dataService.add(i),this.overlayRef.close());break}}}onActionDrawerInit(e){this.overlayRef=e}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac});let r=t;return r})();var Le=(()=>{let t=class t{constructor(){this.dataService=c(u),this.actionDrawer=c(xe),this.screenWidth=c(ue),this.rawData=h(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=l([]),this.columnsConfig=l([{key:"name",label:"Name"},{key:"username",label:"Username"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"line2",path:"address.line2",label:"Address (Line 2)"},{key:"registeredSince",label:"Registered",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l({default:["name","phone"],768:["name","email","phone","registeredSince"],1536:["name","username","email","phone","line2","registeredSince"]}),this.filterConfig=l({type:"object",properties:{name:{type:"string",description:"Name"},id:{type:"string",description:"ID"}}}),this.filterValue=l({}),this.sortFn=m(()=>{let e=this.columnsConfig().find(i=>i.isSortedAsc||i.isSortedDesc);if(!e)return()=>0;let n=e.isSortedDesc?-1:1;return(i,p)=>{switch(e.key){case"registeredSince":return(i.registeredSince.getTime()-p.registeredSince.getTime())*n;case"line2":return i.address[e.key]>p.address[e.key]?n:i.address[e.key]<p.address[e.key]?-1*n:0;default:return i[e.key]>p[e.key]?n:i[e.key]<p[e.key]?-1*n:0}}}),this.filterFn=m(()=>{let e=this.filterValue(),n=Object.values(e??{}).some(i=>typeof i=="string"?!!i:i!=null);return i=>n&&e.id&&!i.id.toLowerCase().includes(e.id.toLowerCase())?!1:!(n&&e.name&&!(i.username.toLowerCase().includes(e.name.toLowerCase())||i.name.toLowerCase().includes(e.name.toLowerCase())))}),E(()=>{let e=this.rawData();e&&this.data.set(e.filter(this.filterFn()).sort(this.sortFn()))},{allowSignalWrites:!0})}routeToDetail(e){return this.screenWidth.above().sm()?["/user","customer",{outlets:{peek:[e.id]}}]:["/user","customer","detail",e.id]}onHeaderCellClick(e,n){this.columnsConfig.update(i=>i.map(p=>p.key==e?G(C({},p),{isSortedAsc:!p.isSortedAsc&&!p.isSortedDesc?!0:!!p.isSortedDesc,isSortedDesc:!!p.isSortedAsc}):G(C({},p),{isSortedAsc:!1,isSortedDesc:!1})))}onFilterChange(e){this.filterValue.set(e)}onControlClick(e,n){switch(e){case"add":{this.actionDrawer.open(_e,{providers:[{provide:R,useExisting:Se}]});break}}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac});let r=t;return r})();var Re=[{path:"info",component:Ie},{path:"address",component:we,children:[{path:":index",component:N,providers:[{provide:R,useClass:ke}]}]},{path:"raw",component:N,providers:[{provide:R,useClass:Ae}]},{path:"**",redirectTo:"info"}],Qt=[{path:"",data:C({},V({title:"Customer"})),children:[{path:"detail/:id",component:q,data:C({},V({deps:[u],titleFn:(r,t)=>r.params.pipe(K(y=>t.getList().pipe(S(e=>e.find(n=>n.id==y.id)?.name??"--"))))})),providers:[{provide:H,useClass:Y}],children:Re},{path:"",component:q,providers:[{provide:H,useClass:Te},{provide:be,useClass:Y}],children:[{path:":id",outlet:"peek",component:q,data:C({},V({deps:[u],titleFn:(r,t)=>r.params.pipe(K(y=>t.getList().pipe(S(e=>e.find(n=>n.id==y.id)?.name??"--"))))})),providers:[{provide:H,useClass:Y}],children:Re},{path:"",component:U,providers:[{provide:W,useClass:Le}]}]}]}];export{Qt as ROUTES};
