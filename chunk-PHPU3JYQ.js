import{a as Be}from"./chunk-X7X6QUMU.js";import"./chunk-ULBYTBL2.js";import{a as ee,c as Ve}from"./chunk-4C5EHOIJ.js";import{a as f}from"./chunk-K7VH36KH.js";import"./chunk-RGXJKQT7.js";import{a as Ae,b as j,c as V,d as B,e as N,f as Fe,g as A,h as Le,j as Re,k as Pe,m as W,n as U,o as Oe,p as H,q as $}from"./chunk-X7QNMMHB.js";import{a as je}from"./chunk-QLEH2ZB5.js";import{B as ue,Ba as Ce,C as fe,Ca as be,Da as O,Ea as xe,Ja as De,K as I,O as g,Ra as Se,Sa as we,Ta as Ee,Ua as Ie,Va as _e,Wa as ke,Xa as Te,_a as Me,a as R,ga as ge,qb as Ne,wa as he,xa as ve,y as P,ya as ye,z as ce}from"./chunk-4WQRPZ5G.js";import{$ as h,Hb as Q,Ib as C,Ka as d,Sb as de,Tb as pe,V as J,Vb as s,Wb as y,Xb as E,Yb as M,_ as oe,ab as w,ac as me,cc as X,dc as Z,ea as m,pb as k,q as x,qb as T,qc as u,ra as l,rb as ae,rc as L,tb as se,ub as le,vb as v,wb as o,xb as n,yb as c}from"./chunk-LVH4HSPS.js";import{a as F}from"./chunk-C6Q5SG76.js";var We=(()=>{let t=class t{constructor(){this.dataService=m(f),this.list=g(this.dataService.getList()),this.id=l(void 0),this.index=l(void 0),this.data=l(void 0),this.fieldConfiguration=l({type:"object",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=u(()=>this.isDirty()?B:V),L(()=>{this.data.set(I(this.list()?.find(e=>e.id==this.id())?.savedAddresses.at(Number(this.index()))))})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(a=>e.isDirty??a)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,a){switch(e){case"refresh":case"cancel":{this.data.set(I(this.list()?.find(r=>r.id==this.id())?.savedAddresses.at(Number(this.index())))),this.updateState({isDirty:!1});break}case"save":{let r=this.updatedValue();r&&(this.dataService.updateAddress(this.id(),Number(this.index()),r),this.updateState({isDirty:!1}));break}}}onParamsChange(e,a){this.id.set(e.id),this.index.set(e.index)}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac});let i=t;return i})();var Qe=i=>["./",i],Xe=i=>({"border-primary-300 dark:border-primary-700 bg-hover dark:bg-hover-dark":i});function Ze(i,t){if(i&1&&(o(0,"a",4,0)(2,"div",5)(3,"span",6),s(4),n(),o(5,"span",6),s(6),n(),o(7,"span",7),s(8),n()()()),i&2){let p=t.$implicit,e=t.$index,a=de(1);v("routerLink",X(6,Qe,e))("ngClass",X(8,Xe,a.isActive)),d(4),E(" ",p.line1," "),d(2),E(" ",p.line2," "),d(2),M("",p.city,", ",p.state)}}var Ue=(()=>{let t=class t{constructor(){this.dataService=m(f),this.route=m(P),this.list=g(this.dataService.getList()),this.id=g(this.route.params.pipe(x(e=>e.id))),this.data=u(()=>this.list()?.find(e=>e.id==this.id())?.savedAddresses??[])}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=w({type:t,selectors:[["demo-customer-address"]],hostAttrs:[1,"contents"],decls:6,vars:0,consts:[["active","routerLinkActive"],[1,"flex","flex-row","gap-8","grow"],[1,"pui-card","rounded-4","basis-80","shrink-0","grow-0","p-4","h-fit","max-h-[calc(100svh-8.5rem)]","overflow-y-auto","sticky","top-26"],[1,"flex","flex-col","gap-4"],["routerLinkActive","","puiHoverable","",1,"rounded-3","pui-card--subtle","border","p-4","text-start","justify-start",3,"routerLink","ngClass"],[1,"flex","flex-col"],[1,"text-base","truncate"],[1,"text-sm","truncate","font-medium","text-neutral-800","dark:text-neutral-200"]],template:function(a,r){a&1&&(o(0,"div",1)(1,"div",2)(2,"div",3),se(3,Ze,9,10,"a",4,ae),n()(),c(5,"router-outlet"),n()),a&2&&(d(3),le(r.data()))},dependencies:[Ne,he,ue,fe,R,ce],encapsulation:2});let i=t;return i})();var q=(()=>{let t=class t{constructor(){this.dataService=m(f),this.list=g(this.dataService.getList()),this.id=l(""),this.heading=u(()=>this.list()?.find(e=>e.id==this.id())?.name??"--"),this.tabs=l([{label:"Info",route:["info"]},{label:"Addresses",route:["address"]},{label:"Raw",route:["raw"]}]),this.routeToFullContent=u(()=>["../","customer",{outlets:{primary:["detail",this.id()],peek:null}}])}onParamsChange(e,a){this.id.set(e.id)}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac});let i=t;return i})();var He=(()=>{let t=class t{constructor(){this.dataService=m(f),this.list=g(this.dataService.getList()),this.id=l(void 0),this.data=l(void 0),this.fieldConfiguration=l({type:"object",properties:{name:{type:"string",description:"Name"},username:{type:"string",description:"Username"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},address:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}},savedAddresses:{type:"array",description:"Saved Address",items:{type:"object",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}},registeredSince:{type:"date-time",description:"Registered Since",format:"yyyy MMMM dd"}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=u(()=>this.isDirty()?B:V),L(()=>{this.data.set(I(this.list()?.find(e=>e.id==this.id())))})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(a=>e.isDirty??a)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,a){switch(e){case"refresh":case"cancel":{this.data.set(I(this.list()?.find(r=>r.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let r=this.updatedValue();r&&(this.dataService.save(r),this.updateState({isDirty:!1}));break}}}onParamsChange(e,a){this.id.set(e.id)}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac});let i=t;return i})();var $e=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=w({type:t,selectors:[["demo-media-manager-picker"]],decls:3,vars:3,consts:[[1,"px-2"],[3,"navigateWithRouter","folderId"],["id","confirm","mode","auto",3,"label"]],template:function(a,r){a&1&&(o(0,"div",0),c(1,"demo-media-manager-folder",1),n(),c(2,"pui-layout-control",2)),a&2&&(d(),v("navigateWithRouter",!1)("folderId",null),d(),v("label","Choose"))},dependencies:[Be,Fe],encapsulation:2});let i=t;return i})();var qe=(()=>{let t=class t{constructor(){this.configuration={content:$e},this.heading=l("Choose a file")}onActionDrawerInit(e){this.overlayRef=e}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac});let i=t;return i})();var et=(i,t)=>({"bg-emerald-300 dark:bg-emerald-800":i,"border-emerald-300/70 dark:border-emerald-800/70":t}),tt=(i,t)=>({"bg-amber-300 dark:bg-amber-800":i,"border-amber-300/70 dark:border-amber-800/70":t});function it(i,t){if(i&1&&(o(0,"pui-input-field",34),c(1,"input",41),n()),i&2){let p,e=C();d(),v("value",(p=e.customer())==null?null:p.name)}}function nt(i,t){if(i&1&&(o(0,"span",34),s(1),n()),i&2){let p,e=C();d(),y(((p=e.customer())==null?null:p.name)??"----")}}function rt(i,t){if(i&1&&(o(0,"pui-input-field",34),c(1,"input",41),n()),i&2){let p,e=C();d(),v("value",(p=e.customer())==null?null:p.username)}}function ot(i,t){if(i&1&&(o(0,"span",34),s(1),n()),i&2){let p,e=C();d(),y(((p=e.customer())==null?null:p.username)??"----")}}function at(i,t){if(i&1&&(o(0,"pui-input-field",34),c(1,"input",42),n()),i&2){let p,e=C();d(),v("value",(p=e.customer())==null?null:p.phone)}}function st(i,t){if(i&1&&(o(0,"span",34),s(1),n()),i&2){let p,e=C();d(),y(((p=e.customer())==null?null:p.phone)??"----")}}function lt(i,t){if(i&1&&(o(0,"pui-input-field",34),c(1,"input",43),n()),i&2){let p,e=C();d(),v("value",(p=e.customer())==null?null:p.email)}}function dt(i,t){if(i&1&&(o(0,"span",34),s(1),n()),i&2){let p,e=C();d(),y(((p=e.customer())==null?null:p.email)??"----")}}var Ye=(()=>{let t=class t{constructor(){this.dataService=m(f),this.inventoryItemService=m(Ve),this.route=m(P),this.list=g(this.dataService.getList()),this.id=g(this.route.params.pipe(x(e=>e.id))),this.allInventoryItems=g(this.inventoryItemService.getList()),this.actionDrawer=m(j),this.customer=u(()=>this.list()?.find(e=>e.id==this.id())),this.inventoryItems=u(()=>this.allInventoryItems()?.filter(e=>e.belongsTo==this.customer()?.id)??[]),this.awaitingPaymentsCount=u(()=>this.inventoryItems()?.filter(e=>e.status==ee.OPEN).length),this.repackageCount=u(()=>this.inventoryItems()?.filter(e=>e.status==ee.REPACKAGING).length),this.data=u(()=>this.inventoryItems().slice(0,5)),this.configuration={id:"customer-info-table"},this.columnsConfig=l([{key:"netWeight",label:"Net Weight (g)",fieldConfiguration:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",fieldConfiguration:{type:"number"}},{key:"isContainFragile",label:"Fragile",fieldConfiguration:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l({default:["netWeight","status"],768:["netWeight","status","arrivedAt"],1280:["netWeight","grossWeight","isContainFragile","status","arrivedAt"]}),this.controlsConfig=l([]),this.isInfoEditing=l(!1)}routeToDetail(e){return["/","inventory","item","detail",e.id]}onProfilePicEdit(){this.actionDrawer.open(qe)}onInfoEdit(){this.isInfoEditing.update(e=>!e)}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=w({type:t,selectors:[["demo-customer-info"]],hostAttrs:[1,"contents"],features:[me([{provide:W,useExisting:oe(()=>t)}])],decls:113,vars:30,consts:[[1,"@container","grow"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"pui-card","rounded-4","p-8","overflow-hidden","@screen-md:col-span-2"],[1,"flex","flex-col","sm:flex-row","gap-4","items-stretch","h-full","overflow-x-auto"],[1,"rounded-3","flex-1","border","dark:bg-blue-800","flex","flex-col","p-4","transition-colors"],[1,"dark:text-blue-200","flex-none"],[1,"spacer"],[1,"text-2xl","font-bold","self-end","text-end","tabular-nums"],[1,"rounded-3","flex-1","border","dark:bg-emerald-800","flex","flex-col","p-4","transition-colors",3,"ngClass"],[1,"dark:text-emerald-200","flex-none"],[1,"rounded-3","flex-1","border","flex","flex-col","p-4","transition-colors",3,"ngClass"],[1,"dark:text-amber-200","flex-none"],[1,"pui-card","rounded-4","p-8","overflow-hidden"],[1,"flex","flex-col","items-center","gap-2"],[1,"p-4","rounded-full","bg-neutral-500","shadow-md","shadow-neutral-500","transition-colors","relative"],[1,"icon-10","font-variation-fill"],["puiBaseButton","","puiTooltip","Edit",1,"absolute","size-8","rounded-full","dark:bg-neutral-600","shadow-md","-bottom-2","-right-2","justify-center","items-center",3,"click"],[1,"icon-5","font-variation-weight-extra-light"],[1,"w-full","text-center","wrap-anywhere","whitespace-normal"],[1,"text-sm","text-center","text-neutral-800","dark:text-neutral-200","before:content-['#']"],[1,"text-base","text-center"],[3,"date","format"],[1,"pui-card","rounded-4","p-8","overflow-hidden","@screen-md:col-span-2","flex","flex-col"],[1,"flex-none"],[1,"flex","flex-row","justify-end","items-center"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2"],[1,"pui-card","rounded-4","py-8","gap-6","overflow-hidden","flex","flex-col","px-8"],[1,"flex","items-center","justify-between"],["puiBorderedButton","","color","primary","puiTooltip","Edit",1,"px-4","py-2","gap-1","rounded-full","justify-center","items-center",3,"click"],[1,"font-medium","text-base"],[1,"-mx-8","@screen-md/layout:mx-0"],["hideDivider",""],["puiFormFieldIcon",""],["puiFormFieldTitle",""],["puiFormFieldContent",""],["padStart","1","hideDivider",""],["padStart","1"],["puiFormFieldDescription",""],["puiFormFieldContent","",1,"flex","flex-col","gap-1","px-2"],[1,"text-base"],["puiFormFieldContent","","format","MMM dd, yyyy HH:mm",1,"px-2",3,"date"],[3,"value"],["type","tel",3,"value"],["type","email",3,"value"]],template:function(a,r){if(a&1&&(o(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),s(6,"Completed"),c(7,"br"),s(8,"Sales"),n(),c(9,"div",6),o(10,"span",7),s(11,"$2,000"),n()(),o(12,"div",8)(13,"h3",9),s(14,"Awaiting"),c(15,"br"),s(16,"Payments"),n(),c(17,"div",6),o(18,"span",7),s(19),n()(),o(20,"div",10)(21,"h3",11),s(22," Repackage"),c(23,"br"),s(24,"Requests "),n(),c(25,"div",6),o(26,"span",7),s(27),n()()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"i",15),s(32),n(),o(33,"button",16),Q("click",function(){return r.onProfilePicEdit()}),o(34,"i",17),s(35,"edit"),n()()(),o(36,"h2",18),s(37),n(),o(38,"span",19),s(39),n(),o(40,"span",20),s(41,"Joined since "),c(42,"pui-time-display",21),n()()(),o(43,"div",22)(44,"h3",23),s(45,"Recent Inventory"),n(),c(46,"pui-table-content"),o(47,"div",24)(48,"button",25),s(49),n()()(),o(50,"div",26)(51,"div",27)(52,"h3",23),s(53,"Detailed information"),n(),o(54,"button",28),Q("click",function(){return r.onInfoEdit()}),o(55,"i",17),s(56,"edit"),n(),o(57,"span",29),s(58,"Edit"),n()()(),o(59,"pui-form-display",30)(60,"pui-form-field",31)(61,"i",32),s(62,"person"),n(),o(63,"span",33),s(64,"Fullname"),n(),k(65,it,2,1,"pui-input-field",34)(66,nt,2,1,"span",34),n(),o(67,"pui-form-field",35)(68,"span",33),s(69,"Username"),n(),k(70,rt,2,1,"pui-input-field",34)(71,ot,2,1,"span",34),n(),o(72,"pui-form-field",36)(73,"i",32),s(74,"face"),n(),o(75,"span",33),s(76,"Profile icon"),n(),o(77,"span",34),s(78),n()(),o(79,"pui-form-field")(80,"i",32),s(81,"phone"),n(),o(82,"span",33),s(83,"Phone number"),n(),o(84,"span",37),s(85,"With country code (ie. +123)"),n(),k(86,at,2,1,"pui-input-field",34)(87,st,2,1,"span",34),n(),o(88,"pui-form-field")(89,"i",32),s(90,"email"),n(),o(91,"span",33),s(92,"Email address"),n(),k(93,lt,2,1,"pui-input-field",34)(94,dt,2,1,"span",34),n(),o(95,"pui-form-field")(96,"i",32),s(97,"location_on"),n(),o(98,"span",33),s(99,"Main address"),n(),o(100,"div",38)(101,"span",39),s(102),n(),o(103,"span",39),s(104),n(),o(105,"span",39),s(106),n(),o(107,"span",39),s(108),n()()(),o(109,"pui-form-field")(110,"span",33),s(111,"Registered since"),n(),c(112,"pui-time-display",40),n()()()()()),a&2){let _,Y,te,ie,ne,G,z,K,D,S,re;d(12),v("ngClass",Z(24,et,r.awaitingPaymentsCount()>0,r.awaitingPaymentsCount()==0)),d(7),y(r.awaitingPaymentsCount()),d(),v("ngClass",Z(27,tt,r.repackageCount()>0,r.repackageCount()==0)),d(7),y(r.repackageCount()),d(3),pe("--color-neutral-500","rgb("+((_=r.customer())==null||_.profile==null?null:_.profile.color)+")"),d(2),y((Y=r.customer())==null||Y.profile==null?null:Y.profile.icon),d(5),E(" ",((te=r.customer())==null?null:te.username)??"---"," "),d(2),y(((ie=r.customer())==null?null:ie.id)??"----"),d(3),v("date",(ne=r.customer())==null?null:ne.registeredSince)("format","dd MMM yyyy"),d(7),E(" View all (",r.inventoryItems().length,") "),d(16),T(r.isInfoEditing()?65:66),d(5),T(r.isInfoEditing()?70:71),d(8),y(((G=r.customer())==null||G.profile==null?null:G.profile.icon)??"----"),d(8),T(r.isInfoEditing()?86:87),d(7),T(r.isInfoEditing()?93:94),d(9),y((z=r.customer())==null||z.address==null?null:z.address.line1),d(2),y((K=r.customer())==null||K.address==null?null:K.address.line2),d(2),M("",(D=r.customer())==null||D.address==null?null:D.address.city,", ",(D=r.customer())==null||D.address==null?null:D.address.state),d(2),M("",(S=r.customer())==null||S.address==null?null:S.address.country," ",(S=r.customer())==null||S.address==null?null:S.address.postalCode),d(4),v("date",(re=r.customer())==null?null:re.registeredSince)}},dependencies:[De,U,Ce,ve,ye,R,xe,Te,we,Se,ke,Ee,_e,Ie,be],styles:[`@layer properties;  demo-customer-info .pui-table-content main{background-color:transparent;padding-inline:calc(var(--spacing, .25rem) * 0);--tw-shadow: 0 0 #0000;box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);-webkit-backdrop-filter:none;backdrop-filter:none}@property --tw-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-shadow-color{syntax: "*"; inherits: false;}@property --tw-shadow-alpha{syntax: "<percentage>"; inherits: false; initial-value: 100%;}@property --tw-inset-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-inset-shadow-color{syntax: "*"; inherits: false;}@property --tw-inset-shadow-alpha{syntax: "<percentage>"; inherits: false; initial-value: 100%;}@property --tw-ring-color{syntax: "*"; inherits: false;}@property --tw-ring-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-inset-ring-color{syntax: "*"; inherits: false;}@property --tw-inset-ring-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@property --tw-ring-inset{syntax: "*"; inherits: false;}@property --tw-ring-offset-width{syntax: "<length>"; inherits: false; initial-value: 0px;}@property --tw-ring-offset-color{syntax: "*"; inherits: false; initial-value: #fff;}@property --tw-ring-offset-shadow{syntax: "*"; inherits: false; initial-value: 0 0 #0000;}@layer properties{@supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))){*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]::backdrop{--tw-shadow: 0 0 #0000;--tw-shadow-color: initial;--tw-shadow-alpha: 100%;--tw-inset-shadow: 0 0 #0000;--tw-inset-shadow-color: initial;--tw-inset-shadow-alpha: 100%;--tw-ring-color: initial;--tw-ring-shadow: 0 0 #0000;--tw-inset-ring-color: initial;--tw-inset-ring-shadow: 0 0 #0000;--tw-ring-inset: initial;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-offset-shadow: 0 0 #0000}}}

`]});let i=t;return i})();var Ge=(()=>{let t=class t{constructor(){this.heading=l("Customers"),this.tabs=l([])}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac});let i=t;return i})();var ze=(()=>{let t=class t{constructor(){this.dataService=m(f),this.configuration={content:A},this.data=l(null),this.fieldConfiguration=l({type:"object",properties:{name:{type:"string",description:"Name"},username:{type:"string",description:"Username"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},address:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}},savedAddresses:{type:"array",description:"Saved Addresses",items:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}},registeredSince:{type:"date-time",description:"Registered Since"}}}),this.controlsConfig=l([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=l(void 0),this.heading=l("Add Customer")}registerUpdateState(e){this.updateState=e,this.updateState({isDirty:!0})}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,a){switch(e){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let r=this.updatedValue();r&&(r=Object.assign(r,{id:je.string.nanoid()}),this.dataService.add(r),this.overlayRef.close());break}}}onActionDrawerInit(e){this.overlayRef=e}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac});let i=t;return i})();var Ke=(()=>{let t=class t{constructor(){this.dataService=m(f),this.actionDrawer=m(j),this.screenWidth=m(ge),this.rawData=g(this.dataService.getList()),this.configuration={id:"customer-table",useVirtualScroll:!0},this.isLoading=g(this.dataService.isLoading$,{initialValue:!0}),this.data=u(()=>(this.rawData()??[]).filter(this.filterFn()).toSorted(this.sortFn())),this.columnsConfig=l([{key:"name",label:"Name"},{key:"username",label:"Username"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"line2",path:"address.line2",label:"Address (Line 2)"},{key:"registeredSince",label:"Registered",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l({default:["name","phone"],768:["name","email","phone","registeredSince"],1536:["name","username","email","phone","line2","registeredSince"]}),this.filterConfig=l({type:"object",properties:{name:{type:"string",description:"Name"},id:{type:"string",description:"ID"}}}),this.filterValue=l({}),this.sortFn=u(()=>Pe(this.columnsConfig())),this.filterFn=u(()=>Re(this.filterValue(),{id:(e,a,r)=>!!r&&e.id.toLowerCase().includes(r.toLowerCase()),name:(e,a,r)=>!!r&&(e.username.toLowerCase().includes(r.toLowerCase())||e.name.toLowerCase().includes(r.toLowerCase()))}))}routeToDetail(e){return this.screenWidth.above().sm()?["../","customer",{outlets:{peek:[e.id]}}]:["../","customer","detail",e.id]}onHeaderCellClick(e,a){this.columnsConfig.update(r=>Oe(r,e))}onFilterChange(e){this.filterValue.set(e)}onControlClick(e,a){switch(e){case"add":{this.actionDrawer.open(ze,{providers:[{provide:N,useExisting:Ae}]});break}case"refresh":{this.dataService.refresh();break}}}onScrolledToBottom(){this.dataService.loadMore()}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=h({token:t,factory:t.\u0275fac});let i=t;return i})();var Je=[{path:"info",component:Ye},{path:"address",component:Ue,children:[{path:":index",component:A,providers:[{provide:N,useClass:We}]}]},{path:"raw",component:A,canDeactivate:[Me],providers:[{provide:N,useClass:He}]},{path:"**",redirectTo:"info"}],Pi=[{path:"",data:F({},O({title:"Customer"})),children:[{path:"detail/:id",component:$,data:F({},O({deps:[f],titleFn:(i,t)=>i.params.pipe(J(p=>t.getList().pipe(x(e=>e.find(a=>a.id==p.id)?.name??"--"))))})),providers:[{provide:H,useClass:q}],children:Je},{path:"",component:$,providers:[{provide:H,useClass:Ge},{provide:Le,useClass:q}],children:[{path:":id",outlet:"peek",component:$,data:F({},O({deps:[f],titleFn:(i,t)=>i.params.pipe(J(p=>t.getList().pipe(x(e=>e.find(a=>a.id==p.id)?.name??"--"))))})),providers:[{provide:H,useClass:q}],children:Je},{path:"",component:U,providers:[{provide:W,useClass:Ke}]}]}]}];export{Pi as ROUTES};
