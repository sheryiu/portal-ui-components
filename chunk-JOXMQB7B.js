import{$ as nt,$a as Dt,A as be,Aa as q,B as ve,Da as X,Ea as we,Ha as ke,Ia as Ct,J as ge,Ka as Ee,La as Fe,M as w,N as Qe,O as Q,Q as Te,Qa as ht,R as Xe,Ra as bt,S as Ze,Sa as vt,T as et,U as tt,V as it,W as ye,Xa as gt,Ya as Tt,Za as yt,_a as xt,a as Ye,ab as St,b as ue,bb as wt,c as Ke,ca as ot,cb as kt,d as _e,da as at,db as Et,eb as Ft,fb as At,gb as Vt,h as Je,hb as $t,ia as xe,ma as rt,na as lt,o as me,oa as st,p as fe,pa as ct,qa as dt,r as U,ra as pt,s as G,sa as ut,t as Ce,ta as _t,ua as mt,va as ft,wa as De,x as he,y as W,ya as Se,z as J}from"./chunk-5KXZHLFT.js";import{$ as ne,Ab as x,Bb as D,C as K,Cb as l,Da as O,Db as d,Eb as h,Fb as R,Gb as y,H as ie,Ha as Me,Jb as b,Kb as s,Lb as Ge,Mb as re,Q as Oe,Ra as c,Ub as le,V as Re,Vb as C,Wb as v,Zb as se,ac as ce,bc as H,ca as L,cc as S,dc as de,fa as u,fb as A,hb as je,hc as V,jc as z,kc as pe,lc as We,mb as _,oa as g,pa as T,q as M,r as j,sa as oe,sc as qe,ta as Be,ub as He,uc as m,vb as p,wb as ae,wc as B,x as Ie,xb as ze,xc as F,ya as Ne,yb as f,z as Le,za as E,zb as Ue}from"./chunk-RLC3TLQJ.js";import{a as k,b as I}from"./chunk-EQDQRRRY.js";var te=(t,o)=>o.id,Nt=(t,o)=>({"pui-action-drawer-layout__toolbar__most-emphasized":t,"pui-action-drawer-layout__toolbar__normal":o});function Mt(t,o){if(t&1&&R(0,3),t&2){let e=s();p("ngComponentOutlet",e.configuration.content)("ngComponentOutletInputs",e.contentInputs())}}function jt(t,o){if(t&1&&(l(0,"i"),C(1),d()),t&2){let e=s().$implicit;c(),v(e.icon)}}function Ht(t,o){if(t&1&&R(0,7),t&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function zt(t,o){if(t&1){let e=y();l(0,"button",6),b("click",function(n){let a=g(e).$implicit,r=s();return T(r.layoutService.controlOnClick(a.id,n))}),_(1,jt,2,1,"i")(2,Ht,1,1,"ng-container",7),l(3,"span"),C(4),d()()}if(t&2){let e=o.$implicit,i=s();p("ngClass",de(7,Nt,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled)("puiTooltip",e.label)("puiTooltipPosition","top"),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),v(e.label)}}var Ae=(t,o)=>o.key,Z=t=>({enum:t}),Ut=t=>({format:t}),Gt=t=>({"date-time":t}),Pt=()=>({});function Wt(t,o){if(t&1&&h(0,"pui-field-def",2),t&2){let e,i=o.$implicit;p("key",i.key)("fieldType",i.fieldConfiguration.type)("label",(e=i.fieldConfiguration.description)!==null&&e!==void 0?e:i.key)("fieldConfig",i.fieldConfiguration.type=="string"?S(4,Z,i.fieldConfiguration.enum):i.fieldConfiguration.type=="number"?S(6,Z,i.fieldConfiguration.enum):i.fieldConfiguration.type=="date-time"?S(10,Gt,S(8,Ut,i.fieldConfiguration.format)):H(12,Pt))}}function qt(t,o){if(t&1&&(l(0,"form")(1,"pui-fieldset",1),x(2,Wt,1,13,"pui-field-def",2,Ae),d()()),t&2){let e=s();c(),p("formControl",e.formControl),c(),D(e.flattenedControls())}}function Yt(t,o){if(t&1){let e=y();l(0,"pui-layout-control",3),b("click",function(n){let a=g(e).$implicit,r=s();return T(r.onControlClick(a.id,n))}),d()}if(t&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var It=()=>[],Kt=t=>({peek:t}),Jt=t=>({outlets:t}),Qt=t=>[t];function Xt(t,o){if(t&1&&(l(0,"a",1)(1,"i"),C(2,"open_in_full"),d()()),t&2){let e=s();p("routerLink",e.routeToFullContent())}}var Zt=[[["",8,"pui-root-sidenav__header__logo"]],[["",8,"pui-root-sidenav__nav"]]],ei=[".pui-root-sidenav__header__logo",".pui-root-sidenav__nav"];function ti(t,o){if(t&1&&h(0,"pui-field-def",5),t&2){let e,i=o.$implicit;p("key",i.key)("fieldType",i.fieldConfiguration.type)("label",(e=i.fieldConfiguration.description)!==null&&e!==void 0?e:i.key)("fieldConfig",i.fieldConfiguration.type=="string"?S(5,Z,i.fieldConfiguration.enum):i.fieldConfiguration.type=="number"?S(7,Z,i.fieldConfiguration.enum):H(9,Pt))("isNullable",!1)}}function ii(t,o){if(t&1){let e=y();l(0,"pui-fieldset",4),b("valueChange",function(n){g(e);let a=s();return T(a.onFilterValueChange(n))}),x(1,ti,1,10,"pui-field-def",5,Ae),d()}if(t&2){let e=s();p("formControl",e.filterFormControl),c(),D(e.flattenFilterDef())}}function ni(t,o){if(t&1&&h(0,"pui-loading-panel"),t&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())}}function oi(t,o){if(t&1){let e=y();l(0,"pui-table-header-cell",9),b("cellClick",function(n){g(e);let a=s().$implicit,r=s(2);return T(r.onHeaderClick(a.key,n))}),C(1),d()}if(t&2){let e,i,n,a,r=s().$implicit;p("centerAligned",(e=r.isAlignCenter)!==null&&e!==void 0?e:!1)("rightAligned",(i=r.isAlignEnd)!==null&&i!==void 0?i:!1)("sortedAsc",(n=r.isSortedAsc)!==null&&n!==void 0?n:!1)("sortedDesc",(a=r.isSortedDesc)!==null&&a!==void 0?a:!1),c(),v(r.label)}}function ai(t,o){t&1&&C(0," \xA0ago ")}function ri(t,o){if(t&1&&(l(0,"pui-time-display",12),V(1,"lodashGet"),l(2,"span"),C(3,"--"),d()(),_(4,ai,1,0)),t&2){let e,i=s(2).$implicit,n=s().$implicit;p("mode",n.fieldConfiguration.format=="timeAgo"?"timeAgo":"normal")("format",n.fieldConfiguration.format)("date",z(1,4,i,(e=n.path)!==null&&e!==void 0?e:n.key)),c(4),f(n.fieldConfiguration.format=="timeAgo"?4:-1)}}function li(t,o){if(t&1&&(se(0),V(1,"lodashGet"),l(2,"i",13),C(3),d()),t&2){let e,i=s(2).$implicit,n=s().$implicit,a=z(1,3,i,(e=n.path)!==null&&e!==void 0?e:n.key);c(2),ze("pui-table-cell__boolean-content--true",a===!0),c(),v(a===!0?"check":a===!1?"close":"")}}function si(t,o){if(t&1&&(l(0,"span"),C(1),V(2,"lodashGet"),d()),t&2){let e,i=s(2).$implicit,n=s().$implicit;c(),v(z(2,1,i,(e=n.path)!==null&&e!==void 0?e:n.key))}}function ci(t,o){if(t&1&&_(0,ri,5,7)(1,li,4,6,"i",11)(2,si,3,4,"span"),t&2){let e,i=s(2).$implicit;f((e=i.fieldConfiguration.type)==="date-time"?0:e==="boolean"?1:2)}}function di(t,o){if(t&1&&(l(0,"span"),C(1),V(2,"lodashGet"),d()),t&2){let e,i=s().$implicit,n=s().$implicit;c(),v(z(2,1,i,(e=n.path)!==null&&e!==void 0?e:n.key))}}function pi(t,o){if(t&1&&(l(0,"pui-table-cell",10),_(1,ci,3,1)(2,di,3,4,"span"),d()),t&2){let e,i,n=s().$implicit;p("centerAligned",(e=n.isAlignCenter)!==null&&e!==void 0?e:!1)("rightAligned",(i=n.isAlignEnd)!==null&&i!==void 0?i:!1),c(),f(n.fieldConfiguration?1:2)}}function ui(t,o){if(t&1&&_(0,oi,2,5,"pui-table-header-cell",7)(1,pi,3,3,"pui-table-cell",8),t&2){let e=o.$implicit;p("puiTableHeaderCellDef",e.key),c(),p("puiTableCellDef",e.key)}}function _i(t,o){if(t&1){let e=y();l(0,"pui-table-row",17),V(1,"isInSet"),b("click",function(){let n=g(e).$implicit,a=s(4);return T(a.onRowClick(n))}),d()}if(t&2){let e=o.$implicit,i=s(4);ae("height",48,"px"),p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",pe(1,5,e,i.selectedItems(),i.cmpFn))}}function mi(t,o){if(t&1&&(l(0,"cdk-virtual-scroll-viewport",15),_(1,_i,2,9,"pui-table-row",16),d()),t&2){let e=s(3);ae("height",e.data().length*48,"px"),c(),p("cdkVirtualForOf",e.data())("cdkVirtualForTrackBy",e.trackingFn)("cdkVirtualForTemplateCacheSize",0)}}function fi(t,o){if(t&1&&_(0,mi,2,5,"cdk-virtual-scroll-viewport",14),t&2){let e=s(2);f(e.isBrowser?0:-1)}}function Ci(t,o){if(t&1){let e=y();l(0,"pui-table-row",17),V(1,"isInSet"),b("click",function(){let n=g(e).$implicit,a=s(3);return T(a.onRowClick(n))}),d()}if(t&2){let e=o.$implicit,i=s(3);p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",pe(1,3,e,i.selectedItems(),i.cmpFn))}}function hi(t,o){if(t&1&&x(0,Ci,2,7,"pui-table-row",18,Ue),t&2){let e=s(2);D(e.data())}}function bi(t,o){if(t&1){let e=y();l(0,"pui-table",2),x(1,ui,2,2,null,null,Ae),l(3,"pui-table-body")(4,"div",6),b("skippedChanged",function(n){g(e);let a=s();return T(a.scrolledToTop.set(!n))}),d(),h(5,"pui-table-header-row"),_(6,fi,1,1)(7,hi,2,0),l(8,"div",6),b("skippedChanged",function(n){g(e);let a=s();return T(a.scrolledToBottom.set(!n))}),d()()()}if(t&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())("id",e.configuration==null?null:e.configuration.id)("itemHeight",48)("columns",e.columnsToDisplay())("columnWidths",H(8,It))("selectionMode",e.selectionMode()),c(),D(e.columnConfig()),c(5),f(e.configuration!=null&&e.configuration.useVirtualScroll?6:7)}}function vi(t,o){if(t&1){let e=y();l(0,"pui-layout-control",19),b("click",function(n){let a=g(e).$implicit,r=s();return T(r.onControlClick(a.id,n))}),d()}if(t&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var gi=(t,o)=>o.label,Ti=(t,o)=>({"pui-vertical-layout__toolbar__most-emphasized":t,"pui-vertical-layout__toolbar__normal":o});function yi(t,o){if(t&1&&(l(0,"header",4)(1,"div",3),h(2,"pui-breadcrumbs"),l(3,"h1"),C(4),d()(),R(5,6),d()),t&2){let e=s(),i=le(12);p("@floatingHeader",void 0),c(4),v(e.heading()),c(),p("ngTemplateOutlet",i)}}function xi(t,o){if(t&1&&(l(0,"a",10),C(1),d()),t&2){let e=s().$implicit;p("routerLink",e.route),c(),v(e.label)}}function Di(t,o){if(t&1&&_(0,xi,2,2,"a",11),t&2){let e,i=o.$implicit;p("puiTab",i.label)("puiTabHidden",(e=i.hidden)!==null&&e!==void 0?e:!1)}}function Si(t,o){if(t&1){let e=y();l(0,"pui-tab-bar",9),b("tabChange",function(n){g(e);let a=s(2);return T(a.onTabChanged(n))}),x(1,Di,1,2,"a",10,gi),d()}if(t&2){let e=s(2);p("currentTab",e.activeTab()),c(),D(e.tabs())}}function wi(t,o){t&1&&h(0,"div",8)}function ki(t,o){if(t&1&&(l(0,"header",5),_(1,Si,3,1,"pui-tab-bar",7)(2,wi,1,0,"div",8),R(3,6),d()),t&2){let e=s(),i=le(12);c(),f(e.tabs().length>0?1:-1),c(),f(e.controls().length>0?2:-1),c(),p("ngTemplateOutlet",i)}}function Ei(t,o){if(t&1&&(l(0,"i"),C(1),d()),t&2){let e=s().$implicit;c(),v(e.icon)}}function Fi(t,o){if(t&1&&R(0,6),t&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Ai(t,o){if(t&1){let e=y();l(0,"button",14),b("click",function(n){let a=g(e).$implicit,r=s(3);return T(r.layoutService.controlOnClick(a.id,n))}),_(1,Ei,2,1,"i")(2,Fi,1,1,"ng-container",6),l(3,"span"),C(4),d()()}if(t&2){let e=o.$implicit,i=s(3);p("ngClass",de(6,Ti,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("puiTooltip",e.label)("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),v(e.label)}}function Vi(t,o){if(t&1&&(l(0,"div",12),x(1,Ai,5,9,"button",13,te),d()),t&2){let e=s(2);c(),D(e.controls())}}function $i(t,o){if(t&1&&_(0,Vi,3,0,"div",12),t&2){let e=s();f(e.controls().length>0?0:-1)}}var Y=(()=>{class t{constructor(){this._controls=O([]),this.controls=m(()=>this._controls().toSorted((e,i)=>(e.weight??0)-(i.weight??0))),this.mostEmphasizedControlId=m(()=>this.controls().filter(e=>!e.mode||e.mode=="auto").at(-1)?.id),this.eventsMap={}}registerControl(e,i){return this._controls.update(n=>[...n,k({},e)]),this.eventsMap[e.id]=i,{update:n=>{this._controls.update(a=>a.map(r=>r.id==n.id?k(k({},r),n):r))},dispose:()=>{this._controls.update(n=>n.filter(a=>a.id!=e.id))}}}controlOnClick(e,i){this.eventsMap[e]?.click?.(i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})(),Pi=(()=>{class t{constructor(){this.overlayRef=u(_t),this.dataProvider=u(Lt),this.layoutService=u(Y,{self:!0}),this.configuration=this.dataProvider?.configuration,this.heading=m(()=>this.dataProvider.heading()),this.contentInputs=m(()=>this.dataProvider.contentInputs?.()??{}),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.dataProvider.onActionDrawerInit?.(this.overlayRef)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-action-drawer-layout"]],hostAttrs:[1,"pui-action-drawer-layout"],features:[ce([Y])],decls:10,vars:2,consts:[[1,"@container/layout"],[1,"pui-action-drawer-layout__heading"],[1,"pui-action-drawer-layout__content"],[3,"ngComponentOutlet","ngComponentOutletInputs"],[1,"pui-action-drawer-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],["puiFilledButton","","color","accent",3,"click","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],[3,"ngTemplateOutlet"]],template:function(i,n){i&1&&(l(0,"div",0)(1,"header",1),h(2,"pui-breadcrumbs"),l(3,"h1"),C(4),d()(),l(5,"div",2),_(6,Mt,1,2,"ng-container",3),d(),l(7,"div",4),x(8,zt,5,10,"button",5,te),d()()),i&2&&(c(4),v(n.heading()),c(2),f(n.configuration&&n.configuration.content?6:-1),c(2),D(n.controls()))},dependencies:[we,Ke,_e,q,Se,X,ue],encapsulation:2})}}return t})(),Lt=new L("action drawer layout data provider"),cn=(()=>{class t{constructor(){this.overlay=u(mt),this.injector=u(oe)}open(e,i={width:"480px"}){return this.overlay.open(Pi,{positionStrategy:this.overlay.position().global().right("0").centerVertically(),maxWidth:"90vw",width:i.width??"480px",height:"100%",hasBackdrop:!0,backdropClass:"pui-action-drawer-backdrop",closeOnBackdropClick:!0,disposeOnNavigation:!0,closeOnEscapeKeydown:!0,animation:"slideInEnd",data:i.overlayData,parentInjector:oe.create({providers:[{provide:ut,useValue:i.overlayData},{provide:Lt,useClass:e},...i.providers??[]],parent:i.parent??this.injector})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ii=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}],dn=[{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}],Li=new L("editable content data provider");function ee(t,o,e,i){return Object.entries(t.properties).flatMap(([a,r])=>{if(r.type=="object")return ee(r,o,`${e?`${e}.`:""}${a}`,`${i}${r.description??""} / `);if(r.type=="array"){let $=ge(o,`${e?`${e}.`:""}${a}`);return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:I(k({},r),{description:`${i}${r.description??""}`})},...Array.isArray($)?$.flatMap((Ve,P)=>r.items.type=="object"?[...ee(r.items,o,`${e?`${e}.`:""}${a}[${P}]`,`${i}${r.description??""} / #${P} / `)]:[{key:`${e?`${e}.`:""}${a}[${P}]`,fieldConfiguration:I(k({},r.items),{description:`${i}${r.description??""} / #${P}`})}]):[]]}return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:I(k({},r),{description:i+r.description})}]})}var Ot=(()=>{class t{constructor(){if(this.layoutService=u(Y,{optional:!0}),this.destroyRef=u(Be),this.id=E.required(),this.label=E.required(),this.weight=E(0),this.icon=E(),this.iconTemplateRef=E(),this.disabled=E(!1,{transform:qe}),this.mode=E(void 0),this.click=Ne(),!this.layoutService)return;let e,i;F(()=>{let n=this.id(),a=this.label(),r=this.disabled(),$=this.icon(),Ve=this.iconTemplateRef(),P=this.mode(),Rt=this.weight(),$e={id:n,label:a,isDisabled:r,icon:$,iconTemplateRef:Ve,weight:Rt,mode:P};if(e)e($e);else{let Pe=this.layoutService.registerControl($e,{click:Bt=>this.click.emit(Bt)});e=Pe.update,i=Pe.dispose}}),this.destroyRef.onDestroy(()=>{i?.()})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=je({type:t,selectors:[["pui-layout-control"]],inputs:{id:[1,"id"],label:[1,"label"],weight:[1,"weight"],icon:[1,"icon"],iconTemplateRef:[1,"iconTemplateRef"],disabled:[1,"disabled"],mode:[1,"mode"]},outputs:{click:"click"}})}}return t})(),pn=(()=>{class t{constructor(){this.route=u(W),this.dataProvider=u(Li),this.formControl=new tt(void 0),this.data=m(()=>this.dataProvider.data()),this.fieldConfiguration=m(()=>this.dataProvider.fieldConfiguration()),this.formControlValue=Q(this.formControl.events.pipe(K(e=>e instanceof Ze),M(e=>e.value))),this.flattenedControls=m(()=>{let e=this.fieldConfiguration(),i=this.formControlValue();return e?ee(e,i,"",e.description?`${e.description} / `:""):[]}),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??Ii),F(()=>{let e=this.data();B(()=>this.formControl.setValue(e))}),F(()=>{let e=this.formControlValue();B(()=>this.dataProvider.onValueChange?.(e))}),j([this.route.params,this.route.queryParams]).pipe(w()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.formControl.events.pipe(w()).subscribe(()=>{this.dataProvider.onStateChange?.({isValid:this.formControl.valid,isDisabled:this.formControl.disabled,isDirty:this.formControl.dirty})}),this.dataProvider.registerUpdateState?.(e=>{B(()=>{e?.isDirty===!1?this.formControl.markAsPristine():e?.isDirty===!0&&this.formControl.markAsDirty(),e?.isDisabled===!1?this.formControl.enable():e?.isDisabled===!0&&this.formControl.disable()})})}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-editable-content"]],hostAttrs:[1,"pui-editable-content"],decls:4,vars:1,consts:[[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"formControl"],[3,"key","fieldType","label","fieldConfig"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,n){i&1&&(l(0,"main"),_(1,qt,4,1,"form"),d(),x(2,Yt,1,7,"pui-layout-control",0,te)),i&2&&(c(),f(n.flattenedControls().length>0?1:-1),c(),D(n.controlsConfig()))},dependencies:[Fe,Ee,ke,it,Te,Xe,et,ye,Ot],encapsulation:2})}}return t})(),Oi=new L("peekable addon data provider"),Ri=(()=>{class t{constructor(){this.dataProvider=u(Oi,{optional:!0}),this.route=u(W),this.routeToFullContent=m(()=>this.dataProvider?.routeToFullContent()??null),j([this.route.params,this.route.queryParams]).pipe(w()).subscribe(([e,i])=>this.dataProvider?.onParamsChange?.(e,i))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-peekable-addon"]],hostAttrs:[1,"pui-peekable-addon"],decls:8,vars:9,consts:[[1,"pui-peekable-addon__nav"],["puiBaseButton","","puiTooltip","View in full",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"spacer"],["puiBaseButton","","puiTooltip","Close peek window",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"pui-peekable-addon__content"],["name","peek"]],template:function(i,n){i&1&&(l(0,"nav",0),_(1,Xt,3,1,"a",1),h(2,"div",2),l(3,"a",3)(4,"i"),C(5,"close"),d()()(),l(6,"main",4),h(7,"router-outlet",5),d()),i&2&&(c(),f(n.routeToFullContent()?1:-1),c(2),p("routerLink",S(7,Qt,S(5,Jt,S(3,Kt,H(2,It))))))},dependencies:[J,ve,q,De,X],encapsulation:2})}}return t})(),un=(()=>{class t{constructor(){this.router=u(be,{optional:!0}),this.isSidenavVisible=O(!1),this.router?.events.pipe(K(e=>e instanceof he),ie(150),w()).subscribe(()=>{this.isSidenavVisible.set(!1)})}toggleSidenav(e){this.isSidenavVisible.update(i=>e??!i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-root-sidenav"]],ngContentSelectors:ei,decls:12,vars:1,consts:[[1,"pui-root-sidenav"],[1,"pui-root-sidenav__header"],["puiBaseButton","",1,"pui-root-sidenav__header__hamburger",3,"click"],[1,"spacer"],[1,"pui-root-sidenav__nav-wrapper"],[1,"pui-root-sidenav__content-wrapper"],[1,"pui-root-sidenav__content"]],template:function(i,n){i&1&&(Ge(Zt),l(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return n.toggleSidenav()}),l(3,"i"),C(4,"menu"),d()(),h(5,"div",3),re(6),d(),l(7,"div",4),re(8,1),d()(),l(9,"div",5)(10,"div",6),h(11,"router-outlet"),d()()),i&2&&(c(10),He("data-sidenav",n.isSidenavVisible()?"visible":"hidden"))},dependencies:[q,De,J],encapsulation:2})}}return t})();function _n(t,o,e=!0){let i=Object.values(t??{}).some(a=>typeof a=="string"?!!a:a!=null),n=Object.keys(t??{});return a=>{if(!i)return!0;if(e){for(let r of n)if(r in o&&o[r]!=null&&!o[r](a,r,t[r],t))return!1;return!0}else{for(let r of n)if(r in o&&o[r]!=null&&o[r](a,r,t[r],t))return!0;return!1}}}function mn(t){let o=t.find(i=>i.isSortedAsc||i.isSortedDesc);if(!o)return()=>0;let e=o.isSortedDesc?-1:1;return o.fieldConfiguration?.type=="date-time"?(i,n)=>{let a=N(i,o),r=N(n,o);return a==null&&r==null?0:a instanceof Date&&r instanceof Date?(a.getTime()-r.getTime())*e:a instanceof Date?1*e:-1*e}:(i,n)=>{switch(o.key){default:return N(i,o)>N(n,o)?e:N(i,o)<N(n,o)?-1*e:0}}}function N(t,o){return o.path?ge(t,o.path):t[o.key]}var Bi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"},{id:"add",label:"Add new",icon:"add"}],Ni=new L("table content data provider"),fn=(()=>{class t{constructor(){this.route=u(W),this.dataProvider=u(Ni),this.isBrowser=Je(u(Me)),this.ROUTE_TO_DETAIL=Symbol(),this.configuration=this.dataProvider.configuration,this.isLoading=m(()=>this.dataProvider.isLoading?.()??!1),this.data=m(()=>{let e=this.dataProvider.data(),i=this.dataProvider.routeToDetail;return e?.map(n=>Object.assign({},n,{[this.ROUTE_TO_DETAIL]:i?.bind(this.dataProvider)?.(n)}))}),this.columnConfig=m(()=>this.dataProvider.columnsConfig()),this.columnsToDisplay=m(()=>this.dataProvider.columnsToDisplay()),this.selectionMode=m(()=>this.dataProvider.selectionMode?.()??null),this.selectedItems=m(()=>this.dataProvider.selectedItems?.()??new Set),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??Bi),this.flattenFilterDef=m(()=>{let e=this.dataProvider.filterConfig?.();return e?ee(e,{},"",e.description?`${e.description} / `:""):[]}),this.filterFormControl=u(nt).nonNullable.control({}),this.isInitial=Q(Le(100).pipe(M(()=>!1)),{initialValue:!0}),this.scrolledToTop=O(!1),this.scrolledToBottom=O(!1),this.cmpFn=this.dataProvider.compareFn??((e,i)=>e==i),j([this.route.params,this.route.queryParams]).pipe(w()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),F(()=>{this.dataProvider.filterValue&&this.filterFormControl.setValue(this.dataProvider.filterValue?.(),{emitEvent:!1})}),this.dataProvider.onScrolledToTop&&F(()=>{this.isLoading()||this.scrolledToTop()&&B(()=>this.dataProvider.onScrolledToTop())}),this.dataProvider.onScrolledToBottom&&F(()=>{this.isLoading()||this.scrolledToBottom()&&B(()=>this.dataProvider.onScrolledToBottom())}),Qe(this.data).pipe(ie(100),w()).subscribe(()=>{this.scrolledToTop()&&this.dataProvider.onScrolledToTop?.(),this.scrolledToBottom()&&this.dataProvider.onScrolledToBottom?.()})}ngOnInit(){this.dataProvider?.onInit?.()}ngOnDestroy(){this.dataProvider?.onDestroy?.()}onRowClick(e){this.dataProvider.onTableRowClick?.(e)}onHeaderClick(e,i){this.dataProvider.onHeaderCellClick?.(e,i)}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}onFilterValueChange(e){this.dataProvider.onFilterChange?.(e)}onScrolled(e,i){e=="top"?this.scrolledToTop.set(!i):this.scrolledToBottom.set(!i)}trackingFn(e,i){return e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-table-content"]],hostAttrs:[1,"pui-table-content"],decls:9,vars:2,consts:[[3,"formControl"],[1,"pui-table-content__content-wrapper"],[3,"id","itemHeight","columns","columnWidths","selectionMode"],[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"valueChange","formControl"],[3,"key","fieldType","label","fieldConfig","isNullable"],["puiContentVisibilityDetector","",3,"skippedChanged"],[3,"centerAligned","rightAligned","sortedAsc","sortedDesc","cellClick",4,"puiTableHeaderCellDef"],[3,"centerAligned","rightAligned",4,"puiTableCellDef"],[3,"cellClick","centerAligned","rightAligned","sortedAsc","sortedDesc"],[3,"centerAligned","rightAligned"],[1,"pui-table-cell__boolean-content",3,"pui-table-cell__boolean-content--true"],[3,"mode","format","date"],[1,"pui-table-cell__boolean-content"],["itemSize","48","scrollWindow","",3,"height"],["itemSize","48","scrollWindow",""],["puiHoverable","",3,"item","route","height","selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["puiHoverable","",3,"click","item","route","selected"],["puiHoverable","",3,"item","route","selected"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,n){if(i&1&&(l(0,"main")(1,"div"),se(2),_(3,ii,3,1,"pui-fieldset",0),l(4,"div",1),_(5,ni,1,2,"pui-loading-panel")(6,bi,9,9,"pui-table",2),d()()(),x(7,vi,1,7,"pui-layout-control",3,te)),i&2){let a=n.flattenFilterDef();c(3),f(a.length>0?3:-1),c(2),f(n.isLoading()?5:6),c(2),D(n.controlsConfig())}},dependencies:[$t,St,Vt,wt,At,Ft,kt,xt,Et,Dt,ft,Ot,Ct,at,dt,rt,st,lt,ct,Fe,Ee,ke,Te,ye,ot,ht,pt],encapsulation:2,data:{animation:[me("loading",[G(":enter",Ce(vt)),G(":leave",Ce(bt))])]}})}}return t})();function Cn(t,o,e=!0){return t.map(i=>i.key==o?I(k({},i),{isSortedAsc:!i.isSortedAsc&&!i.isSortedDesc?e:!!i.isSortedDesc,isSortedDesc:!i.isSortedAsc&&!i.isSortedDesc?!e:!!i.isSortedAsc}):I(k({},i),{isSortedAsc:!1,isSortedDesc:!1}))}var Mi=new L("vertical layout data provider"),hn=(()=>{class t{constructor(){this.dataProvider=u(Mi),this.layoutService=u(Y,{self:!0}),this.router=u(be),this.route=u(W),this.document=u(Ye),this.activeTab=O(null),this.heading=m(()=>this.dataProvider.heading()),this.tabs=m(()=>this.dataProvider.tabs()),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.scrollState=Q(Ie(this.document,"scroll").pipe(M(e=>e.currentTarget.scrollingElement?.scrollTop),xe(),Oe(),M(([e,i])=>({direction:i-e>0?"down":"up",currentTop:i})),w())),j([this.route.params,this.route.queryParams]).pipe(w()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.router.events.pipe(K(e=>e instanceof he),Re(this.router.lastSuccessfulNavigation?.finalUrl),xe(),w()).subscribe(()=>{let e=this.tabs();if(!e)return;let i=e.find(a=>{let r=this.router.createUrlTree(a.route,{relativeTo:this.route});return this.router.isActive(r,{paths:"subset",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})});if(!i)return;this.activeTab.set(i.label);let n=this.route.routeConfig?.children?.find(a=>a.path=="**");n&&(n.redirectTo=i.route.map(a=>String(a).replaceAll("..%2F","").replaceAll(".%2F","")).join("/"))}),F(()=>console.log(this.scrollState()))}onTabChanged(e){let i=this.tabs()?.find(n=>n.label==e);i&&this.router.navigate(i.route,{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-vertical-layout"]],hostAttrs:[1,"pui-vertical-layout"],features:[ce([Y])],decls:13,vars:3,consts:[["controlsTemplate",""],[1,"@container/layout"],[1,"pui-vertical-layout__heading"],[1,"pui-vertical-layout__navigation"],[1,"pui-vertical-layout__heading","pui-vertical-layout__heading--floating"],[1,"pui-vertical-layout__controls"],[3,"ngTemplateOutlet"],[1,"pui-vertical-layout__tabs",3,"currentTab"],[1,"spacer"],[1,"pui-vertical-layout__tabs",3,"tabChange","currentTab"],[3,"routerLink"],[3,"routerLink",4,"puiTab","puiTabHidden"],[1,"pui-vertical-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","puiTooltip","disabled","hoverableEnabled"],["puiFilledButton","","color","accent",3,"click","ngClass","puiTooltip","disabled","hoverableEnabled"]],template:function(i,n){if(i&1&&(l(0,"div",1)(1,"div")(2,"header",2)(3,"div",3),h(4,"pui-breadcrumbs"),l(5,"h1"),C(6),d()()(),_(7,yi,6,3,"header",4)(8,ki,4,3,"header",5),h(9,"router-outlet")(10,"pui-peekable-addon"),d()(),_(11,$i,1,1,"ng-template",null,0,We)),i&2){let a;c(6),v(n.heading()),c(),f(((a=n.scrollState())==null?null:a.direction)=="up"&&((a=n.scrollState())==null?null:a.currentTop)>160?7:-1),c(),f(n.tabs().length>0||n.controls().length>0?8:-1)}},dependencies:[J,we,q,Se,yt,Tt,gt,ve,_e,Ri,X,ue],encapsulation:2,data:{animation:[me("floatingHeader",[G(":enter",[U({transform:"translate(0, -100%)"}),fe("200ms ease-in-out",U({transform:"translate(0, 0)"}))]),G(":leave",[U({transform:"translate(0, 0)"}),fe("200ms ease-in-out",U({transform:"translate(0, -100%)"}))])])]}})}}return t})();export{Lt as a,cn as b,Ii as c,dn as d,Li as e,Ot as f,pn as g,Oi as h,un as i,_n as j,mn as k,Bi as l,Ni as m,fn as n,Cn as o,Mi as p,hn as q};
