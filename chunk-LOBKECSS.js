import{a as I,b as B,c as v}from"./chunk-J7LGQ54S.js";import{a as P}from"./chunk-N7LERXTE.js";import{a as Le}from"./chunk-VEO7D5VQ.js";import{a as M,b as R,c as Ne,d as Ae,e as L,f as Ve,g as j,k as Me,m as O,n as F,o as Re,p as G,q as Y}from"./chunk-PWUYYVRI.js";import{a as Q}from"./chunk-QLEH2ZB5.js";import{B as de,Ca as q,Ga as he,Ia as ge,K as $,P as u,Xa as ye,Ya as Ce,Za as _e,ga as me,gb as be,hb as Ie,ib as De,jb as Se,kb as xe,lb as Te,mb as Ee,nb as ke,pb as we,qa as ce,ta as pe,va as ue,wa as fe,y as se,ya as ve}from"./chunk-UG5YWBUR.js";import{Db as T,Eb as C,Ha as s,Rb as a,Sb as g,Tb as H,X as f,Xa as ne,Zb as le,_b as U,aa as m,bb as oe,fa as S,ga as x,lb as _,lc as p,mb as b,p as V,pa as l,pb as ae,qb as re,ra as ie,rb as c,sb as n,tb as o,ub as y,zb as k}from"./chunk-456UTSJA.js";import{a as D,b as W}from"./chunk-C6Q5SG76.js";var je=(()=>{class e{constructor(){this.dataService=m(v),this.list=u(this.dataService.getList()),this.id=l(void 0),this.heading=p(()=>this.list()?.find(t=>t.id==this.id())?.id??"--"),this.tabs=l([{label:"Info",route:["info"]},{label:"Raw",route:["raw"]}])}onParamsChange(t,r){this.id.set(t.id)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Oe=(()=>{class e{constructor(){this.dataService=m(v),this.list=u(this.dataService.getList()),this.id=l(void 0),this.data=l(void 0),this.fieldConfiguration=l({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(I),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{id:{type:"string",description:"ID"},description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(B)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=p(()=>this.isDirty()?Ae:Ne),ie(()=>{this.data.set($(this.list()?.find(t=>t.id==this.id())))})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(r=>t.isDirty??r)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,r){switch(t){case"refresh":case"cancel":{this.data.set($(this.list()?.find(i=>i.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let i=this.updatedValue();i&&(this.dataService.save(this.id(),i),this.updateState({isDirty:!1}));break}}}onParamsChange(t,r){this.id.set(t.id)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Fe=(()=>{class e{constructor(){this.dataService=m(P),this.overlayData=m(ce),this.configuration={content:F,useVirtualScroll:!1},this.data=u(this.dataService.getList(),{initialValue:[]}),this.columnsConfig=l([{key:"name",label:"Name",fieldConfiguration:{type:"string"}},{key:"phone",label:"Phone",fieldConfiguration:{type:"string"}}]),this.columnsToDisplay=l(["name","phone"]),this.selectionMode=l("single"),this.selectedItems=l(this.overlayData.initialValue),this.controlsConfig=p(()=>[{id:"select",label:this.selectedItems().size==0?"Select":`Select ${this.selectedItems().values().next().value.name}`,isDisabled:this.selectedItems().size==0}]),this.heading=l("Pick customer")}onControlClick(t,r){t=="select"&&(this.overlayData?.onSave(this.selectedItems().values().next().value),this.overlayRef.close())}compareFn(t,r){return t.id==r.id}onTableRowClick(t){this.selectedItems.set(new Set([t]))}onActionDrawerInit(t){this.overlayRef=t}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Ue=e=>["/user","customer","detail",e],$e=e=>["/inventory","shelf","detail",e],qe=()=>["description","isbn","quantity","totalPrice"],Ge=(e,d)=>d.id;function Ye(e,d){if(e&1){let t=k();y(0,"div",20),n(1,"button",21),T("click",function(){S(t);let i=C();return x(i.onUpdateCustomerClick())}),n(2,"span"),a(3,"Update"),o()()}}function Qe(e,d){e&1&&(n(0,"i",18),a(1,"check"),o())}function ze(e,d){e&1&&(n(0,"i",19),a(1,"close"),o())}function Ke(e,d){e&1&&(n(0,"span",15),a(1,"----"),o())}function Je(e,d){e&1&&(n(0,"pui-table-header-cell"),a(1,"Item"),o())}function Xe(e,d){e&1&&(n(0,"pui-table-header-cell"),a(1,"ISBN"),o())}function Ze(e,d){e&1&&(n(0,"pui-table-header-cell"),a(1,"Quantity"),o())}function et(e,d){e&1&&(n(0,"pui-table-header-cell"),a(1,"Total Price"),o())}function tt(e,d){if(e&1&&(n(0,"pui-table-cell")(1,"span",27),a(2),o()()),e&2){let t=d.$implicit;s(2),g(t.description)}}function it(e,d){if(e&1&&(n(0,"pui-table-cell")(1,"span",27),a(2),o()()),e&2){let t=d.$implicit;s(2),g(t.isbn)}}function nt(e,d){if(e&1&&(n(0,"pui-table-cell"),a(1," x "),n(2,"span",27),a(3),o()()),e&2){let t=d.$implicit;s(3),g(t.quantity)}}function ot(e,d){if(e&1&&(n(0,"pui-table-cell",28),a(1," $ "),n(2,"span",27),a(3),o()()),e&2){let t=d.$implicit;s(3),g(t.totalPrice)}}function at(e,d){if(e&1&&y(0,"pui-table-row",26),e&2){let t=d.$implicit;c("item",t)}}function rt(e,d){if(e&1&&(y(0,"pui-divider"),n(1,"h2"),a(2,"Contents"),o(),n(3,"pui-table",22),oe(4,Je,2,0,"pui-table-header-cell",23)(5,Xe,2,0,"pui-table-header-cell",23)(6,Ze,2,0,"pui-table-header-cell",23)(7,et,2,0,"pui-table-header-cell",23)(8,tt,3,1,"pui-table-cell",24)(9,it,3,1,"pui-table-cell",24)(10,nt,4,1,"pui-table-cell",24)(11,ot,4,1,"pui-table-cell",25),n(12,"pui-table-body"),y(13,"pui-table-header-row"),ae(14,at,1,1,"pui-table-row",26,Ge),o()()),e&2){let t=C();s(3),c("itemHeight",48)("columns",le(10,qe)),s(),c("puiTableHeaderCellDef","description"),s(),c("puiTableHeaderCellDef","isbn"),s(),c("puiTableHeaderCellDef","quantity"),s(),c("puiTableHeaderCellDef","totalPrice"),s(),c("puiTableCellDef","description"),s(),c("puiTableCellDef","isbn"),s(),c("puiTableCellDef","quantity"),s(),c("puiTableCellDef","totalPrice"),s(3),re(t.inventoryItem().contents)}}function lt(e,d){if(e&1){let t=k();n(0,"main",1)(1,"h2"),a(2,"Admin"),o(),n(3,"div",29)(4,"div",30)(5,"div",31)(6,"span",32),a(7,"Mark as Expired"),o(),n(8,"span",33),a(9,"Set the status to expired, preventing any future modifications"),o()(),n(10,"button",34),a(11,"Confirm"),o()(),y(12,"pui-divider"),n(13,"div",30)(14,"div",31)(15,"span",32),a(16,"Remove Inventory Item"),o(),n(17,"span",33),a(18,"This action cannot be undone"),o()(),n(19,"button",35),T("click",function(){S(t);let i=C();return x(i.onRemoveClick())}),a(20,"Remove"),o()()()()}}function st(e,d){if(e&1){let t=k();n(0,"pui-layout-control",37),T("click",function(){S(t);let i=C(2);return x(i.onCancelClick())}),o(),n(1,"pui-layout-control",38),T("click",function(){S(t);let i=C(2);return x(i.onSaveClick())}),o()}}function dt(e,d){if(e&1){let t=k();n(0,"pui-layout-control",39),T("click",function(){S(t);let i=C(2);return x(i.onEditClick())}),o()}}function mt(e,d){if(e&1&&_(0,st,2,0)(1,dt,1,0,"pui-layout-control",36),e&2){let t=C();b(t.isEditing()?0:1)}}var Pe=(()=>{class e{constructor(){this.dataService=m(v),this.customerDataService=m(P),this.inventoryShelfService=m(Le),this.route=m(se),this.actionDrawer=m(R),this.modalDialog=m(ye),this.list=u(this.dataService.getList()),this.customerList=u(this.customerDataService.getList()),this.inventoryShelfList=u(this.inventoryShelfService.getList()),this.id=u(this.route.params.pipe(V(t=>t.id))),this.inventoryItem=p(()=>this.list()?.find(t=>t.id==this.id())),this.customer=p(()=>this.customerList()?.find(t=>t.id==this.inventoryItem()?.belongsTo)),this.shelf=p(()=>this.inventoryShelfList()?.find(t=>t.id==this.inventoryItem()?.locatedIn)),this.showEditButton=p(()=>[I.OPEN,I.REPACKAGING].includes(this.inventoryItem()?.status)),this.isEditing=l(!1),this.updatedValues=l({})}onEditClick(){this.isEditing.set(!0),this.updatedValues.set({customer:null})}onCancelClick(){this.isEditing.set(!1),this.updatedValues.set({customer:null})}onSaveClick(){this.dataService.save(this.id(),W(D({},this.inventoryItem()),{belongsTo:this.updatedValues().customer?.id??this.inventoryItem().belongsTo})),this.isEditing.set(!1),this.updatedValues.set({customer:null})}onUpdateCustomerClick(){this.actionDrawer.open(Fe,{providers:[{provide:O,useExisting:M}],overlayData:{initialValue:new Set([this.updatedValues().customer??this.customer()].filter(me)),onSave:t=>{this.updatedValues.update(r=>W(D({},r),{customer:t}))}}})}onRemoveClick(){let t=this.modalDialog.open({title:"Remove Inventory Item",detailsComponent:Ce,onDetailsComponentAttached:r=>{r.setInput("stringToCheck","Inventory Item"),r.instance.matchChanged.subscribe(i=>{})},actions:[{label:"Cancel",onClick:()=>{t.close()}},{color:"red",label:"Confirm"}]})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=ne({type:e,selectors:[["demo-inventory-item-info"]],hostAttrs:[1,"contents"],decls:55,vars:23,consts:[[1,"@container","grow","flex","flex-col","gap-8"],[1,"pui-card","rounded-4","p-8","flex","flex-col","gap-8"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","flex","flex-col","justify-center"],[1,"text-neutral-700","dark:text-neutral-300"],[1,"text-md"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start","text-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center","w-full"],[1,"icon-6","text-neutral-700","dark:text-neutral-300"],[1,"flex","flex-col"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center"],[1,"text-md","uppercase"],[1,"grid","items-center","grid-cols-[min-content_minmax(80px,1fr)]","gap-x-4","gap-y-3"],[1,"col-start-1","text-base","font-medium","whitespace-nowrap","text-neutral-700","dark:text-neutral-300"],[1,"col-start-2","text-md"],[3,"date","format"],[3,"date","mode"],[1,"icon-5","text-green-600","dark:text-green-400"],[1,"icon-5","text-red-600","dark:text-red-400"],[1,"spacer"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2",3,"click"],[3,"itemHeight","columns"],[4,"puiTableHeaderCellDef"],[4,"puiTableCellDef"],["class","tabular-nums",4,"puiTableCellDef"],[3,"item"],[1,"truncate"],[1,"tabular-nums"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-row","items-center","gap-8"],[1,"flex","flex-col","grow"],[1,"text-base","font-medium"],[1,"text-sm","dark:text-neutral-300"],["puiBorderedButton","","color","red",1,"rounded-full","px-4","py-2"],["puiFilledButton","","color","red",1,"rounded-full","px-4","py-2",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto"],["id","cancel","icon","close","label","Cancel","mode","low-emphasis",3,"click"],["id","save","icon","save","label","Save","mode","auto",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto",3,"click"]],template:function(r,i){if(r&1&&(n(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"h4",4),a(5,"Status"),o(),n(6,"p",5),a(7),o()(),n(8,"a",6)(9,"div",7)(10,"i",8),a(11,"person"),o(),n(12,"div",9)(13,"h4",4),a(14,"Customer"),o(),n(15,"p",5),a(16),o()(),_(17,Ye,4,0),o()(),n(18,"a",10)(19,"div",11)(20,"i",8),a(21,"shelves"),o(),n(22,"div",9)(23,"h4",4),a(24,"Shelf"),o(),n(25,"p",12),a(26),o()()()()(),n(27,"div",13)(28,"span",14),a(29,"ID"),o(),n(30,"span",15),a(31),o(),n(32,"span",14),a(33,"Arrived at"),o(),n(34,"span",15),y(35,"pui-time-display",16),a(36," ("),y(37,"pui-time-display",17),a(38," ago ) "),o(),n(39,"span",14),a(40,"Net weight"),o(),n(41,"span",15),a(42),o(),n(43,"span",14),a(44,"Gross weight"),o(),n(45,"span",15),a(46),o(),n(47,"span",14),a(48,"Fragile"),o(),_(49,Qe,2,0,"i",18)(50,ze,2,0,"i",19)(51,Ke,2,0,"span",15),o(),_(52,rt,16,11),o(),_(53,lt,21,0,"main",1),o(),_(54,mt,2,1)),r&2){let w,z,N,K,h,J,X,Z,ee,te,A;s(7),g(((w=i.inventoryItem())==null?null:w.status)??"--"),s(),c("hoverableEnabled",!i.isEditing()&&i.customer()!=null)("routerLink",!i.isEditing()&&i.customer()?U(19,Ue,(z=i.customer())==null?null:z.id):null),s(8),g(((N=i.updatedValues().customer)==null?null:N.name)??((N=i.customer())==null?null:N.name)??"--"),s(),b(i.isEditing()?17:-1),s(),c("hoverableEnabled",!i.isEditing()&&i.shelf()!=null)("routerLink",!i.isEditing()&&i.shelf()?U(21,$e,(K=i.shelf())==null?null:K.id):null),s(8),g(i.shelf()?((h=i.shelf())==null||h.location==null?null:h.location.aisle)+((h=i.shelf())==null||h.location==null?null:h.location.row)+" - "+((h=i.shelf())==null||h.location==null?null:h.location.layer):"--"),s(5),g(((J=i.inventoryItem())==null?null:J.id)??"---"),s(4),c("date",(X=i.inventoryItem())==null?null:X.arrivedAt)("format","yyyy-MM-dd HH:mm"),s(2),c("date",(Z=i.inventoryItem())==null?null:Z.arrivedAt)("mode","timeAgo"),s(5),H("",((ee=i.inventoryItem())==null?null:ee.netWeight)??"---"," g"),s(4),H("",((te=i.inventoryItem())==null?null:te.grossWeight)??"---"," g"),s(3),b(((A=i.inventoryItem())==null?null:A.isContainFragile)===!0?49:((A=i.inventoryItem())==null?null:A.isContainFragile)===!1?50:51),s(3),b(i.inventoryItem()?52:-1),s(),b(i.isEditing()?53:-1),s(),b(i.showEditButton()?54:-1)}},dependencies:[pe,de,Ve,ge,he,we,De,Se,ke,Ee,xe,be,Te,Ie,ve,ue,fe],encapsulation:2})}}return e})();var Be=(()=>{class e{constructor(){this.heading=l("Inventory Items"),this.tabs=l([])}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var We=(()=>{class e{constructor(){this.dataService=m(v),this.configuration={content:j,isEnterToSubmit:!0},this.data=l(null),this.fieldConfiguration=l({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(I),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(B)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.controlsConfig=l([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=l(void 0),this.heading=l("Add Item")}registerUpdateState(t){this.updateState=t,this.updateState({isDirty:!0})}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,r){switch(t){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let i=this.updatedValue();i&&(i=Object.assign(i,{id:Q.string.nanoid(),contents:i.contents.map(w=>Object.assign(w,{id:Q.string.nanoid(12)}))}),this.dataService.add(i),this.overlayRef.close());break}}}onActionDrawerInit(t){this.overlayRef=t}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var He=(()=>{class e{constructor(){this.dataService=m(v),this.actionDrawer=m(R),this.rawData=u(this.dataService.getList()),this.configuration={id:"inventory-item-table",useVirtualScroll:!0},this.data=p(()=>(this.rawData()??[]).toSorted(this.sortFn())),this.columnsConfig=l([{key:"belongsTo",label:"Customer"},{key:"netWeight",label:"Net Weight (g)",fieldConfiguration:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",fieldConfiguration:{type:"number"}},{key:"isContainFragile",label:"Fragile",fieldConfiguration:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l({default:["belongsTo","status"],768:["belongsTo","netWeight","status","arrivedAt"],1280:["belongsTo","netWeight","grossWeight","isContainFragile","status","arrivedAt"]}),this.filterValue=l({}),this.sortFn=p(()=>Me(this.columnsConfig()))}routeToDetail(t){return["detail",t.id]}onHeaderCellClick(t,r){this.columnsConfig.update(i=>Re(i,t))}onControlClick(t,r){switch(t){case"add":{this.actionDrawer.open(We,{providers:[{provide:L,useExisting:M}]});break}}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var _i=[{path:"",data:D({},q({title:"Item"})),children:[{path:"detail/:id",component:Y,data:D({},q({titleFn:e=>e.params.pipe(V(d=>d.id))})),providers:[{provide:G,useClass:je}],children:[{path:"info",component:Pe},{path:"raw",component:j,canDeactivate:[_e],providers:[{provide:L,useClass:Oe}]},{path:"**",redirectTo:"info"}]},{path:"",component:Y,providers:[{provide:G,useClass:Be}],children:[{path:"",component:F,providers:[{provide:O,useClass:He}]}]}]}];export{_i as ROUTES};
