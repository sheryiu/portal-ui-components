import{a as e}from"./chunk-QLEH2ZB5.js";import{M as g}from"./chunk-4CV2DTBE.js";import{$ as m,K as h,N as p,ea as u,g as o,nb as f,z as d}from"./chunk-LVH4HSPS.js";import{a as l,b as c}from"./chunk-C6Q5SG76.js";var L=(()=>{let s=class s{constructor(){this.appRef=u(f),this.list=new o([]),this.isLoading=new o(!1),this.isLoading$=this.isLoading.asObservable(),this.isInitialized=!1}createMockAddress(){return{line1:e.location.secondaryAddress(),line2:e.location.streetAddress(),city:e.location.city(),state:e.location.state(),country:e.location.country(),postalCode:e.location.zipCode()}}createMock(){let i=e.person.firstName(),t=e.person.lastName();return{id:e.string.nanoid(),profile:{color:e.color.colorByCSSColorSpace().map(r=>r*255).join(" "),icon:e.helpers.arrayElement(["pentagon","square","hexagon","shapes","stack","lightbulb","all_out"])},name:e.person.fullName({firstName:i,lastName:t}),username:e.helpers.maybe(()=>e.internet.username({firstName:i,lastName:t}))??e.internet.username(),email:e.internet.email({firstName:i,lastName:t}),phone:e.phone.number(),address:this.createMockAddress(),savedAddresses:Array(e.helpers.rangeToNumber({min:1,max:6})).fill(0).map(()=>this.createMockAddress()),registeredSince:e.date.past({years:9})}}initialize(){this.isInitialized||(this.isInitialized=!0,this.list.next(Array(20).fill(0).map(()=>this.createMock()).sort((i,t)=>t.registeredSince.getTime()-i.registeredSince.getTime())),this.isLoading.next(!1))}getList(){return this.isLoading.value==!0||this.list.value.length>0?this.list:(this.isLoading.next(!0),this.appRef.isStable.pipe(p(i=>i),h(500)).subscribe(()=>{this.initialize()}),this.list)}refresh(){this.isLoading.value!=!0&&(this.isLoading.next(!0),d(1e3).subscribe(()=>{this.isInitialized=!1,this.initialize()}))}loadMore(){this.list.next(this.list.value.concat(...Array(2).fill(0).map(()=>this.createMock())))}save(i,t){this.list.next(this.list.value.map(r=>r.id==i?g(r,t):r))}updateAddress(i,t,r){this.list.next(this.list.value.map(a=>a.id==i?c(l({},a),{savedAddresses:a.savedAddresses.toSpliced(t,1,r)}):a))}add(i){this.list.next(this.list.value.toSpliced(0,0,i))}};s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=m({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();export{L as a};
