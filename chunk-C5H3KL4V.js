import{a as _e}from"./chunk-XT4HSILN.js";import"./chunk-XVRP7MD6.js";import{a as ve}from"./chunk-X6UDUAUK.js";import{a as ue}from"./chunk-PUAP44XK.js";import{a as se}from"./chunk-KWDMJ6XI.js";import"./chunk-7GK5SYI2.js";import{$b as U,$c as le,Aa as a,B as x,Ba as p,Ca as k,D as u,Da as w,Ea as F,F as _,Fa as b,Fc as X,Ga as s,Gc as Y,Hc as Z,Ic as ee,Jc as te,Ka as A,Kc as ie,L as f,La as c,Lc as re,Ma as M,Mc as oe,N as h,Oa as B,Pa as I,Pb as R,Ra as $,S as v,T as C,Ta as N,Tc as ne,Ua as G,Uc as ae,Wb as L,Xa as V,Xb as O,_b as H,ac as J,bc as q,ca as l,eb as j,fc as z,h as S,kc as K,la as D,na as m,nc as Q,pc as W,pd as de,qa as d,qd as pe,ua as y,va as g,vd as me,wd as ce,xa as E,xb as P,xd as fe,ya as T,za as n}from"./chunk-R6PKS6RY.js";import"./chunk-EYYPJTXZ.js";import"./chunk-CWTPBX7D.js";var Ce=t=>({enum:t});function ye(t,i){if(t&1&&(n(0,"h2",6),c(1),a()),t&2){let r=i;l(),B("",r.name==null?null:r.name.jp," / ",r.name==null?null:r.name.en,"")}}function be(t,i){if(t&1){let r=F();n(0,"button",20),b("click",function(){v(r);let o=s(2);return C(o.onCancel())}),c(1,"Cancel"),a(),n(2,"button",21),b("click",function(){v(r);let o=s(2);return C(o.onSave())}),c(3,"Save"),a()}}function Se(t,i){if(t&1&&p(0,"pui-field-def",17),t&2){let r=i.$index;d("key","decorationSlots>"+r)("label","\u21B3 Decoration Slot #"+r)}}function xe(t,i){if(t&1&&(n(0,"div",4)(1,"div",5),m(2,ye,2,2,"h2",6),N(3,"async"),n(4,"div",7),m(5,be,4,0),a()(),p(6,"pui-divider"),n(7,"pui-fieldset",8),p(8,"pui-field-def",9)(9,"pui-field-def",10)(10,"pui-field-def",11)(11,"pui-field-def",12)(12,"pui-field-def",13)(13,"pui-field-def",14)(14,"pui-field-def",15)(15,"pui-field-def",16),E(16,Se,1,2,"pui-field-def",17,g),p(18,"pui-field-def",18)(19,"pui-field-def",19),a()()),t&2){let r,e=s(),o=A(7);l(2),y(2,(r=G(3,5,e.data$))?2:-1,r),l(3),y(5,e.formControl.dirty?5:-1),l(2),d("formControl",e.formControl),l(3),d("fieldConfig",$(7,Ce,e.armorPosition)),l(),d("templateRef",o),l(5),T(e.formControl.value==null?null:e.formControl.value.decorationSlots)}}function he(t,i){if(t&1&&(n(0,"div"),c(1),a()),t&2){let r=i.$implicit;l(),M(r)}}function De(t,i){t&1&&(n(0,"pui-search-dropdown"),p(1,"demo-armor-set-search"),a())}function ge(t,i){if(t&1&&(k(0,22),n(1,"pui-dropdown",23),m(2,he,2,1,"div",24)(3,De,2,0,"pui-search-dropdown",25),a(),w()),t&2){let r=i.key,e=i.formGroup;d("formGroup",e),l(),d("formControlName",r)}}var Oe=(()=>{let i=class i extends z{constructor(){super(),this.service=f(ue),this.builder=f(q),this.route=f(P),this.id$=this.route.paramMap.pipe(S(e=>e.get("armorId"))),this.data$=this.id$.pipe(x(e=>this.service.getOne(e))),this.formControl=this.builder.control(null),this.armorPosition=Object.values(ve),this.onCancel=this.createEffectFn(e=>e.pipe(_(this.data$),u(([,o])=>this.updateForm(o)))),this.onSave=this.createEffectFn(e=>e.pipe(_(this.id$),u(([,o])=>this.service.update(o,this.formControl.getRawValue())))),this.data$.pipe(R()).subscribe(e=>{this.updateForm(e)})}updateForm(e){e&&this.formControl.reset(e)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=h({type:i,selectors:[["app-armor-detail-edit"]],standalone:!0,features:[D,I],decls:8,vars:0,consts:[["armorSetIdInput",""],["puiSidebarContainer",""],["puiSidebarBreadcrumbs",""],["class","py-4 flex flex-col gap-4",4,"puiSidebarMain"],[1,"py-4","flex","flex-col","gap-4"],[1,"flex","justify-between","items-center","px-4","gap-4"],[1,"text-primary-800","dark:text-primary-200"],[1,"flex","gap-2","items-center"],[3,"formControl"],["key","name>en","label","English Name","fieldType","string"],["key","name>jp","label","Japanese Name","fieldType","string"],["key","position","label","Position","fieldType","string",3,"fieldConfig"],["key","armorSetId","label","Armor Set","fieldType","string",3,"templateRef"],["key","baseDef","label","Base Defense","fieldType","number"],["key","maxDef","label","Max Defense","fieldType","number"],["key","maxLevel","label","Max Level","fieldType","number"],["key","decorationSlots","label","Decoration Slots","fieldType","array"],["fieldType","number",3,"key","label"],["key","createdAt","label","Created At","fieldType","date-time"],["key","updatedAt","label","Updated At","fieldType","date-time"],["puiHoverable","",1,"rounded-1","px-3","py-2",3,"click"],["puiFilledButton","","color","primary",1,"rounded-1","px-3","py-2",3,"click"],[3,"formGroup"],[3,"formControlName"],[4,"puiDropdownTrigger"],[4,"puiDropdownOverlay"]],template:function(o,Ee){o&1&&(n(0,"pui-layered-container")(1,"div",1)(2,"div",2),p(3,"pui-breadcrumbs"),a(),n(4,"pui-sidebar-content"),m(5,xe,20,9,"div",3),a()()(),m(6,ge,4,2,"ng-template",null,0,V))},dependencies:[se,K,X,j,le,fe,pe,de,ce,me,ae,ne,Z,L,O,H,U,J,oe,ie,ee,te,re,_e,Y,W,Q]});let t=i;return t})();export{Oe as ArmorDetailEditComponent};
