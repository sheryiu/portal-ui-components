import{a as D,b as W,c as h}from"./chunk-LFTB2KBF.js";import{a as B}from"./chunk-H2OQB6AN.js";import{a as Le}from"./chunk-NB77PRHD.js";import{a as R,b as j,c as Ae,d as Ve,e as L,f as Me,g as O,k as Re,m as F,n as P,o as je,p as Y,q as Q}from"./chunk-ZIEM7CZF.js";import{a as z}from"./chunk-QLEH2ZB5.js";import{Aa as G,B as me,Ea as ge,Ga as ye,K as q,P as f,Va as Ce,Wa as be,Xa as _e,eb as Ie,fb as De,ga as ce,gb as Se,hb as xe,ib as Te,jb as Ee,kb as ke,lb as we,nb as Ne,qa as pe,ta as ue,va as fe,wa as ve,y as de,ya as he}from"./chunk-4CV2DTBE.js";import{$ as v,Db as w,Hb as E,Ib as b,Ka as d,Vb as l,Wb as y,Xb as U,ab as ne,bc as le,cc as $,ea as c,gb as oe,ja as x,ka as T,pb as _,q as M,qb as I,qc as u,ra as s,rc as se,tb as ae,ub as re,vb as p,wb as n,xb as o,yb as C}from"./chunk-LVH4HSPS.js";import{a as S,b as H}from"./chunk-C6Q5SG76.js";var Oe=(()=>{let e=class e{constructor(){this.dataService=c(h),this.list=f(this.dataService.getList()),this.id=s(void 0),this.heading=u(()=>this.list()?.find(i=>i.id==this.id())?.id??"--"),this.tabs=s([{label:"Info",route:["info"]},{label:"Raw",route:["raw"]}])}onParamsChange(i,a){this.id.set(i.id)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Fe=(()=>{let e=class e{constructor(){this.dataService=c(h),this.list=f(this.dataService.getList()),this.id=s(void 0),this.data=s(void 0),this.fieldConfiguration=s({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(D),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{id:{type:"string",description:"ID"},description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(W)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.isDirty=s(!1),this.updatedValue=s(void 0),this.controlsConfig=u(()=>this.isDirty()?Ve:Ae),se(()=>{this.data.set(q(this.list()?.find(i=>i.id==this.id())))})}registerUpdateState(i){this.updateState=i}onStateChange(i){this.isDirty.update(a=>i.isDirty??a)}onValueChange(i){this.updatedValue.set(i)}onControlClick(i,a){switch(i){case"refresh":case"cancel":{this.data.set(q(this.list()?.find(r=>r.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let r=this.updatedValue();r&&(this.dataService.save(this.id(),r),this.updateState({isDirty:!1}));break}}}onParamsChange(i,a){this.id.set(i.id)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Pe=(()=>{let e=class e{constructor(){this.dataService=c(B),this.overlayData=c(pe),this.configuration={content:P,useVirtualScroll:!1},this.data=f(this.dataService.getList(),{initialValue:[]}),this.columnsConfig=s([{key:"name",label:"Name",fieldConfiguration:{type:"string"}},{key:"phone",label:"Phone",fieldConfiguration:{type:"string"}}]),this.columnsToDisplay=s(["name","phone"]),this.selectionMode=s("single"),this.selectedItems=s(this.overlayData.initialValue),this.controlsConfig=u(()=>[{id:"select",label:this.selectedItems().size==0?"Select":`Select ${this.selectedItems().values().next().value.name}`,isDisabled:this.selectedItems().size==0}]),this.heading=s("Pick customer")}onControlClick(i,a){i=="select"&&(this.overlayData?.onSave(this.selectedItems().values().next().value),this.overlayRef.close())}compareFn(i,a){return i.id==a.id}onTableRowClick(i){this.selectedItems.set(new Set([i]))}onActionDrawerInit(i){this.overlayRef=i}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var $e=t=>["/user","customer","detail",t],qe=t=>["/inventory","shelf","detail",t],Ge=()=>["description","isbn","quantity","totalPrice"],Ye=(t,e)=>e.id;function Qe(t,e){if(t&1){let m=w();C(0,"div",20),n(1,"button",21),E("click",function(){x(m);let a=b();return T(a.onUpdateCustomerClick())}),n(2,"span"),l(3,"Update"),o()()}}function ze(t,e){t&1&&(n(0,"i",18),l(1,"check"),o())}function Ke(t,e){t&1&&(n(0,"i",19),l(1,"close"),o())}function Je(t,e){t&1&&(n(0,"span",15),l(1,"----"),o())}function Xe(t,e){t&1&&(n(0,"pui-table-header-cell"),l(1,"Item"),o())}function Ze(t,e){t&1&&(n(0,"pui-table-header-cell"),l(1,"ISBN"),o())}function et(t,e){t&1&&(n(0,"pui-table-header-cell"),l(1,"Quantity"),o())}function tt(t,e){t&1&&(n(0,"pui-table-header-cell"),l(1,"Total Price"),o())}function it(t,e){if(t&1&&(n(0,"pui-table-cell")(1,"span",27),l(2),o()()),t&2){let m=e.$implicit;d(2),y(m.description)}}function nt(t,e){if(t&1&&(n(0,"pui-table-cell")(1,"span",27),l(2),o()()),t&2){let m=e.$implicit;d(2),y(m.isbn)}}function ot(t,e){if(t&1&&(n(0,"pui-table-cell"),l(1," x "),n(2,"span",27),l(3),o()()),t&2){let m=e.$implicit;d(3),y(m.quantity)}}function at(t,e){if(t&1&&(n(0,"pui-table-cell",28),l(1," $ "),n(2,"span",27),l(3),o()()),t&2){let m=e.$implicit;d(3),y(m.totalPrice)}}function rt(t,e){if(t&1&&C(0,"pui-table-row",26),t&2){let m=e.$implicit;p("item",m)}}function lt(t,e){if(t&1&&(C(0,"pui-divider"),n(1,"h2"),l(2,"Contents"),o(),n(3,"pui-table",22),oe(4,Xe,2,0,"pui-table-header-cell",23)(5,Ze,2,0,"pui-table-header-cell",23)(6,et,2,0,"pui-table-header-cell",23)(7,tt,2,0,"pui-table-header-cell",23)(8,it,3,1,"pui-table-cell",24)(9,nt,3,1,"pui-table-cell",24)(10,ot,4,1,"pui-table-cell",24)(11,at,4,1,"pui-table-cell",25),n(12,"pui-table-body"),C(13,"pui-table-header-row"),ae(14,rt,1,1,"pui-table-row",26,Ye),o()()),t&2){let m=b();d(3),p("itemHeight",48)("columns",le(10,Ge)),d(),p("puiTableHeaderCellDef","description"),d(),p("puiTableHeaderCellDef","isbn"),d(),p("puiTableHeaderCellDef","quantity"),d(),p("puiTableHeaderCellDef","totalPrice"),d(),p("puiTableCellDef","description"),d(),p("puiTableCellDef","isbn"),d(),p("puiTableCellDef","quantity"),d(),p("puiTableCellDef","totalPrice"),d(3),re(m.inventoryItem().contents)}}function st(t,e){if(t&1){let m=w();n(0,"main",1)(1,"h2"),l(2,"Admin"),o(),n(3,"div",29)(4,"div",30)(5,"div",31)(6,"span",32),l(7,"Mark as Expired"),o(),n(8,"span",33),l(9,"Set the status to expired, preventing any future modifications"),o()(),n(10,"button",34),l(11,"Confirm"),o()(),C(12,"pui-divider"),n(13,"div",30)(14,"div",31)(15,"span",32),l(16,"Remove Inventory Item"),o(),n(17,"span",33),l(18,"This action cannot be undone"),o()(),n(19,"button",35),E("click",function(){x(m);let a=b();return T(a.onRemoveClick())}),l(20,"Remove"),o()()()()}}function dt(t,e){if(t&1){let m=w();n(0,"pui-layout-control",37),E("click",function(){x(m);let a=b(2);return T(a.onCancelClick())}),o(),n(1,"pui-layout-control",38),E("click",function(){x(m);let a=b(2);return T(a.onSaveClick())}),o()}}function mt(t,e){if(t&1){let m=w();n(0,"pui-layout-control",39),E("click",function(){x(m);let a=b(2);return T(a.onEditClick())}),o()}}function ct(t,e){if(t&1&&_(0,dt,2,0)(1,mt,1,0,"pui-layout-control",36),t&2){let m=b();I(m.isEditing()?0:1)}}var Be=(()=>{let e=class e{constructor(){this.dataService=c(h),this.customerDataService=c(B),this.inventoryShelfService=c(Le),this.route=c(de),this.actionDrawer=c(j),this.modalDialog=c(Ce),this.list=f(this.dataService.getList()),this.customerList=f(this.customerDataService.getList()),this.inventoryShelfList=f(this.inventoryShelfService.getList()),this.id=f(this.route.params.pipe(M(i=>i.id))),this.inventoryItem=u(()=>this.list()?.find(i=>i.id==this.id())),this.customer=u(()=>this.customerList()?.find(i=>i.id==this.inventoryItem()?.belongsTo)),this.shelf=u(()=>this.inventoryShelfList()?.find(i=>i.id==this.inventoryItem()?.locatedIn)),this.showEditButton=u(()=>[D.OPEN,D.REPACKAGING].includes(this.inventoryItem()?.status)),this.isEditing=s(!1),this.updatedValues=s({})}onEditClick(){this.isEditing.set(!0),this.updatedValues.set({customer:null})}onCancelClick(){this.isEditing.set(!1),this.updatedValues.set({customer:null})}onSaveClick(){this.dataService.save(this.id(),H(S({},this.inventoryItem()),{belongsTo:this.updatedValues().customer?.id??this.inventoryItem().belongsTo})),this.isEditing.set(!1),this.updatedValues.set({customer:null})}onUpdateCustomerClick(){this.actionDrawer.open(Pe,{providers:[{provide:F,useExisting:R}],overlayData:{initialValue:new Set([this.updatedValues().customer??this.customer()].filter(ce)),onSave:i=>{this.updatedValues.update(a=>H(S({},a),{customer:i}))}}})}onRemoveClick(){let i=this.modalDialog.open({title:"Remove Inventory Item",detailsComponent:be,onDetailsComponentAttached:a=>{a.setInput("stringToCheck","Inventory Item"),a.instance.matchChanged.subscribe(r=>{})},actions:[{label:"Cancel",onClick:()=>{i.close()}},{color:"red",label:"Confirm"}]})}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=ne({type:e,selectors:[["demo-inventory-item-info"]],hostAttrs:[1,"contents"],decls:55,vars:23,consts:[[1,"@container","grow","flex","flex-col","gap-8"],[1,"pui-card","rounded-4","p-8","flex","flex-col","gap-8"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","flex","flex-col","justify-center"],[1,"text-neutral-700","dark:text-neutral-300"],[1,"text-md"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start","text-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center","w-full"],[1,"icon-6","text-neutral-700","dark:text-neutral-300"],[1,"flex","flex-col"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center"],[1,"text-md","uppercase"],[1,"grid","items-center","grid-cols-[min-content_minmax(80px,1fr)]","gap-x-4","gap-y-3"],[1,"col-start-1","text-base","font-medium","whitespace-nowrap","text-neutral-700","dark:text-neutral-300"],[1,"col-start-2","text-md"],[3,"date","format"],[3,"date","mode"],[1,"icon-5","text-green-600","dark:text-green-400"],[1,"icon-5","text-red-600","dark:text-red-400"],[1,"spacer"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2",3,"click"],[3,"itemHeight","columns"],[4,"puiTableHeaderCellDef"],[4,"puiTableCellDef"],["class","tabular-nums",4,"puiTableCellDef"],[3,"item"],[1,"truncate"],[1,"tabular-nums"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-row","items-center","gap-8"],[1,"flex","flex-col","grow"],[1,"text-base","font-medium"],[1,"text-sm","dark:text-neutral-300"],["puiBorderedButton","","color","red",1,"rounded-full","px-4","py-2"],["puiFilledButton","","color","red",1,"rounded-full","px-4","py-2",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto"],["id","cancel","icon","close","label","Cancel","mode","low-emphasis",3,"click"],["id","save","icon","save","label","Save","mode","auto",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto",3,"click"]],template:function(a,r){if(a&1&&(n(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"h4",4),l(5,"Status"),o(),n(6,"p",5),l(7),o()(),n(8,"a",6)(9,"div",7)(10,"i",8),l(11,"person"),o(),n(12,"div",9)(13,"h4",4),l(14,"Customer"),o(),n(15,"p",5),l(16),o()(),_(17,Qe,4,0),o()(),n(18,"a",10)(19,"div",11)(20,"i",8),l(21,"shelves"),o(),n(22,"div",9)(23,"h4",4),l(24,"Shelf"),o(),n(25,"p",12),l(26),o()()()()(),n(27,"div",13)(28,"span",14),l(29,"ID"),o(),n(30,"span",15),l(31),o(),n(32,"span",14),l(33,"Arrived at"),o(),n(34,"span",15),C(35,"pui-time-display",16),l(36," ("),C(37,"pui-time-display",17),l(38," ago ) "),o(),n(39,"span",14),l(40,"Net weight"),o(),n(41,"span",15),l(42),o(),n(43,"span",14),l(44,"Gross weight"),o(),n(45,"span",15),l(46),o(),n(47,"span",14),l(48,"Fragile"),o(),_(49,ze,2,0,"i",18)(50,Ke,2,0,"i",19)(51,Je,2,0,"span",15),o(),_(52,lt,16,11),o(),_(53,st,21,0,"main",1),o(),_(54,ct,2,1)),a&2){let N,K,A,J,g,X,Z,ee,te,ie,V;d(7),y(((N=r.inventoryItem())==null?null:N.status)??"--"),d(),p("hoverableEnabled",!r.isEditing()&&r.customer()!=null)("routerLink",!r.isEditing()&&r.customer()?$(19,$e,(K=r.customer())==null?null:K.id):null),d(8),y(((A=r.updatedValues().customer)==null?null:A.name)??((A=r.customer())==null?null:A.name)??"--"),d(),I(r.isEditing()?17:-1),d(),p("hoverableEnabled",!r.isEditing()&&r.shelf()!=null)("routerLink",!r.isEditing()&&r.shelf()?$(21,qe,(J=r.shelf())==null?null:J.id):null),d(8),y(r.shelf()?((g=r.shelf())==null||g.location==null?null:g.location.aisle)+((g=r.shelf())==null||g.location==null?null:g.location.row)+" - "+((g=r.shelf())==null||g.location==null?null:g.location.layer):"--"),d(5),y(((X=r.inventoryItem())==null?null:X.id)??"---"),d(4),p("date",(Z=r.inventoryItem())==null?null:Z.arrivedAt)("format","yyyy-MM-dd HH:mm"),d(2),p("date",(ee=r.inventoryItem())==null?null:ee.arrivedAt)("mode","timeAgo"),d(5),U("",((te=r.inventoryItem())==null?null:te.netWeight)??"---"," g"),d(4),U("",((ie=r.inventoryItem())==null?null:ie.grossWeight)??"---"," g"),d(3),I(((V=r.inventoryItem())==null?null:V.isContainFragile)===!0?49:((V=r.inventoryItem())==null?null:V.isContainFragile)===!1?50:51),d(3),I(r.inventoryItem()?52:-1),d(),I(r.isEditing()?53:-1),d(),I(r.showEditButton()?54:-1)}},dependencies:[ue,me,Me,ye,ge,Ne,Se,xe,we,ke,Te,Ie,Ee,De,he,fe,ve],encapsulation:2});let t=e;return t})();var We=(()=>{let e=class e{constructor(){this.heading=s("Inventory Items"),this.tabs=s([])}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var He=(()=>{let e=class e{constructor(){this.dataService=c(h),this.configuration={content:O,isEnterToSubmit:!0},this.data=s(null),this.fieldConfiguration=s({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(D),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(W)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.controlsConfig=s([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=s(void 0),this.heading=s("Add Item")}registerUpdateState(i){this.updateState=i,this.updateState({isDirty:!0})}onValueChange(i){this.updatedValue.set(i)}onControlClick(i,a){switch(i){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let r=this.updatedValue();r&&(r=Object.assign(r,{id:z.string.nanoid(),contents:r.contents.map(N=>Object.assign(N,{id:z.string.nanoid(12)}))}),this.dataService.add(r),this.overlayRef.close());break}}}onActionDrawerInit(i){this.overlayRef=i}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Ue=(()=>{let e=class e{constructor(){this.dataService=c(h),this.actionDrawer=c(j),this.rawData=f(this.dataService.getList()),this.configuration={id:"inventory-item-table",useVirtualScroll:!0},this.data=u(()=>(this.rawData()??[]).toSorted(this.sortFn())),this.columnsConfig=s([{key:"belongsTo",label:"Customer"},{key:"netWeight",label:"Net Weight (g)",fieldConfiguration:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",fieldConfiguration:{type:"number"}},{key:"isContainFragile",label:"Fragile",fieldConfiguration:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=s({default:["belongsTo","status"],768:["belongsTo","netWeight","status","arrivedAt"],1280:["belongsTo","netWeight","grossWeight","isContainFragile","status","arrivedAt"]}),this.filterValue=s({}),this.sortFn=u(()=>Re(this.columnsConfig()))}routeToDetail(i){return["detail",i.id]}onHeaderCellClick(i,a){this.columnsConfig.update(r=>je(r,i))}onControlClick(i,a){switch(i){case"add":{this.actionDrawer.open(He,{providers:[{provide:L,useExisting:R}]});break}}}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var _i=[{path:"",data:S({},G({title:"Item"})),children:[{path:"detail/:id",component:Q,data:S({},G({titleFn:t=>t.params.pipe(M(e=>e.id))})),providers:[{provide:Y,useClass:Oe}],children:[{path:"info",component:Be},{path:"raw",component:O,canDeactivate:[_e],providers:[{provide:L,useClass:Fe}]},{path:"**",redirectTo:"info"}]},{path:"",component:Q,providers:[{provide:Y,useClass:We}],children:[{path:"",component:P,providers:[{provide:F,useClass:Ue}]}]}]}];export{_i as ROUTES};
