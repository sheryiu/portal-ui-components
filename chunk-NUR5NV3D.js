import{a as X,b as Z}from"./chunk-2KSRL6LA.js";import{c as ee,d as s,e as te,f as ne,g as ie,h as oe,k as W,l as re,m as ae}from"./chunk-G5536VX4.js";import"./chunk-S24MCBAH.js";import{f as U}from"./chunk-YNYHW5CE.js";import"./chunk-5KUQE4MU.js";import{J as O,b as z,e as w,g as V,oa as K,pa as Q,v as q,x as G,y as J}from"./chunk-YSJMDZIT.js";import{Cb as b,Db as Y,Fa as N,Ob as u,Pb as f,Sa as a,Wb as C,Yb as j,Zb as M,ac as P,bc as h,dc as y,ec as R,ga as x,ka as k,kb as A,ob as m,q as S,rb as H,sb as E,tb as v,ub as g,vb as p,wb as d,wc as T,xb as F}from"./chunk-O4SB2AXP.js";import{a as B,b as I}from"./chunk-EQDQRRRY.js";function se(t,e,n){let{years:i=0,months:o=0,weeks:r=0,days:c=0,hours:l=0,minutes:fe=0,seconds:he=0}=e,L=s(t,n?.in),$=o||i?ne(L,o+i*12):L,ye=c||r?te($,c+r*7):$,xe=fe+l*60,ve=(he+xe*60)*1e3;return ee(n?.in||t,+ye+ve)}function le(t,e){let n=s(t,e?.in).getDay();return n===0||n===6}function pe(t,e){let n=s(t,e?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}function de(t,e){let n=s(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function ce(t,e){let n=ie(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=s(t,e?.in),r=o.getDay(),c=(r<i?-7:0)+6-(r-i);return o.setDate(o.getDate()+c),o.setHours(23,59,59,999),o}function me(t,e){return s(t,e?.in).getDate()}function _(t,e){return s(t,e?.in).getMonth()}function D(t,e){return s(t,e?.in).getFullYear()}var _e=(t,e)=>e.id,De=t=>["../../","detail",t];function ke(t,e){if(t&1&&(p(0,"a",1)(1,"span",2),u(2),h(3,"date"),d(),p(4,"span",3),u(5),d()()),t&2){let n=e.$implicit;m("routerLink",j(6,De,n.id)),a(2),f(y(3,3,n.startsFrom,"HH:mm")),a(3),f(n.label)}}var ue=(()=>{let e=class e{constructor(){this.events=N.required()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=k({type:e,selectors:[["demo-calendar-events"]],hostAttrs:[1,"contents"],inputs:{events:[1,"events"]},standalone:!0,features:[C],decls:3,vars:0,consts:[[1,"flex","flex-col","gap-0.5","py-1","overflow-hidden","w-full"],["type","button","puiBaseButton","",1,"justify-start","text-start","text-sm","ps-1","pe-2","py-0.5","gap-1",3,"routerLink"],[1,"tabular-nums","dark:text-neutral-400","font-medium"],[1,"truncate"]],template:function(o,r){o&1&&(p(0,"div",0),v(1,ke,6,8,"a",1,_e),d()),o&2&&(a(),g(r.events()))},dependencies:[Q,w,J]});let t=e;return t})();var be=(t,e)=>({"grid-rows-[min-content_repeat(6,1fr)]":t,"grid-rows-[min-content_repeat(5,1fr)]":e}),Ce=(t,e)=>({"border-r":t,"dark:text-red-400":e}),Me=(t,e)=>({"border-b":t,"border-r":e}),Te=(t,e,n,i,o)=>({"dark:text-neutral-400":t,"font-black opacity-20":e,"font-medium opacity-10":n,"dark:text-primary-50 before:rounded-full before:-top-2 before:-bottom-2 before:-left-6 before:-right-6 before:absolute before:-z-10 before:bg-primary-700":i,"dark:text-red-400":o});function we(t,e){if(t&1&&(p(0,"div",5),u(1),h(2,"date"),d()),t&2){let n=e.$implicit,i=e.$index,o=e.$count;m("ngClass",M(5,Ce,i!==o-1,n.isWeekend)),a(),f(y(2,2,n.date,"EE"))}}function Se(t,e){if(t&1&&(p(0,"span",12),u(1),h(2,"date"),d(),F(3,"br")),t&2){let n=Y().$implicit;a(),f(y(2,1,n.date,"MMM"))}}function Ee(t,e){if(t&1&&(p(0,"div",6)(1,"span",10),A(2,Se,4,4),p(3,"span"),u(4),h(5,"date"),d()(),F(6,"demo-calendar-events",11),d()),t&2){let n=e.$implicit,i=e.$index,o=e.$count;m("ngClass",M(8,Me,i<o-7,i%7!=6)),a(),m("ngClass",P(11,Te,(n.isLastMonth||n.isNextMonth)&&!n.isToday,!n.isLastMonth&&!n.isNextMonth,n.isLastMonth||n.isNextMonth,n.isToday,n.isWeekend)),a(),H(n.isStartOfMonth?2:-1),a(2),f(y(5,5,n.date,"dd")),a(2),m("events",n.events)}}var ht=(()=>{let e=class e{constructor(){this.route=x(q),this.router=x(G),this.timestamp=O(this.route.params.pipe(S(i=>i.timestamp),S(i=>Number(i)))),this.dataService=x(X),this.rawData=O(this.dataService.getList()),this.listService=x(Z),this.selectedTime=T(()=>{let i=this.timestamp();return i!=null&&i!=-1?new Date(i):i==-1?new Date(this.listService.storedSelectedTime):new Date}),this.daysVisible=T(()=>{let i=this.selectedTime();if(i==null)return[];let o=new Date,r=oe(de(i),{weekStartsOn:0}),c=ce(pe(i),{weekStartsOn:0});return re({start:r,end:c}).map(l=>({date:l,isLastMonth:_(l)<_(i)?!0:D(l)<D(l),isNextMonth:_(l)>_(i)?!0:D(l)>D(l),isStartOfMonth:me(l)==1,isToday:W(l,o),isWeekend:le(l)}))}),this.daysWithData=T(()=>{let i=this.daysVisible(),o=this.rawData()??[];return i.map(r=>I(B({},r),{events:o.filter(c=>W(c.startsFrom,r.date)).sort((c,l)=>c.startsFrom.getTime()-l.startsFrom.getTime())}))})}onNextMonthClick(){let i=this.selectedTime(),o=se(i,{months:1});this.listService.updateSelectedTime(o),this.router.navigate(["../",o.getTime()],{relativeTo:this.route})}onLastMonthClick(){let i=this.selectedTime(),o=ae(i,{months:1});this.listService.updateSelectedTime(o),this.router.navigate(["../",o.getTime()],{relativeTo:this.route})}onTodayClick(){let i=new Date;this.listService.updateSelectedTime(i),this.router.navigate(["../",i.getTime()],{relativeTo:this.route})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=k({type:e,selectors:[["demo-employee-calendar-monthly"]],hostAttrs:[1,"contents"],standalone:!0,features:[C],decls:15,vars:15,consts:[[1,"@container","grow","flex","flex-col"],[1,"pui-card","rounded-4","h-full","grow","overflow-hidden","flex","flex-col"],[1,"rounded-t-4","px-8","pt-6","pb-12","bg-gradient-to-br","from-primary-800/20","to-primary-900/20"],[1,"text-xl","font-display"],[1,"grow","-mt-6","bg-neutral-800","rounded-t-4","border-t","grid","grid-cols-7",3,"ngClass"],[1,"text-center","pt-2","pb-1","uppercase","font-bold","text-base/none",3,"ngClass"],["puiHoverable","",1,"flex","flex-col","items-center","justify-start","gap-1.5","relative","min-h-32",3,"ngClass"],["id","lastMonth","label","Last month","mode","low-emphasis","icon","arrow_back",3,"click","weight"],["id","today","label","Today","mode","auto","icon","today",3,"click","weight"],["id","nextMonth","label","Next month","mode","low-emphasis","icon","arrow_forward",3,"click","weight"],[1,"mt-2","text-[36px]/none","@screen-md:text-[48px]/none","@screen-xl:text-[64px]/none","@screen-2xl:text-[78px]/none","text-end","absolute","z-0","-bottom-2","-right-1","whitespace-nowrap","font-display","pointer-events-none","select-none",3,"ngClass"],[3,"events"],[1,"text-[24px]/none","@screen-md:text-[32px]/none","@screen-xl:text-[40px]/none","@screen-2xl:text-[54px]/none"]],template:function(o,r){o&1&&(p(0,"div",0)(1,"main",1)(2,"div",2)(3,"span",3),u(4),h(5,"date"),d()(),p(6,"div",4),v(7,we,3,8,"div",5,E),h(9,"slice"),v(10,Ee,7,17,"div",6,E),d()()(),p(12,"pui-layout-control",7),b("click",function(){return r.onLastMonthClick()}),d(),p(13,"pui-layout-control",8),b("click",function(){return r.onTodayClick()}),d(),p(14,"pui-layout-control",9),b("click",function(){return r.onNextMonthClick()}),d()),o&2&&(a(4),f(y(5,5,r.selectedTime(),"MMMM yyyy")),a(2),m("ngClass",M(12,be,r.daysWithData().length>35,r.daysWithData().length<=35)),a(),g(R(9,8,r.daysWithData(),0,7)),a(3),g(r.daysWithData()),a(2),m("weight",-100),a(),m("weight",0),a(),m("weight",100))},dependencies:[U,K,w,z,ue,V]});let t=e;return t})();export{ht as EmployeeCalendarMonthlyComponent};
