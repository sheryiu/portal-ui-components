import{a as n,b as C}from"./chunk-IRUCGYAE.js";import{d as F,e as O}from"./chunk-JCB2IDA7.js";import"./chunk-A7X6ERW6.js";import{B as d,O as a,Ob as E,Pb as T,Qb as b,Sb as g,Vb as A,Xb as L,Ya as m,Yb as I,Zb as u,_b as f,a as l,b as h,i as S,ta as p,tb as y,u as v,va as D,y as c}from"./chunk-Q665FWTK.js";var N=(()=>{let e=class e{constructor(){this.dataService=d(n),this.list=m(this.dataService.getList()),this.id=a(void 0),this.heading=p(()=>this.list()?.find(t=>t.id==this.id())?.label??"--"),this.tabs=a([])}onParamsChange(t,i){this.id.set(t.id)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=c({token:e,factory:e.\u0275fac});let r=e;return r})();var j=(()=>{let e=class e{constructor(){this.dataService=d(n),this.list=m(this.dataService.getList()),this.id=a(void 0),this.data=a(void 0),this.fieldConfiguration=a({type:"object",properties:{employeeId:{type:"string",description:"Employee ID"},startsFrom:{type:"date-time",description:"Starts From"},endsAt:{type:"date-time",description:"Ends At"},isFullDay:{type:"boolean",description:"Full Day"},label:{type:"string",description:"Label"},type:{type:"string",description:"Type",enum:Object.values(F)}}}),this.isDirty=a(!1),this.updatedValue=a(void 0),this.controlsConfig=p(()=>this.isDirty()?T:E),D(()=>{this.data.set(structuredClone(this.list()?.find(t=>t.id==this.id())))},{allowSignalWrites:!0})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(i=>t.isDirty??i)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,i){switch(t){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(s=>s.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let s=this.updatedValue();s&&(this.dataService.save(s),this.updateState({isDirty:!1}));break}}}onParamsChange(t,i){this.id.set(t.id)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=c({token:e,factory:e.\u0275fac});let r=e;return r})();var w=(()=>{let e=class e{constructor(){this.dataService=d(n),this.rawData=m(this.dataService.getList()),this.employeeDataService=d(O),this.employeeList=m(this.employeeDataService.getList()),this.configuration={useVirtualScroll:!0},this.data=p(()=>{let t=this.rawData(),i=this.employeeList();return!t||!i?[]:t.map(s=>h(l({},s),{employee:i.find(o=>o.id==s.employeeId)})).toSorted(this.sortFn())}),this.columnsConfig=a([{key:"employeeName",label:"Employee",path:"employee.name"},{key:"label",label:"Label"},{key:"startsFrom",label:"Starts",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isSortedDesc:!0},{key:"endsAt",label:"Ends",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isAlignEnd:!0}]),this.columnsToDisplay=a(["employeeName","label","startsFrom","endsAt"]),this.controlsConfig=a([]),this.sortFn=p(()=>A(this.columnsConfig()))}routeToDetail(t){return["../detail",t.id]}onHeaderCellClick(t,i){this.columnsConfig.update(s=>s.map(o=>o.key==t?h(l({},o),{isSortedAsc:!o.isSortedAsc&&!o.isSortedDesc?!0:!!o.isSortedDesc,isSortedDesc:!!o.isSortedAsc}):h(l({},o),{isSortedAsc:!1,isSortedDesc:!1})))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=c({token:e,factory:e.\u0275fac});let r=e;return r})();var lt=[{path:"",data:l({},y({title:"Calendar"})),children:[{path:"detail/:id",component:f,data:l({},y({deps:[n],titleFn:(r,e)=>r.params.pipe(v(R=>e.getList().pipe(S(t=>t.find(i=>i.id==R.id)?.label??"--"))))})),providers:[{provide:u,useClass:N}],children:[{path:"raw",component:g,providers:[{provide:b,useClass:j}]},{path:"**",redirectTo:"raw"}]},{path:"",component:f,providers:[{provide:u,useClass:C}],children:[{path:"monthly/:timestamp",loadComponent:()=>import("./chunk-VJYI5HAU.js").then(r=>r.EmployeeCalendarMonthlyComponent),providers:[{provide:C,useExisting:u}]},{path:"data",component:I,providers:[{provide:L,useClass:w}]},{path:"**",redirectTo:"monthly/-1"}]}]}];export{lt as ROUTES};
