import{a as T,b as me}from"./chunk-ULV7EL5F.js";import{$a as ne,A as B,Ca as J,Fa as Q,N as P,Oa as X,Wa as Y,Xa as Z,Ya as ee,Za as te,_a as ie,ab as ae,b as N,bb as oe,cb as re,db as le,eb as pe,f as O,gb as de,ua as U,va as k,wa as K,za as I}from"./chunk-MI5UECCZ.js";import{Ab as F,Bb as S,Cb as a,Da as j,Db as o,Eb as x,Gb as M,Jb as g,Kb as m,Pa as L,Ra as l,Vb as p,Wb as D,Xb as R,bc as h,cc as E,ec as $,fa as G,fb as y,hc as V,jc as H,mb as s,oa as C,pa as b,uc as v,vb as d,vc as A,xc as q,ya as w,yb as _,za as u}from"./chunk-O5WS6LKQ.js";var ce=(e,n)=>n.id,xe=e=>["../",e];function he(e,n){e&1&&(a(0,"h3",2),p(1,"Folders"),o())}function Ce(e,n){if(e&1){let t=M();a(0,"a",7),g("click",function(){let r=C(t).$implicit,c=m();return b(c.navigateWithRouter()?{}:c.navigateTo.emit(r))}),a(1,"i",8),p(2,"folder"),o(),a(3,"span",9),p(4),o()()}if(e&2){let t=n.$implicit,i=m();d("routerLink",i.navigateWithRouter()?E(2,xe,t.id):null),l(4),D(t.filename)}}function be(e,n){if(e&1&&x(0,"img",10),e&2){let t=m().$implicit;d("src",t.thumbnail,L)}}function Me(e,n){e&1&&(a(0,"div",11)(1,"i",13),p(2,"files"),o()())}function Te(e,n){if(e&1&&(a(0,"button",5),s(1,be,1,1,"img",10)(2,Me,3,0,"div",11),a(3,"div",12)(4,"i",8),p(5,"draft"),o(),a(6,"span",9),p(7),o()()()),e&2){let t=n.$implicit;l(),_(t.thumbnail!=null?1:2),l(6),D(t.filename)}}function ye(e,n){e&1&&(a(0,"div",6)(1,"i",14),p(2,"document_search"),o(),a(3,"span",15),p(4,"No files here"),o()())}var se=(()=>{class e{constructor(){this.media=u.required(),this.navigateWithRouter=u.required(),this.navigateTo=w(),this.processed=v(()=>this.media().toSorted((t,i)=>t.filename<i.filename?-1:t.filename>i.filename?1:0)),this.folders=v(()=>this.processed().filter(t=>t.type==T.FOLDER)),this.files=v(()=>this.processed().filter(t=>t.type==T.FILE))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=y({type:e,selectors:[["demo-media-manager-grid"]],inputs:{media:[1,"media"],navigateWithRouter:[1,"navigateWithRouter"]},outputs:{navigateTo:"navigateTo"},decls:10,vars:2,consts:[[1,"flex","flex-col","gap-4"],[1,"grid","gap-4",2,"grid-template-columns","repeat(auto-fit, minmax(240px, 1fr))"],[1,"col-span-full"],["puiBaseButton","",1,"basis-[240px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","justify-start","py-3","px-6","gap-3",3,"routerLink"],[1,"pt-2","col-span-full"],["puiBaseButton","",1,"basis-[240px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","items-start","flex-col"],[1,"col-span-full","flex","flex-col","gap-6","justify-center","items-center","py-12"],["puiBaseButton","",1,"basis-[240px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","justify-start","py-3","px-6","gap-3",3,"click","routerLink"],[1,"icon-6","font-variation-fill","opacity-70"],[1,"truncate"],[1,"aspect-[21/9]","@screen-sm:aspect-video","w-full","object-cover","bg-hover",3,"src"],[1,"aspect-[21/9]","@screen-sm:aspect-video","w-full","bg-hover","flex","justify-center","items-center"],[1,"flex","flex-row","py-3","px-6","gap-3","items-center","w-full"],[1,"icon-12","font-variation-weight-bold","font-variation-fill","dark:text-primary-600"],[1,"icon-24","opacity-30"],[1,"text-xl","font-medium","opacity-30"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"div",1),s(2,he,2,0,"h3",2),F(3,Ce,5,4,"a",3,ce),a(5,"h3",4),p(6,"Files"),o(),F(7,Te,8,2,"button",5,ce,!1,ye,5,0,"div",6),o()()),i&2&&(l(2),_(r.folders().length>0?2:-1),l(),S(r.folders()),l(4),S(r.files()))},dependencies:[I,k,B],encapsulation:2})}}return e})();var Fe=(e,n)=>n.id,Se=()=>["thumbnail","filename"],De=()=>["thumbnail","filename","size"],Ee=()=>["thumbnail","filename","size","createdAt"],ue=(e,n,t)=>({default:e,640:n,1280:t}),Le=()=>["64px","minmax(80px, 1fr)"],Re=()=>["64px","minmax(80px, 1fr)","minmax(80px, 1fr)"],Be=()=>["64px","minmax(80px, 1fr)","minmax(80px, 1fr)","minmax(80px, 1fr)"],ke=e=>["../",e];function Ie(e,n){if(e&1&&x(0,"img",9),e&2){let t=m(2).$implicit;d("src",t.thumbnail,L)}}function We(e,n){e&1&&(a(0,"i",8),p(1,"draft"),o())}function $e(e,n){if(e&1&&s(0,Ie,1,1,"img",9)(1,We,2,0,"i",8),e&2){let t=m().$implicit;_(t.thumbnail!=null?0:1)}}function Ve(e,n){e&1&&(a(0,"i",8),p(1,"folder"),o())}function He(e,n){if(e&1&&(a(0,"pui-table-cell",7),s(1,$e,2,1)(2,Ve,2,0,"i",8),o()),e&2){let t=n.$implicit,i=m();l(),_(t.type==i.mediaType.FILE?1:2)}}function ze(e,n){if(e&1&&(a(0,"pui-table-cell")(1,"span"),p(2),o()()),e&2){let t=n.$implicit;l(2),D(t.filename)}}function Ge(e,n){if(e&1&&(a(0,"span"),p(1),V(2,"number"),o()),e&2){let t=m().$implicit;l(),R("",H(2,1,t.sizeBytes/1024/1024,"1.0-0")," MB")}}function je(e,n){if(e&1&&(a(0,"span"),p(1),V(2,"number"),o()),e&2){let t=m().$implicit;l(),R("",H(2,1,t.sizeBytes/1024,"1.0-0")," KB")}}function Ae(e,n){if(e&1&&(a(0,"span"),p(1),o()),e&2){let t=m().$implicit;l(),R("",t.sizeBytes," Bytes")}}function qe(e,n){if(e&1&&(a(0,"pui-table-cell"),s(1,Ge,3,4,"span")(2,je,3,4,"span")(3,Ae,2,1,"span"),o()),e&2){let t=n.$implicit;l(),_(t.sizeBytes>1048576?1:t.sizeBytes>1024?2:t.sizeBytes!=null?3:-1)}}function Ne(e,n){if(e&1&&(a(0,"pui-table-cell",10),x(1,"pui-time-display",11),o()),e&2){let t=n.$implicit;d("rightAligned",!0),l(),d("date",t.createdAt)("format","yyyy MMM dd, HH:mm")}}function Oe(e,n){e&1&&(a(0,"pui-table-header-cell"),p(1,"Name"),o())}function Pe(e,n){e&1&&(a(0,"pui-table-header-cell"),p(1,"Size"),o())}function Ue(e,n){e&1&&(a(0,"pui-table-header-cell",10),p(1,"Date created"),o()),e&2&&d("rightAligned",!0)}function Ke(e,n){if(e&1){let t=M();a(0,"pui-table-row",12),g("rowClick",function(){let r=C(t).$implicit,c=m();return b(c.navigateWithRouter()?{}:c.navigateTo.emit(r))}),o()}if(e&2){let t=n.$implicit,i=m();d("item",t)("route",i.navigateWithRouter()?E(2,ke,t.id):void 0)}}var fe=(()=>{class e{constructor(){this.media=u.required(),this.navigateWithRouter=u.required(),this.navigateTo=w(),this.processed=v(()=>this.media().toSorted((t,i)=>t.filename<i.filename?-1:t.filename>i.filename?1:0).toSorted((t,i)=>t.type==i.type?0:t.type==T.FOLDER?-1:i.type==T.FOLDER?1:0)),this.folders=v(()=>this.processed().filter(t=>t.type==T.FOLDER)),this.files=v(()=>this.processed().filter(t=>t.type==T.FILE)),this.mediaType=T}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=y({type:e,selectors:[["demo-media-manager-list"]],inputs:{media:[1,"media"],navigateWithRouter:[1,"navigateWithRouter"]},outputs:{navigateTo:"navigateTo"},decls:12,vars:29,consts:[[3,"id","itemHeight","columns","columnWidths"],["class","p-0 justify-center",4,"puiTableCellDef","puiTableCellDefType"],[4,"puiTableCellDef","puiTableCellDefType"],[3,"rightAligned",4,"puiTableCellDef","puiTableCellDefType"],[4,"puiTableHeaderCellDef"],[3,"rightAligned",4,"puiTableHeaderCellDef"],["puiHoverable","",3,"item","route"],[1,"p-0","justify-center"],[1,"icon-8","font-variation-fill","opacity-70"],[1,"aspect-square","h-16","object-cover",3,"src"],[3,"rightAligned"],[3,"date","format"],["puiHoverable","",3,"rowClick","item","route"]],template:function(i,r){i&1&&(a(0,"pui-table",0),s(1,He,3,1,"pui-table-cell",1)(2,ze,3,1,"pui-table-cell",2)(3,qe,4,1,"pui-table-cell",2)(4,Ne,2,3,"pui-table-cell",3)(5,Oe,2,0,"pui-table-header-cell",4)(6,Pe,2,0,"pui-table-header-cell",4)(7,Ue,2,1,"pui-table-header-cell",5),a(8,"pui-table-body"),x(9,"pui-table-header-row"),F(10,Ke,1,4,"pui-table-row",6,Fe),o()()),i&2&&(d("id","media-manager-list")("itemHeight",64)("columns",$(18,ue,h(15,Se),h(16,De),h(17,Ee)))("columnWidths",$(25,ue,h(22,Le),h(23,Re),h(24,Be))),l(),d("puiTableCellDef","thumbnail")("puiTableCellDefType",r.rowType),l(),d("puiTableCellDef","filename")("puiTableCellDefType",r.rowType),l(),d("puiTableCellDef","size")("puiTableCellDefType",r.rowType),l(),d("puiTableCellDef","createdAt")("puiTableCellDefType",r.rowType),l(),d("puiTableHeaderCellDef","filename"),l(),d("puiTableHeaderCellDef","size"),l(),d("puiTableHeaderCellDef","createdAt"),l(3),S(r.processed()))},dependencies:[de,ne,ae,pe,le,oe,te,re,ie,U,O,X],encapsulation:2})}}return e})();var Je=(e,n)=>n==null?null:n.id,Qe=e=>({"bg-hover":e}),Xe=e=>["../",e];function Ye(e,n){e&1&&(a(0,"i",13),p(1,"home"),o(),a(2,"span",14),p(3,"Home"),o())}function Ze(e,n){if(e&1&&(a(0,"span",11),p(1),o()),e&2){let t=m().$implicit;l(),D(t.filename)}}function et(e,n){e&1&&(a(0,"i",12),p(1,"chevron_right"),o())}function tt(e,n){if(e&1){let t=M();a(0,"a",10),g("click",function(){let r=C(t).$implicit,c=m();return b(c.navigateTo.emit(r))}),s(1,Ye,4,0)(2,Ze,2,1,"span",11),o(),s(3,et,2,0,"i",12)}if(e&2){let t,i=n.$implicit,r=n.$index,c=n.$count,f=m();d("ngClass",E(4,Qe,r===0))("routerLink",f.navigateWithRouter()?E(6,Xe,(t=i==null?null:i.id)!==null&&t!==void 0?t:null):null),l(),_(i==null?1:2),l(2),_(r!==c-1?3:-1)}}function it(e,n){e&1&&(a(0,"div",15)(1,"i",16),p(2,"grid_view"),o()())}function nt(e,n){e&1&&(a(0,"div",17)(1,"i",18),p(2,"list"),o()())}var _e=(()=>{class e{constructor(){this.parentFolders=u.required(),this.navigateWithRouter=u.required(),this.viewMode=u.required(),this.navigateTo=w(),this.viewModeChange=w()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=y({type:e,selectors:[["demo-media-manager-toolbar"]],inputs:{parentFolders:[1,"parentFolders"],navigateWithRouter:[1,"navigateWithRouter"],viewMode:[1,"viewMode"]},outputs:{navigateTo:"navigateTo",viewModeChange:"viewModeChange"},decls:15,vars:3,consts:[[1,"@container"],[1,"flex","flex-row","flex-wrap","@screen-sm:flex-nowrap","gap-x-3","gap-y-4"],[1,"overflow-x-auto","flex","items-center","basis-full"],[1,"flex","flex-row-reverse","items-center","gap-1","overflow-x-auto"],[1,"shrink","grow","basis-48","hidden","@screen-sm:block"],["puiBorderedButton","","puiTooltip","Sort by filename",1,"rounded-full","flex-row","px-4","gap-2","flex-none"],[1,"icon-4","font-variation-weight-light","rotate-180","-scale-x-100"],[1,"flex-none",3,"tabChange","currentTab"],["puiTooltip","Grid View",4,"puiTab"],["puiTooltip","List View",4,"puiTab"],["puiBaseButton","",1,"rounded-1","px-4","py-2","@screen-sm:px-2","gap-2","items-center","flex-none",3,"click","ngClass","routerLink"],[1,"text-base/none"],[1,"icon-4","font-variation-weight-bold","dark:text-primary-50"],[1,"icon-4","font-variation-fill"],[1,"font-medium","text-base/none","pt-px"],["puiTooltip","Grid View"],[1,"icon-5","font-variation-weight-light"],["puiTooltip","List View"],[1,"icon-5","font-variation-weight-bold"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),F(4,tt,4,8,null,null,Je),o()(),x(6,"div",4),a(7,"button",5)(8,"i",6),p(9,"sort"),o(),a(10,"span"),p(11,"Filename"),o()(),a(12,"pui-tab-bar",7),g("tabChange",function(f){return r.viewModeChange.emit(f)}),s(13,it,3,0,"div",8)(14,nt,3,0,"div",9),o()()()),i&2&&(l(4),S(r.parentFolders()),l(8),d("currentTab",r.viewMode()),l(),d("puiTab","grid"),l(),d("puiTab","list"))},dependencies:[ee,Z,Y,J,I,k,K,B,N],styles:["[_nghost-%COMP%]     pui-tab-bar .pui-tab-bar-tabs{background:#bfbfbf0d;box-shadow:inset #ffffff08 0 0 4px,#0000001a 4px 2px 3px}"]})}}return e})();var ge=()=>[];function at(e,n){if(e&1){let t=M();a(0,"demo-media-manager-grid",3),g("navigateTo",function(r){C(t);let c=m();return b(c.onNavigateTo(r))}),o()}if(e&2){let t,i=m();d("media",(t=i.children())!==null&&t!==void 0?t:h(2,ge))("navigateWithRouter",i.navigateWithRouter())}}function ot(e,n){if(e&1){let t=M();a(0,"demo-media-manager-list",3),g("navigateTo",function(r){C(t);let c=m();return b(c.onNavigateTo(r))}),o()}if(e&2){let t,i=m();d("media",(t=i.children())!==null&&t!==void 0?t:h(2,ge))("navigateWithRouter",i.navigateWithRouter())}}var It=(()=>{class e{constructor(){this.dataService=G(me),this.folderId=u(),this.currentFolderId=A(this.folderId),this.navigateWithRouter=u(!0),this.viewMode=j("grid"),this.allMedia=P(this.dataService.getList()),this.children=v(()=>this.allMedia()?.filter(t=>t.belongsInFolderId==this.currentFolderId())),this.parentFolders=v(()=>{let t=this.currentFolderId(),i=this.allMedia();if(i==null)return[];let r=i.find(W=>W.id==t)??null,c=r?.belongsInFolderId??null,f=[];do{if(f=f.toSpliced(f.length,0,r??null),r==null)break;r=i.find(W=>W.id==c)??null,c=r?.belongsInFolderId??null}while(!0);return f}),q(()=>{this.currentFolderId.set(this.folderId()??null)})}onNavigateTo(t){this.currentFolderId.set(t?.id??null)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=y({type:e,selectors:[["demo-media-manager-folder"]],inputs:{folderId:[1,"folderId"],navigateWithRouter:[1,"navigateWithRouter"]},decls:5,vars:4,consts:[[1,"flex","flex-col","gap-4"],[3,"navigateTo","viewModeChange","parentFolders","navigateWithRouter","viewMode"],[3,"media","navigateWithRouter"],[3,"navigateTo","media","navigateWithRouter"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"demo-media-manager-toolbar",1),g("navigateTo",function(f){return r.onNavigateTo(f)})("viewModeChange",function(f){return r.viewMode.set(f)}),o(),x(2,"pui-divider"),s(3,at,1,3,"demo-media-manager-grid",2)(4,ot,1,3,"demo-media-manager-list",2),o()),i&2&&(l(),d("parentFolders",r.parentFolders())("navigateWithRouter",r.navigateWithRouter())("viewMode",r.viewMode()),l(2),_(r.viewMode()=="grid"?3:4))},dependencies:[_e,Q,se,fe],encapsulation:2})}}return e})();export{It as a};
