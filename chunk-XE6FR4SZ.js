import{a as T,b as se}from"./chunk-JPTSKROM.js";import{B as W,Da as X,Ga as Y,Ia as Z,P as K,a as P,db as ee,e as U,eb as te,fb as ie,gb as ne,hb as ae,ib as oe,jb as re,kb as le,lb as de,mb as pe,nb as me,pb as ce,ta as J,ua as I,va as Q,ya as N}from"./chunk-BLILFWNP.js";import{Db as M,Hb as _,Ia as R,Ib as c,Ka as d,Vb as p,Wb as F,Xb as B,ab as y,bc as h,cc as S,ea as j,ec as V,gb as L,hc as H,ja as x,jc as z,ka as C,pb as u,qb as f,qc as g,ra as A,rc as q,sc as O,tb as w,ub as D,uc as E,vb as m,vc as s,wb as n,xb as r,yb as b}from"./chunk-LVH4HSPS.js";var xe=e=>["../",e],ue=(e,t)=>t.id;function Ce(e,t){e&1&&(n(0,"h3",2),p(1,"Folders"),r())}function Me(e,t){if(e&1){let i=M();n(0,"a",7),_("click",function(){let o=x(i).$implicit,l=c();return C(l.navigateWithRouter()?{}:l.navigateTo.emit(o))}),n(1,"i",8),p(2,"folder"),r(),n(3,"span",9),p(4),r()()}if(e&2){let i=t.$implicit,a=c();m("routerLink",a.navigateWithRouter()?S(2,xe,i.id):null),d(4),F(i.filename)}}function Te(e,t){if(e&1&&b(0,"img",10),e&2){let i=c().$implicit;m("src",i.thumbnail,R)}}function ye(e,t){e&1&&(n(0,"div",11)(1,"i",13),p(2,"files"),r()())}function we(e,t){if(e&1&&(n(0,"button",5),u(1,Te,1,1,"img",10)(2,ye,3,0,"div",11),n(3,"div",12)(4,"i",8),p(5,"draft"),r(),n(6,"span",9),p(7),r()()()),e&2){let i=t.$implicit;d(),f(i.thumbnail!=null?1:2),d(6),F(i.filename)}}function De(e,t){e&1&&(n(0,"div",6)(1,"i",14),p(2,"document_search"),r(),n(3,"span",15),p(4,"No files here"),r()())}var fe=(()=>{let t=class t{constructor(){this.media=s.required(),this.navigateWithRouter=s.required(),this.navigateTo=E(),this.processed=g(()=>this.media().toSorted((a,o)=>a.filename<o.filename?-1:a.filename>o.filename?1:0)),this.folders=g(()=>this.processed().filter(a=>a.type==T.FOLDER)),this.files=g(()=>this.processed().filter(a=>a.type==T.FILE))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["demo-media-manager-grid"]],inputs:{media:[1,"media"],navigateWithRouter:[1,"navigateWithRouter"]},outputs:{navigateTo:"navigateTo"},decls:10,vars:2,consts:[[1,"flex","flex-col","gap-4"],[1,"grid","gap-4",2,"grid-template-columns","repeat(auto-fit, minmax(240px, 1fr))"],[1,"col-span-full"],["puiBaseButton","",1,"basis-[240px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","dark:bg-hover-dark","justify-start","py-3","px-6","gap-3",3,"routerLink"],[1,"pt-2","col-span-full"],["puiBaseButton","",1,"basis-[240px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","dark:bg-hover-dark","items-start","flex-col"],[1,"col-span-full","flex","flex-col","gap-6","justify-center","items-center","py-12"],["puiBaseButton","",1,"basis-[240px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","dark:bg-hover-dark","justify-start","py-3","px-6","gap-3",3,"click","routerLink"],[1,"icon-6","font-variation-fill","opacity-70"],[1,"truncate"],[1,"aspect-21/9","@screen-sm:aspect-video","w-full","object-cover","bg-hover","dark:bg-hover-dark",3,"src"],[1,"aspect-21/9","@screen-sm:aspect-video","w-full","bg-hover","dark:bg-hover-dark","flex","justify-center","items-center"],[1,"flex","flex-row","py-3","px-6","gap-3","items-center","w-full"],[1,"icon-12","font-variation-weight-bold","font-variation-fill","dark:text-primary-600"],[1,"icon-24","opacity-30"],[1,"text-xl","font-medium","opacity-30"]],template:function(o,l){o&1&&(n(0,"div",0)(1,"div",1),u(2,Ce,2,0,"h3",2),w(3,Me,5,4,"a",3,ue),n(5,"h3",4),p(6,"Files"),r(),w(7,we,8,2,"button",5,ue,!1,De,5,0,"div",6),r()()),o&2&&(d(2),f(l.folders().length>0?2:-1),d(),D(l.folders()),d(4),D(l.files()))},dependencies:[N,I,W],encapsulation:2});let e=t;return e})();var Se=()=>["thumbnail","filename"],Ee=()=>["thumbnail","filename","size"],ke=()=>["thumbnail","filename","size","createdAt"],_e=(e,t,i)=>({default:e,640:t,1280:i}),Re=()=>["64px","minmax(80px, 1fr)"],Le=()=>["64px","minmax(80px, 1fr)","minmax(80px, 1fr)"],Be=()=>["64px","minmax(80px, 1fr)","minmax(80px, 1fr)","minmax(80px, 1fr)"],We=e=>["../",e],Ie=(e,t)=>t.id;function Ne(e,t){if(e&1&&b(0,"img",9),e&2){let i=c(2).$implicit;m("src",i.thumbnail,R)}}function $e(e,t){e&1&&(n(0,"i",8),p(1,"draft"),r())}function Ve(e,t){if(e&1&&u(0,Ne,1,1,"img",9)(1,$e,2,0,"i",8),e&2){let i=c().$implicit;f(i.thumbnail!=null?0:1)}}function He(e,t){e&1&&(n(0,"i",8),p(1,"folder"),r())}function ze(e,t){if(e&1&&(n(0,"pui-table-cell",7),u(1,Ve,2,1)(2,He,2,0,"i",8),r()),e&2){let i=t.$implicit,a=c();d(),f(i.type==a.mediaType.FILE?1:2)}}function Ge(e,t){if(e&1&&(n(0,"pui-table-cell")(1,"span"),p(2),r()()),e&2){let i=t.$implicit;d(2),F(i.filename)}}function je(e,t){if(e&1&&(n(0,"span"),p(1),H(2,"number"),r()),e&2){let i=c().$implicit;d(),B("",z(2,1,i.sizeBytes/1024/1024,"1.0-0")," MB")}}function Ae(e,t){if(e&1&&(n(0,"span"),p(1),H(2,"number"),r()),e&2){let i=c().$implicit;d(),B("",z(2,1,i.sizeBytes/1024,"1.0-0")," KB")}}function qe(e,t){if(e&1&&(n(0,"span"),p(1),r()),e&2){let i=c().$implicit;d(),B("",i.sizeBytes," Bytes")}}function Oe(e,t){if(e&1&&(n(0,"pui-table-cell"),u(1,je,3,4,"span")(2,Ae,3,4,"span")(3,qe,2,1,"span"),r()),e&2){let i=t.$implicit;d(),f(i.sizeBytes>1048576?1:i.sizeBytes>1024?2:i.sizeBytes!=null?3:-1)}}function Pe(e,t){if(e&1&&(n(0,"pui-table-cell",10),b(1,"pui-time-display",11),r()),e&2){let i=t.$implicit;m("rightAligned",!0),d(),m("date",i.createdAt)("format","yyyy MMM dd, HH:mm")}}function Ue(e,t){e&1&&(n(0,"pui-table-header-cell"),p(1,"Name"),r())}function Ke(e,t){e&1&&(n(0,"pui-table-header-cell"),p(1,"Size"),r())}function Je(e,t){e&1&&(n(0,"pui-table-header-cell",10),p(1,"Date created"),r()),e&2&&m("rightAligned",!0)}function Qe(e,t){if(e&1){let i=M();n(0,"pui-table-row",12),_("rowClick",function(){let o=x(i).$implicit,l=c();return C(l.navigateWithRouter()?{}:l.navigateTo.emit(o))}),r()}if(e&2){let i=t.$implicit,a=c();m("item",i)("route",a.navigateWithRouter()?S(2,We,i.id):void 0)}}var ge=(()=>{let t=class t{constructor(){this.media=s.required(),this.navigateWithRouter=s.required(),this.navigateTo=E(),this.processed=g(()=>this.media().toSorted((a,o)=>a.filename<o.filename?-1:a.filename>o.filename?1:0).toSorted((a,o)=>a.type==o.type?0:a.type==T.FOLDER?-1:o.type==T.FOLDER?1:0)),this.folders=g(()=>this.processed().filter(a=>a.type==T.FOLDER)),this.files=g(()=>this.processed().filter(a=>a.type==T.FILE)),this.mediaType=T}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["demo-media-manager-list"]],inputs:{media:[1,"media"],navigateWithRouter:[1,"navigateWithRouter"]},outputs:{navigateTo:"navigateTo"},decls:12,vars:29,consts:[[3,"id","itemHeight","columns","columnWidths"],["class","p-0 justify-center",4,"puiTableCellDef","puiTableCellDefType"],[4,"puiTableCellDef","puiTableCellDefType"],[3,"rightAligned",4,"puiTableCellDef","puiTableCellDefType"],[4,"puiTableHeaderCellDef"],[3,"rightAligned",4,"puiTableHeaderCellDef"],["puiHoverable","",3,"item","route"],[1,"p-0","justify-center"],[1,"icon-8","font-variation-fill","opacity-70"],[1,"aspect-square","h-16","object-cover",3,"src"],[3,"rightAligned"],[3,"date","format"],["puiHoverable","",3,"rowClick","item","route"]],template:function(o,l){o&1&&(n(0,"pui-table",0),L(1,ze,3,1,"pui-table-cell",1)(2,Ge,3,1,"pui-table-cell",2)(3,Oe,4,1,"pui-table-cell",2)(4,Pe,2,3,"pui-table-cell",3)(5,Ue,2,0,"pui-table-header-cell",4)(6,Ke,2,0,"pui-table-header-cell",4)(7,Je,2,1,"pui-table-header-cell",5),n(8,"pui-table-body"),b(9,"pui-table-header-row"),w(10,Qe,1,4,"pui-table-row",6,Ie),r()()),o&2&&(m("id","media-manager-list")("itemHeight",64)("columns",V(18,_e,h(15,Se),h(16,Ee),h(17,ke)))("columnWidths",V(25,_e,h(22,Re),h(23,Le),h(24,Be))),d(),m("puiTableCellDef","thumbnail")("puiTableCellDefType",l.rowType),d(),m("puiTableCellDef","filename")("puiTableCellDefType",l.rowType),d(),m("puiTableCellDef","size")("puiTableCellDefType",l.rowType),d(),m("puiTableCellDef","createdAt")("puiTableCellDefType",l.rowType),d(),m("puiTableHeaderCellDef","filename"),d(),m("puiTableHeaderCellDef","size"),d(),m("puiTableHeaderCellDef","createdAt"),d(3),D(l.processed()))},dependencies:[ce,oe,re,me,pe,le,ne,de,ae,J,Z,U],encapsulation:2});let e=t;return e})();var Xe=e=>({"bg-hover dark:bg-hover-dark":e}),Ye=e=>["../",e],Ze=(e,t)=>t==null?null:t.id;function et(e,t){e&1&&(n(0,"i",13),p(1,"home"),r(),n(2,"span",14),p(3,"Home"),r())}function tt(e,t){if(e&1&&(n(0,"span",11),p(1),r()),e&2){let i=c().$implicit;d(),F(i.filename)}}function it(e,t){e&1&&(n(0,"i",12),p(1,"chevron_right"),r())}function nt(e,t){if(e&1){let i=M();n(0,"a",10),_("click",function(){let o=x(i).$implicit,l=c();return C(l.navigateTo.emit(o))}),u(1,et,4,0)(2,tt,2,1,"span",11),r(),u(3,it,2,0,"i",12)}if(e&2){let i=t.$implicit,a=t.$index,o=t.$count,l=c();m("ngClass",S(4,Xe,a===0))("routerLink",l.navigateWithRouter()?S(6,Ye,(i==null?null:i.id)??null):null),d(),f(i==null?1:2),d(2),f(a!==o-1?3:-1)}}function at(e,t){e&1&&(n(0,"div",15)(1,"i",16),p(2,"grid_view"),r()())}function ot(e,t){e&1&&(n(0,"div",17)(1,"i",18),p(2,"list"),r()())}var ve=(()=>{let t=class t{constructor(){this.parentFolders=s.required(),this.navigateWithRouter=s.required(),this.viewMode=s.required(),this.navigateTo=E(),this.viewModeChange=E()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["demo-media-manager-toolbar"]],inputs:{parentFolders:[1,"parentFolders"],navigateWithRouter:[1,"navigateWithRouter"],viewMode:[1,"viewMode"]},outputs:{navigateTo:"navigateTo",viewModeChange:"viewModeChange"},decls:15,vars:3,consts:[[1,"@container"],[1,"flex","flex-row","flex-wrap","@screen-sm:flex-nowrap","gap-x-3","gap-y-4"],[1,"overflow-x-auto","flex","items-center","basis-full"],[1,"flex","flex-row-reverse","items-center","gap-1","overflow-x-auto"],[1,"shrink","grow","basis-48","hidden","@screen-sm:block"],["puiBorderedButton","","puiTooltip","Sort by filename",1,"rounded-full","flex-row","px-4","gap-2","flex-none"],[1,"icon-4","font-variation-weight-light","rotate-180","-scale-x-100"],[1,"flex-none",3,"tabChange","currentTab"],["puiTooltip","Grid View",4,"puiTab"],["puiTooltip","List View",4,"puiTab"],["puiBaseButton","",1,"rounded-1","px-4","py-2","@screen-sm:px-2","gap-2","items-center","flex-none","rounded-aaa",3,"click","ngClass","routerLink"],[1,"text-base/none"],[1,"icon-4","font-variation-weight-bold","dark:text-primary-50"],[1,"icon-4","font-variation-fill"],[1,"font-medium","text-base/none","pt-px"],["puiTooltip","Grid View"],[1,"icon-5","font-variation-weight-light"],["puiTooltip","List View"],[1,"icon-5","font-variation-weight-bold"]],template:function(o,l){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),w(4,nt,4,8,null,null,Ze),r()(),b(6,"div",4),n(7,"button",5)(8,"i",6),p(9,"sort"),r(),n(10,"span"),p(11,"Filename"),r()(),n(12,"pui-tab-bar",7),_("tabChange",function(v){return l.viewModeChange.emit(v)}),L(13,at,3,0,"div",8)(14,ot,3,0,"div",9),r()()()),o&2&&(d(4),D(l.parentFolders()),d(8),m("currentTab",l.viewMode()),d(),m("puiTab","grid"),d(),m("puiTab","list"))},dependencies:[ie,te,ee,X,N,I,Q,W,P],styles:[`[_nghost-%COMP%]     pui-tab-bar .pui-tab-bar-tabs{background:#bfbfbf0d;box-shadow:inset #ffffff08 0 0 4px,#0000001a 4px 2px 3px}

`]});let e=t;return e})();var be=()=>[];function rt(e,t){if(e&1){let i=M();n(0,"demo-media-manager-grid",3),_("navigateTo",function(o){x(i);let l=c();return C(l.onNavigateTo(o))}),r()}if(e&2){let i=c();m("media",i.children()??h(2,be))("navigateWithRouter",i.navigateWithRouter())}}function lt(e,t){if(e&1){let i=M();n(0,"demo-media-manager-list",3),_("navigateTo",function(o){x(i);let l=c();return C(l.onNavigateTo(o))}),r()}if(e&2){let i=c();m("media",i.children()??h(2,be))("navigateWithRouter",i.navigateWithRouter())}}var Nt=(()=>{let t=class t{constructor(){this.dataService=j(se),this.folderId=s(),this.currentFolderId=O(this.folderId),this.navigateWithRouter=s(!0),this.viewMode=A("grid"),this.allMedia=K(this.dataService.getList()),this.children=g(()=>this.allMedia()?.filter(a=>a.belongsInFolderId==this.currentFolderId())),this.parentFolders=g(()=>{let a=this.currentFolderId(),o=this.allMedia();if(o==null)return[];let l=o.find($=>$.id==a)??null,k=l?.belongsInFolderId??null,v=[];do{if(v=v.toSpliced(v.length,0,l??null),l==null)break;l=o.find($=>$.id==k)??null,k=l?.belongsInFolderId??null}while(!0);return v}),q(()=>{this.currentFolderId.set(this.folderId()??null)})}onNavigateTo(a){this.currentFolderId.set(a?.id??null)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["demo-media-manager-folder"]],inputs:{folderId:[1,"folderId"],navigateWithRouter:[1,"navigateWithRouter"]},decls:5,vars:4,consts:[[1,"flex","flex-col","gap-4"],[3,"navigateTo","viewModeChange","parentFolders","navigateWithRouter","viewMode"],[3,"media","navigateWithRouter"],[3,"navigateTo","media","navigateWithRouter"]],template:function(o,l){o&1&&(n(0,"div",0)(1,"demo-media-manager-toolbar",1),_("navigateTo",function(v){return l.onNavigateTo(v)})("viewModeChange",function(v){return l.viewMode.set(v)}),r(),b(2,"pui-divider"),u(3,rt,1,3,"demo-media-manager-grid",2)(4,lt,1,3,"demo-media-manager-list",2),r()),o&2&&(d(),m("parentFolders",l.parentFolders())("navigateWithRouter",l.navigateWithRouter())("viewMode",l.viewMode()),d(2),f(l.viewMode()=="grid"?3:4))},dependencies:[ve,Y,fe,ge],encapsulation:2});let e=t;return e})();export{Nt as a};
