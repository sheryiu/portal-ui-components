import{a as z,c as ke}from"./chunk-4PRL4S3N.js";import{a as c}from"./chunk-ZQIFEHJN.js";import"./chunk-RXBWEWB3.js";import{a as Ce,b as xe,c as M,d as B,e as _,g as L,h as Se,i as be,j as Ee,l as W,m as U,n as De,o as H,p as q}from"./chunk-AQHYJBKH.js";import{a as Ie}from"./chunk-5KUQE4MU.js";import{$ as ae,A as p,B as N,Ea as m,Ga as O,Hb as ce,Ia as P,O as d,R as l,T as ee,Ub as ue,V as S,W as te,Wb as fe,Y as ie,Yb as he,Z as ne,_ as re,_b as V,aa as o,ab as j,ba as a,bb as de,ca as u,db as pe,dc as ye,eb as me,f as C,fc as ge,ga as se,ja as oe,ka as s,la as g,ma as b,na as T,nb as f,pa as le,qa as F,sa as K,t as G,ta as J,vc as ve,w as Z,x as y}from"./chunk-GUQJNJBT.js";import{a as R}from"./chunk-EQDQRRRY.js";var we=(()=>{let t=class t{constructor(){this.dataService=p(c),this.list=f(this.dataService.getList()),this.id=l(void 0),this.index=l(void 0),this.data=l(void 0),this.fieldConfiguration=l({type:"object",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=m(()=>this.isDirty()?B:M),O(()=>{this.data.set(structuredClone(this.list()?.find(e=>e.id==this.id())?.savedAddresses.at(Number(this.index()))))},{allowSignalWrites:!0})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(r=>e.isDirty??r)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,r){switch(e){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(n=>n.id==this.id())?.savedAddresses.at(Number(this.index())))),this.updateState({isDirty:!1});break}case"save":{let n=this.updatedValue();n&&(this.dataService.updateAddress(this.id(),Number(this.index()),n),this.updateState({isDirty:!1}));break}}}onParamsChange(e,r){this.id.set(e.id),this.index.set(e.index)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac});let i=t;return i})();var Oe=i=>["./",i],Pe=i=>({"border-primary-300 dark:border-primary-700 bg-hover":i});function je(i,t){if(i&1&&(o(0,"a",4,0)(2,"div",5)(3,"span",6),s(4),a(),o(5,"span",6),s(6),a(),o(7,"span",7),s(8),a()()()),i&2){let h=t.$implicit,e=t.$index,r=oe(1);S("routerLink",K(6,Oe,e))("ngClass",K(8,Pe,r.isActive)),d(4),b(" ",h.line1," "),d(2),b(" ",h.line2," "),d(2),T("",h.city,", ",h.state,"")}}var Ae=(()=>{let t=class t{constructor(){this.dataService=p(c),this.route=p(j),this.list=f(this.dataService.getList()),this.id=f(this.route.params.pipe(C(e=>e.id))),this.data=m(()=>this.list()?.find(e=>e.id==this.id())?.savedAddresses??[])}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=N({type:t,selectors:[["demo-customer-address"]],hostAttrs:[1,"contents"],standalone:!0,features:[F],decls:6,vars:0,consts:[["active","routerLinkActive"],[1,"flex","flex-row","gap-8","grow"],[1,"pui-card","rounded-4","basis-80","shrink-0","grow-0","p-4","h-fit","max-h-[calc(100svh_-_8.5rem)]","overflow-y-auto","sticky","top-26"],[1,"flex","flex-col","gap-4"],["routerLinkActive","","puiHoverable","",1,"rounded-3","pui-card--subtle","border","p-4","text-start","justify-start",3,"routerLink","ngClass"],[1,"flex","flex-col"],[1,"text-base","truncate"],[1,"text-sm","truncate","font-medium","text-neutral-800","dark:text-neutral-200"]],template:function(r,n){r&1&&(o(0,"div",1)(1,"div",2)(2,"div",3),re(3,je,9,10,"a",4,ne),a()(),u(5,"router-outlet"),a()),r&2&&(d(3),ae(n.data()))},dependencies:[ve,ue,pe,me,P,de]});let i=t;return i})();var Y=(()=>{let t=class t{constructor(){this.dataService=p(c),this.list=f(this.dataService.getList()),this.id=l(""),this.heading=m(()=>this.list()?.find(e=>e.id==this.id())?.name??"--"),this.tabs=l([{label:"Info",route:["info"]},{label:"Addresses",route:["address"]},{label:"Raw",route:["raw"]}]),this.routeToFullContent=m(()=>["../","customer",{outlets:{primary:["detail",this.id()],peek:null}}])}onParamsChange(e,r){this.id.set(e.id)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac});let i=t;return i})();var Te=(()=>{let t=class t{constructor(){this.dataService=p(c),this.list=f(this.dataService.getList()),this.id=l(void 0),this.data=l(void 0),this.fieldConfiguration=l({type:"object",properties:{name:{type:"string",description:"Name"},username:{type:"string",description:"Username"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},address:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}},savedAddresses:{type:"array",description:"Saved Address",items:{type:"object",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}},registeredSince:{type:"date-time",description:"Registered Since"}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=m(()=>this.isDirty()?B:M),O(()=>{this.data.set(structuredClone(this.list()?.find(e=>e.id==this.id())))},{allowSignalWrites:!0})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(r=>e.isDirty??r)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,r){switch(e){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(n=>n.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let n=this.updatedValue();n&&(this.dataService.save(n),this.updateState({isDirty:!1}));break}}}onParamsChange(e,r){this.id.set(e.id)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac});let i=t;return i})();var Ve=(i,t)=>({"bg-emerald-300 dark:bg-emerald-800":i,"border-emerald-300/70 dark:border-emerald-800/70":t}),Me=(i,t)=>({"bg-amber-300 dark:bg-amber-800":i,"border-amber-300/70 dark:border-amber-800/70":t});function Be(i,t){if(i&1&&(o(0,"span",28),s(1),a(),o(2,"span",28),s(3),a(),o(4,"span",28),s(5),a(),o(6,"span",28),s(7),a()),i&2){let h,e,r,n,v=se();d(),g((h=v.customer())==null||h.address==null?null:h.address.line1),d(2),g((e=v.customer())==null||e.address==null?null:e.address.line2),d(2),T("",(r=v.customer())==null||r.address==null?null:r.address.city,", ",(r=v.customer())==null||r.address==null?null:r.address.state,""),d(2),T("",(n=v.customer())==null||n.address==null?null:n.address.country," ",(n=v.customer())==null||n.address==null?null:n.address.postalCode,"")}}function We(i,t){i&1&&(o(0,"span",28),s(1,"----"),a())}var _e=(()=>{let t=class t{constructor(){this.dataService=p(c),this.inventoryItemService=p(ke),this.route=p(j),this.list=f(this.dataService.getList()),this.id=f(this.route.params.pipe(C(e=>e.id))),this.allInventoryItems=f(this.inventoryItemService.getList()),this.customer=m(()=>this.list()?.find(e=>e.id==this.id())),this.inventoryItems=m(()=>this.allInventoryItems()?.filter(e=>e.belongsTo==this.customer()?.id)??[]),this.awaitingPaymentsCount=m(()=>this.inventoryItems()?.filter(e=>e.status==z.OPEN).length),this.repackageCount=m(()=>this.inventoryItems()?.filter(e=>e.status==z.REPACKAGING).length),this.data=m(()=>this.inventoryItems().slice(0,5)),this.columnsConfig=l([{key:"netWeight",label:"Net Weight (g)",fieldConfiguration:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",fieldConfiguration:{type:"number"}},{key:"isContainFragile",label:"Fragile",fieldConfiguration:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l({default:["netWeight","status"],768:["netWeight","status","arrivedAt"],1280:["netWeight","grossWeight","isContainFragile","status","arrivedAt"]}),this.controlsConfig=l([])}routeToDetail(e){return["/","inventory","item","detail",e.id]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=N({type:t,selectors:[["demo-customer-info"]],hostAttrs:[1,"contents"],standalone:!0,features:[le([{provide:W,useExisting:Z(()=>t)}]),F],decls:95,vars:23,consts:[[1,"@container","grow"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"pui-card","rounded-4","p-8","overflow-hidden","@screen-md:col-span-2"],[1,"flex","flex-col","sm:flex-row","gap-4","items-stretch","h-full","overflow-x-auto"],[1,"rounded-3","flex-1","border","dark:bg-blue-800","flex","flex-col","p-4","transition-colors"],[1,"dark:text-blue-200"],[1,"spacer"],[1,"text-2xl","font-bold","self-end","text-end","tabular-nums"],[1,"rounded-3","flex-1","border","dark:bg-emerald-800","flex","flex-col","p-4","transition-colors",3,"ngClass"],[1,"dark:text-emerald-200"],[1,"rounded-3","flex-1","border","flex","flex-col","p-4","transition-colors",3,"ngClass"],[1,"text-amber-700","dark:text-amber-200"],[1,"pui-card","rounded-4","p-8","overflow-hidden"],[1,"flex","flex-col","items-center","gap-2"],[1,"p-4","rounded-full","bg-neutral-500","shadow-md","shadow-neutral-500","transition-colors"],[1,"icon-10","font-variation-fill"],[1,"w-full","text-center","break-anywhere","whitespace-normal"],[1,"text-sm","text-center","text-neutral-800","dark:text-neutral-200","before:content-['#']"],[1,"text-base","text-center"],[3,"date","format"],[1,"pui-card","rounded-4","p-8","overflow-hidden","@screen-md:col-span-2","flex","flex-col"],[1,"flex","flex-row","justify-end","items-center"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2"],[1,"flex","flex-col","pt-6","gap-4"],[1,"flex","flex-row","items-center","gap-2"],[1,"icon-6","font-variation-weight-light","text-neutral-800","dark:text-neutral-200"],[1,"flex","flex-col","gap-1"],[1,"text-sm","text-neutral-800","dark:text-neutral-200"],[1,"text-base"],[1,"text-base","break-anywhere"]],template:function(r,n){if(r&1&&(o(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),s(6,"Completed"),u(7,"br"),s(8,"Sales"),a(),u(9,"div",6),o(10,"span",7),s(11,"$2,000"),a()(),o(12,"div",8)(13,"h3",9),s(14,"Awaiting"),u(15,"br"),s(16,"Payments"),a(),u(17,"div",6),o(18,"span",7),s(19),a()(),o(20,"div",10)(21,"h3",11),s(22," Repackage"),u(23,"br"),s(24,"Requests "),a(),u(25,"div",6),o(26,"span",7),s(27),a()()()(),o(28,"div",12)(29,"div",13)(30,"div",14)(31,"i",15),s(32),a()(),o(33,"h2",16),s(34),a(),o(35,"span",17),s(36),a(),o(37,"span",18),s(38,"Joined since "),u(39,"pui-time-display",19),a()()(),o(40,"div",20)(41,"h3"),s(42,"Recent Inventory"),a(),u(43,"pui-table-content"),o(44,"div",21)(45,"button",22),s(46),a()()(),o(47,"div",12)(48,"h3"),s(49,"Detailed information"),a(),o(50,"div",23)(51,"div",24)(52,"i",25),s(53,"person"),a(),o(54,"div",26)(55,"span",27),s(56,"Fullname"),a(),o(57,"span",28),s(58),a()()(),u(59,"pui-divider"),o(60,"div",24)(61,"i",25),s(62,"person"),a(),o(63,"div",26)(64,"span",27),s(65,"Username"),a(),o(66,"span",29),s(67),a()()(),u(68,"pui-divider"),o(69,"div",24)(70,"i",25),s(71,"phone"),a(),o(72,"div",26)(73,"span",27),s(74,"Phone number"),a(),o(75,"span",29),s(76),a()()(),u(77,"pui-divider"),o(78,"div",24)(79,"i",25),s(80,"email"),a(),o(81,"div",26)(82,"span",27),s(83,"Email address"),a(),o(84,"span",29),s(85),a()()(),u(86,"pui-divider"),o(87,"div",24)(88,"i",25),s(89,"location_on"),a(),o(90,"div",26)(91,"span",27),s(92,"Main address"),a(),ee(93,Be,8,6)(94,We,2,0,"span",28),a()()()()()()),r&2){let v,$,E,D,Q,I,k,w,A,X;d(12),S("ngClass",J(17,Ve,n.awaitingPaymentsCount()>0,n.awaitingPaymentsCount()==0)),d(7),g(n.awaitingPaymentsCount()),d(),S("ngClass",J(20,Me,n.repackageCount()>0,n.repackageCount()==0)),d(7),g(n.repackageCount()),d(3),te("--color-neutral-500",(v=n.customer())==null||v.profile==null?null:v.profile.color),d(2),g(($=n.customer())==null||$.profile==null?null:$.profile.icon),d(2),b(" ",(E=(E=n.customer())==null?null:E.username)!==null&&E!==void 0?E:"---"," "),d(2),g((D=(D=n.customer())==null?null:D.id)!==null&&D!==void 0?D:"----"),d(3),S("date",(Q=n.customer())==null?null:Q.registeredSince)("format","dd MMM yyyy"),d(7),b(" View all (",n.inventoryItems().length,") "),d(12),g((I=(I=n.customer())==null?null:I.name)!==null&&I!==void 0?I:"----"),d(9),g((k=(k=n.customer())==null?null:k.username)!==null&&k!==void 0?k:"----"),d(9),g((w=(w=n.customer())==null?null:w.phone)!==null&&w!==void 0?w:"----"),d(9),g((A=(A=n.customer())==null?null:A.email)!==null&&A!==void 0?A:"----"),d(8),ie((X=n.customer())!=null&&X.address?93:94)}},dependencies:[ge,ye,U,he,fe,P],styles:["demo-customer-info .pui-table-content main{background-color:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);-webkit-backdrop-filter:none;backdrop-filter:none;padding-left:0;padding-right:0}"]});let i=t;return i})();var Le=(()=>{let t=class t{constructor(){this.heading=l("Customers"),this.tabs=l([])}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac});let i=t;return i})();var Re=(()=>{let t=class t{constructor(){this.dataService=p(c),this.configuration={content:L},this.data=l(null),this.fieldConfiguration=l({type:"object",properties:{name:{type:"string",description:"Name"},username:{type:"string",description:"Username"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},address:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}},savedAddresses:{type:"array",description:"Saved Addresses",items:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}},registeredSince:{type:"date-time",description:"Registered Since"}}}),this.controlsConfig=l([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=l(void 0),this.heading=l("Add Customer")}registerUpdateState(e){this.updateState=e,this.updateState({isDirty:!0})}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,r){switch(e){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let n=this.updatedValue();n&&(n=Object.assign(n,{id:Ie.string.nanoid()}),this.dataService.add(n),this.overlayRef.close());break}}}onActionDrawerInit(e){this.overlayRef=e}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac});let i=t;return i})();var Ne=(()=>{let t=class t{constructor(){this.dataService=p(c),this.actionDrawer=p(xe),this.screenWidth=p(ce),this.rawData=f(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=m(()=>(this.rawData()??[]).filter(this.filterFn()).toSorted(this.sortFn())),this.columnsConfig=l([{key:"name",label:"Name"},{key:"username",label:"Username"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"line2",path:"address.line2",label:"Address (Line 2)"},{key:"registeredSince",label:"Registered",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l({default:["name","phone"],768:["name","email","phone","registeredSince"],1536:["name","username","email","phone","line2","registeredSince"]}),this.filterConfig=l({type:"object",properties:{name:{type:"string",description:"Name"},id:{type:"string",description:"ID"}}}),this.filterValue=l({}),this.sortFn=m(()=>Ee(this.columnsConfig())),this.filterFn=m(()=>be(this.filterValue(),{id:(e,r,n)=>!!n&&e.id.toLowerCase().includes(n.toLowerCase()),name:(e,r,n)=>!!n&&(e.username.toLowerCase().includes(n.toLowerCase())||e.name.toLowerCase().includes(n.toLowerCase()))}))}routeToDetail(e){return this.screenWidth.above().sm()?["../","customer",{outlets:{peek:[e.id]}}]:["../","customer","detail",e.id]}onHeaderCellClick(e,r){this.columnsConfig.update(n=>De(n,e))}onFilterChange(e){this.filterValue.set(e)}onControlClick(e,r){switch(e){case"add":{this.actionDrawer.open(Re,{providers:[{provide:_,useExisting:Ce}]});break}}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac});let i=t;return i})();var Fe=[{path:"info",component:_e},{path:"address",component:Ae,children:[{path:":index",component:L,providers:[{provide:_,useClass:we}]}]},{path:"raw",component:L,providers:[{provide:_,useClass:Te}]},{path:"**",redirectTo:"info"}],ni=[{path:"",data:R({},V({title:"Customer"})),children:[{path:"detail/:id",component:q,data:R({},V({deps:[c],titleFn:(i,t)=>i.params.pipe(G(h=>t.getList().pipe(C(e=>e.find(r=>r.id==h.id)?.name??"--"))))})),providers:[{provide:H,useClass:Y}],children:Fe},{path:"",component:q,providers:[{provide:H,useClass:Le},{provide:Se,useClass:Y}],children:[{path:":id",outlet:"peek",component:q,data:R({},V({deps:[c],titleFn:(i,t)=>i.params.pipe(G(h=>t.getList().pipe(C(e=>e.find(r=>r.id==h.id)?.name??"--"))))})),providers:[{provide:H,useClass:Y}],children:Fe},{path:"",component:U,providers:[{provide:W,useClass:Ne}]}]}]}];export{ni as ROUTES};
