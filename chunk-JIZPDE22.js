import{$a as Dt,A as J,Aa as we,B as Q,C as ge,Ca as q,Fa as Z,Ga as ke,Ja as Ee,K as Te,Ka as vt,Ma as Fe,N as x,Na as Ae,O as Ze,P as X,R as ye,S as et,T as tt,U as it,V as nt,Va as gt,W as ot,Wa as Tt,X as xe,Xa as yt,_a as xt,a as Ye,aa as at,ab as St,b as me,bb as wt,c as Je,cb as kt,d as fe,da as rt,db as Et,ea as lt,eb as Ft,fb as At,gb as Vt,h as Qe,hb as $t,ib as Pt,ja as De,jb as Ot,kb as Rt,na as st,o as Ce,oa as ct,p as he,pa as dt,qa as pt,r as U,ra as ut,s as G,sa as _t,t as be,ta as mt,ua as ft,va as Ct,wa as ht,x as ve,xa as bt,y as Xe,ya as Se,z as W}from"./chunk-UIIDQSBO.js";import{$ as oe,Ab as D,Bb as S,C as Y,Cb as l,Da as F,Db as d,Eb as h,Fb as L,Gb as y,H as ne,Ha as je,Jb as b,Kb as s,Lb as We,Mb as se,Q as Be,Ra as c,Ub as ce,V as Ne,Vb as C,Wb as v,Zb as de,ac as pe,bc as H,ca as I,cc as w,dc as ue,f as Re,fa as u,fb as A,hb as He,hc as V,jc as z,kc as _e,lc as qe,mb as _,oa as g,pa as T,q as M,r as j,sa as ae,sc as Ke,ta as re,ub as ze,uc as m,vb as p,wb as le,wc as B,x as Ie,xb as Ue,xc as $,ya as Me,yb as f,z as Le,za as E,zb as Ge}from"./chunk-RLC3TLQJ.js";import{a as k,b as R}from"./chunk-EQDQRRRY.js";var ie=(t,o)=>o.id,Ht=(t,o)=>({"pui-action-drawer-layout__toolbar__most-emphasized":t,"pui-action-drawer-layout__toolbar__normal":o});function zt(t,o){if(t&1&&L(0,3),t&2){let e=s();p("ngComponentOutlet",e.configuration.content)("ngComponentOutletInputs",e.contentInputs())}}function Ut(t,o){if(t&1&&(l(0,"i"),C(1),d()),t&2){let e=s().$implicit;c(),v(e.icon)}}function Gt(t,o){if(t&1&&L(0,7),t&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Wt(t,o){if(t&1){let e=y();l(0,"button",6),b("click",function(n){let a=g(e).$implicit,r=s();return T(r.layoutService.controlOnClick(a.id,n))}),_(1,Ut,2,1,"i")(2,Gt,1,1,"ng-container",7),l(3,"span"),C(4),d()()}if(t&2){let e=o.$implicit,i=s();p("ngClass",ue(7,Ht,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled)("puiTooltip",e.label)("puiTooltipPosition","top"),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),v(e.label)}}var Ve=(t,o)=>o.key,ee=t=>({enum:t}),qt=t=>({format:t}),Kt=t=>({"date-time":t}),It=()=>({});function Yt(t,o){if(t&1&&h(0,"pui-field-def",2),t&2){let e,i=o.$implicit;p("key",i.key)("fieldType",i.fieldConfiguration.type)("label",(e=i.fieldConfiguration.description)!==null&&e!==void 0?e:i.key)("fieldConfig",i.fieldConfiguration.type=="string"?w(4,ee,i.fieldConfiguration.enum):i.fieldConfiguration.type=="number"?w(6,ee,i.fieldConfiguration.enum):i.fieldConfiguration.type=="date-time"?w(10,Kt,w(8,qt,i.fieldConfiguration.format)):H(12,It))}}function Jt(t,o){if(t&1&&(l(0,"form")(1,"pui-fieldset",1),D(2,Yt,1,13,"pui-field-def",2,Ve),d()()),t&2){let e=s();c(),p("formControl",e.formControl),c(),S(e.flattenedControls())}}function Qt(t,o){if(t&1){let e=y();l(0,"pui-layout-control",3),b("click",function(n){let a=g(e).$implicit,r=s();return T(r.onControlClick(a.id,n))}),d()}if(t&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var Lt=()=>[],Xt=t=>({peek:t}),Zt=t=>({outlets:t}),ei=t=>[t];function ti(t,o){if(t&1&&(l(0,"a",1)(1,"i"),C(2,"open_in_full"),d()()),t&2){let e=s();p("routerLink",e.routeToFullContent())}}var ii=[[["",8,"pui-root-sidenav__header__logo"]],[["",8,"pui-root-sidenav__nav"]]],ni=[".pui-root-sidenav__header__logo",".pui-root-sidenav__nav"];function oi(t,o){if(t&1&&h(0,"pui-field-def",5),t&2){let e,i=o.$implicit;p("key",i.key)("fieldType",i.fieldConfiguration.type)("label",(e=i.fieldConfiguration.description)!==null&&e!==void 0?e:i.key)("fieldConfig",i.fieldConfiguration.type=="string"?w(5,ee,i.fieldConfiguration.enum):i.fieldConfiguration.type=="number"?w(7,ee,i.fieldConfiguration.enum):H(9,It))("isNullable",!1)}}function ai(t,o){if(t&1){let e=y();l(0,"pui-fieldset",4),b("valueChange",function(n){g(e);let a=s();return T(a.onFilterValueChange(n))}),D(1,oi,1,10,"pui-field-def",5,Ve),d()}if(t&2){let e=s();p("formControl",e.filterFormControl),c(),S(e.flattenFilterDef())}}function ri(t,o){if(t&1&&h(0,"pui-loading-panel"),t&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())}}function li(t,o){if(t&1){let e=y();l(0,"pui-table-header-cell",9),b("cellClick",function(n){g(e);let a=s().$implicit,r=s(2);return T(r.onHeaderClick(a.key,n))}),C(1),d()}if(t&2){let e,i,n,a,r=s().$implicit;p("centerAligned",(e=r.isAlignCenter)!==null&&e!==void 0?e:!1)("rightAligned",(i=r.isAlignEnd)!==null&&i!==void 0?i:!1)("sortedAsc",(n=r.isSortedAsc)!==null&&n!==void 0?n:!1)("sortedDesc",(a=r.isSortedDesc)!==null&&a!==void 0?a:!1),c(),v(r.label)}}function si(t,o){t&1&&C(0," \xA0ago ")}function ci(t,o){if(t&1&&(l(0,"pui-time-display",12),V(1,"lodashGet"),l(2,"span"),C(3,"--"),d()(),_(4,si,1,0)),t&2){let e,i=s(2).$implicit,n=s().$implicit;p("mode",n.fieldConfiguration.format=="timeAgo"?"timeAgo":"normal")("format",n.fieldConfiguration.format)("date",z(1,4,i,(e=n.path)!==null&&e!==void 0?e:n.key)),c(4),f(n.fieldConfiguration.format=="timeAgo"?4:-1)}}function di(t,o){if(t&1&&(de(0),V(1,"lodashGet"),l(2,"i",13),C(3),d()),t&2){let e,i=s(2).$implicit,n=s().$implicit,a=z(1,3,i,(e=n.path)!==null&&e!==void 0?e:n.key);c(2),Ue("pui-table-cell__boolean-content--true",a===!0),c(),v(a===!0?"check":a===!1?"close":"")}}function pi(t,o){if(t&1&&(l(0,"span"),C(1),V(2,"lodashGet"),d()),t&2){let e,i=s(2).$implicit,n=s().$implicit;c(),v(z(2,1,i,(e=n.path)!==null&&e!==void 0?e:n.key))}}function ui(t,o){if(t&1&&_(0,ci,5,7)(1,di,4,6,"i",11)(2,pi,3,4,"span"),t&2){let e,i=s(2).$implicit;f((e=i.fieldConfiguration.type)==="date-time"?0:e==="boolean"?1:2)}}function _i(t,o){if(t&1&&(l(0,"span"),C(1),V(2,"lodashGet"),d()),t&2){let e,i=s().$implicit,n=s().$implicit;c(),v(z(2,1,i,(e=n.path)!==null&&e!==void 0?e:n.key))}}function mi(t,o){if(t&1&&(l(0,"pui-table-cell",10),_(1,ui,3,1)(2,_i,3,4,"span"),d()),t&2){let e,i,n=s().$implicit;p("centerAligned",(e=n.isAlignCenter)!==null&&e!==void 0?e:!1)("rightAligned",(i=n.isAlignEnd)!==null&&i!==void 0?i:!1),c(),f(n.fieldConfiguration?1:2)}}function fi(t,o){if(t&1&&_(0,li,2,5,"pui-table-header-cell",7)(1,mi,3,3,"pui-table-cell",8),t&2){let e=o.$implicit;p("puiTableHeaderCellDef",e.key),c(),p("puiTableCellDef",e.key)}}function Ci(t,o){if(t&1){let e=y();l(0,"pui-table-row",17),V(1,"isInSet"),b("click",function(){let n=g(e).$implicit,a=s(4);return T(a.onRowClick(n))}),d()}if(t&2){let e=o.$implicit,i=s(4);le("height",48,"px"),p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",_e(1,5,e,i.selectedItems(),i.cmpFn))}}function hi(t,o){if(t&1&&(l(0,"cdk-virtual-scroll-viewport",15),_(1,Ci,2,9,"pui-table-row",16),d()),t&2){let e=s(3);le("height",e.data().length*48,"px"),c(),p("cdkVirtualForOf",e.data())("cdkVirtualForTrackBy",e.trackingFn)("cdkVirtualForTemplateCacheSize",0)}}function bi(t,o){if(t&1&&_(0,hi,2,5,"cdk-virtual-scroll-viewport",14),t&2){let e=s(2);f(e.isBrowser?0:-1)}}function vi(t,o){if(t&1){let e=y();l(0,"pui-table-row",17),V(1,"isInSet"),b("click",function(){let n=g(e).$implicit,a=s(3);return T(a.onRowClick(n))}),d()}if(t&2){let e=o.$implicit,i=s(3);p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",_e(1,3,e,i.selectedItems(),i.cmpFn))}}function gi(t,o){if(t&1&&D(0,vi,2,7,"pui-table-row",18,Ge),t&2){let e=s(2);S(e.data())}}function Ti(t,o){if(t&1){let e=y();l(0,"pui-table",2),D(1,fi,2,2,null,null,Ve),l(3,"pui-table-body")(4,"div",6),b("skippedChanged",function(n){g(e);let a=s();return T(a.scrolledToTop.set(!n))}),d(),h(5,"pui-table-header-row"),_(6,bi,1,1)(7,gi,2,0),l(8,"div",6),b("skippedChanged",function(n){g(e);let a=s();return T(a.scrolledToBottom.set(!n))}),d()()()}if(t&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())("id",e.configuration==null?null:e.configuration.id)("itemHeight",48)("columns",e.columnsToDisplay())("columnWidths",H(8,Lt))("selectionMode",e.selectionMode()),c(),S(e.columnConfig()),c(5),f(e.configuration!=null&&e.configuration.useVirtualScroll?6:7)}}function yi(t,o){if(t&1){let e=y();l(0,"pui-layout-control",19),b("click",function(n){let a=g(e).$implicit,r=s();return T(r.onControlClick(a.id,n))}),d()}if(t&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var xi=(t,o)=>o.label,Di=(t,o)=>({"pui-vertical-layout__toolbar__most-emphasized":t,"pui-vertical-layout__toolbar__normal":o});function Si(t,o){if(t&1&&(l(0,"header",4)(1,"div",3),h(2,"pui-breadcrumbs"),l(3,"h1"),C(4),d()(),L(5,6),d()),t&2){let e=s(),i=ce(12);p("@floatingHeader",void 0),c(4),v(e.heading()),c(),p("ngTemplateOutlet",i)}}function wi(t,o){if(t&1&&(l(0,"a",10),C(1),d()),t&2){let e=s().$implicit;p("routerLink",e.route),c(),v(e.label)}}function ki(t,o){if(t&1&&_(0,wi,2,2,"a",11),t&2){let e,i=o.$implicit;p("puiTab",i.label)("puiTabHidden",(e=i.hidden)!==null&&e!==void 0?e:!1)}}function Ei(t,o){if(t&1){let e=y();l(0,"pui-tab-bar",9),b("tabChange",function(n){g(e);let a=s(2);return T(a.onTabChanged(n))}),D(1,ki,1,2,"a",10,xi),d()}if(t&2){let e=s(2);p("currentTab",e.activeTab()),c(),S(e.tabs())}}function Fi(t,o){t&1&&h(0,"div",8)}function Ai(t,o){if(t&1&&(l(0,"header",5),_(1,Ei,3,1,"pui-tab-bar",7)(2,Fi,1,0,"div",8),L(3,6),d()),t&2){let e=s(),i=ce(12);c(),f(e.tabs().length>0?1:-1),c(),f(e.controls().length>0?2:-1),c(),p("ngTemplateOutlet",i)}}function Vi(t,o){if(t&1&&(l(0,"i"),C(1),d()),t&2){let e=s().$implicit;c(),v(e.icon)}}function $i(t,o){if(t&1&&L(0,6),t&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Pi(t,o){if(t&1){let e=y();l(0,"button",14),b("click",function(n){let a=g(e).$implicit,r=s(3);return T(r.layoutService.controlOnClick(a.id,n))}),_(1,Vi,2,1,"i")(2,$i,1,1,"ng-container",6),l(3,"span"),C(4),d()()}if(t&2){let e,i=o.$implicit,n=s(3);p("color",(e=i.color)!==null&&e!==void 0?e:"accent")("ngClass",ue(7,Di,i.id==n.mostEmphasizedControlId(),i.id!=n.mostEmphasizedControlId()&&(i.icon||i.iconTemplateRef)))("puiTooltip",i.label)("disabled",i.isDisabled)("hoverableEnabled",!i.isDisabled),c(),f(i.icon?1:i.iconTemplateRef?2:-1),c(3),v(i.label)}}function Oi(t,o){if(t&1&&(l(0,"div",12),D(1,Pi,5,10,"button",13,ie),d()),t&2){let e=s(2);c(),S(e.controls())}}function Ri(t,o){if(t&1&&_(0,Oi,3,0,"div",12),t&2){let e=s();f(e.controls().length>0?0:-1)}}var K=(()=>{class t{constructor(){this._controls=F([]),this.controls=m(()=>this._controls().toSorted((e,i)=>(e.weight??0)-(i.weight??0))),this.mostEmphasizedControlId=m(()=>this.controls().filter(e=>!e.mode||e.mode=="auto").at(-1)?.id),this.eventsMap={}}registerControl(e,i){return this._controls.update(n=>[...n,k({},e)]),this.eventsMap[e.id]=i,{update:n=>{this._controls.update(a=>a.map(r=>r.id==n.id?k(k({},r),n):r))},dispose:()=>{this._controls.update(n=>n.filter(a=>a.id!=e.id))}}}controlOnClick(e,i){this.eventsMap[e]?.click?.(i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=oe({token:t,factory:t.\u0275fac})}}return t})(),Ii=(()=>{class t{constructor(){this.overlayRef=u(Ct),this.dataProvider=u(Bt),this.layoutService=u(K,{self:!0}),this.configuration=this.dataProvider?.configuration,this.heading=m(()=>this.dataProvider.heading()),this.contentInputs=m(()=>this.dataProvider.contentInputs?.()??{}),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.dataProvider.onActionDrawerInit?.(this.overlayRef)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-action-drawer-layout"]],hostAttrs:[1,"pui-action-drawer-layout"],features:[pe([K])],decls:10,vars:2,consts:[[1,"@container/layout"],[1,"pui-action-drawer-layout__heading"],[1,"pui-action-drawer-layout__content"],[3,"ngComponentOutlet","ngComponentOutletInputs"],[1,"pui-action-drawer-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],["puiFilledButton","","color","accent",3,"click","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],[3,"ngTemplateOutlet"]],template:function(i,n){i&1&&(l(0,"div",0)(1,"header",1),h(2,"pui-breadcrumbs"),l(3,"h1"),C(4),d()(),l(5,"div",2),_(6,zt,1,2,"ng-container",3),d(),l(7,"div",4),D(8,Wt,5,10,"button",5,ie),d()()),i&2&&(c(4),v(n.heading()),c(2),f(n.configuration&&n.configuration.content?6:-1),c(2),S(n.controls()))},dependencies:[ke,Je,fe,q,we,Z,me],encapsulation:2})}}return t})(),Bt=new I("action drawer layout data provider"),_n=(()=>{class t{constructor(){this.overlay=u(ht),this.injector=u(ae)}open(e,i={width:"480px"}){return this.overlay.open(Ii,{positionStrategy:this.overlay.position().global().right("0").centerVertically(),maxWidth:"90vw",width:i.width??"480px",height:"100%",hasBackdrop:!0,backdropClass:"pui-action-drawer-backdrop",closeOnBackdropClick:!0,disposeOnNavigation:!0,closeOnEscapeKeydown:!0,animation:"slideInEnd",data:i.overlayData,parentInjector:ae.create({providers:[{provide:ft,useValue:i.overlayData},{provide:Bt,useClass:e},...i.providers??[]],parent:i.parent??this.injector})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Li=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}],mn=[{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}],Bi=new I("editable content data provider");function te(t,o,e,i){return Object.entries(t.properties).flatMap(([a,r])=>{if(r.type=="object")return te(r,o,`${e?`${e}.`:""}${a}`,`${i}${r.description??""} / `);if(r.type=="array"){let P=Te(o,`${e?`${e}.`:""}${a}`);return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:R(k({},r),{description:`${i}${r.description??""}`})},...Array.isArray(P)?P.flatMap(($e,O)=>r.items.type=="object"?[...te(r.items,o,`${e?`${e}.`:""}${a}[${O}]`,`${i}${r.description??""} / #${O} / `)]:[{key:`${e?`${e}.`:""}${a}[${O}]`,fieldConfiguration:R(k({},r.items),{description:`${i}${r.description??""} / #${O}`})}]):[]]}return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:R(k({},r),{description:i+r.description})}]})}var Nt=(()=>{class t{constructor(){if(this.layoutService=u(K,{optional:!0}),this.destroyRef=u(re),this.id=E.required(),this.label=E.required(),this.weight=E(0),this.icon=E(),this.iconTemplateRef=E(),this.disabled=E(!1,{transform:Ke}),this.mode=E(void 0),this.click=Me(),!this.layoutService)return;let e,i;$(()=>{let n=this.id(),a=this.label(),r=this.disabled(),P=this.icon(),$e=this.iconTemplateRef(),O=this.mode(),Mt=this.weight(),Pe={id:n,label:a,isDisabled:r,icon:P,iconTemplateRef:$e,weight:Mt,mode:O};if(e)e(Pe);else{let Oe=this.layoutService.registerControl(Pe,{click:jt=>this.click.emit(jt)});e=Oe.update,i=Oe.dispose}}),this.destroyRef.onDestroy(()=>{i?.()})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=He({type:t,selectors:[["pui-layout-control"]],inputs:{id:[1,"id"],label:[1,"label"],weight:[1,"weight"],icon:[1,"icon"],iconTemplateRef:[1,"iconTemplateRef"],disabled:[1,"disabled"],mode:[1,"mode"]},outputs:{click:"click"}})}}return t})(),fn=(()=>{class t{constructor(){this.route=u(W),this.dataProvider=u(Bi),this.formControl=new nt(void 0),this.data=m(()=>this.dataProvider.data()),this.fieldConfiguration=m(()=>this.dataProvider.fieldConfiguration()),this.formControlValue=X(this.formControl.events.pipe(Y(e=>e instanceof tt),M(e=>e.value))),this.flattenedControls=m(()=>{let e=this.fieldConfiguration(),i=this.formControlValue();return e?te(e,i,"",e.description?`${e.description} / `:""):[]}),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??Li),this.isDirty=F(!0),$(()=>{let e=this.data();B(()=>this.formControl.setValue(e))}),$(()=>{let e=this.formControlValue();B(()=>this.dataProvider.onValueChange?.(e))}),j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.formControl.events.pipe(x()).subscribe(()=>{this.isDirty.set(this.formControl.dirty),this.dataProvider.onStateChange?.({isValid:this.formControl.valid,isDisabled:this.formControl.disabled,isDirty:this.formControl.dirty})}),this.dataProvider.registerUpdateState?.(e=>{B(()=>{e?.isDirty===!1?this.formControl.markAsPristine():e?.isDirty===!0&&this.formControl.markAsDirty(),e?.isDisabled===!1?this.formControl.enable():e?.isDisabled===!0&&this.formControl.disable()})})}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-editable-content"]],hostAttrs:[1,"pui-editable-content"],decls:4,vars:1,consts:[[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"formControl"],[3,"key","fieldType","label","fieldConfig"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,n){i&1&&(l(0,"main"),_(1,Jt,4,1,"form"),d(),D(2,Qt,1,7,"pui-layout-control",0,ie)),i&2&&(c(),f(n.flattenedControls().length>0?1:-1),c(),S(n.controlsConfig()))},dependencies:[Ae,Fe,Ee,ot,ye,et,it,xe,Nt],encapsulation:2})}}return t})(),Ni=new I("peekable addon data provider"),Mi=(()=>{class t{constructor(){this.dataProvider=u(Ni,{optional:!0}),this.route=u(W),this.router=u(Q),this.overlayKeyboardDispatcher=u(_t),this.routeToFullContent=m(()=>this.dataProvider?.routeToFullContent()??null),this._keydownEvents=new Re,j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([e,i])=>this.dataProvider?.onParamsChange?.(e,i)),this.overlayKeyboardDispatcher.add(this),u(re).onDestroy(()=>{this.overlayKeyboardDispatcher.ngOnDestroy(),this._keydownEvents.complete()}),this._keydownEvents.pipe(x()).subscribe(e=>{e.key=="Escape"&&this.onEscapePress(e)})}onEscapePress(e){this.route.snapshot.parent?.children.some(i=>i.outlet=="peek")&&this.router.navigate([{outlets:{peek:[]}}],{relativeTo:this.route.parent})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-peekable-addon"]],hostAttrs:[1,"pui-peekable-addon"],decls:8,vars:9,consts:[[1,"pui-peekable-addon__nav"],["puiBaseButton","","puiTooltip","View in full",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"spacer"],["puiBaseButton","","puiTooltip","Close peek window",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"pui-peekable-addon__content"],["name","peek"]],template:function(i,n){i&1&&(l(0,"nav",0),_(1,ti,3,1,"a",1),h(2,"div",2),l(3,"a",3)(4,"i"),C(5,"close"),d()()(),l(6,"main",4),h(7,"router-outlet",5),d()),i&2&&(c(),f(n.routeToFullContent()?1:-1),c(2),p("routerLink",w(7,ei,w(5,Zt,w(3,Xt,H(2,Lt))))))},dependencies:[J,ge,q,Se,Z],encapsulation:2})}}return t})(),Cn=(()=>{class t{constructor(){this.router=u(Q,{optional:!0}),this.isSidenavVisible=F(!1),this.router?.events.pipe(Y(e=>e instanceof ve),ne(50),x()).subscribe(()=>{this.isSidenavVisible.set(!1)})}toggleSidenav(e){this.isSidenavVisible.update(i=>e??!i)}onContentClick(e){e.target==e.currentTarget&&this.isSidenavVisible.set(!1)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-root-sidenav"]],ngContentSelectors:ni,decls:12,vars:1,consts:[[1,"pui-root-sidenav"],[1,"pui-root-sidenav__header"],["puiBaseButton","",1,"pui-root-sidenav__header__hamburger",3,"click"],[1,"spacer"],[1,"pui-root-sidenav__nav-wrapper"],[1,"pui-root-sidenav__content-wrapper"],[1,"pui-root-sidenav__content",3,"click"]],template:function(i,n){i&1&&(We(ii),l(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return n.toggleSidenav()}),l(3,"i"),C(4,"menu"),d()(),h(5,"div",3),se(6),d(),l(7,"div",4),se(8,1),d()(),l(9,"div",5)(10,"div",6),b("click",function(r){return n.onContentClick(r)}),h(11,"router-outlet"),d()()),i&2&&(c(10),ze("data-sidenav",n.isSidenavVisible()?"visible":"hidden"))},dependencies:[q,Se,J],encapsulation:2})}}return t})();function hn(t,o,e=!0){let i=Object.values(t??{}).some(a=>typeof a=="string"?!!a:a!=null),n=Object.keys(t??{});return a=>{if(!i)return!0;if(e){for(let r of n)if(r in o&&o[r]!=null&&!o[r](a,r,t[r],t))return!1;return!0}else{for(let r of n)if(r in o&&o[r]!=null&&o[r](a,r,t[r],t))return!0;return!1}}}function bn(t){let o=t.find(i=>i.isSortedAsc||i.isSortedDesc);if(!o)return()=>0;let e=o.isSortedDesc?-1:1;return o.fieldConfiguration?.type=="date-time"?(i,n)=>{let a=N(i,o),r=N(n,o);return a==null&&r==null?0:a instanceof Date&&r instanceof Date?(a.getTime()-r.getTime())*e:a instanceof Date?1*e:-1*e}:(i,n)=>{switch(o.key){default:return N(i,o)>N(n,o)?e:N(i,o)<N(n,o)?-1*e:0}}}function N(t,o){return o.path?Te(t,o.path):t[o.key]}var ji=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"},{id:"add",label:"Add new",icon:"add"}],Hi=new I("table content data provider"),vn=(()=>{class t{constructor(){this.route=u(W),this.dataProvider=u(Hi),this.isBrowser=Qe(u(je)),this.ROUTE_TO_DETAIL=Symbol(),this.configuration=this.dataProvider.configuration,this.isLoading=m(()=>this.dataProvider.isLoading?.()??!1),this.data=m(()=>{let e=this.dataProvider.data(),i=this.dataProvider.routeToDetail;return e?.map(n=>Object.assign({},n,{[this.ROUTE_TO_DETAIL]:i?.bind(this.dataProvider)?.(n)}))}),this.columnConfig=m(()=>this.dataProvider.columnsConfig()),this.columnsToDisplay=m(()=>this.dataProvider.columnsToDisplay()),this.selectionMode=m(()=>this.dataProvider.selectionMode?.()??null),this.selectedItems=m(()=>this.dataProvider.selectedItems?.()??new Set),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??ji),this.flattenFilterDef=m(()=>{let e=this.dataProvider.filterConfig?.();return e?te(e,{},"",e.description?`${e.description} / `:""):[]}),this.filterFormControl=u(at).nonNullable.control({}),this.isInitial=X(Le(100).pipe(M(()=>!1)),{initialValue:!0}),this.scrolledToTop=F(!1),this.scrolledToBottom=F(!1),this.cmpFn=this.dataProvider.compareFn??((e,i)=>e==i),j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),$(()=>{this.dataProvider.filterValue&&this.filterFormControl.setValue(this.dataProvider.filterValue?.(),{emitEvent:!1})}),this.dataProvider.onScrolledToTop&&$(()=>{this.isLoading()||this.scrolledToTop()&&B(()=>this.dataProvider.onScrolledToTop())}),this.dataProvider.onScrolledToBottom&&$(()=>{this.isLoading()||this.scrolledToBottom()&&B(()=>this.dataProvider.onScrolledToBottom())}),Ze(this.data).pipe(ne(100),x()).subscribe(()=>{this.scrolledToTop()&&this.dataProvider.onScrolledToTop?.(),this.scrolledToBottom()&&this.dataProvider.onScrolledToBottom?.()})}ngOnInit(){this.dataProvider?.onInit?.()}ngOnDestroy(){this.dataProvider?.onDestroy?.()}onRowClick(e){this.dataProvider.onTableRowClick?.(e)}onHeaderClick(e,i){this.dataProvider.onHeaderCellClick?.(e,i)}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}onFilterValueChange(e){this.dataProvider.onFilterChange?.(e)}onScrolled(e,i){e=="top"?this.scrolledToTop.set(!i):this.scrolledToBottom.set(!i)}trackingFn(e,i){return e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-table-content"]],hostAttrs:[1,"pui-table-content"],decls:9,vars:2,consts:[[3,"formControl"],[1,"pui-table-content__content-wrapper"],[3,"id","itemHeight","columns","columnWidths","selectionMode"],[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"valueChange","formControl"],[3,"key","fieldType","label","fieldConfig","isNullable"],["puiContentVisibilityDetector","",3,"skippedChanged"],[3,"centerAligned","rightAligned","sortedAsc","sortedDesc","cellClick",4,"puiTableHeaderCellDef"],[3,"centerAligned","rightAligned",4,"puiTableCellDef"],[3,"cellClick","centerAligned","rightAligned","sortedAsc","sortedDesc"],[3,"centerAligned","rightAligned"],[1,"pui-table-cell__boolean-content",3,"pui-table-cell__boolean-content--true"],[3,"mode","format","date"],[1,"pui-table-cell__boolean-content"],["itemSize","48","scrollWindow","",3,"height"],["itemSize","48","scrollWindow",""],["puiHoverable","",3,"item","route","height","selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["puiHoverable","",3,"click","item","route","selected"],["puiHoverable","",3,"item","route","selected"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,n){if(i&1&&(l(0,"main")(1,"div"),de(2),_(3,ai,3,1,"pui-fieldset",0),l(4,"div",1),_(5,ri,1,2,"pui-loading-panel")(6,Ti,9,9,"pui-table",2),d()()(),D(7,yi,1,7,"pui-layout-control",3,ie)),i&2){let a=n.flattenFilterDef();c(3),f(a.length>0?3:-1),c(2),f(n.isLoading()?5:6),c(2),S(n.controlsConfig())}},dependencies:[Rt,Et,Ot,Ft,Pt,$t,At,wt,Vt,kt,bt,Nt,vt,lt,ut,st,dt,ct,pt,Ae,Fe,Ee,ye,xe,rt,gt,mt],encapsulation:2,data:{animation:[Ce("loading",[G(":enter",be(yt)),G(":leave",be(Tt))])]}})}}return t})();function gn(t,o,e=!0){return t.map(i=>i.key==o?R(k({},i),{isSortedAsc:!i.isSortedAsc&&!i.isSortedDesc?e:!!i.isSortedDesc,isSortedDesc:!i.isSortedAsc&&!i.isSortedDesc?!e:!!i.isSortedAsc}):R(k({},i),{isSortedAsc:!1,isSortedDesc:!1}))}var zi=new I("vertical layout data provider"),Tn=(()=>{class t{constructor(){this.dataProvider=u(zi),this.layoutService=u(K,{self:!0}),this.router=u(Q),this.route=u(W),this.document=u(Ye),this.activeTab=F(null),this.heading=m(()=>this.dataProvider.heading()),this.tabs=m(()=>this.dataProvider.tabs()),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.scrollState=X(Ie(this.document,"scroll").pipe(M(e=>e.currentTarget.scrollingElement?.scrollTop),De(),Be(),M(([e,i])=>({direction:i-e>0?"down":"up",currentTop:i})),x())),j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.router.events.pipe(Y(e=>e instanceof ve||e instanceof Xe),Ne(this.router.lastSuccessfulNavigation?.finalUrl),De(),x()).subscribe(()=>{let e=this.tabs();if(!e)return;let i=e.find(a=>{let r=this.router.createUrlTree(a.route,{relativeTo:this.route});return this.router.isActive(r,{paths:"subset",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})});if(!i)return;this.activeTab.set(Object.assign(i.label,{[Symbol()]:null}));let n=this.route.routeConfig?.children?.find(a=>a.path=="**");n&&(n.redirectTo=i.route.map(a=>String(a).replaceAll("..%2F","").replaceAll(".%2F","")).join("/"))})}onTabChanged(e){let i=this.tabs()?.find(n=>n.label==e);i&&this.router.navigate(i.route,{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=A({type:t,selectors:[["pui-vertical-layout"]],hostAttrs:[1,"pui-vertical-layout"],features:[pe([K])],decls:13,vars:3,consts:[["controlsTemplate",""],[1,"@container/layout"],[1,"pui-vertical-layout__heading"],[1,"pui-vertical-layout__navigation"],[1,"pui-vertical-layout__heading","pui-vertical-layout__heading--floating"],[1,"pui-vertical-layout__controls"],[3,"ngTemplateOutlet"],[1,"pui-vertical-layout__tabs",3,"currentTab"],[1,"spacer"],[1,"pui-vertical-layout__tabs",3,"tabChange","currentTab"],[3,"routerLink"],[3,"routerLink",4,"puiTab","puiTabHidden"],[1,"pui-vertical-layout__toolbar"],["puiFilledButton","",3,"color","ngClass","puiTooltip","disabled","hoverableEnabled"],["puiFilledButton","",3,"click","color","ngClass","puiTooltip","disabled","hoverableEnabled"]],template:function(i,n){if(i&1&&(l(0,"div",1)(1,"div")(2,"header",2)(3,"div",3),h(4,"pui-breadcrumbs"),l(5,"h1"),C(6),d()()(),_(7,Si,6,3,"header",4)(8,Ai,4,3,"header",5),h(9,"router-outlet")(10,"pui-peekable-addon"),d()(),_(11,Ri,1,1,"ng-template",null,0,qe)),i&2){let a;c(6),v(n.heading()),c(),f(((a=n.scrollState())==null?null:a.direction)=="up"&&((a=n.scrollState())==null?null:a.currentTop)>240?7:-1),c(),f(n.tabs().length>0||n.controls().length>0?8:-1)}},dependencies:[J,ke,q,we,St,Dt,xt,ge,fe,Mi,Z,me],encapsulation:2,data:{animation:[Ce("floatingHeader",[G(":enter",[U({transform:"translate(0, -100%)"}),he("200ms ease-in-out",U({transform:"translate(0, 0)"}))]),G(":leave",[U({transform:"translate(0, 0)"}),he("200ms ease-in-out",U({transform:"translate(0, -100%)"}))])])]}})}}return t})();export{Bt as a,_n as b,Li as c,mn as d,Bi as e,Nt as f,fn as g,Ni as h,Cn as i,hn as j,bn as k,ji as l,Hi as m,vn as n,gn as o,zi as p,Tn as q};
