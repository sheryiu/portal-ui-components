import{$ as pt,$a as St,A as X,B as Te,Ba as K,Ea as ee,Fa as Fe,Ia as Ve,J as ye,Ja as wt,La as Ae,M as x,Ma as $e,N as De,O as Z,Q as xe,R as rt,S as lt,T as st,U as ct,V as dt,W as we,a as fe,ab as kt,b as nt,bb as Et,c as Ce,ca as ut,da as mt,eb as Ft,fb as Vt,g as ot,gb as At,hb as $t,ia as Se,ib as Nt,jb as It,kb as Ot,lb as Pt,ma as _t,mb as Rt,n as he,na as ft,nb as Mt,o as ge,oa as Ct,ob as Lt,pa as ht,pb as Bt,q as G,qa as gt,qb as jt,r as q,ra as bt,s as be,sa as vt,ta as Tt,ua as yt,va as Dt,w as ve,wa as xt,x as at,xa as ke,y as W,z as J,za as Ee}from"./chunk-IVXI4S32.js";import{$ as ae,C as Q,Cb as M,Da as Ue,Db as D,Dc as it,H as oe,Hb as b,Ib as s,Jb as Ke,Ka as c,Kb as ce,Q as Be,Qb as Ye,Rb as Qe,Sb as de,Tb as pe,U as je,Ub as Je,V as He,Vb as C,Wb as v,Zb as Xe,ab as A,ac as ue,bc as z,ca as R,cb as Ge,cc as k,dc as me,ea as u,f as Re,gb as H,hc as $,ja as T,jc as U,ka as y,kc as _e,la as re,lc as Ze,ma as ze,na as le,ob as qe,oc as L,pb as _,pc as m,q as P,qb as f,qc as N,r as j,ra as V,rb as We,tb as w,tc as et,ub as S,uc as F,vb as p,vc as tt,wb as l,x as Me,xb as d,yb as g,z as Le,za as se}from"./chunk-PPNSUE6H.js";import{a as E,b as O}from"./chunk-EQDQRRRY.js";var Yt=(i,n)=>({"pui-action-drawer-layout__toolbar__most-emphasized":i,"pui-action-drawer-layout__toolbar__normal":n}),ne=(i,n)=>n.id;function Qt(i,n){if(i&1&&M(0,3),i&2){let e=s();p("ngComponentOutlet",e.configuration.content)("ngComponentOutletInputs",e.contentInputs())}}function Jt(i,n){if(i&1&&(l(0,"i"),C(1),d()),i&2){let e=s().$implicit;c(),v(e.icon)}}function Xt(i,n){if(i&1&&M(0,7),i&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Zt(i,n){if(i&1){let e=D();l(0,"button",6),b("click",function(o){let a=T(e).$implicit,r=s();return y(r.layoutService.controlOnClick(a.id,o))}),_(1,Jt,2,1,"i")(2,Xt,1,1,"ng-container",7),l(3,"span"),C(4),d()()}if(i&2){let e=n.$implicit,t=s();p("ngClass",me(7,Yt,e.id==t.mostEmphasizedControlId(),e.id!=t.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled)("puiTooltip",e.label)("puiTooltipPosition","top"),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),v(e.label)}}var te=i=>({enum:i}),ei=i=>({format:i}),ti=i=>({"date-time":i}),Ht=()=>({}),Ne=(i,n)=>n.key;function ii(i,n){if(i&1&&g(0,"pui-field-def",2),i&2){let e=n.$implicit;p("key",e.key)("fieldType",e.fieldConfiguration.type)("label",e.fieldConfiguration.description??e.key)("fieldConfig",e.fieldConfiguration.type=="string"?k(4,te,e.fieldConfiguration.enum):e.fieldConfiguration.type=="number"?k(6,te,e.fieldConfiguration.enum):e.fieldConfiguration.type=="date-time"?k(10,ti,k(8,ei,e.fieldConfiguration.format)):z(12,Ht))}}function ni(i,n){if(i&1&&(l(0,"form")(1,"pui-fieldset",1),w(2,ii,1,13,"pui-field-def",2,Ne),d()()),i&2){let e=s();c(),p("formControl",e.formControl),c(),S(e.flattenedControls())}}function oi(i,n){if(i&1){let e=D();l(0,"pui-layout-control",3),b("click",function(o){let a=T(e).$implicit,r=s();return y(r.onControlClick(a.id,o))}),d()}if(i&2){let e=n.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var zt=()=>[],ai=i=>({peek:i}),ri=i=>({outlets:i}),li=i=>[i];function si(i,n){if(i&1&&(l(0,"a",1)(1,"i"),C(2,"open_in_full"),d()()),i&2){let e=s();p("routerLink",e.routeToFullContent())}}var ci=[[["",8,"pui-root-sidenav__header__logo"]],[["",8,"pui-root-sidenav__nav"]]],di=[".pui-root-sidenav__header__logo",".pui-root-sidenav__nav"];function pi(i,n){if(i&1&&g(0,"pui-field-def",5),i&2){let e=n.$implicit;p("key",e.key)("fieldType",e.fieldConfiguration.type)("label",e.fieldConfiguration.description??e.key)("fieldConfig",e.fieldConfiguration.type=="string"?k(5,te,e.fieldConfiguration.enum):e.fieldConfiguration.type=="number"?k(7,te,e.fieldConfiguration.enum):z(9,Ht))("isNullable",!1)}}function ui(i,n){if(i&1){let e=D();l(0,"pui-fieldset",4),b("valueChange",function(o){T(e);let a=s();return y(a.onFilterValueChange(o))}),w(1,pi,1,10,"pui-field-def",5,Ne),d()}if(i&2){let e=s();p("formControl",e.filterFormControl),c(),S(e.flattenFilterDef())}}function mi(i,n){if(i&1&&g(0,"pui-loading-panel"),i&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())}}function _i(i,n){if(i&1){let e=D();l(0,"pui-table-header-cell",9),b("cellClick",function(o){T(e);let a=s().$implicit,r=s(2);return y(r.onHeaderClick(a.key,o))}),C(1),d()}if(i&2){let e=s().$implicit;p("centerAligned",e.isAlignCenter??!1)("rightAligned",e.isAlignEnd??!1)("sortedAsc",e.isSortedAsc??!1)("sortedDesc",e.isSortedDesc??!1),c(),v(e.label)}}function fi(i,n){i&1&&C(0," \xA0ago ")}function Ci(i,n){if(i&1&&(l(0,"pui-time-display",12),$(1,"lodashGet"),l(2,"span"),C(3,"--"),d()(),_(4,fi,1,0)),i&2){let e=s(2).$implicit,t=s().$implicit;p("mode",t.fieldConfiguration.format=="timeAgo"?"timeAgo":"normal")("format",t.fieldConfiguration.format)("date",U(1,4,e,t.path??t.key)),c(4),f(t.fieldConfiguration.format=="timeAgo"?4:-1)}}function hi(i,n){if(i&1&&(Xe(0),$(1,"lodashGet"),l(2,"i",13),C(3),d()),i&2){let e=s(2).$implicit,t=s().$implicit,o=U(1,3,e,t.path??t.key);c(2),Je("pui-table-cell__boolean-content--true",o===!0),c(),v(o===!0?"check":o===!1?"close":"")}}function gi(i,n){if(i&1&&(l(0,"span"),C(1),$(2,"lodashGet"),d()),i&2){let e=s(2).$implicit,t=s().$implicit;c(),v(U(2,1,e,t.path??t.key))}}function bi(i,n){if(i&1&&_(0,Ci,5,7)(1,hi,4,6,"i",11)(2,gi,3,4,"span"),i&2){let e,t=s(2).$implicit;f((e=t.fieldConfiguration.type)==="date-time"?0:e==="boolean"?1:2)}}function vi(i,n){if(i&1&&(l(0,"span"),C(1),$(2,"lodashGet"),d()),i&2){let e=s().$implicit,t=s().$implicit;c(),v(U(2,1,e,t.path??t.key))}}function Ti(i,n){if(i&1&&(l(0,"pui-table-cell",10),_(1,bi,3,1)(2,vi,3,4,"span"),d()),i&2){let e=s().$implicit;p("centerAligned",e.isAlignCenter??!1)("rightAligned",e.isAlignEnd??!1),c(),f(e.fieldConfiguration?1:2)}}function yi(i,n){if(i&1&&H(0,_i,2,5,"pui-table-header-cell",7)(1,Ti,3,3,"pui-table-cell",8),i&2){let e=n.$implicit;p("puiTableHeaderCellDef",e.key),c(),p("puiTableCellDef",e.key)}}function Di(i,n){if(i&1){let e=D();l(0,"pui-table-row",17),$(1,"isInSet"),b("click",function(){let o=T(e).$implicit,a=s(4);return y(a.onRowClick(o))}),d()}if(i&2){let e=n.$implicit,t=s(4);pe("height",48,"px"),p("item",e)("route",e[t.ROUTE_TO_DETAIL])("selected",_e(1,5,e,t.selectedItems(),t.cmpFn))}}function xi(i,n){if(i&1&&(l(0,"cdk-virtual-scroll-viewport",15),H(1,Di,2,9,"pui-table-row",16),d()),i&2){let e=s(3);pe("height",e.data().length*48,"px"),c(),p("cdkVirtualForOf",e.data())("cdkVirtualForTrackBy",e.trackingFn)("cdkVirtualForTemplateCacheSize",0)}}function wi(i,n){if(i&1&&_(0,xi,2,5,"cdk-virtual-scroll-viewport",14),i&2){let e=s(2);f(e.isBrowser?0:-1)}}function Si(i,n){if(i&1){let e=D();l(0,"pui-table-row",17),$(1,"isInSet"),b("click",function(){let o=T(e).$implicit,a=s(3);return y(a.onRowClick(o))}),d()}if(i&2){let e=n.$implicit,t=s(3);p("item",e)("route",e[t.ROUTE_TO_DETAIL])("selected",_e(1,3,e,t.selectedItems(),t.cmpFn))}}function ki(i,n){if(i&1&&w(0,Si,2,7,"pui-table-row",18,We),i&2){let e=s(2);S(e.data())}}function Ei(i,n){if(i&1){let e=D();l(0,"pui-table",2),w(1,yi,2,2,null,null,Ne),l(3,"pui-table-body")(4,"div",6),b("skippedChanged",function(o){T(e);let a=s();return y(a.scrolledToTop.set(!o))}),d(),g(5,"pui-table-header-row"),_(6,wi,1,1)(7,ki,2,0),l(8,"div",6),b("skippedChanged",function(o){T(e);let a=s();return y(a.scrolledToBottom.set(!o))}),d()()()}if(i&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())("id",e.configuration==null?null:e.configuration.id)("itemHeight",48)("columns",e.columnsToDisplay())("columnWidths",z(8,zt))("selectionMode",e.selectionMode()),c(),S(e.columnConfig()),c(5),f(e.configuration!=null&&e.configuration.useVirtualScroll?6:7)}}function Fi(i,n){if(i&1){let e=D();l(0,"pui-layout-control",19),b("click",function(o){let a=T(e).$implicit,r=s();return y(r.onControlClick(a.id,o))}),d()}if(i&2){let e=n.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var Vi=["container"],Ai=(i,n)=>({"pui-vertical-layout__toolbar__most-emphasized":i,"pui-vertical-layout__toolbar__normal":n}),$i=(i,n)=>n.label;function Ni(i,n){if(i&1&&(l(0,"header",5)(1,"div",4),g(2,"pui-breadcrumbs"),l(3,"h1"),C(4),d()(),M(5,7),d()),i&2){let e=s(),t=de(13);p("@floatingHeader",void 0),c(4),v(e.heading()),c(),p("ngTemplateOutlet",t)}}function Ii(i,n){if(i&1&&(l(0,"a",11),C(1),d()),i&2){let e=s().$implicit;p("routerLink",e.route),c(),v(e.label)}}function Oi(i,n){if(i&1&&H(0,Ii,2,2,"a",12),i&2){let e=n.$implicit;p("puiTab",e.label)("puiTabHidden",e.hidden??!1)}}function Pi(i,n){if(i&1){let e=D();l(0,"pui-tab-bar",10),b("tabChange",function(o){T(e);let a=s(2);return y(a.onTabChanged(o))}),w(1,Oi,1,2,"a",11,$i),d()}if(i&2){let e=s(2);p("currentTab",e.activeTab()),c(),S(e.tabs())}}function Ri(i,n){i&1&&g(0,"div",9)}function Mi(i,n){if(i&1&&(l(0,"header",6),_(1,Pi,3,1,"pui-tab-bar",8),_(2,Ri,1,0,"div",9),M(3,7),d()),i&2){let e=s(),t=de(13);c(),f(e.tabs().length>0?1:-1),c(),f(e.controls().length>0?2:-1),c(),p("ngTemplateOutlet",t)}}function Li(i,n){if(i&1&&(l(0,"i"),C(1),d()),i&2){let e=s().$implicit;c(),v(e.icon)}}function Bi(i,n){if(i&1&&M(0,7),i&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function ji(i,n){if(i&1){let e=D();l(0,"button",15),b("click",function(o){let a=T(e).$implicit,r=s(3);return y(r.layoutService.controlOnClick(a.id,o))}),_(1,Li,2,1,"i")(2,Bi,1,1,"ng-container",7),l(3,"span"),C(4),d()()}if(i&2){let e=n.$implicit,t=s(3);p("color",e.color??"accent")("ngClass",me(7,Ai,e.id==t.mostEmphasizedControlId(),e.id!=t.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("puiTooltip",e.label)("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),v(e.label)}}function Hi(i,n){if(i&1&&(l(0,"div",13),w(1,ji,5,10,"button",14,ne),d()),i&2){let e=s(2);c(),S(e.controls())}}function zi(i,n){if(i&1&&_(0,Hi,3,0,"div",13),i&2){let e=s();f(e.controls().length>0?0:-1)}}var Y=(()=>{let n=class n{constructor(){this._controls=V([]),this.controls=m(()=>this._controls().toSorted((t,o)=>(t.weight??0)-(o.weight??0))),this.mostEmphasizedControlId=m(()=>this.controls().filter(t=>!t.mode||t.mode=="auto").at(-1)?.id),this.eventsMap={}}registerControl(t,o){return this._controls.update(a=>[...a,E({},t)]),this.eventsMap[t.id]=o,{update:a=>{this._controls.update(r=>r.map(h=>h.id==a.id?E(E({},h),a):h))},dispose:()=>{this._controls.update(a=>a.filter(r=>r.id!=t.id))}}}controlOnClick(t,o){this.eventsMap[t]?.click?.(o)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ae({token:n,factory:n.\u0275fac});let i=n;return i})(),Ui=(()=>{let n=class n{constructor(){this.overlayRef=u(yt),this.dataProvider=u(Ut),this.layoutService=u(Y,{self:!0}),this.configuration=this.dataProvider?.configuration,this.heading=m(()=>this.dataProvider.heading()),this.contentInputs=m(()=>this.dataProvider.contentInputs?.()??{}),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.dataProvider.onActionDrawerInit?.(this.overlayRef)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-action-drawer-layout"]],hostAttrs:[1,"pui-action-drawer-layout"],features:[ue([Y])],decls:10,vars:2,consts:[[1,"@container/layout"],[1,"pui-action-drawer-layout__heading"],[1,"pui-action-drawer-layout__content"],[3,"ngComponentOutlet","ngComponentOutletInputs"],[1,"pui-action-drawer-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],["puiFilledButton","","color","accent",3,"click","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],[3,"ngTemplateOutlet"]],template:function(o,a){o&1&&(l(0,"div",0)(1,"header",1),g(2,"pui-breadcrumbs"),l(3,"h1"),C(4),d()(),l(5,"div",2),_(6,Qt,1,2,"ng-container",3),d(),l(7,"div",4),w(8,Zt,5,10,"button",5,ne),d()()),o&2&&(c(4),v(a.heading()),c(2),f(a.configuration&&a.configuration.content?6:-1),c(2),S(a.controls()))},dependencies:[Fe,nt,Ce,K,Ee,ee,fe],encapsulation:2});let i=n;return i})(),Ut=new R("action drawer layout data provider"),Tn=(()=>{let n=class n{constructor(){this.overlay=u(Dt),this.injector=u(re)}open(t,o={width:"480px"}){return this.overlay.open(Ui,{positionStrategy:this.overlay.position().global().right("0").centerVertically(),maxWidth:"90vw",width:o.width??"480px",height:"100%",hasBackdrop:!0,backdropClass:"pui-action-drawer-backdrop",closeOnBackdropClick:!0,disposeOnNavigation:!0,closeOnEscapeKeydown:!0,animation:"slideInEnd",data:o.overlayData,parentInjector:re.create({providers:[{provide:Tt,useValue:o.overlayData},{provide:Ut,useClass:t},...o.providers??[]],parent:o.parent??this.injector})})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})(),Gi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}],yn=[{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}],qi=new R("editable content data provider");function ie(i,n,e,t){return Object.entries(i.properties).flatMap(([a,r])=>{if(r.type=="object")return ie(r,n,`${e?`${e}.`:""}${a}`,`${t}${r.description??""} / `);if(r.type=="array"){let h=ye(n,`${e?`${e}.`:""}${a}`);return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:O(E({},r),{description:`${t}${r.description??""}`})},...Array.isArray(h)?h.flatMap((Ie,I)=>r.items.type=="object"?[...ie(r.items,n,`${e?`${e}.`:""}${a}[${I}]`,`${t}${r.description??""} / #${I} / `)]:[{key:`${e?`${e}.`:""}${a}[${I}]`,fieldConfiguration:O(E({},r.items),{description:`${t}${r.description??""} / #${I}`})}]):[]]}return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:O(E({},r),{description:t+r.description})}]})}var Gt=(()=>{let n=class n{constructor(){if(this.layoutService=u(Y,{optional:!0}),this.destroyRef=u(le),this.id=F.required(),this.label=F.required(),this.weight=F(0),this.icon=F(),this.iconTemplateRef=F(),this.disabled=F(!1,{transform:it}),this.mode=F(void 0),this.click=et(),!this.layoutService)return;let t,o;N(()=>{let a=this.id(),r=this.label(),h=this.disabled(),Ie=this.icon(),I=this.iconTemplateRef(),qt=this.mode(),Wt=this.weight(),Oe={id:a,label:r,isDisabled:h,icon:Ie,iconTemplateRef:I,weight:Wt,mode:qt};if(t)t(Oe);else{let Pe=this.layoutService.registerControl(Oe,{click:Kt=>this.click.emit(Kt)});t=Pe.update,o=Pe.dispose}}),this.destroyRef.onDestroy(()=>{o?.()})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275dir=Ge({type:n,selectors:[["pui-layout-control"]],hostAttrs:[1,"pui-layout-control"],inputs:{id:[1,"id"],label:[1,"label"],weight:[1,"weight"],icon:[1,"icon"],iconTemplateRef:[1,"iconTemplateRef"],disabled:[1,"disabled"],mode:[1,"mode"]},outputs:{click:"click"}});let i=n;return i})(),Dn=(()=>{let n=class n{constructor(){this.route=u(W),this.dataProvider=u(qi),this.formControl=new ct(void 0),this.data=m(()=>this.dataProvider.data()),this.fieldConfiguration=m(()=>this.dataProvider.fieldConfiguration()),this.formControlValue=Z(this.formControl.events.pipe(Q(t=>t instanceof lt),P(t=>t.value))),this.flattenedControls=m(()=>{let t=this.fieldConfiguration(),o=this.formControlValue();return t?ie(t,o,"",t.description?`${t.description} / `:""):[]}),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??Gi),this.isDirty=V(!0),N(()=>{let t=this.data();L(()=>this.formControl.setValue(t))}),N(()=>{let t=this.formControlValue();L(()=>this.dataProvider.onValueChange?.(t))}),j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([t,o])=>this.dataProvider.onParamsChange?.(t,o)),this.formControl.events.pipe(x()).subscribe(()=>{this.isDirty.set(this.formControl.dirty),this.dataProvider.onStateChange?.({isValid:this.formControl.valid,isDisabled:this.formControl.disabled,isDirty:this.formControl.dirty})}),this.dataProvider.registerUpdateState?.(t=>{L(()=>{t?.isDirty===!1?this.formControl.markAsPristine():t?.isDirty===!0&&this.formControl.markAsDirty(),t?.isDisabled===!1?this.formControl.enable():t?.isDisabled===!0&&this.formControl.disable()})})}onControlClick(t,o){this.dataProvider.onControlClick?.(t,o)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-editable-content"]],hostAttrs:[1,"pui-editable-content"],decls:4,vars:1,consts:[[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"formControl"],[3,"key","fieldType","label","fieldConfig"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(o,a){o&1&&(l(0,"main"),_(1,ni,4,1,"form"),d(),w(2,oi,1,7,"pui-layout-control",0,ne)),o&2&&(c(),f(a.flattenedControls().length>0?1:-1),c(),S(a.controlsConfig()))},dependencies:[$e,Ae,Ve,dt,xe,rt,st,we,Gt],encapsulation:2});let i=n;return i})(),Wi=new R("peekable addon data provider"),Ki=(()=>{let n=class n{constructor(){this.dataProvider=u(Wi,{optional:!0}),this.route=u(W),this.router=u(X),this.overlayKeyboardDispatcher=u(bt),this.routeToFullContent=m(()=>this.dataProvider?.routeToFullContent()??null),this._keydownEvents=new Re,j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([t,o])=>this.dataProvider?.onParamsChange?.(t,o)),this.overlayKeyboardDispatcher.add(this),u(le).onDestroy(()=>{this.overlayKeyboardDispatcher.ngOnDestroy(),this._keydownEvents.complete()}),this._keydownEvents.pipe(x()).subscribe(t=>{t.key=="Escape"&&this.onEscapePress(t)})}onEscapePress(t){this.route.snapshot.parent?.children.some(o=>o.outlet=="peek")&&this.router.navigate([{outlets:{peek:[]}}],{relativeTo:this.route.parent})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-peekable-addon"]],hostAttrs:[1,"pui-peekable-addon"],decls:8,vars:9,consts:[[1,"pui-peekable-addon__nav"],["puiBaseButton","","puiTooltip","View in full",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"spacer"],["puiBaseButton","","puiTooltip","Close peek window",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"pui-peekable-addon__content"],["name","peek"]],template:function(o,a){o&1&&(l(0,"nav",0),_(1,si,3,1,"a",1),g(2,"div",2),l(3,"a",3)(4,"i"),C(5,"close"),d()()(),l(6,"main",4),g(7,"router-outlet",5),d()),o&2&&(c(),f(a.routeToFullContent()?1:-1),c(2),p("routerLink",k(7,li,k(5,ri,k(3,ai,z(2,zt))))))},dependencies:[J,Te,K,ke,ee],encapsulation:2});let i=n;return i})(),xn=(()=>{let n=class n{constructor(){this.router=u(X,{optional:!0}),this.isSidenavVisible=V(!1),this.router?.events.pipe(Q(t=>t instanceof ve),oe(50),x()).subscribe(()=>{this.isSidenavVisible.set(!1)})}toggleSidenav(t){this.isSidenavVisible.update(o=>t??!o)}onContentClick(t){t.target==t.currentTarget&&this.isSidenavVisible.set(!1)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-root-sidenav"]],ngContentSelectors:di,decls:12,vars:1,consts:[[1,"pui-root-sidenav"],[1,"pui-root-sidenav__header"],["puiBaseButton","",1,"pui-root-sidenav__header__hamburger",3,"click"],[1,"spacer"],[1,"pui-root-sidenav__nav-wrapper"],[1,"pui-root-sidenav__content-wrapper"],[1,"pui-root-sidenav__content",3,"click"]],template:function(o,a){o&1&&(Ke(ci),l(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return a.toggleSidenav()}),l(3,"i"),C(4,"menu"),d()(),g(5,"div",3),ce(6),d(),l(7,"div",4),ce(8,1),d()(),l(9,"div",5)(10,"div",6),b("click",function(h){return a.onContentClick(h)}),g(11,"router-outlet"),d()()),o&2&&(c(10),qe("data-sidenav",a.isSidenavVisible()?"visible":"hidden"))},dependencies:[K,ke,J],encapsulation:2});let i=n;return i})();function wn(i,n,e=!0){let t=Object.values(i??{}).some(a=>typeof a=="string"?!!a:a!=null),o=Object.keys(i??{});return a=>{if(!t)return!0;if(e){for(let r of o)if(r in n&&n[r]!=null&&!n[r](a,r,i[r],i))return!1;return!0}else{for(let r of o)if(r in n&&n[r]!=null&&n[r](a,r,i[r],i))return!0;return!1}}}function Sn(i){let n=i.find(t=>t.isSortedAsc||t.isSortedDesc);if(!n)return()=>0;let e=n.isSortedDesc?-1:1;return n.fieldConfiguration?.type=="date-time"?(t,o)=>{let a=B(t,n),r=B(o,n);return a==null&&r==null?0:a instanceof Date&&r instanceof Date?(a.getTime()-r.getTime())*e:a instanceof Date?1*e:-1*e}:(t,o)=>{switch(n.key){default:return B(t,n)>B(o,n)?e:B(t,n)<B(o,n)?-1*e:0}}}function B(i,n){return n.path?ye(i,n.path):i[n.key]}var Yi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"},{id:"add",label:"Add new",icon:"add"}],Qi=new R("table content data provider"),kn=(()=>{let n=class n{constructor(){this.route=u(W),this.dataProvider=u(Qi),this.isBrowser=ot(u(Ue)),this.ROUTE_TO_DETAIL=Symbol(),this.configuration=this.dataProvider.configuration,this.isLoading=m(()=>this.dataProvider.isLoading?.()??!1),this.data=m(()=>{let t=this.dataProvider.data(),o=this.dataProvider.routeToDetail;return t?.map(a=>Object.assign({},a,{[this.ROUTE_TO_DETAIL]:o?.bind(this.dataProvider)?.(a)}))}),this.columnConfig=m(()=>this.dataProvider.columnsConfig()),this.columnsToDisplay=m(()=>this.dataProvider.columnsToDisplay()),this.selectionMode=m(()=>this.dataProvider.selectionMode?.()??null),this.selectedItems=m(()=>this.dataProvider.selectedItems?.()??new Set),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??Yi),this.flattenFilterDef=m(()=>{let t=this.dataProvider.filterConfig?.();return t?ie(t,{},"",t.description?`${t.description} / `:""):[]}),this.filterFormControl=u(pt).nonNullable.control({}),this.isInitial=Z(Le(100).pipe(P(()=>!1)),{initialValue:!0}),this.scrolledToTop=V(!1),this.scrolledToBottom=V(!1),this.cmpFn=this.dataProvider.compareFn??((t,o)=>t==o),j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([t,o])=>this.dataProvider.onParamsChange?.(t,o)),N(()=>{this.dataProvider.filterValue&&this.filterFormControl.setValue(this.dataProvider.filterValue?.(),{emitEvent:!1})}),this.dataProvider.onScrolledToTop&&N(()=>{this.isLoading()||this.scrolledToTop()&&L(()=>this.dataProvider.onScrolledToTop())}),this.dataProvider.onScrolledToBottom&&N(()=>{this.isLoading()||this.scrolledToBottom()&&L(()=>this.dataProvider.onScrolledToBottom())}),De(this.data).pipe(oe(100),x()).subscribe(()=>{this.scrolledToTop()&&this.dataProvider.onScrolledToTop?.(),this.scrolledToBottom()&&this.dataProvider.onScrolledToBottom?.()})}ngOnInit(){this.dataProvider?.onInit?.()}ngOnDestroy(){this.dataProvider?.onDestroy?.()}onRowClick(t){this.dataProvider.onTableRowClick?.(t)}onHeaderClick(t,o){this.dataProvider.onHeaderCellClick?.(t,o)}onControlClick(t,o){this.dataProvider.onControlClick?.(t,o)}onFilterValueChange(t){this.dataProvider.onFilterChange?.(t)}onScrolled(t,o){t=="top"?this.scrolledToTop.set(!o):this.scrolledToBottom.set(!o)}trackingFn(t,o){return t}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-table-content"]],hostAttrs:[1,"pui-table-content"],decls:8,vars:2,consts:[[3,"formControl"],[1,"pui-table-content__content-wrapper"],[3,"id","itemHeight","columns","columnWidths","selectionMode"],[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"valueChange","formControl"],[3,"key","fieldType","label","fieldConfig","isNullable"],["puiContentVisibilityDetector","",3,"skippedChanged"],[3,"centerAligned","rightAligned","sortedAsc","sortedDesc","cellClick",4,"puiTableHeaderCellDef"],[3,"centerAligned","rightAligned",4,"puiTableCellDef"],[3,"cellClick","centerAligned","rightAligned","sortedAsc","sortedDesc"],[3,"centerAligned","rightAligned"],[1,"pui-table-cell__boolean-content",3,"pui-table-cell__boolean-content--true"],[3,"mode","format","date"],[1,"pui-table-cell__boolean-content"],["itemSize","48","scrollWindow","",3,"height"],["itemSize","48","scrollWindow",""],["puiHoverable","",3,"item","route","height","selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["puiHoverable","",3,"click","item","route","selected"],["puiHoverable","",3,"item","route","selected"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(o,a){if(o&1&&(l(0,"main")(1,"div"),_(2,ui,3,1,"pui-fieldset",0),l(3,"div",1),_(4,mi,1,2,"pui-loading-panel")(5,Ei,9,9,"pui-table",2),d()()(),w(6,Fi,1,7,"pui-layout-control",3,ne)),o&2){let r=a.flattenFilterDef();c(2),f(r.length>0?2:-1),c(2),f(a.isLoading()?4:5),c(2),S(a.controlsConfig())}},dependencies:[jt,It,Bt,Ot,Lt,Mt,Pt,$t,Rt,Nt,xt,Gt,wt,gt,_t,Ct,ft,ht,$e,Ae,Ve,xe,we,St,vt,mt,ut],encapsulation:2,data:{animation:[he("loading",[q(":enter",be(Et)),q(":leave",be(kt))])]}});let i=n;return i})();function En(i,n,e=!0){return i.map(t=>t.key==n?O(E({},t),{isSortedAsc:!t.isSortedAsc&&!t.isSortedDesc?e:!!t.isSortedDesc,isSortedDesc:!t.isSortedAsc&&!t.isSortedDesc?!e:!!t.isSortedAsc}):O(E({},t),{isSortedAsc:!1,isSortedDesc:!1}))}var Ji=new R("vertical layout data provider"),Fn=(()=>{let n=class n{constructor(){this.dataProvider=u(Ji),this.layoutService=u(Y,{self:!0}),this.router=u(X),this.route=u(W),this.document=u(ze),this.containerDiv=tt("container",{read:se}),this.activeTab=V(null),this.heading=m(()=>this.dataProvider.heading()),this.tabs=m(()=>this.dataProvider.tabs()),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.scrollState=Z(De(this.containerDiv).pipe(P(t=>t?.nativeElement?.closest(".pui-peekable-addon")??this.document),He(t=>Me(t,"scroll")),P(t=>t.currentTarget instanceof Document?t.currentTarget.scrollingElement?.scrollTop:t.currentTarget.scrollTop),Se(),Be(),P(([t,o])=>({direction:o-t>0?"down":"up",currentTop:o})),x())),j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([t,o])=>this.dataProvider.onParamsChange?.(t,o)),this.router.events.pipe(Q(t=>t instanceof ve||t instanceof at),je(this.router.lastSuccessfulNavigation?.finalUrl),Se(),x()).subscribe(()=>{let t=this.tabs();if(!t)return;let o=t.find(r=>{let h=this.router.createUrlTree(r.route,{relativeTo:this.route});return this.router.isActive(h,{paths:"subset",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})});if(!o)return;this.activeTab.set(Object.assign(o.label,{[Symbol()]:null}));let a=this.route.routeConfig?.children?.find(r=>r.path=="**");a&&(a.redirectTo=o.route.map(r=>String(r).replaceAll("..%2F","").replaceAll(".%2F","")).join("/"))})}onTabChanged(t){let o=this.tabs()?.find(a=>a.label==t);o&&this.router.navigate(o.route,{relativeTo:this.route})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-vertical-layout"]],viewQuery:function(o,a){o&1&&Ye(a.containerDiv,Vi,5,se),o&2&&Qe()},hostAttrs:[1,"pui-vertical-layout"],features:[ue([Y])],decls:14,vars:3,consts:[["container",""],["controlsTemplate",""],[1,"@container/layout"],[1,"pui-vertical-layout__heading"],[1,"pui-vertical-layout__navigation"],[1,"pui-vertical-layout__heading","pui-vertical-layout__heading--floating"],[1,"pui-vertical-layout__controls"],[3,"ngTemplateOutlet"],[1,"pui-vertical-layout__tabs",3,"currentTab"],[1,"spacer"],[1,"pui-vertical-layout__tabs",3,"tabChange","currentTab"],[3,"routerLink"],[3,"routerLink",4,"puiTab","puiTabHidden"],[1,"pui-vertical-layout__toolbar"],["puiFilledButton","",3,"color","ngClass","puiTooltip","disabled","hoverableEnabled"],["puiFilledButton","",3,"click","color","ngClass","puiTooltip","disabled","hoverableEnabled"]],template:function(o,a){if(o&1&&(l(0,"div",2,0)(2,"div")(3,"header",3)(4,"div",4),g(5,"pui-breadcrumbs"),l(6,"h1"),C(7),d()()(),_(8,Ni,6,3,"header",5),_(9,Mi,4,3,"header",6),g(10,"router-outlet")(11,"pui-peekable-addon"),d()(),H(12,zi,1,1,"ng-template",null,1,Ze)),o&2){let r;c(7),v(a.heading()),c(),f(((r=a.scrollState())==null?null:r.direction)=="up"&&((r=a.scrollState())==null?null:r.currentTop)>240?8:-1),c(),f(a.tabs().length>0||a.controls().length>0?9:-1)}},dependencies:[J,Fe,K,Ee,At,Vt,Ft,Te,Ce,Ki,ee,fe],encapsulation:2,data:{animation:[he("floatingHeader",[q(":enter",[G({transform:"translate(0, -100%)"}),ge("150ms ease-in-out",G({transform:"translate(0, 0)"}))]),q(":leave",[G({transform:"translate(0, 0)"}),ge("150ms ease-in-out",G({transform:"translate(0, -100%)"}))])])]}});let i=n;return i})();export{Ut as a,Tn as b,Gi as c,yn as d,qi as e,Gt as f,Dn as g,Wi as h,xn as i,wn as j,Sn as k,Yi as l,Qi as m,kn as n,En as o,Ji as p,Fn as q};
