import{A as Q,Aa as Ee,B as J,C as Te,Ca as W,Fa as Z,Ga as Fe,Ja as Ae,K as ye,Ka as Dt,Ma as Ve,N as x,Na as $e,O as xe,P as X,R as De,S as at,T as rt,U as lt,V as st,W as ct,X as we,a as tt,aa as dt,ab as wt,b as fe,bb as St,c as it,cb as kt,d as Ce,da as pt,ea as ut,fb as Et,gb as Ft,h as nt,hb as At,ib as Vt,ja as Se,jb as $t,kb as Pt,lb as Ot,mb as Rt,na as _t,nb as Lt,o as he,oa as mt,ob as It,p as be,pa as ft,pb as Bt,qa as Ct,qb as Nt,r as U,ra as ht,rb as Mt,s as G,sa as bt,t as ve,ta as vt,ua as gt,va as Tt,wa as yt,x as ge,xa as xt,y as ot,ya as ke,z as q}from"./chunk-OJNBBAHS.js";import{$ as oe,Aa as le,Bb as D,C as Y,Cb as w,Da as F,Db as l,Eb as d,Fb as h,Gb as B,H as ne,Ha as Ue,Hb as y,Kb as b,Lb as s,Mb as Qe,Nb as ce,Q as Me,Ra as c,Tb as Je,Ub as Xe,V as je,Vb as de,W as He,Wb as C,Xb as v,Za as Ge,_b as pe,bc as ue,ca as I,cc as H,dc as S,ec as _e,f as Ie,fa as u,fb as A,hb as qe,ic as V,kc as z,lc as me,mb as _,mc as Ze,oa as g,pa as T,q as L,r as j,sa as ae,ta as re,tc as et,ub as We,vb as p,vc as m,wb as se,x as Be,xb as Ke,xc as N,ya as ze,yb as f,yc as $,z as Ne,za as E,zb as Ye}from"./chunk-SJLNDPFN.js";import{a as k,b as R}from"./chunk-EQDQRRRY.js";var ie=(i,o)=>o.id,Wt=(i,o)=>({"pui-action-drawer-layout__toolbar__most-emphasized":i,"pui-action-drawer-layout__toolbar__normal":o});function Kt(i,o){if(i&1&&B(0,3),i&2){let e=s();p("ngComponentOutlet",e.configuration.content)("ngComponentOutletInputs",e.contentInputs())}}function Yt(i,o){if(i&1&&(l(0,"i"),C(1),d()),i&2){let e=s().$implicit;c(),v(e.icon)}}function Qt(i,o){if(i&1&&B(0,7),i&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Jt(i,o){if(i&1){let e=y();l(0,"button",6),b("click",function(n){let a=g(e).$implicit,r=s();return T(r.layoutService.controlOnClick(a.id,n))}),_(1,Yt,2,1,"i")(2,Qt,1,1,"ng-container",7),l(3,"span"),C(4),d()()}if(i&2){let e=o.$implicit,t=s();p("ngClass",_e(7,Wt,e.id==t.mostEmphasizedControlId(),e.id!=t.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled)("puiTooltip",e.label)("puiTooltipPosition","top"),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),v(e.label)}}var Pe=(i,o)=>o.key,ee=i=>({enum:i}),Xt=i=>({format:i}),Zt=i=>({"date-time":i}),jt=()=>({});function ei(i,o){if(i&1&&h(0,"pui-field-def",2),i&2){let e,t=o.$implicit;p("key",t.key)("fieldType",t.fieldConfiguration.type)("label",(e=t.fieldConfiguration.description)!==null&&e!==void 0?e:t.key)("fieldConfig",t.fieldConfiguration.type=="string"?S(4,ee,t.fieldConfiguration.enum):t.fieldConfiguration.type=="number"?S(6,ee,t.fieldConfiguration.enum):t.fieldConfiguration.type=="date-time"?S(10,Zt,S(8,Xt,t.fieldConfiguration.format)):H(12,jt))}}function ti(i,o){if(i&1&&(l(0,"form")(1,"pui-fieldset",1),D(2,ei,1,13,"pui-field-def",2,Pe),d()()),i&2){let e=s();c(),p("formControl",e.formControl),c(),w(e.flattenedControls())}}function ii(i,o){if(i&1){let e=y();l(0,"pui-layout-control",3),b("click",function(n){let a=g(e).$implicit,r=s();return T(r.onControlClick(a.id,n))}),d()}if(i&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var Ht=()=>[],ni=i=>({peek:i}),oi=i=>({outlets:i}),ai=i=>[i];function ri(i,o){if(i&1&&(l(0,"a",1)(1,"i"),C(2,"open_in_full"),d()()),i&2){let e=s();p("routerLink",e.routeToFullContent())}}var li=[[["",8,"pui-root-sidenav__header__logo"]],[["",8,"pui-root-sidenav__nav"]]],si=[".pui-root-sidenav__header__logo",".pui-root-sidenav__nav"];function ci(i,o){if(i&1&&h(0,"pui-field-def",5),i&2){let e,t=o.$implicit;p("key",t.key)("fieldType",t.fieldConfiguration.type)("label",(e=t.fieldConfiguration.description)!==null&&e!==void 0?e:t.key)("fieldConfig",t.fieldConfiguration.type=="string"?S(5,ee,t.fieldConfiguration.enum):t.fieldConfiguration.type=="number"?S(7,ee,t.fieldConfiguration.enum):H(9,jt))("isNullable",!1)}}function di(i,o){if(i&1){let e=y();l(0,"pui-fieldset",4),b("valueChange",function(n){g(e);let a=s();return T(a.onFilterValueChange(n))}),D(1,ci,1,10,"pui-field-def",5,Pe),d()}if(i&2){let e=s();p("formControl",e.filterFormControl),c(),w(e.flattenFilterDef())}}function pi(i,o){if(i&1&&h(0,"pui-loading-panel"),i&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())}}function ui(i,o){if(i&1){let e=y();l(0,"pui-table-header-cell",9),b("cellClick",function(n){g(e);let a=s().$implicit,r=s(2);return T(r.onHeaderClick(a.key,n))}),C(1),d()}if(i&2){let e,t,n,a,r=s().$implicit;p("centerAligned",(e=r.isAlignCenter)!==null&&e!==void 0?e:!1)("rightAligned",(t=r.isAlignEnd)!==null&&t!==void 0?t:!1)("sortedAsc",(n=r.isSortedAsc)!==null&&n!==void 0?n:!1)("sortedDesc",(a=r.isSortedDesc)!==null&&a!==void 0?a:!1),c(),v(r.label)}}function _i(i,o){i&1&&C(0," \xA0ago ")}function mi(i,o){if(i&1&&(l(0,"pui-time-display",12),V(1,"lodashGet"),l(2,"span"),C(3,"--"),d()(),_(4,_i,1,0)),i&2){let e,t=s(2).$implicit,n=s().$implicit;p("mode",n.fieldConfiguration.format=="timeAgo"?"timeAgo":"normal")("format",n.fieldConfiguration.format)("date",z(1,4,t,(e=n.path)!==null&&e!==void 0?e:n.key)),c(4),f(n.fieldConfiguration.format=="timeAgo"?4:-1)}}function fi(i,o){if(i&1&&(pe(0),V(1,"lodashGet"),l(2,"i",13),C(3),d()),i&2){let e,t=s(2).$implicit,n=s().$implicit,a=z(1,3,t,(e=n.path)!==null&&e!==void 0?e:n.key);c(2),Ke("pui-table-cell__boolean-content--true",a===!0),c(),v(a===!0?"check":a===!1?"close":"")}}function Ci(i,o){if(i&1&&(l(0,"span"),C(1),V(2,"lodashGet"),d()),i&2){let e,t=s(2).$implicit,n=s().$implicit;c(),v(z(2,1,t,(e=n.path)!==null&&e!==void 0?e:n.key))}}function hi(i,o){if(i&1&&_(0,mi,5,7)(1,fi,4,6,"i",11)(2,Ci,3,4,"span"),i&2){let e,t=s(2).$implicit;f((e=t.fieldConfiguration.type)==="date-time"?0:e==="boolean"?1:2)}}function bi(i,o){if(i&1&&(l(0,"span"),C(1),V(2,"lodashGet"),d()),i&2){let e,t=s().$implicit,n=s().$implicit;c(),v(z(2,1,t,(e=n.path)!==null&&e!==void 0?e:n.key))}}function vi(i,o){if(i&1&&(l(0,"pui-table-cell",10),_(1,hi,3,1)(2,bi,3,4,"span"),d()),i&2){let e,t,n=s().$implicit;p("centerAligned",(e=n.isAlignCenter)!==null&&e!==void 0?e:!1)("rightAligned",(t=n.isAlignEnd)!==null&&t!==void 0?t:!1),c(),f(n.fieldConfiguration?1:2)}}function gi(i,o){if(i&1&&_(0,ui,2,5,"pui-table-header-cell",7)(1,vi,3,3,"pui-table-cell",8),i&2){let e=o.$implicit;p("puiTableHeaderCellDef",e.key),c(),p("puiTableCellDef",e.key)}}function Ti(i,o){if(i&1){let e=y();l(0,"pui-table-row",17),V(1,"isInSet"),b("click",function(){let n=g(e).$implicit,a=s(4);return T(a.onRowClick(n))}),d()}if(i&2){let e=o.$implicit,t=s(4);se("height",48,"px"),p("item",e)("route",e[t.ROUTE_TO_DETAIL])("selected",me(1,5,e,t.selectedItems(),t.cmpFn))}}function yi(i,o){if(i&1&&(l(0,"cdk-virtual-scroll-viewport",15),_(1,Ti,2,9,"pui-table-row",16),d()),i&2){let e=s(3);se("height",e.data().length*48,"px"),c(),p("cdkVirtualForOf",e.data())("cdkVirtualForTrackBy",e.trackingFn)("cdkVirtualForTemplateCacheSize",0)}}function xi(i,o){if(i&1&&_(0,yi,2,5,"cdk-virtual-scroll-viewport",14),i&2){let e=s(2);f(e.isBrowser?0:-1)}}function Di(i,o){if(i&1){let e=y();l(0,"pui-table-row",17),V(1,"isInSet"),b("click",function(){let n=g(e).$implicit,a=s(3);return T(a.onRowClick(n))}),d()}if(i&2){let e=o.$implicit,t=s(3);p("item",e)("route",e[t.ROUTE_TO_DETAIL])("selected",me(1,3,e,t.selectedItems(),t.cmpFn))}}function wi(i,o){if(i&1&&D(0,Di,2,7,"pui-table-row",18,Ye),i&2){let e=s(2);w(e.data())}}function Si(i,o){if(i&1){let e=y();l(0,"pui-table",2),D(1,gi,2,2,null,null,Pe),l(3,"pui-table-body")(4,"div",6),b("skippedChanged",function(n){g(e);let a=s();return T(a.scrolledToTop.set(!n))}),d(),h(5,"pui-table-header-row"),_(6,xi,1,1)(7,wi,2,0),l(8,"div",6),b("skippedChanged",function(n){g(e);let a=s();return T(a.scrolledToBottom.set(!n))}),d()()()}if(i&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())("id",e.configuration==null?null:e.configuration.id)("itemHeight",48)("columns",e.columnsToDisplay())("columnWidths",H(8,Ht))("selectionMode",e.selectionMode()),c(),w(e.columnConfig()),c(5),f(e.configuration!=null&&e.configuration.useVirtualScroll?6:7)}}function ki(i,o){if(i&1){let e=y();l(0,"pui-layout-control",19),b("click",function(n){let a=g(e).$implicit,r=s();return T(r.onControlClick(a.id,n))}),d()}if(i&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var Ei=["container"],Fi=(i,o)=>o.label,Ai=(i,o)=>({"pui-vertical-layout__toolbar__most-emphasized":i,"pui-vertical-layout__toolbar__normal":o});function Vi(i,o){if(i&1&&(l(0,"header",5)(1,"div",4),h(2,"pui-breadcrumbs"),l(3,"h1"),C(4),d()(),B(5,7),d()),i&2){let e=s(),t=de(13);p("@floatingHeader",void 0),c(4),v(e.heading()),c(),p("ngTemplateOutlet",t)}}function $i(i,o){if(i&1&&(l(0,"a",11),C(1),d()),i&2){let e=s().$implicit;p("routerLink",e.route),c(),v(e.label)}}function Pi(i,o){if(i&1&&_(0,$i,2,2,"a",12),i&2){let e,t=o.$implicit;p("puiTab",t.label)("puiTabHidden",(e=t.hidden)!==null&&e!==void 0?e:!1)}}function Oi(i,o){if(i&1){let e=y();l(0,"pui-tab-bar",10),b("tabChange",function(n){g(e);let a=s(2);return T(a.onTabChanged(n))}),D(1,Pi,1,2,"a",11,Fi),d()}if(i&2){let e=s(2);p("currentTab",e.activeTab()),c(),w(e.tabs())}}function Ri(i,o){i&1&&h(0,"div",9)}function Li(i,o){if(i&1&&(l(0,"header",6),_(1,Oi,3,1,"pui-tab-bar",8)(2,Ri,1,0,"div",9),B(3,7),d()),i&2){let e=s(),t=de(13);c(),f(e.tabs().length>0?1:-1),c(),f(e.controls().length>0?2:-1),c(),p("ngTemplateOutlet",t)}}function Ii(i,o){if(i&1&&(l(0,"i"),C(1),d()),i&2){let e=s().$implicit;c(),v(e.icon)}}function Bi(i,o){if(i&1&&B(0,7),i&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Ni(i,o){if(i&1){let e=y();l(0,"button",15),b("click",function(n){let a=g(e).$implicit,r=s(3);return T(r.layoutService.controlOnClick(a.id,n))}),_(1,Ii,2,1,"i")(2,Bi,1,1,"ng-container",7),l(3,"span"),C(4),d()()}if(i&2){let e,t=o.$implicit,n=s(3);p("color",(e=t.color)!==null&&e!==void 0?e:"accent")("ngClass",_e(7,Ai,t.id==n.mostEmphasizedControlId(),t.id!=n.mostEmphasizedControlId()&&(t.icon||t.iconTemplateRef)))("puiTooltip",t.label)("disabled",t.isDisabled)("hoverableEnabled",!t.isDisabled),c(),f(t.icon?1:t.iconTemplateRef?2:-1),c(3),v(t.label)}}function Mi(i,o){if(i&1&&(l(0,"div",13),D(1,Ni,5,10,"button",14,ie),d()),i&2){let e=s(2);c(),w(e.controls())}}function ji(i,o){if(i&1&&_(0,Mi,3,0,"div",13),i&2){let e=s();f(e.controls().length>0?0:-1)}}var K=(()=>{class i{constructor(){this._controls=F([]),this.controls=m(()=>this._controls().toSorted((e,t)=>(e.weight??0)-(t.weight??0))),this.mostEmphasizedControlId=m(()=>this.controls().filter(e=>!e.mode||e.mode=="auto").at(-1)?.id),this.eventsMap={}}registerControl(e,t){return this._controls.update(n=>[...n,k({},e)]),this.eventsMap[e.id]=t,{update:n=>{this._controls.update(a=>a.map(r=>r.id==n.id?k(k({},r),n):r))},dispose:()=>{this._controls.update(n=>n.filter(a=>a.id!=e.id))}}}controlOnClick(e,t){this.eventsMap[e]?.click?.(t)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=oe({token:i,factory:i.\u0275fac})}}return i})(),Hi=(()=>{class i{constructor(){this.overlayRef=u(Tt),this.dataProvider=u(zt),this.layoutService=u(K,{self:!0}),this.configuration=this.dataProvider?.configuration,this.heading=m(()=>this.dataProvider.heading()),this.contentInputs=m(()=>this.dataProvider.contentInputs?.()??{}),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.dataProvider.onActionDrawerInit?.(this.overlayRef)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=A({type:i,selectors:[["pui-action-drawer-layout"]],hostAttrs:[1,"pui-action-drawer-layout"],features:[ue([K])],decls:10,vars:2,consts:[[1,"@container/layout"],[1,"pui-action-drawer-layout__heading"],[1,"pui-action-drawer-layout__content"],[3,"ngComponentOutlet","ngComponentOutletInputs"],[1,"pui-action-drawer-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],["puiFilledButton","","color","accent",3,"click","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],[3,"ngTemplateOutlet"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"header",1),h(2,"pui-breadcrumbs"),l(3,"h1"),C(4),d()(),l(5,"div",2),_(6,Kt,1,2,"ng-container",3),d(),l(7,"div",4),D(8,Jt,5,10,"button",5,ie),d()()),t&2&&(c(4),v(n.heading()),c(2),f(n.configuration&&n.configuration.content?6:-1),c(2),w(n.controls()))},dependencies:[Fe,it,Ce,W,Ee,Z,fe],encapsulation:2})}}return i})(),zt=new I("action drawer layout data provider"),vn=(()=>{class i{constructor(){this.overlay=u(yt),this.injector=u(ae)}open(e,t={width:"480px"}){return this.overlay.open(Hi,{positionStrategy:this.overlay.position().global().right("0").centerVertically(),maxWidth:"90vw",width:t.width??"480px",height:"100%",hasBackdrop:!0,backdropClass:"pui-action-drawer-backdrop",closeOnBackdropClick:!0,disposeOnNavigation:!0,closeOnEscapeKeydown:!0,animation:"slideInEnd",data:t.overlayData,parentInjector:ae.create({providers:[{provide:gt,useValue:t.overlayData},{provide:zt,useClass:e},...t.providers??[]],parent:t.parent??this.injector})})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),zi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}],gn=[{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}],Ui=new I("editable content data provider");function te(i,o,e,t){return Object.entries(i.properties).flatMap(([a,r])=>{if(r.type=="object")return te(r,o,`${e?`${e}.`:""}${a}`,`${t}${r.description??""} / `);if(r.type=="array"){let P=ye(o,`${e?`${e}.`:""}${a}`);return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:R(k({},r),{description:`${t}${r.description??""}`})},...Array.isArray(P)?P.flatMap((Oe,O)=>r.items.type=="object"?[...te(r.items,o,`${e?`${e}.`:""}${a}[${O}]`,`${t}${r.description??""} / #${O} / `)]:[{key:`${e?`${e}.`:""}${a}[${O}]`,fieldConfiguration:R(k({},r.items),{description:`${t}${r.description??""} / #${O}`})}]):[]]}return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:R(k({},r),{description:t+r.description})}]})}var Ut=(()=>{class i{constructor(){if(this.layoutService=u(K,{optional:!0}),this.destroyRef=u(re),this.id=E.required(),this.label=E.required(),this.weight=E(0),this.icon=E(),this.iconTemplateRef=E(),this.disabled=E(!1,{transform:et}),this.mode=E(void 0),this.click=ze(),!this.layoutService)return;let e,t;$(()=>{let n=this.id(),a=this.label(),r=this.disabled(),P=this.icon(),Oe=this.iconTemplateRef(),O=this.mode(),Gt=this.weight(),Re={id:n,label:a,isDisabled:r,icon:P,iconTemplateRef:Oe,weight:Gt,mode:O};if(e)e(Re);else{let Le=this.layoutService.registerControl(Re,{click:qt=>this.click.emit(qt)});e=Le.update,t=Le.dispose}}),this.destroyRef.onDestroy(()=>{t?.()})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=qe({type:i,selectors:[["pui-layout-control"]],inputs:{id:[1,"id"],label:[1,"label"],weight:[1,"weight"],icon:[1,"icon"],iconTemplateRef:[1,"iconTemplateRef"],disabled:[1,"disabled"],mode:[1,"mode"]},outputs:{click:"click"}})}}return i})(),Tn=(()=>{class i{constructor(){this.route=u(q),this.dataProvider=u(Ui),this.formControl=new st(void 0),this.data=m(()=>this.dataProvider.data()),this.fieldConfiguration=m(()=>this.dataProvider.fieldConfiguration()),this.formControlValue=X(this.formControl.events.pipe(Y(e=>e instanceof rt),L(e=>e.value))),this.flattenedControls=m(()=>{let e=this.fieldConfiguration(),t=this.formControlValue();return e?te(e,t,"",e.description?`${e.description} / `:""):[]}),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??zi),this.isDirty=F(!0),$(()=>{let e=this.data();N(()=>this.formControl.setValue(e))}),$(()=>{let e=this.formControlValue();N(()=>this.dataProvider.onValueChange?.(e))}),j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([e,t])=>this.dataProvider.onParamsChange?.(e,t)),this.formControl.events.pipe(x()).subscribe(()=>{this.isDirty.set(this.formControl.dirty),this.dataProvider.onStateChange?.({isValid:this.formControl.valid,isDisabled:this.formControl.disabled,isDirty:this.formControl.dirty})}),this.dataProvider.registerUpdateState?.(e=>{N(()=>{e?.isDirty===!1?this.formControl.markAsPristine():e?.isDirty===!0&&this.formControl.markAsDirty(),e?.isDisabled===!1?this.formControl.enable():e?.isDisabled===!0&&this.formControl.disable()})})}onControlClick(e,t){this.dataProvider.onControlClick?.(e,t)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=A({type:i,selectors:[["pui-editable-content"]],hostAttrs:[1,"pui-editable-content"],decls:4,vars:1,consts:[[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"formControl"],[3,"key","fieldType","label","fieldConfig"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(t,n){t&1&&(l(0,"main"),_(1,ti,4,1,"form"),d(),D(2,ii,1,7,"pui-layout-control",0,ie)),t&2&&(c(),f(n.flattenedControls().length>0?1:-1),c(),w(n.controlsConfig()))},dependencies:[$e,Ve,Ae,ct,De,at,lt,we,Ut],encapsulation:2})}}return i})(),Gi=new I("peekable addon data provider"),qi=(()=>{class i{constructor(){this.dataProvider=u(Gi,{optional:!0}),this.route=u(q),this.router=u(J),this.overlayKeyboardDispatcher=u(bt),this.routeToFullContent=m(()=>this.dataProvider?.routeToFullContent()??null),this._keydownEvents=new Ie,j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([e,t])=>this.dataProvider?.onParamsChange?.(e,t)),this.overlayKeyboardDispatcher.add(this),u(re).onDestroy(()=>{this.overlayKeyboardDispatcher.ngOnDestroy(),this._keydownEvents.complete()}),this._keydownEvents.pipe(x()).subscribe(e=>{e.key=="Escape"&&this.onEscapePress(e)})}onEscapePress(e){this.route.snapshot.parent?.children.some(t=>t.outlet=="peek")&&this.router.navigate([{outlets:{peek:[]}}],{relativeTo:this.route.parent})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=A({type:i,selectors:[["pui-peekable-addon"]],hostAttrs:[1,"pui-peekable-addon"],decls:8,vars:9,consts:[[1,"pui-peekable-addon__nav"],["puiBaseButton","","puiTooltip","View in full",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"spacer"],["puiBaseButton","","puiTooltip","Close peek window",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"pui-peekable-addon__content"],["name","peek"]],template:function(t,n){t&1&&(l(0,"nav",0),_(1,ri,3,1,"a",1),h(2,"div",2),l(3,"a",3)(4,"i"),C(5,"close"),d()()(),l(6,"main",4),h(7,"router-outlet",5),d()),t&2&&(c(),f(n.routeToFullContent()?1:-1),c(2),p("routerLink",S(7,ai,S(5,oi,S(3,ni,H(2,Ht))))))},dependencies:[Q,Te,W,ke,Z],encapsulation:2})}}return i})(),yn=(()=>{class i{constructor(){this.router=u(J,{optional:!0}),this.isSidenavVisible=F(!1),this.router?.events.pipe(Y(e=>e instanceof ge),ne(50),x()).subscribe(()=>{this.isSidenavVisible.set(!1)})}toggleSidenav(e){this.isSidenavVisible.update(t=>e??!t)}onContentClick(e){e.target==e.currentTarget&&this.isSidenavVisible.set(!1)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=A({type:i,selectors:[["pui-root-sidenav"]],ngContentSelectors:si,decls:12,vars:1,consts:[[1,"pui-root-sidenav"],[1,"pui-root-sidenav__header"],["puiBaseButton","",1,"pui-root-sidenav__header__hamburger",3,"click"],[1,"spacer"],[1,"pui-root-sidenav__nav-wrapper"],[1,"pui-root-sidenav__content-wrapper"],[1,"pui-root-sidenav__content",3,"click"]],template:function(t,n){t&1&&(Qe(li),l(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return n.toggleSidenav()}),l(3,"i"),C(4,"menu"),d()(),h(5,"div",3),ce(6),d(),l(7,"div",4),ce(8,1),d()(),l(9,"div",5)(10,"div",6),b("click",function(r){return n.onContentClick(r)}),h(11,"router-outlet"),d()()),t&2&&(c(10),We("data-sidenav",n.isSidenavVisible()?"visible":"hidden"))},dependencies:[W,ke,Q],encapsulation:2})}}return i})();function xn(i,o,e=!0){let t=Object.values(i??{}).some(a=>typeof a=="string"?!!a:a!=null),n=Object.keys(i??{});return a=>{if(!t)return!0;if(e){for(let r of n)if(r in o&&o[r]!=null&&!o[r](a,r,i[r],i))return!1;return!0}else{for(let r of n)if(r in o&&o[r]!=null&&o[r](a,r,i[r],i))return!0;return!1}}}function Dn(i){let o=i.find(t=>t.isSortedAsc||t.isSortedDesc);if(!o)return()=>0;let e=o.isSortedDesc?-1:1;return o.fieldConfiguration?.type=="date-time"?(t,n)=>{let a=M(t,o),r=M(n,o);return a==null&&r==null?0:a instanceof Date&&r instanceof Date?(a.getTime()-r.getTime())*e:a instanceof Date?1*e:-1*e}:(t,n)=>{switch(o.key){default:return M(t,o)>M(n,o)?e:M(t,o)<M(n,o)?-1*e:0}}}function M(i,o){return o.path?ye(i,o.path):i[o.key]}var Wi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"},{id:"add",label:"Add new",icon:"add"}],Ki=new I("table content data provider"),wn=(()=>{class i{constructor(){this.route=u(q),this.dataProvider=u(Ki),this.isBrowser=nt(u(Ue)),this.ROUTE_TO_DETAIL=Symbol(),this.configuration=this.dataProvider.configuration,this.isLoading=m(()=>this.dataProvider.isLoading?.()??!1),this.data=m(()=>{let e=this.dataProvider.data(),t=this.dataProvider.routeToDetail;return e?.map(n=>Object.assign({},n,{[this.ROUTE_TO_DETAIL]:t?.bind(this.dataProvider)?.(n)}))}),this.columnConfig=m(()=>this.dataProvider.columnsConfig()),this.columnsToDisplay=m(()=>this.dataProvider.columnsToDisplay()),this.selectionMode=m(()=>this.dataProvider.selectionMode?.()??null),this.selectedItems=m(()=>this.dataProvider.selectedItems?.()??new Set),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??Wi),this.flattenFilterDef=m(()=>{let e=this.dataProvider.filterConfig?.();return e?te(e,{},"",e.description?`${e.description} / `:""):[]}),this.filterFormControl=u(dt).nonNullable.control({}),this.isInitial=X(Ne(100).pipe(L(()=>!1)),{initialValue:!0}),this.scrolledToTop=F(!1),this.scrolledToBottom=F(!1),this.cmpFn=this.dataProvider.compareFn??((e,t)=>e==t),j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([e,t])=>this.dataProvider.onParamsChange?.(e,t)),$(()=>{this.dataProvider.filterValue&&this.filterFormControl.setValue(this.dataProvider.filterValue?.(),{emitEvent:!1})}),this.dataProvider.onScrolledToTop&&$(()=>{this.isLoading()||this.scrolledToTop()&&N(()=>this.dataProvider.onScrolledToTop())}),this.dataProvider.onScrolledToBottom&&$(()=>{this.isLoading()||this.scrolledToBottom()&&N(()=>this.dataProvider.onScrolledToBottom())}),xe(this.data).pipe(ne(100),x()).subscribe(()=>{this.scrolledToTop()&&this.dataProvider.onScrolledToTop?.(),this.scrolledToBottom()&&this.dataProvider.onScrolledToBottom?.()})}ngOnInit(){this.dataProvider?.onInit?.()}ngOnDestroy(){this.dataProvider?.onDestroy?.()}onRowClick(e){this.dataProvider.onTableRowClick?.(e)}onHeaderClick(e,t){this.dataProvider.onHeaderCellClick?.(e,t)}onControlClick(e,t){this.dataProvider.onControlClick?.(e,t)}onFilterValueChange(e){this.dataProvider.onFilterChange?.(e)}onScrolled(e,t){e=="top"?this.scrolledToTop.set(!t):this.scrolledToBottom.set(!t)}trackingFn(e,t){return e}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=A({type:i,selectors:[["pui-table-content"]],hostAttrs:[1,"pui-table-content"],decls:9,vars:2,consts:[[3,"formControl"],[1,"pui-table-content__content-wrapper"],[3,"id","itemHeight","columns","columnWidths","selectionMode"],[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"valueChange","formControl"],[3,"key","fieldType","label","fieldConfig","isNullable"],["puiContentVisibilityDetector","",3,"skippedChanged"],[3,"centerAligned","rightAligned","sortedAsc","sortedDesc","cellClick",4,"puiTableHeaderCellDef"],[3,"centerAligned","rightAligned",4,"puiTableCellDef"],[3,"cellClick","centerAligned","rightAligned","sortedAsc","sortedDesc"],[3,"centerAligned","rightAligned"],[1,"pui-table-cell__boolean-content",3,"pui-table-cell__boolean-content--true"],[3,"mode","format","date"],[1,"pui-table-cell__boolean-content"],["itemSize","48","scrollWindow","",3,"height"],["itemSize","48","scrollWindow",""],["puiHoverable","",3,"item","route","height","selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["puiHoverable","",3,"click","item","route","selected"],["puiHoverable","",3,"item","route","selected"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(t,n){if(t&1&&(l(0,"main")(1,"div"),pe(2),_(3,di,3,1,"pui-fieldset",0),l(4,"div",1),_(5,pi,1,2,"pui-loading-panel")(6,Si,9,9,"pui-table",2),d()()(),D(7,ki,1,7,"pui-layout-control",3,ie)),t&2){let a=n.flattenFilterDef();c(3),f(a.length>0?3:-1),c(2),f(n.isLoading()?5:6),c(2),w(n.controlsConfig())}},dependencies:[Mt,Pt,Nt,Ot,Bt,It,Rt,Vt,Lt,$t,xt,Ut,Dt,ut,ht,_t,ft,mt,Ct,$e,Ve,Ae,De,we,pt,wt,vt],encapsulation:2,data:{animation:[he("loading",[G(":enter",ve(kt)),G(":leave",ve(St))])]}})}}return i})();function Sn(i,o,e=!0){return i.map(t=>t.key==o?R(k({},t),{isSortedAsc:!t.isSortedAsc&&!t.isSortedDesc?e:!!t.isSortedDesc,isSortedDesc:!t.isSortedAsc&&!t.isSortedDesc?!e:!!t.isSortedAsc}):R(k({},t),{isSortedAsc:!1,isSortedDesc:!1}))}var Yi=new I("vertical layout data provider"),kn=(()=>{class i{constructor(){this.dataProvider=u(Yi),this.layoutService=u(K,{self:!0}),this.router=u(J),this.route=u(q),this.document=u(tt),this.containerDiv=Ge("container",{read:le}),this.activeTab=F(null),this.heading=m(()=>this.dataProvider.heading()),this.tabs=m(()=>this.dataProvider.tabs()),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.scrollState=X(xe(this.containerDiv).pipe(L(e=>e?.nativeElement?.closest(".pui-peekable-addon")??this.document),He(e=>Be(e,"scroll")),L(e=>e.currentTarget instanceof Document?e.currentTarget.scrollingElement?.scrollTop:e.currentTarget.scrollTop),Se(),Me(),L(([e,t])=>({direction:t-e>0?"down":"up",currentTop:t})),x())),j([this.route.params,this.route.queryParams]).pipe(x()).subscribe(([e,t])=>this.dataProvider.onParamsChange?.(e,t)),this.router.events.pipe(Y(e=>e instanceof ge||e instanceof ot),je(this.router.lastSuccessfulNavigation?.finalUrl),Se(),x()).subscribe(()=>{let e=this.tabs();if(!e)return;let t=e.find(a=>{let r=this.router.createUrlTree(a.route,{relativeTo:this.route});return this.router.isActive(r,{paths:"subset",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})});if(!t)return;this.activeTab.set(Object.assign(t.label,{[Symbol()]:null}));let n=this.route.routeConfig?.children?.find(a=>a.path=="**");n&&(n.redirectTo=t.route.map(a=>String(a).replaceAll("..%2F","").replaceAll(".%2F","")).join("/"))})}onTabChanged(e){let t=this.tabs()?.find(n=>n.label==e);t&&this.router.navigate(t.route,{relativeTo:this.route})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=A({type:i,selectors:[["pui-vertical-layout"]],viewQuery:function(t,n){t&1&&Je(n.containerDiv,Ei,5,le),t&2&&Xe()},hostAttrs:[1,"pui-vertical-layout"],features:[ue([K])],decls:14,vars:3,consts:[["container",""],["controlsTemplate",""],[1,"@container/layout"],[1,"pui-vertical-layout__heading"],[1,"pui-vertical-layout__navigation"],[1,"pui-vertical-layout__heading","pui-vertical-layout__heading--floating"],[1,"pui-vertical-layout__controls"],[3,"ngTemplateOutlet"],[1,"pui-vertical-layout__tabs",3,"currentTab"],[1,"spacer"],[1,"pui-vertical-layout__tabs",3,"tabChange","currentTab"],[3,"routerLink"],[3,"routerLink",4,"puiTab","puiTabHidden"],[1,"pui-vertical-layout__toolbar"],["puiFilledButton","",3,"color","ngClass","puiTooltip","disabled","hoverableEnabled"],["puiFilledButton","",3,"click","color","ngClass","puiTooltip","disabled","hoverableEnabled"]],template:function(t,n){if(t&1&&(l(0,"div",2,0)(2,"div")(3,"header",3)(4,"div",4),h(5,"pui-breadcrumbs"),l(6,"h1"),C(7),d()()(),_(8,Vi,6,3,"header",5)(9,Li,4,3,"header",6),h(10,"router-outlet")(11,"pui-peekable-addon"),d()(),_(12,ji,1,1,"ng-template",null,1,Ze)),t&2){let a;c(7),v(n.heading()),c(),f(((a=n.scrollState())==null?null:a.direction)=="up"&&((a=n.scrollState())==null?null:a.currentTop)>240?8:-1),c(),f(n.tabs().length>0||n.controls().length>0?9:-1)}},dependencies:[Q,Fe,W,Ee,At,Ft,Et,Te,Ce,qi,Z,fe],encapsulation:2,data:{animation:[he("floatingHeader",[G(":enter",[U({transform:"translate(0, -100%)"}),be("150ms ease-in-out",U({transform:"translate(0, 0)"}))]),G(":leave",[U({transform:"translate(0, 0)"}),be("150ms ease-in-out",U({transform:"translate(0, -100%)"}))])])]}})}}return i})();export{zt as a,vn as b,zi as c,gn as d,Ui as e,Ut as f,Tn as g,Gi as h,yn as i,xn as j,Dn as k,Wi as l,Ki as m,wn as n,Sn as o,Yi as p,kn as q};
