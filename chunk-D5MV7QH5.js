import{$ as at,$a as yt,A as X,Aa as bt,B as Te,Ba as gt,Da as Z,Ea as Ee,Ha as Fe,Ia as vt,J as ye,Ka as Ve,La as Ae,N as E,O as De,P as xe,_a as Tt,a as fe,aa as rt,ab as Dt,b as it,c as Ce,db as xt,eb as wt,fa as we,fb as kt,g as nt,gb as St,hb as Et,ib as Ft,ja as lt,jb as Vt,ka as st,kb as At,la as dt,lb as $t,ma as ct,mb as Mt,n as he,na as ut,nb as Nt,o as be,oa as pt,ob as It,pa as mt,pb as Ot,q as G,qa as _t,r as q,ra as ft,s as ge,sa as Ct,ta as ht,ua as ke,w as ve,wa as Se,x as ot,y as W,ya as K,z as J}from"./chunk-BLILFWNP.js";import{$ as ae,C as ne,Cb as O,Da as ze,Db as D,Ec as tt,H as oe,Hb as h,Ib as l,Jb as We,Ka as d,Kb as de,Q as Le,Qb as Ke,Rb as Ye,Sb as ce,Tb as ue,U as Be,Ub as Qe,V as je,Vb as C,Wb as y,Zb as Je,ab as A,ac as pe,bc as j,ca as I,cb as Ue,cc as k,dc as me,ea as p,f as Oe,gb as B,hc as $,ja as v,jc as H,ka as T,kc as _e,la as re,lc as Xe,ma as He,na as le,ob as Ge,pb as _,pc as z,q as R,qb as f,qc as m,r as L,ra as V,rb as qe,rc as U,sc as Q,tb as x,ub as w,uc as Ze,vb as u,vc as S,wb as s,wc as et,x as Pe,xb as c,yb as b,z as Re,za as se}from"./chunk-LVH4HSPS.js";import{a as F,b as N}from"./chunk-C6Q5SG76.js";var Gt=(t,n)=>({"pui-action-drawer-layout__toolbar__most-emphasized":t,"pui-action-drawer-layout__toolbar__normal":n}),ie=(t,n)=>n.id;function qt(t,n){if(t&1&&O(0,3),t&2){let e=l();u("ngComponentOutlet",e.configuration.content)("ngComponentOutletInputs",e.contentInputs())}}function Wt(t,n){if(t&1&&(s(0,"i"),C(1),c()),t&2){let e=l().$implicit;d(),y(e.icon)}}function Kt(t,n){if(t&1&&O(0,7),t&2){let e=l().$implicit;u("ngTemplateOutlet",e.iconTemplateRef)}}function Yt(t,n){if(t&1){let e=D();s(0,"button",6),h("click",function(o){let a=v(e).$implicit,r=l();return T(r.layoutService.controlOnClick(a.id,o))}),_(1,Wt,2,1,"i")(2,Kt,1,1,"ng-container",7),s(3,"span"),C(4),c()()}if(t&2){let e=n.$implicit,i=l();u("color",e.color??"accent")("ngClass",me(8,Gt,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled)("puiTooltip",e.label)("puiTooltipPosition","top"),d(),f(e.icon?1:e.iconTemplateRef?2:-1),d(3),y(e.label)}}var ee=t=>({enum:t}),Qt=t=>({format:t}),Jt=t=>({"date-time":t}),Pt=()=>({}),$e=(t,n)=>n.key;function Xt(t,n){if(t&1&&b(0,"pui-field-def",3),t&2){let e=n.$implicit;u("key",e.key)("fieldType",e.fieldConfiguration.type)("label",e.fieldConfiguration.description??e.key)("fieldConfig",e.fieldConfiguration.type=="string"?k(4,ee,e.fieldConfiguration.enum):e.fieldConfiguration.type=="number"?k(6,ee,e.fieldConfiguration.enum):e.fieldConfiguration.type=="date-time"?k(10,Jt,k(8,Qt,e.fieldConfiguration.format)):j(12,Pt))}}function Zt(t,n){if(t&1){let e=D();s(0,"form",1),h("submit",function(o){v(e);let a=l();return T(a.onSubmit(o))}),s(1,"pui-fieldset",2),h("valueChange",function(o){v(e);let a=l();return T(a.onValueChange(o))}),x(2,Xt,1,13,"pui-field-def",3,$e),c(),b(4,"button",4),c()}if(t&2){let e=l();d(),u("value",e.data())("disabled",e.disabled()),d(),w(e.flattenedControls())}}function ei(t,n){if(t&1){let e=D();s(0,"pui-layout-control",5),h("click",function(o){let a=v(e).$implicit,r=l();return T(r.onControlClick(a.id,o))}),c()}if(t&2){let e=n.$implicit;u("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var Rt=()=>[],ti=t=>({peek:t}),ii=t=>({outlets:t}),ni=t=>[t];function oi(t,n){if(t&1&&(s(0,"a",1)(1,"i"),C(2,"open_in_full"),c()()),t&2){let e=l();u("routerLink",e.routeToFullContent())}}var ai=[[["",8,"pui-root-sidenav__header__logo"]],[["",8,"pui-root-sidenav__nav"]]],ri=[".pui-root-sidenav__header__logo",".pui-root-sidenav__nav"];function li(t,n){if(t&1&&b(0,"pui-field-def",5),t&2){let e=n.$implicit;u("key",e.key)("fieldType",e.fieldConfiguration.type)("label",e.fieldConfiguration.description??e.key)("fieldConfig",e.fieldConfiguration.type=="string"?k(5,ee,e.fieldConfiguration.enum):e.fieldConfiguration.type=="number"?k(7,ee,e.fieldConfiguration.enum):j(9,Pt))("isNullable",!1)}}function si(t,n){if(t&1){let e=D();s(0,"pui-fieldset",4),h("valueChange",function(o){v(e);let a=l();return T(a.onFilterValueChange(o))}),x(1,li,1,10,"pui-field-def",5,$e),c()}if(t&2){let e=l();u("value",e.filterValue()),d(),w(e.flattenFilterDef())}}function di(t,n){if(t&1&&b(0,"pui-loading-panel"),t&2){let e=l();u("@loading",void 0)("@.disabled",e.isInitial())}}function ci(t,n){if(t&1){let e=D();s(0,"pui-table-header-cell",9),h("cellClick",function(o){v(e);let a=l().$implicit,r=l(2);return T(r.onHeaderClick(a.key,o))}),C(1),c()}if(t&2){let e=l().$implicit;u("centerAligned",e.isAlignCenter??!1)("rightAligned",e.isAlignEnd??!1)("sortedAsc",e.isSortedAsc??!1)("sortedDesc",e.isSortedDesc??!1),d(),y(e.label)}}function ui(t,n){t&1&&C(0," \xA0ago ")}function pi(t,n){if(t&1&&(s(0,"pui-time-display",12),$(1,"lodashGet"),s(2,"span"),C(3,"--"),c()(),_(4,ui,1,0)),t&2){let e=l(2).$implicit,i=l().$implicit;u("mode",i.fieldConfiguration.format=="timeAgo"?"timeAgo":"normal")("format",i.fieldConfiguration.format)("date",H(1,4,e,i.path??i.key)),d(4),f(i.fieldConfiguration.format=="timeAgo"?4:-1)}}function mi(t,n){if(t&1&&(Je(0),$(1,"lodashGet"),s(2,"i",13),C(3),c()),t&2){let e=l(2).$implicit,i=l().$implicit,o=H(1,3,e,i.path??i.key);d(2),Qe("pui-table-cell__boolean-content--true",o===!0),d(),y(o===!0?"check":o===!1?"close":"")}}function _i(t,n){if(t&1&&(s(0,"span"),C(1),$(2,"lodashGet"),c()),t&2){let e=l(2).$implicit,i=l().$implicit;d(),y(H(2,1,e,i.path??i.key))}}function fi(t,n){if(t&1&&_(0,pi,5,7)(1,mi,4,6,"i",11)(2,_i,3,4,"span"),t&2){let e,i=l(2).$implicit;f((e=i.fieldConfiguration.type)==="date-time"?0:e==="boolean"?1:2)}}function Ci(t,n){if(t&1&&(s(0,"span"),C(1),$(2,"lodashGet"),c()),t&2){let e=l().$implicit,i=l().$implicit;d(),y(H(2,1,e,i.path??i.key))}}function hi(t,n){if(t&1&&(s(0,"pui-table-cell",10),_(1,fi,3,1)(2,Ci,3,4,"span"),c()),t&2){let e=l().$implicit;u("centerAligned",e.isAlignCenter??!1)("rightAligned",e.isAlignEnd??!1),d(),f(e.fieldConfiguration?1:2)}}function bi(t,n){if(t&1&&B(0,ci,2,5,"pui-table-header-cell",7)(1,hi,3,3,"pui-table-cell",8),t&2){let e=n.$implicit;u("puiTableHeaderCellDef",e.key),d(),u("puiTableCellDef",e.key)}}function gi(t,n){if(t&1){let e=D();s(0,"pui-table-row",17),$(1,"isInSet"),h("click",function(){let o=v(e).$implicit,a=l(4);return T(a.onRowClick(o))}),c()}if(t&2){let e=n.$implicit,i=l(4);ue("height",48,"px"),u("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",_e(1,5,e,i.selectedItems(),i.cmpFn))}}function vi(t,n){if(t&1&&(s(0,"cdk-virtual-scroll-viewport",15),B(1,gi,2,9,"pui-table-row",16),c()),t&2){let e=l(3);ue("height",e.data().length*48,"px"),d(),u("cdkVirtualForOf",e.data())("cdkVirtualForTrackBy",e.trackingFn)("cdkVirtualForTemplateCacheSize",0)}}function Ti(t,n){if(t&1&&_(0,vi,2,5,"cdk-virtual-scroll-viewport",14),t&2){let e=l(2);f(e.isBrowser?0:-1)}}function yi(t,n){if(t&1){let e=D();s(0,"pui-table-row",17),$(1,"isInSet"),h("click",function(){let o=v(e).$implicit,a=l(3);return T(a.onRowClick(o))}),c()}if(t&2){let e=n.$implicit,i=l(3);u("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",_e(1,3,e,i.selectedItems(),i.cmpFn))}}function Di(t,n){if(t&1&&x(0,yi,2,7,"pui-table-row",18,qe),t&2){let e=l(2);w(e.data())}}function xi(t,n){if(t&1){let e=D();s(0,"pui-table",2),x(1,bi,2,2,null,null,$e),s(3,"pui-table-body")(4,"div",6),h("skippedChanged",function(o){v(e);let a=l();return T(a.scrolledToTop.set(!o))}),c(),b(5,"pui-table-header-row"),_(6,Ti,1,1)(7,Di,2,0),s(8,"div",6),h("skippedChanged",function(o){v(e);let a=l();return T(a.scrolledToBottom.set(!o))}),c()()()}if(t&2){let e=l();u("@loading",void 0)("@.disabled",e.isInitial())("id",e.configuration==null?null:e.configuration.id)("itemHeight",48)("columns",e.columnsToDisplay())("columnWidths",j(8,Rt))("selectionMode",e.selectionMode()),d(),w(e.columnConfig()),d(5),f(e.configuration!=null&&e.configuration.useVirtualScroll?6:7)}}function wi(t,n){if(t&1){let e=D();s(0,"pui-layout-control",19),h("click",function(o){let a=v(e).$implicit,r=l();return T(r.onControlClick(a.id,o))}),c()}if(t&2){let e=n.$implicit;u("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var ki=["container"],Si=(t,n)=>({"pui-vertical-layout__toolbar__most-emphasized":t,"pui-vertical-layout__toolbar__normal":n}),Ei=(t,n)=>n.label;function Fi(t,n){if(t&1&&(s(0,"header",5)(1,"div",4),b(2,"pui-breadcrumbs"),s(3,"h1"),C(4),c()(),O(5,7),c()),t&2){let e=l(),i=ce(13);u("@floatingHeader",void 0),d(4),y(e.heading()),d(),u("ngTemplateOutlet",i)}}function Vi(t,n){if(t&1&&(s(0,"a",11),C(1),c()),t&2){let e=l().$implicit;u("routerLink",e.route),d(),y(e.label)}}function Ai(t,n){if(t&1&&B(0,Vi,2,2,"a",12),t&2){let e=n.$implicit;u("puiTab",e.label)("puiTabHidden",e.hidden??!1)}}function $i(t,n){if(t&1){let e=D();s(0,"pui-tab-bar",10),h("tabChange",function(o){v(e);let a=l(2);return T(a.onTabChanged(o))}),x(1,Ai,1,2,"a",11,Ei),c()}if(t&2){let e=l(2);u("currentTab",e.activeTab()),d(),w(e.tabs())}}function Mi(t,n){t&1&&b(0,"div",9)}function Ni(t,n){if(t&1&&(s(0,"header",6),_(1,$i,3,1,"pui-tab-bar",8),_(2,Mi,1,0,"div",9),O(3,7),c()),t&2){let e=l(),i=ce(13);d(),f(e.tabs().length>0?1:-1),d(),f(e.controls().length>0?2:-1),d(),u("ngTemplateOutlet",i)}}function Ii(t,n){if(t&1&&(s(0,"i"),C(1),c()),t&2){let e=l().$implicit;d(),y(e.icon)}}function Oi(t,n){if(t&1&&O(0,7),t&2){let e=l().$implicit;u("ngTemplateOutlet",e.iconTemplateRef)}}function Pi(t,n){if(t&1){let e=D();s(0,"button",15),h("click",function(o){let a=v(e).$implicit,r=l(3);return T(r.layoutService.controlOnClick(a.id,o))}),_(1,Ii,2,1,"i")(2,Oi,1,1,"ng-container",7),s(3,"span"),C(4),c()()}if(t&2){let e=n.$implicit,i=l(3);u("color",e.color??"accent")("ngClass",me(7,Si,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("puiTooltip",e.label)("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled),d(),f(e.icon?1:e.iconTemplateRef?2:-1),d(3),y(e.label)}}function Ri(t,n){if(t&1&&(s(0,"div",13),x(1,Pi,5,10,"button",14,ie),c()),t&2){let e=l(2);d(),w(e.controls())}}function Li(t,n){if(t&1&&_(0,Ri,3,0,"div",13),t&2){let e=l();f(e.controls().length>0?0:-1)}}var Y=(()=>{let n=class n{constructor(){this._controls=V([]),this.controls=m(()=>this._controls().toSorted((i,o)=>(i.weight??0)-(o.weight??0))),this.mostEmphasizedControlId=m(()=>this.controls().filter(i=>!i.mode||i.mode=="auto").at(-1)?.id),this.eventsMap={}}registerControl(i,o){return this._controls.update(a=>[...a,F({},i)]),this.eventsMap[i.id]=o,{update:a=>{this._controls.update(r=>r.map(g=>g.id==a.id?F(F({},g),a):g))},dispose:()=>{this._controls.update(a=>a.filter(r=>r.id!=i.id))}}}controlOnClick(i,o){this.eventsMap[i]?.click?.(o)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ae({token:n,factory:n.\u0275fac});let t=n;return t})(),Bi=(()=>{let n=class n{constructor(){this.overlayRef=p(ft),this.dataProvider=p(Lt),this.layoutService=p(Y,{self:!0}),this.configuration=this.dataProvider?.configuration,this.heading=m(()=>this.dataProvider.heading()),this.contentInputs=m(()=>this.dataProvider.contentInputs?.()??{}),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.dataProvider.onActionDrawerInit?.(this.overlayRef)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-action-drawer-layout"]],hostAttrs:[1,"pui-action-drawer-layout"],features:[pe([Y])],decls:10,vars:2,consts:[[1,"@container/layout"],[1,"pui-action-drawer-layout__heading"],["cdkTrapFocus","","cdkTrapFocusAutoCapture","",1,"pui-action-drawer-layout__content"],[3,"ngComponentOutlet","ngComponentOutletInputs"],[1,"pui-action-drawer-layout__toolbar"],["puiFilledButton","",3,"color","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],["puiFilledButton","",3,"click","color","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],[3,"ngTemplateOutlet"]],template:function(o,a){o&1&&(s(0,"div",0)(1,"header",1),b(2,"pui-breadcrumbs"),s(3,"h1"),C(4),c()(),s(5,"div",2),_(6,qt,1,2,"ng-container",3),c(),s(7,"div",4),x(8,Yt,5,11,"button",5,ie),c()()),o&2&&(d(4),y(a.heading()),d(2),f(a.configuration&&a.configuration.content?6:-1),d(2),w(a.controls()))},dependencies:[Ee,it,Ce,K,Se,Z,fe,gt,bt],encapsulation:2});let t=n;return t})(),Lt=new I("action drawer layout data provider"),Cn=(()=>{let n=class n{constructor(){this.overlay=p(Ct),this.injector=p(re)}open(i,o={width:"480px"}){return this.overlay.open(Bi,{positionStrategy:this.overlay.position().global().right("0").centerVertically(),maxWidth:"90vw",width:o.width??"480px",height:"100%",hasBackdrop:!0,backdropClass:"pui-action-drawer-backdrop",closeOnBackdropClick:o.manualClose!==!0,disposeOnNavigation:o.manualClose!==!0,closeOnEscapeKeydown:o.manualClose!==!0,animation:"slideInEnd",data:o.overlayData,parentInjector:re.create({providers:[{provide:_t,useValue:o.overlayData},{provide:Lt,useClass:i},...o.providers??[]],parent:o.parent??this.injector})})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),ji=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}],hn=[{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}],Hi=new I("editable content data provider");function te(t,n,e,i){return Object.entries(t.properties).flatMap(([a,r])=>{if(r.type=="object")return te(r,n,`${e?`${e}.`:""}${a}`,`${i}${r.description??""} / `);if(r.type=="array"){let g=ye(n,`${e?`${e}.`:""}${a}`);return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:N(F({},r),{description:`${i}${r.description??""}`})},...Array.isArray(g)?g.flatMap((Me,M)=>r.items.type=="object"?[...te(r.items,n,`${e?`${e}.`:""}${a}[${M}]`,`${i}${r.description??""} / #${M} / `)]:[{key:`${e?`${e}.`:""}${a}[${M}]`,fieldConfiguration:N(F({},r.items),{description:`${i}${r.description??""} / #${M}`})}]):[]]}return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:N(F({},r),{description:i+r.description})}]})}var Bt=(()=>{let n=class n{constructor(){if(this.layoutService=p(Y,{optional:!0}),this.destroyRef=p(le),this.id=S.required(),this.label=S.required(),this.weight=S(0),this.icon=S(),this.iconTemplateRef=S(),this.disabled=S(!1,{transform:tt}),this.mode=S(void 0),this.color=S(),this.click=Ze(),!this.layoutService)return;let i,o;U(()=>{let a=this.id(),r=this.label(),g=this.disabled(),Me=this.icon(),M=this.iconTemplateRef(),jt=this.mode(),Ht=this.weight(),zt=this.color(),Ne={id:a,label:r,isDisabled:g,icon:Me,iconTemplateRef:M,weight:Ht,mode:jt,color:zt};if(i)i(Ne);else{let Ie=this.layoutService.registerControl(Ne,{click:Ut=>this.click.emit(Ut)});i=Ie.update,o=Ie.dispose}}),this.destroyRef.onDestroy(()=>{o?.()})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275dir=Ue({type:n,selectors:[["pui-layout-control"]],hostAttrs:[1,"pui-layout-control"],inputs:{id:[1,"id"],label:[1,"label"],weight:[1,"weight"],icon:[1,"icon"],iconTemplateRef:[1,"iconTemplateRef"],disabled:[1,"disabled"],mode:[1,"mode"],color:[1,"color"]},outputs:{click:"click"}});let t=n;return t})(),bn=(()=>{let n=class n{constructor(){this.route=p(W),this.dataProvider=p(Hi),this.data=Q(()=>this.dataProvider.data()),this.fieldConfiguration=m(()=>this.dataProvider.fieldConfiguration()),this.flattenedControls=m(()=>{let i=this.fieldConfiguration(),o=this.data();return i?te(i,o,"",i.description?`${i.description} / `:""):[]}),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??ji),this.isDirty=V(!1),this.isDisabled=S(!1,{alias:"disabled"}),this.disabled=Q(()=>this.isDisabled()),L([this.route.params,this.route.queryParams]).pipe(E()).subscribe(([i,o])=>this.dataProvider.onParamsChange?.(i,o)),this.dataProvider.registerUpdateState?.(i=>{z(()=>{i?.isDirty===!1?this.isDirty.set(!1):i?.isDirty===!0&&this.isDirty.set(!0),i?.isDisabled===!1?this.disabled.set(!1):i?.isDisabled===!0&&this.disabled.set(!0)})}),U(()=>{let i=this.isDirty();z(()=>{this.dataProvider.onStateChange?.({isDirty:i})})})}onControlClick(i,o){this.dataProvider.onControlClick?.(i,o)}onValueChange(i){this.data.set(i),this.isDirty.set(!0),this.dataProvider.onValueChange?.(i)}onSubmit(i){i.preventDefault(),this.dataProvider.configuration?.isEnterToSubmit===!0&&this.dataProvider.onControlClick?.("save",i)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-editable-content"]],hostAttrs:[1,"pui-editable-content"],inputs:{isDisabled:[1,"disabled","isDisabled"]},decls:4,vars:1,consts:[[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"submit"],[3,"valueChange","value","disabled"],[3,"key","fieldType","label","fieldConfig"],["type","submit","hidden",""],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(o,a){o&1&&(s(0,"main"),_(1,Zt,5,2,"form"),c(),x(2,ei,1,7,"pui-layout-control",0,ie)),o&2&&(d(),f(a.flattenedControls().length>0?1:-1),d(),w(a.controlsConfig()))},dependencies:[Ae,Ve,Fe,Bt],encapsulation:2});let t=n;return t})(),zi=new I("peekable addon data provider"),Ui=(()=>{let n=class n{constructor(){this.dataProvider=p(zi,{optional:!0}),this.route=p(W),this.router=p(X),this.overlayKeyboardDispatcher=p(pt),this.routeToFullContent=m(()=>this.dataProvider?.routeToFullContent()??null),this._keydownEvents=new Oe,L([this.route.params,this.route.queryParams]).pipe(E()).subscribe(([i,o])=>this.dataProvider?.onParamsChange?.(i,o)),this.overlayKeyboardDispatcher.add(this),p(le).onDestroy(()=>{this.overlayKeyboardDispatcher.ngOnDestroy(),this._keydownEvents.complete()}),this._keydownEvents.pipe(E()).subscribe(i=>{i.key=="Escape"&&this.onEscapePress(i)})}onEscapePress(i){this.route.snapshot.parent?.children.some(o=>o.outlet=="peek")&&this.router.navigate([{outlets:{peek:[]}}],{relativeTo:this.route.parent})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-peekable-addon"]],hostAttrs:[1,"pui-peekable-addon"],decls:8,vars:9,consts:[[1,"pui-peekable-addon__nav"],["puiBaseButton","","puiTooltip","View in full",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"spacer"],["puiBaseButton","","puiTooltip","Close peek window",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"pui-peekable-addon__content"],["name","peek"]],template:function(o,a){o&1&&(s(0,"nav",0),_(1,oi,3,1,"a",1),b(2,"div",2),s(3,"a",3)(4,"i"),C(5,"close"),c()()(),s(6,"main",4),b(7,"router-outlet",5),c()),o&2&&(d(),f(a.routeToFullContent()?1:-1),d(2),u("routerLink",k(7,ni,k(5,ii,k(3,ti,j(2,Rt))))))},dependencies:[J,Te,K,ke,Z],encapsulation:2});let t=n;return t})(),gn=(()=>{let n=class n{constructor(){this.router=p(X,{optional:!0}),this.isSidenavVisible=V(!1),this.router?.events.pipe(ne(i=>i instanceof ve),oe(50),E()).subscribe(()=>{this.isSidenavVisible.set(!1)})}toggleSidenav(i){this.isSidenavVisible.update(o=>i??!o)}onContentClick(i){i.target==i.currentTarget&&this.isSidenavVisible.set(!1)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-root-sidenav"]],ngContentSelectors:ri,decls:12,vars:1,consts:[[1,"pui-root-sidenav"],[1,"pui-root-sidenav__header"],["puiBaseButton","",1,"pui-root-sidenav__header__hamburger",3,"click"],[1,"spacer"],[1,"pui-root-sidenav__nav-wrapper"],[1,"pui-root-sidenav__content-wrapper"],[1,"pui-root-sidenav__content",3,"click"]],template:function(o,a){o&1&&(We(ai),s(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return a.toggleSidenav()}),s(3,"i"),C(4,"menu"),c()(),b(5,"div",3),de(6),c(),s(7,"div",4),de(8,1),c()(),s(9,"div",5)(10,"div",6),h("click",function(g){return a.onContentClick(g)}),b(11,"router-outlet"),c()()),o&2&&(d(10),Ge("data-sidenav",a.isSidenavVisible()?"visible":"hidden"))},dependencies:[K,ke,J],encapsulation:2});let t=n;return t})();function vn(t,n,e=!1){let i=Object.values(t??{}).some(a=>typeof a=="string"?!!a:a!=null),o=Object.keys(t??{});return a=>{if(!i)return!0;if(e){for(let r of o)if(r in n&&n[r]!=null){if(typeof t[r]=="string"&&t[r].trim()=="")continue;if(!n[r](a,r,t[r],t))return!1}return!0}else{for(let r of o)if(r in n&&n[r]!=null){if(typeof t[r]=="string"&&t[r].trim()=="")continue;if(n[r](a,r,t[r],t))return!0}return!1}}}function Tn(t){let n=t.find(i=>i.isSortedAsc||i.isSortedDesc);if(!n)return()=>0;let e=n.isSortedDesc?-1:1;return n.fieldConfiguration?.type=="date-time"?(i,o)=>{let a=P(i,n),r=P(o,n);return a==null&&r==null?0:a instanceof Date&&r instanceof Date?(a.getTime()-r.getTime())*e:a instanceof Date?1*e:-1*e}:(i,o)=>{switch(n.key){default:return P(i,n)>P(o,n)?e:P(i,n)<P(o,n)?-1*e:0}}}function P(t,n){return n.path?ye(t,n.path):t[n.key]}var Gi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"},{id:"add",label:"Add new",icon:"add"}],qi=new I("table content data provider"),yn=(()=>{let n=class n{constructor(){this.route=p(W),this.dataProvider=p(qi),this.isBrowser=nt(p(ze)),this.ROUTE_TO_DETAIL=Symbol(),this.configuration=this.dataProvider.configuration,this.isLoading=m(()=>this.dataProvider.isLoading?.()??!1),this.data=m(()=>{let i=this.dataProvider.data(),o=this.dataProvider.routeToDetail;return i?.map(a=>Object.assign({},a,{[this.ROUTE_TO_DETAIL]:o?.bind(this.dataProvider)?.(a)}))}),this.columnConfig=m(()=>this.dataProvider.columnsConfig()),this.columnsToDisplay=m(()=>this.dataProvider.columnsToDisplay()),this.selectionMode=m(()=>this.dataProvider.selectionMode?.()??null),this.selectedItems=m(()=>this.dataProvider.selectedItems?.()??new Set),this.controlsConfig=m(()=>this.dataProvider.controlsConfig?.()??Gi),this.flattenFilterDef=m(()=>{let i=this.dataProvider.filterConfig?.();return i?te(i,{},"",i.description?`${i.description} / `:""):[]}),this.filterValue=Q(()=>this.dataProvider.filterValue?.()),this.isInitial=xe(Re(100).pipe(R(()=>!1)),{initialValue:!0}),this.scrolledToTop=V(!1),this.scrolledToBottom=V(!1),this.cmpFn=this.dataProvider.compareFn??((i,o)=>i==o),L([this.route.params,this.route.queryParams]).pipe(E()).subscribe(([i,o])=>this.dataProvider.onParamsChange?.(i,o)),this.dataProvider.onScrolledToTop&&U(()=>{this.isLoading()||this.scrolledToTop()&&z(()=>this.dataProvider.onScrolledToTop())}),this.dataProvider.onScrolledToBottom&&U(()=>{this.isLoading()||this.scrolledToBottom()&&z(()=>this.dataProvider.onScrolledToBottom())}),De(this.data).pipe(oe(100),E()).subscribe(()=>{this.scrolledToTop()&&this.dataProvider.onScrolledToTop?.(),this.scrolledToBottom()&&this.dataProvider.onScrolledToBottom?.()})}ngOnInit(){this.dataProvider?.onInit?.()}ngOnDestroy(){this.dataProvider?.onDestroy?.()}onRowClick(i){this.dataProvider.onTableRowClick?.(i)}onHeaderClick(i,o){this.dataProvider.onHeaderCellClick?.(i,o)}onControlClick(i,o){this.dataProvider.onControlClick?.(i,o)}onFilterValueChange(i){this.filterValue.set(i),this.dataProvider.onFilterChange?.(i)}onScrolled(i,o){i=="top"?this.scrolledToTop.set(!o):this.scrolledToBottom.set(!o)}trackingFn(i,o){return i}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-table-content"]],hostAttrs:[1,"pui-table-content"],decls:8,vars:2,consts:[[3,"value"],[1,"pui-table-content__content-wrapper"],[3,"id","itemHeight","columns","columnWidths","selectionMode"],[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"valueChange","value"],[3,"key","fieldType","label","fieldConfig","isNullable"],["puiContentVisibilityDetector","",3,"skippedChanged"],[3,"centerAligned","rightAligned","sortedAsc","sortedDesc","cellClick",4,"puiTableHeaderCellDef"],[3,"centerAligned","rightAligned",4,"puiTableCellDef"],[3,"cellClick","centerAligned","rightAligned","sortedAsc","sortedDesc"],[3,"centerAligned","rightAligned"],[1,"pui-table-cell__boolean-content",3,"pui-table-cell__boolean-content--true"],[3,"mode","format","date"],[1,"pui-table-cell__boolean-content"],["itemSize","48","scrollWindow","",3,"height"],["itemSize","48","scrollWindow",""],["puiHoverable","",3,"item","route","height","selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["puiHoverable","",3,"click","item","route","selected"],["puiHoverable","",3,"item","route","selected"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(o,a){if(o&1&&(s(0,"main")(1,"div"),_(2,si,3,1,"pui-fieldset",0),s(3,"div",1),_(4,di,1,2,"pui-loading-panel")(5,xi,9,9,"pui-table",2),c()()(),x(6,wi,1,7,"pui-layout-control",3,ie)),o&2){let r=a.flattenFilterDef();d(2),f(r.length>0?2:-1),d(2),f(a.isLoading()?4:5),d(2),w(a.controlsConfig())}},dependencies:[Ot,Ft,It,Vt,Nt,Mt,At,St,$t,Et,ht,Bt,vt,ut,lt,dt,st,ct,Ae,Ve,Fe,Tt,mt,rt,at],encapsulation:2,data:{animation:[he("loading",[q(":enter",ge(Dt)),q(":leave",ge(yt))])]}});let t=n;return t})();function Dn(t,n,e=!0){return t.map(i=>i.key==n?N(F({},i),{isSortedAsc:!i.isSortedAsc&&!i.isSortedDesc?e:!!i.isSortedDesc,isSortedDesc:!i.isSortedAsc&&!i.isSortedDesc?!e:!!i.isSortedAsc}):N(F({},i),{isSortedAsc:!1,isSortedDesc:!1}))}var Wi=new I("vertical layout data provider"),xn=(()=>{let n=class n{constructor(){this.dataProvider=p(Wi),this.layoutService=p(Y,{self:!0}),this.router=p(X),this.route=p(W),this.document=p(He),this.containerDiv=et("container",{read:se}),this.activeTab=V(null),this.heading=m(()=>this.dataProvider.heading()),this.tabs=m(()=>this.dataProvider.tabs()),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.scrollState=xe(De(this.containerDiv).pipe(R(i=>i?.nativeElement?.closest(".pui-peekable-addon")??this.document),je(i=>Pe(i,"scroll")),R(i=>i.currentTarget instanceof Document?i.currentTarget.scrollingElement?.scrollTop:i.currentTarget.scrollTop),we(),Le(),R(([i,o])=>({direction:o-i>0?"down":"up",currentTop:o})),E())),L([this.route.params,this.route.queryParams]).pipe(E()).subscribe(([i,o])=>this.dataProvider.onParamsChange?.(i,o)),this.router.events.pipe(ne(i=>i instanceof ve||i instanceof ot),Be(this.router.lastSuccessfulNavigation?.finalUrl),we(),E()).subscribe(()=>{let i=this.tabs();if(!i)return;let o=i.find(r=>{let g=this.router.createUrlTree(r.route,{relativeTo:this.route});return this.router.isActive(g,{paths:"subset",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})});if(!o)return;this.activeTab.set(Object.assign(o.label,{[Symbol()]:null}));let a=this.route.routeConfig?.children?.find(r=>r.path=="**");a&&(a.redirectTo=o.route.map(r=>String(r).replaceAll("..%2F","").replaceAll(".%2F","")).join("/"))})}onTabChanged(i){let o=this.tabs()?.find(a=>a.label==i);o&&this.router.navigate(o.route,{relativeTo:this.route})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-vertical-layout"]],viewQuery:function(o,a){o&1&&Ke(a.containerDiv,ki,5,se),o&2&&Ye()},hostAttrs:[1,"pui-vertical-layout"],features:[pe([Y])],decls:14,vars:3,consts:[["container",""],["controlsTemplate",""],[1,"@container/layout"],[1,"pui-vertical-layout__heading"],[1,"pui-vertical-layout__navigation"],[1,"pui-vertical-layout__heading--floating"],[1,"pui-vertical-layout__controls"],[3,"ngTemplateOutlet"],[1,"pui-vertical-layout__tabs",3,"currentTab"],[1,"spacer"],[1,"pui-vertical-layout__tabs",3,"tabChange","currentTab"],[3,"routerLink"],[3,"routerLink",4,"puiTab","puiTabHidden"],[1,"pui-vertical-layout__toolbar"],["puiFilledButton","",3,"color","ngClass","puiTooltip","disabled","hoverableEnabled"],["puiFilledButton","",3,"click","color","ngClass","puiTooltip","disabled","hoverableEnabled"]],template:function(o,a){if(o&1&&(s(0,"div",2,0)(2,"div")(3,"header",3)(4,"div",4),b(5,"pui-breadcrumbs"),s(6,"h1"),C(7),c()()(),_(8,Fi,6,3,"header",5),_(9,Ni,4,3,"header",6),b(10,"router-outlet")(11,"pui-peekable-addon"),c()(),B(12,Li,1,1,"ng-template",null,1,Xe)),o&2){let r;d(7),y(a.heading()),d(),f(((r=a.scrollState())==null?null:r.direction)=="up"&&((r=a.scrollState())==null?null:r.currentTop)>240?8:-1),d(),f(a.tabs().length>0||a.controls().length>0?9:-1)}},dependencies:[J,Ee,K,Se,kt,wt,xt,Te,Ce,Ui,Z,fe],encapsulation:2,data:{animation:[he("floatingHeader",[q(":enter",[G({transform:"translate(0, -100%)"}),be("150ms ease-in-out",G({transform:"translate(0, 0)"}))]),q(":leave",[G({transform:"translate(0, 0)"}),be("150ms ease-in-out",G({transform:"translate(0, -100%)"}))])])]}});let t=n;return t})();export{Lt as a,Cn as b,ji as c,hn as d,Hi as e,Bt as f,bn as g,zi as h,gn as i,vn as j,Tn as k,Gi as l,qi as m,yn as n,Dn as o,Wi as p,xn as q};
