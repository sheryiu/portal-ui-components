import{a as d}from"./chunk-IAAP25OO.js";import"./chunk-NQD4MLEJ.js";import{B as p,C as v,Gb as A,Hb as I,Ib as k,Kb as F,N as s,Nb as E,Ob as j,Pb as S,Qa as m,Qb as C,V as b,W as g,a as c,aa as w,b as f,fa as T,i as D,lb as y,oa as l,qa as h,y as n}from"./chunk-EDS5CUQ7.js";var L=(()=>{let e=class e{constructor(){this.dataService=p(d),this.list=m(this.dataService.getList()),this.params=s({}),this.heading=l(()=>{let t=this.list()?.find(i=>i.id==this.params().id)?.location;return t?`${t.aisle.toUpperCase()}${t.row} - ${t.layer}`:"--"}),this.tabs=s([{label:"Raw",route:["./"]}])}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac});let r=e;return r})();var R=(()=>{let e=class e{constructor(){this.dataService=p(d),this.list=m(this.dataService.getList()),this.params=s({}),this.data=s(this.list()?.find(t=>t.id==this.params().id)),this.jsonSchema=s({type:"object",properties:{location:{type:"object",description:"Shelf Location",properties:{aisle:{type:"string",description:"Aisle"},row:{type:"number",description:"Row"},layer:{type:"number",description:"Layer"}}},maxCapacity:{type:"number",description:"Maximum Capacity (grams)"},isAllowFragileItems:{type:"boolean",description:"Allows Fragile Items Inside"},dimensions:{type:"object",description:"Dimension",properties:{width:{type:"number",description:"Width (millimeters)"},depth:{type:"number",description:"Depth (millimeters)"},height:{type:"number",description:"Height (millimeters)"}}}}}),this.isDirty=s(!1),this.updatedValue=s(void 0),this.controlsConfig=l(()=>this.isDirty()?I:A),h(()=>{this.data.set(structuredClone(this.list()?.find(t=>t.id==this.params().id)))},{allowSignalWrites:!0})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(i=>t.isDirty??i)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,i){switch(t){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(a=>a.id==this.params().id))),this.updateState({isDirty:!1});break}case"save":{let a=this.updatedValue();a&&(this.dataService.save(a),this.updateState({isDirty:!1}));break}}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac});let r=e;return r})();var O=(()=>{let e=class e{constructor(){this.params=s({}),this.heading=s("Warehouse Shelves"),this.tabs=s([{label:"Map",route:["map"]},{label:"Data",route:["data"]}])}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac});let r=e;return r})();var x=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=v({type:e,selectors:[["demo-inventory-shelf-map"]],standalone:!0,features:[T],decls:2,vars:0,template:function(i,a){i&1&&(b(0,"p"),w(1,"inventory-shelf-map works!"),g())}});let r=e;return r})();var V=(()=>{let e=class e{constructor(){this.dataService=p(d),this.rawData=m(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=s([]),this.columnsConfig=s([{key:"aisle",path:"location.aisle",label:"Aisle"},{key:"row",path:"location.row",label:"Row"},{key:"layer",path:"location.layer",label:"Layer"},{key:"maxCapacity",label:"Maximum Capacity (g)",jsonSchema:{type:"number"}},{key:"isAllowFragileItems",label:"Allows Fragile",jsonSchema:{type:"boolean"}}]),this.columnsToDisplay=s(["aisle","row","layer","maxCapacity","isAllowFragileItems"]),this.controlsConfig=s([{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}]),this.simpleFilterValue=s({}),this.sortFn=l(()=>{let t=this.columnsConfig().find(a=>a.isSortedAsc||a.isSortedDesc);if(!t)return()=>0;let i=t.isSortedDesc?-1:1;return(a,o)=>{switch(t.key){case"aisle":case"row":case"layer":return a.location[t.key]>o.location[t.key]?i:a.location[t.key]<o.location[t.key]?-1*i:0;default:return a[t.key]>o[t.key]?i:a[t.key]<o[t.key]?-1*i:0}}}),this.filterFn=l(()=>{let t=this.simpleFilterValue(),i=Object.values(t??{}).some(a=>typeof a=="string"?!!a:a!=null);return a=>!0}),h(()=>{let t=this.rawData();t&&this.data.set(t.filter(this.filterFn()).sort(this.sortFn()))},{allowSignalWrites:!0})}onHeaderCellClick(t,i){this.columnsConfig.update(a=>a.map(o=>o.key==t?f(c({},o),{isSortedAsc:!o.isSortedAsc&&!o.isSortedDesc?!0:!!o.isSortedDesc,isSortedDesc:!!o.isSortedAsc}):f(c({},o),{isSortedAsc:!1,isSortedDesc:!1})))}routeToDetail(t){return["../","detail",t.id]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac});let r=e;return r})();var pt=[{path:"",data:c({},y({title:"Shelf"})),children:[{path:"detail/:id",component:C,data:c({},y({titleFn:r=>r.params.pipe(D(e=>e.id))})),providers:[{provide:S,useClass:L}],children:[{path:"",component:F,providers:[{provide:k,useClass:R}]}]},{path:"",component:C,providers:[{provide:S,useClass:O}],children:[{path:"map",component:x},{path:"data",component:j,providers:[{provide:E,useClass:V}]},{path:"**",redirectTo:"map"}]}]}];export{pt as ROUTES};
