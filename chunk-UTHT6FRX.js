import{a as o,b as u}from"./chunk-SMGNTOLY.js";import{d as F,e as O}from"./chunk-UR6FENV6.js";import{c as D,d as S,e as g,g as T,k as b,m as L,n as A,o as I,p as m,q as f}from"./chunk-AX7JXOBJ.js";import"./chunk-5KUQE4MU.js";import{J as c,M as l,ya as h}from"./chunk-3PWRGTCN.js";import{$ as p,Da as a,W as v,fa as s,q as C,uc as n,xc as E}from"./chunk-O5WS6LKQ.js";import{a as d,b as y}from"./chunk-EQDQRRRY.js";var j=(()=>{class t{constructor(){this.dataService=s(o),this.list=l(this.dataService.getList()),this.id=a(void 0),this.heading=n(()=>this.list()?.find(e=>e.id==this.id())?.label??"--"),this.tabs=a([])}onParamsChange(e,i){this.id.set(e.id)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})();var k=(()=>{class t{constructor(){this.dataService=s(o),this.list=l(this.dataService.getList()),this.id=a(void 0),this.data=a(void 0),this.fieldConfiguration=a({type:"object",properties:{employeeId:{type:"string",description:"Employee ID"},startsFrom:{type:"date-time",description:"Starts From"},endsAt:{type:"date-time",description:"Ends At"},isFullDay:{type:"boolean",description:"Full Day"},label:{type:"string",description:"Label"},type:{type:"string",description:"Type",enum:Object.values(F)}}}),this.isDirty=a(!1),this.updatedValue=a(void 0),this.controlsConfig=n(()=>this.isDirty()?S:D),E(()=>{this.data.set(c(this.list()?.find(e=>e.id==this.id())))})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(i=>e.isDirty??i)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,i){switch(e){case"refresh":case"cancel":{this.data.set(c(this.list()?.find(r=>r.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let r=this.updatedValue();r&&(this.dataService.save(r),this.updateState({isDirty:!1}));break}}}onParamsChange(e,i){this.id.set(e.id)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})();var R=(()=>{class t{constructor(){this.dataService=s(o),this.rawData=l(this.dataService.getList()),this.employeeDataService=s(O),this.employeeList=l(this.employeeDataService.getList()),this.configuration={useVirtualScroll:!0},this.data=n(()=>{let e=this.rawData(),i=this.employeeList();return!e||!i?[]:e.map(r=>y(d({},r),{employee:i.find(w=>w.id==r.employeeId)})).toSorted(this.sortFn())}),this.columnsConfig=a([{key:"employeeName",label:"Employee",path:"employee.name"},{key:"label",label:"Label"},{key:"startsFrom",label:"Starts",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isSortedDesc:!0},{key:"endsAt",label:"Ends",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isAlignEnd:!0}]),this.columnsToDisplay=a(["employeeName","label","startsFrom","endsAt"]),this.controlsConfig=a([]),this.sortFn=n(()=>b(this.columnsConfig()))}routeToDetail(e){return["../detail",e.id]}onHeaderCellClick(e,i){this.columnsConfig.update(r=>I(r,e))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})();var me=[{path:"",data:d({},h({title:"Calendar"})),children:[{path:"detail/:id",component:f,data:d({},h({deps:[o],titleFn:(t,V)=>t.params.pipe(v(e=>V.getList().pipe(C(i=>i.find(r=>r.id==e.id)?.label??"--"))))})),providers:[{provide:m,useClass:j}],children:[{path:"raw",component:T,providers:[{provide:g,useClass:k}]},{path:"**",redirectTo:"raw"}]},{path:"",component:f,providers:[{provide:m,useClass:u}],children:[{path:"monthly/:timestamp",loadComponent:()=>import("./chunk-45LBSWVW.js").then(t=>t.EmployeeCalendarMonthlyComponent),providers:[{provide:u,useExisting:m}]},{path:"data",component:A,providers:[{provide:L,useClass:R}]},{path:"**",redirectTo:"monthly/-1"}]}]}];export{me as ROUTES};
