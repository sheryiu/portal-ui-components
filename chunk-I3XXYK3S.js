import{a as e}from"./chunk-5KUQE4MU.js";import{$ as p,K as d,N as h,fa as m,g as n,tb as u,z as c}from"./chunk-O5WS6LKQ.js";import{a as o,b as l}from"./chunk-EQDQRRRY.js";var A=(()=>{class s{constructor(){this.appRef=m(u),this.list=new n([]),this.isLoading=new n(!1),this.isLoading$=this.isLoading.asObservable(),this.isInitialized=!1}createMockAddress(){return{line1:e.location.secondaryAddress(),line2:e.location.streetAddress(),city:e.location.city(),state:e.location.state(),country:e.location.country(),postalCode:e.location.zipCode()}}createMock(){let i=e.person.firstName(),t=e.person.lastName();return{id:e.string.nanoid(),profile:{color:e.color.colorByCSSColorSpace().map(a=>a*255).join(" "),icon:e.helpers.arrayElement(["pentagon","square","hexagon","shapes","stack","lightbulb","all_out"])},name:e.person.fullName({firstName:i,lastName:t}),username:e.helpers.maybe(()=>e.internet.username({firstName:i,lastName:t}))??e.internet.username(),email:e.internet.email({firstName:i,lastName:t}),phone:e.phone.number(),address:this.createMockAddress(),savedAddresses:Array(e.helpers.rangeToNumber({min:1,max:6})).fill(0).map(()=>this.createMockAddress()),registeredSince:e.date.past({years:9})}}initialize(){this.isInitialized||(this.isInitialized=!0,this.list.next(Array(2).fill(0).map(()=>this.createMock()).sort((i,t)=>t.registeredSince.getTime()-i.registeredSince.getTime())),this.isLoading.next(!1))}getList(){return this.isLoading.value==!0||this.list.value.length>0?this.list:(this.isLoading.next(!0),this.appRef.isStable.pipe(h(i=>i),d(500)).subscribe(()=>{this.initialize()}),this.list)}refresh(){this.isLoading.value!=!0&&(this.isLoading.next(!0),c(1e3).subscribe(()=>{this.isInitialized=!1,this.initialize()}))}loadMore(){this.list.next(this.list.value.concat(...Array(2).fill(0).map(()=>this.createMock())))}save(i){this.list.next(this.list.value.map(t=>t.id==i.id?i:t))}updateAddress(i,t,a){this.list.next(this.list.value.map(r=>r.id==i?l(o({},r),{savedAddresses:r.savedAddresses.toSpliced(t,1,a)}):r))}add(i){this.list.next(this.list.value.toSpliced(0,0,i))}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=p({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{A as a};
