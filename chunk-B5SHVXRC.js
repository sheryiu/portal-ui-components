import{a as s,b as f}from"./chunk-2KSRL6LA.js";import{d as F,e as O}from"./chunk-S24MCBAH.js";import{c as D,d as S,e as g,g as T,k as b,m as L,n as A,o as I,p as c,q as u}from"./chunk-CEKICTYZ.js";import"./chunk-5KUQE4MU.js";import{J as p,va as h}from"./chunk-MW3KZHK7.js";import{$a as r,X as v,aa as d,ga as n,q as C,wc as l,yc as E}from"./chunk-O4SB2AXP.js";import{a as m,b as y}from"./chunk-EQDQRRRY.js";var j=(()=>{let e=class e{constructor(){this.dataService=n(s),this.list=p(this.dataService.getList()),this.id=r(void 0),this.heading=l(()=>this.list()?.find(t=>t.id==this.id())?.label??"--"),this.tabs=r([])}onParamsChange(t,i){this.id.set(t.id)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=d({token:e,factory:e.\u0275fac});let a=e;return a})();var k=(()=>{let e=class e{constructor(){this.dataService=n(s),this.list=p(this.dataService.getList()),this.id=r(void 0),this.data=r(void 0),this.fieldConfiguration=r({type:"object",properties:{employeeId:{type:"string",description:"Employee ID"},startsFrom:{type:"date-time",description:"Starts From"},endsAt:{type:"date-time",description:"Ends At"},isFullDay:{type:"boolean",description:"Full Day"},label:{type:"string",description:"Label"},type:{type:"string",description:"Type",enum:Object.values(F)}}}),this.isDirty=r(!1),this.updatedValue=r(void 0),this.controlsConfig=l(()=>this.isDirty()?S:D),E(()=>{this.data.set(structuredClone(this.list()?.find(t=>t.id==this.id())))},{allowSignalWrites:!0})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(i=>t.isDirty??i)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,i){switch(t){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(o=>o.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let o=this.updatedValue();o&&(this.dataService.save(o),this.updateState({isDirty:!1}));break}}}onParamsChange(t,i){this.id.set(t.id)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=d({token:e,factory:e.\u0275fac});let a=e;return a})();var w=(()=>{let e=class e{constructor(){this.dataService=n(s),this.rawData=p(this.dataService.getList()),this.employeeDataService=n(O),this.employeeList=p(this.employeeDataService.getList()),this.configuration={useVirtualScroll:!0},this.data=l(()=>{let t=this.rawData(),i=this.employeeList();return!t||!i?[]:t.map(o=>y(m({},o),{employee:i.find(V=>V.id==o.employeeId)})).toSorted(this.sortFn())}),this.columnsConfig=r([{key:"employeeName",label:"Employee",path:"employee.name"},{key:"label",label:"Label"},{key:"startsFrom",label:"Starts",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isSortedDesc:!0},{key:"endsAt",label:"Ends",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isAlignEnd:!0}]),this.columnsToDisplay=r(["employeeName","label","startsFrom","endsAt"]),this.controlsConfig=r([]),this.sortFn=l(()=>b(this.columnsConfig()))}routeToDetail(t){return["../detail",t.id]}onHeaderCellClick(t,i){this.columnsConfig.update(o=>I(o,t))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=d({token:e,factory:e.\u0275fac});let a=e;return a})();var dt=[{path:"",data:m({},h({title:"Calendar"})),children:[{path:"detail/:id",component:u,data:m({},h({deps:[s],titleFn:(a,e)=>a.params.pipe(v(R=>e.getList().pipe(C(t=>t.find(i=>i.id==R.id)?.label??"--"))))})),providers:[{provide:c,useClass:j}],children:[{path:"raw",component:T,providers:[{provide:g,useClass:k}]},{path:"**",redirectTo:"raw"}]},{path:"",component:u,providers:[{provide:c,useClass:f}],children:[{path:"monthly/:timestamp",loadComponent:()=>import("./chunk-WU677HGX.js").then(a=>a.EmployeeCalendarMonthlyComponent),providers:[{provide:f,useExisting:c}]},{path:"data",component:A,providers:[{provide:L,useClass:w}]},{path:"**",redirectTo:"monthly/-1"}]}]}];export{dt as ROUTES};
