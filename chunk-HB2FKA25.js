import{a as r,b as f}from"./chunk-56S3FF4P.js";import{d as I,e as F}from"./chunk-DZ3ZHRGT.js";import{c as b,d as E,e as S,g as T,k as N,m as L,n as M,o as A,p,q as h}from"./chunk-7YLATZOY.js";import"./chunk-QLEH2ZB5.js";import{Ca as u,K as c,P as d,Za as C}from"./chunk-WX3TDQFG.js";import{R as v,X as l,aa as n,lc as s,p as g,pa as a,ra as D}from"./chunk-456UTSJA.js";import{a as m,b as y}from"./chunk-C6Q5SG76.js";var V=(()=>{class t{constructor(){this.dataService=n(r),this.list=d(this.dataService.getList()),this.id=a(void 0),this.heading=s(()=>this.list()?.find(e=>e.id==this.id())?.label??"--"),this.tabs=a([])}onParamsChange(e,i){this.id.set(e.id)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=l({token:t,factory:t.\u0275fac})}}return t})();var j=(()=>{class t{constructor(){this.dataService=n(r),this.list=d(this.dataService.getList()),this.id=a(void 0),this.data=a(void 0),this.fieldConfiguration=a({type:"object",properties:{employeeId:{type:"string",description:"Employee ID"},startsFrom:{type:"date-time",description:"Starts From"},endsAt:{type:"date-time",description:"Ends At"},isFullDay:{type:"boolean",description:"Full Day"},label:{type:"string",description:"Label"},type:{type:"string",description:"Type",enum:Object.values(I)}}}),this.isDirty=a(!1),this.updatedValue=a(void 0),this.controlsConfig=s(()=>this.isDirty()?E:b),D(()=>{this.data.set(c(this.list()?.find(e=>e.id==this.id())))})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(i=>e.isDirty??i)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,i){switch(e){case"refresh":case"cancel":{this.data.set(c(this.list()?.find(o=>o.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let o=this.updatedValue();o&&(this.dataService.save(this.id(),o),this.updateState({isDirty:!1}));break}}}onParamsChange(e,i){this.id.set(e.id)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=l({token:t,factory:t.\u0275fac})}}return t})();var k=(()=>{class t{constructor(){this.dataService=n(r),this.rawData=d(this.dataService.getList()),this.employeeDataService=n(F),this.employeeList=d(this.employeeDataService.getList()),this.configuration={id:"employee-calendar-table",useVirtualScroll:!0},this.data=s(()=>{let e=this.rawData(),i=this.employeeList();return!e||!i?[]:e.map(o=>y(m({},o),{employee:i.find(w=>w.id==o.employeeId)})).toSorted(this.sortFn())}),this.columnsConfig=a([{key:"employeeName",label:"Employee",path:"employee.name"},{key:"label",label:"Label"},{key:"startsFrom",label:"Starts",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isSortedDesc:!0},{key:"endsAt",label:"Ends",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isAlignEnd:!0}]),this.columnsToDisplay=a(["employeeName","label","startsFrom","endsAt"]),this.controlsConfig=a([]),this.sortFn=s(()=>N(this.columnsConfig()))}routeToDetail(e){return["../detail",e.id]}onHeaderCellClick(e,i){this.columnsConfig.update(o=>A(o,e))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=l({token:t,factory:t.\u0275fac})}}return t})();var ce=[{path:"",data:m({},u({title:"Calendar"})),children:[{path:"detail/:id",component:h,data:m({},u({deps:[r],titleFn:(t,R)=>t.params.pipe(v(e=>R.getList().pipe(g(i=>i.find(o=>o.id==e.id)?.label??"--"))))})),providers:[{provide:p,useClass:V}],children:[{path:"raw",component:T,canDeactivate:[C],providers:[{provide:S,useClass:j}]},{path:"**",redirectTo:"raw"}]},{path:"",component:h,providers:[{provide:p,useClass:f}],children:[{path:"monthly/:timestamp",loadComponent:()=>import("./chunk-BRVVXUDI.js").then(t=>t.EmployeeCalendarMonthlyComponent),providers:[{provide:f,useExisting:p}]},{path:"data",component:M,providers:[{provide:L,useClass:k}]},{path:"**",redirectTo:"monthly/-1"}]}]}];export{ce as ROUTES};
