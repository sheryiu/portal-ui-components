import{a as n,b as S}from"./chunk-GJTET7ZX.js";import{d as k,e as I}from"./chunk-4LJXWH66.js";import"./chunk-5EEIOBZW.js";import{B as d,O as o,Ob as E,Pb as T,Qb as g,Sb as b,Vb as A,Wb as L,Xb as y,Ya as p,Yb as C,a as l,b as h,i as D,ta as c,tb as f,u as v,va as u,y as m}from"./chunk-7IRLRVY6.js";var w=(()=>{let t=class t{constructor(){this.dataService=d(n),this.list=p(this.dataService.getList()),this.id=o(void 0),this.heading=c(()=>this.list()?.find(e=>e.id==this.id())?.label??"--"),this.tabs=o([])}onParamsChange(e,i){this.id.set(e.id)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let r=t;return r})();var F=(()=>{let t=class t{constructor(){this.dataService=d(n),this.list=p(this.dataService.getList()),this.id=o(void 0),this.data=o(void 0),this.fieldConfiguration=o({type:"object",properties:{employeeId:{type:"string",description:"Employee ID"},startsFrom:{type:"date-time",description:"Starts From"},endsAt:{type:"date-time",description:"Ends At"},isFullDay:{type:"boolean",description:"Full Day"},label:{type:"string",description:"Label"},type:{type:"string",description:"Type",enum:Object.values(k)}}}),this.isDirty=o(!1),this.updatedValue=o(void 0),this.controlsConfig=c(()=>this.isDirty()?T:E),u(()=>{this.data.set(structuredClone(this.list()?.find(e=>e.id==this.id())))},{allowSignalWrites:!0})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(i=>e.isDirty??i)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,i){switch(e){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(a=>a.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let a=this.updatedValue();a&&(this.dataService.save(a),this.updateState({isDirty:!1}));break}}}onParamsChange(e,i){this.id.set(e.id)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let r=t;return r})();var N=(()=>{let t=class t{constructor(){this.dataService=d(n),this.rawData=p(this.dataService.getList()),this.employeeDataService=d(I),this.employeeList=p(this.employeeDataService.getList()),this.configuration={useVirtualScroll:!0},this.data=o([]),this.columnsConfig=o([{key:"employeeName",label:"Employee",path:"employee.name"},{key:"label",label:"Label"},{key:"startsFrom",label:"Starts",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}},{key:"endsAt",label:"Ends",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=o(["employeeName","label","startsFrom","endsAt"]),this.controlsConfig=o([]),this.sortFn=c(()=>{let e=this.columnsConfig().find(a=>a.isSortedAsc||a.isSortedDesc);if(!e)return()=>0;let i=e.isSortedDesc?-1:1;return(a,s)=>{switch(e.key){case"employeeName":return a.employee?.name>s.employee?.name?i:a.employee?.name<s.employee?.name?-1*i:0;default:return a[e.key]>s[e.key]?i:a[e.key]<s[e.key]?-1*i:0}}}),u(()=>{let e=this.rawData(),i=this.employeeList();!e||!i||this.data.set(e.map(a=>h(l({},a),{employee:i.find(s=>s.id==a.employeeId)})).sort(this.sortFn()))},{allowSignalWrites:!0})}routeToDetail(e){return["../detail",e.id]}onHeaderCellClick(e,i){this.columnsConfig.update(a=>a.map(s=>s.key==e?h(l({},s),{isSortedAsc:!s.isSortedAsc&&!s.isSortedDesc?!0:!!s.isSortedDesc,isSortedDesc:!!s.isSortedAsc}):h(l({},s),{isSortedAsc:!1,isSortedDesc:!1})))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let r=t;return r})();var oe=[{path:"",data:l({},f({title:"Calendar"})),children:[{path:"detail/:id",component:C,data:l({},f({deps:[n],titleFn:(r,t)=>r.params.pipe(v(j=>t.getList().pipe(D(e=>e.find(i=>i.id==j.id)?.label??"--"))))})),providers:[{provide:y,useClass:w}],children:[{path:"raw",component:b,providers:[{provide:g,useClass:F}]},{path:"**",redirectTo:"raw"}]},{path:"",component:C,providers:[{provide:y,useClass:S}],children:[{path:"monthly/:timestamp",loadComponent:()=>import("./chunk-N6KFE7SW.js").then(r=>r.EmployeeCalendarMonthlyComponent),providers:[{provide:S,useExisting:y}]},{path:"data",component:L,providers:[{provide:A,useClass:N}]},{path:"**",redirectTo:"monthly/-1"}]}]}];export{oe as ROUTES};
