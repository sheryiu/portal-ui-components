import{a as F,b as fe}from"./chunk-X3RRXTK5.js";import"./chunk-5KUQE4MU.js";import{J as S,d as ae,oa as de,pa as pe,qa as me,ta as _,v as se,wa as ce,y as le,za as ue}from"./chunk-YSJMDZIT.js";import{$a as H,Ca as V,Cb as J,Db as C,Ea as $,Eb as K,Fa as u,Fb as Y,Ga as z,Kb as ee,Lb as te,Mb as B,Nb as ie,Ob as p,Pa as G,Pb as E,Sa as s,Va as N,Wb as h,Xb as ne,Yb as re,ba as D,bb as Q,cb as q,ga as m,ka as c,kb as w,la as I,ma as R,mb as A,nb as W,ob as d,pb as X,q as M,rb as P,tb as x,ua as j,ub as T,va as k,vb as o,wb as a,wc as v,xb as f,ya as O,yb as U,yc as oe,za as L,zb as Z}from"./chunk-O4SB2AXP.js";import"./chunk-EQDQRRRY.js";var he=(i,e)=>e.id,Se=i=>["../",i];function _e(i,e){if(i&1&&(o(0,"a",3)(1,"i",6),p(2,"folder"),a(),o(3,"span",7),p(4),a()()),i&2){let l=e.$implicit;d("routerLink",re(2,Se,l.id)),s(4),E(l.filename)}}function Me(i,e){if(i&1&&f(0,"img",8),i&2){let l=C().$implicit;d("src",l.thumbnail,G)}}function Be(i,e){i&1&&(o(0,"div",9)(1,"i",11),p(2,"files"),a()())}function Ee(i,e){if(i&1&&(o(0,"button",5),w(1,Me,1,1,"img",8)(2,Be,3,0,"div",9),o(3,"div",10)(4,"i",6),p(5,"draft"),a(),o(6,"span",7),p(7),a()()()),i&2){let l=e.$implicit;s(),P(l.thumbnail!=null?1:2),s(6),E(l.filename)}}var ve=(()=>{let e=class e{constructor(){this.media=u.required(),this.processed=v(()=>this.media().toSorted((n,t)=>n.filename<t.filename?-1:n.filename>t.filename?1:0)),this.folders=v(()=>this.processed().filter(n=>n.type==F.FOLDER)),this.files=v(()=>this.processed().filter(n=>n.type==F.FILE))}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["demo-media-manager-grid"]],inputs:{media:[1,"media"]},standalone:!0,features:[h],decls:10,vars:0,consts:[[1,"flex","flex-col","gap-4"],[1,"grid","gap-4",2,"grid-template-columns","repeat(auto-fit, minmax(280px, 1fr))"],[1,"col-span-full"],["puiBaseButton","",1,"basis-[280px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","justify-start","py-3","px-6","gap-3",3,"routerLink"],[1,"pt-2","col-span-full"],["puiBaseButton","",1,"basis-[280px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","items-start","flex-col"],[1,"icon-6","font-variation-fill","opacity-70"],[1,"truncate"],[1,"aspect-video","w-full",3,"src"],[1,"aspect-video","w-full","bg-hover","flex","justify-center","items-center"],[1,"flex","flex-row","py-3","px-6","gap-3","items-center","w-full"],[1,"icon-12","font-variation-weight-bold","font-variation-fill","dark:text-primary-600"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"div",1)(2,"h3",2),p(3,"Folders"),a(),x(4,_e,5,4,"a",3,he),o(6,"h3",4),p(7,"Files"),a(),x(8,Ee,8,2,"button",5,he),a()()),t&2&&(s(4),T(r.folders()),s(4),T(r.files()))},dependencies:[_,pe,le]});let i=e;return i})();var y=(()=>{let e=class e{constructor(){this.id=u.required({alias:"puiTab"}),this.templateRef=m(N)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=R({type:e,selectors:[["","puiTab",""]],inputs:{id:[1,"puiTab","id"]}});let i=e;return i})();var De=["tabButton"],Ie=["*"],Re=(i,e)=>e.id();function je(i,e){if(i&1){let l=Z();o(0,"button",3,0),J("click",function(){let t=j(l),r=t.$implicit,b=t.$index,ye=ie(1),we=C();return k(we.onTabClick(b,r,ye))}),U(2,4),a()}if(i&2){let l=e.$implicit,n=C();d("id",l.id()),W("data-active",n.currentTab()===l.id()),s(2),d("ngTemplateOutlet",l.templateRef)}}var ge=(()=>{let e=class e{constructor(){this.elementRef=m(z),this.tabs=q(y),this.tabButtonsElement=Q("tabButton"),this.inputCurrentTab=u(null,{alias:"currentTab"}),this.currentTab=H(null),this.tabChange=$(),this.zone=m(V),this.destroyRef=m(L),this.injector=m(O),this.destroyRef.onDestroy(()=>{this.resizeObserver?.disconnect(),this.mutationObserver?.disconnect()})}ngAfterViewInit(){A(()=>{this.resizeObserver=new ResizeObserver(n=>{this.zone.run(()=>{this.currentTab()!=null&&this.update(this.tabs().find(t=>t.id()===this.currentTab()))})}),this.mutationObserver=new MutationObserver(n=>{this.zone.run(()=>{this.currentTab()!=null&&this.update(this.tabs().find(t=>t.id()===this.currentTab()))})}),this.resizeObserver.observe(this.elementRef.nativeElement),this.mutationObserver.observe(this.elementRef.nativeElement,{subtree:!0,childList:!0}),this.currentTab.set(this.inputCurrentTab()),oe(()=>{let n;this.currentTab()!=null?n=this.tabs().find(t=>t.id()===this.currentTab()):n=this.tabs().at(0),this.update(n)},{allowSignalWrites:!0,injector:this.injector})},{injector:this.injector})}update(n){if(n==null)return;let t=this.tabButtonsElement().find(r=>r.nativeElement.id===n.id());t?.nativeElement&&(this.currentTab.set(n.id()),this.hostSelectedTabWidth=t?.nativeElement.getBoundingClientRect().width,this.hostSelectedTabX=t?.nativeElement.offsetLeft)}onTabClick(n,t,r){this.currentTab.set(t.id()),this.hostSelectedTabWidth=r.getBoundingClientRect().width,this.hostSelectedTabX=r.offsetLeft,this.tabChange.emit(t.id())}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["pui-tab-bar"]],contentQueries:function(t,r,b){t&1&&ee(b,r.tabs,y,4),t&2&&B()},viewQuery:function(t,r){t&1&&te(r.tabButtonsElement,De,5),t&2&&B()},hostAttrs:[1,"pui-tab-bar"],hostVars:4,hostBindings:function(t,r){t&2&&X("--pui-selected-tab-width",r.hostSelectedTabWidth,"px")("--pui-selected-tab-x",r.hostSelectedTabX,"px")},inputs:{inputCurrentTab:[1,"currentTab","inputCurrentTab"]},outputs:{tabChange:"tabChange"},ngContentSelectors:Ie,decls:4,vars:0,consts:[["tabButton",""],[1,"pui-tab-bar-tabs"],["type","button","puiHoverable","",3,"id"],["type","button","puiHoverable","",3,"click","id"],[3,"ngTemplateOutlet"]],template:function(t,r){t&1&&(K(),o(0,"div",1),x(1,je,3,3,"button",2,Re),a(),Y(3)),t&2&&(s(),T(r.tabs()))},dependencies:[ae,de],encapsulation:2});let i=e;return i})();var xe=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I({type:e}),e.\u0275inj=D({});let i=e;return i})();function Oe(i,e){i&1&&(o(0,"div",6)(1,"i",7),p(2,"grid_view"),a()())}function Le(i,e){i&1&&(o(0,"div",8)(1,"i",9),p(2,"list"),a()())}var Te=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["demo-media-manager-toolbar"]],standalone:!0,features:[h],decls:10,vars:2,consts:[[1,"flex","flex-row","gap-x-3"],[1,"spacer"],["puiBorderedButton","","puiTooltip","Sort by filename",1,"rounded-full","flex-row","px-4","gap-2"],[1,"icon-4","font-variation-weight-light","rotate-180","-scale-x-100"],["puiTooltip","Grid View",4,"puiTab"],["puiTooltip","List View",4,"puiTab"],["puiTooltip","Grid View"],[1,"icon-5","font-variation-weight-light"],["puiTooltip","List View"],[1,"icon-5","font-variation-weight-bold"]],template:function(t,r){t&1&&(o(0,"div",0),f(1,"div",1),o(2,"button",2)(3,"i",3),p(4,"sort"),a(),o(5,"span"),p(6,"Filename"),a()(),o(7,"pui-tab-bar"),w(8,Oe,3,0,"div",4)(9,Le,3,0,"div",5),a()()),t&2&&(s(8),d("puiTab","grid"),s(),d("puiTab","list"))},dependencies:[xe,ge,y,ce,_,me],styles:["[_nghost-%COMP%]     pui-tab-bar .pui-tab-bar-tabs{background:#bfbfbf0d;box-shadow:inset #ffffff08 0 0 4px,#0000001a 4px 2px 3px}"]});let i=e;return i})();var Ve=()=>[],Ce=(()=>{let e=class e{constructor(){this.dataService=m(fe),this.folderId=u.required(),this.allMedia=S(this.dataService.getList()),this.mediaInFolder=v(()=>this.allMedia()?.filter(n=>n.belongsInFolderId==this.folderId()))}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["demo-media-manager-folder"]],inputs:{folderId:[1,"folderId"]},standalone:!0,features:[h],decls:4,vars:2,consts:[[1,"flex","flex-col","gap-4"],[3,"media"]],template:function(t,r){if(t&1&&(o(0,"div",0),f(1,"demo-media-manager-toolbar")(2,"pui-divider")(3,"demo-media-manager-grid",1),a()),t&2){let b;s(3),d("media",(b=r.mediaInFolder())!==null&&b!==void 0?b:ne(1,Ve))}},dependencies:[Te,ue,ve]});let i=e;return i})();var bt=(()=>{let e=class e{constructor(){this.route=m(se),this.folderId=S(this.route.params.pipe(M(n=>n.folderId),M(n=>n??null)),{initialValue:null})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["demo-media-manager"]],standalone:!0,features:[h],decls:3,vars:1,consts:[[1,"pui-card","rounded-4","px-8","py-4"],[3,"folderId"]],template:function(t,r){t&1&&(o(0,"main")(1,"div",0),f(2,"demo-media-manager-folder",1),a()()),t&2&&(s(2),d("folderId",r.folderId()))},dependencies:[Ce]});let i=e;return i})();export{bt as MediaManagerComponent};
