import{a as n,b as y}from"./chunk-EABYBGJE.js";import{d as F,e as O}from"./chunk-VJPI5O3M.js";import{c as E,d as S,e as T,g as N,k as L,m as M,n as A,o as I,p as c,q as f}from"./chunk-BDRA5EIL.js";import"./chunk-QLEH2ZB5.js";import{Aa as h,K as u,P as l,Xa as b}from"./chunk-4CV2DTBE.js";import{$ as m,V as D,ea as s,q as v,qc as d,ra as o,rc as C}from"./chunk-LVH4HSPS.js";import{a as p,b as g}from"./chunk-C6Q5SG76.js";var j=(()=>{let t=class t{constructor(){this.dataService=s(n),this.list=l(this.dataService.getList()),this.id=o(void 0),this.heading=d(()=>this.list()?.find(e=>e.id==this.id())?.label??"--"),this.tabs=o([])}onParamsChange(e,i){this.id.set(e.id)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let a=t;return a})();var k=(()=>{let t=class t{constructor(){this.dataService=s(n),this.list=l(this.dataService.getList()),this.id=o(void 0),this.data=o(void 0),this.fieldConfiguration=o({type:"object",properties:{employeeId:{type:"string",description:"Employee ID"},startsFrom:{type:"date-time",description:"Starts From"},endsAt:{type:"date-time",description:"Ends At"},isFullDay:{type:"boolean",description:"Full Day"},label:{type:"string",description:"Label"},type:{type:"string",description:"Type",enum:Object.values(F)}}}),this.isDirty=o(!1),this.updatedValue=o(void 0),this.controlsConfig=d(()=>this.isDirty()?S:E),C(()=>{this.data.set(u(this.list()?.find(e=>e.id==this.id())))})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(i=>e.isDirty??i)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,i){switch(e){case"refresh":case"cancel":{this.data.set(u(this.list()?.find(r=>r.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let r=this.updatedValue();r&&(this.dataService.save(this.id(),r),this.updateState({isDirty:!1}));break}}}onParamsChange(e,i){this.id.set(e.id)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let a=t;return a})();var R=(()=>{let t=class t{constructor(){this.dataService=s(n),this.rawData=l(this.dataService.getList()),this.employeeDataService=s(O),this.employeeList=l(this.employeeDataService.getList()),this.configuration={id:"employee-calendar-table",useVirtualScroll:!0},this.data=d(()=>{let e=this.rawData(),i=this.employeeList();return!e||!i?[]:e.map(r=>g(p({},r),{employee:i.find(P=>P.id==r.employeeId)})).toSorted(this.sortFn())}),this.columnsConfig=o([{key:"employeeName",label:"Employee",path:"employee.name"},{key:"label",label:"Label"},{key:"startsFrom",label:"Starts",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isSortedDesc:!0},{key:"endsAt",label:"Ends",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isAlignEnd:!0}]),this.columnsToDisplay=o(["employeeName","label","startsFrom","endsAt"]),this.controlsConfig=o([]),this.sortFn=d(()=>L(this.columnsConfig()))}routeToDetail(e){return["../detail",e.id]}onHeaderCellClick(e,i){this.columnsConfig.update(r=>I(r,e))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac});let a=t;return a})();var ue=[{path:"",data:p({},h({title:"Calendar"})),children:[{path:"detail/:id",component:f,data:p({},h({deps:[n],titleFn:(a,t)=>a.params.pipe(D(w=>t.getList().pipe(v(e=>e.find(i=>i.id==w.id)?.label??"--"))))})),providers:[{provide:c,useClass:j}],children:[{path:"raw",component:N,canDeactivate:[b],providers:[{provide:T,useClass:k}]},{path:"**",redirectTo:"raw"}]},{path:"",component:f,providers:[{provide:c,useClass:y}],children:[{path:"monthly/:timestamp",loadComponent:()=>import("./chunk-NRL6OCR6.js").then(a=>a.EmployeeCalendarMonthlyComponent),providers:[{provide:y,useExisting:c}]},{path:"data",component:A,providers:[{provide:M,useClass:R}]},{path:"**",redirectTo:"monthly/-1"}]}]}];export{ue as ROUTES};
