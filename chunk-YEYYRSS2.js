import{a as x,b as M,c as h}from"./chunk-RW36IC2R.js";import{a as U}from"./chunk-I3XXYK3S.js";import{a as je}from"./chunk-7UTMRVYV.js";import{a as F,b as N,c as ke,d as we,e as P,f as Ae,g as B,k as Ve,m as W,n as H,o as Re,p as z,q as K}from"./chunk-7BVKAQRV.js";import{a as J}from"./chunk-5KUQE4MU.js";import{$a as ge,A as se,Ba as Q,Fa as ve,J as Y,N as u,Oa as he,Sa as ye,Ta as _e,Za as Ce,_a as Ie,ab as be,bb as Se,cb as xe,db as Te,eb as Ee,gb as De,ia as ce,ra as me,ua as de,wa as pe,x as le,xa as ue,za as fe}from"./chunk-4N3USS22.js";import{$ as f,Ab as ne,Bb as oe,Cb as n,Da as l,Db as o,Eb as I,Gb as j,Jb as k,Kb as g,Ra as s,Vb as r,Wb as _,Xb as q,bc as re,cc as G,fa as m,fb as ie,mb as C,oa as E,pa as D,q as O,uc as p,vb as d,xc as ae,yb as S}from"./chunk-O5WS6LKQ.js";import{a as T,b as $}from"./chunk-EQDQRRRY.js";var Le=(()=>{class e{constructor(){this.dataService=m(h),this.list=u(this.dataService.getList()),this.id=l(void 0),this.heading=p(()=>this.list()?.find(t=>t.id==this.id())?.id??"--"),this.tabs=l([{label:"Info",route:["info"]},{label:"Raw",route:["raw"]}])}onParamsChange(t,a){this.id.set(t.id)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Oe=(()=>{class e{constructor(){this.dataService=m(h),this.list=u(this.dataService.getList()),this.id=l(void 0),this.data=l(void 0),this.fieldConfiguration=l({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(x),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{id:{type:"string",description:"ID"},description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(M)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=p(()=>this.isDirty()?we:ke),ae(()=>{this.data.set(Y(this.list()?.find(t=>t.id==this.id())))})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(a=>t.isDirty??a)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,a){switch(t){case"refresh":case"cancel":{this.data.set(Y(this.list()?.find(i=>i.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let i=this.updatedValue();i&&(this.dataService.save(i),this.updateState({isDirty:!1}));break}}}onParamsChange(t,a){this.id.set(t.id)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Fe=(()=>{class e{constructor(){this.dataService=m(U),this.overlayData=m(me),this.configuration={content:H,useVirtualScroll:!1},this.data=u(this.dataService.getList(),{initialValue:[]}),this.columnsConfig=l([{key:"name",label:"Name",fieldConfiguration:{type:"string"}},{key:"phone",label:"Phone",fieldConfiguration:{type:"string"}}]),this.columnsToDisplay=l(["name","phone"]),this.selectionMode=l("single"),this.selectedItems=l(this.overlayData.initialValue),this.controlsConfig=p(()=>[{id:"select",label:this.selectedItems().size==0?"Select":`Select ${this.selectedItems().values().next().value.name}`,isDisabled:this.selectedItems().size==0}]),this.heading=l("Pick customer")}onControlClick(t,a){t=="select"&&(this.overlayData?.onSave(this.selectedItems().values().next().value),this.overlayRef.close())}compareFn(t,a){return t.id==a.id}onTableRowClick(t){this.selectedItems.set(new Set([t]))}onActionDrawerInit(t){this.overlayRef=t}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var He=(e,c)=>c.id,Ue=e=>["/user","customer","detail",e],Me=e=>["/inventory","shelf","detail",e],$e=()=>["description","isbn","quantity","totalPrice"];function qe(e,c){if(e&1){let t=j();I(0,"div",20),n(1,"button",21),k("click",function(){E(t);let i=g();return D(i.onUpdateCustomerClick())}),n(2,"span"),r(3,"Update"),o()()}}function Ge(e,c){e&1&&(n(0,"i",18),r(1,"check"),o())}function Ye(e,c){e&1&&(n(0,"i",19),r(1,"close"),o())}function Qe(e,c){e&1&&(n(0,"span",15),r(1,"----"),o())}function ze(e,c){e&1&&(n(0,"pui-table-header-cell"),r(1,"Item"),o())}function Ke(e,c){e&1&&(n(0,"pui-table-header-cell"),r(1,"ISBN"),o())}function Je(e,c){e&1&&(n(0,"pui-table-header-cell"),r(1,"Quantity"),o())}function Xe(e,c){e&1&&(n(0,"pui-table-header-cell"),r(1,"Total Price"),o())}function Ze(e,c){if(e&1&&(n(0,"pui-table-cell")(1,"span",27),r(2),o()()),e&2){let t=c.$implicit;s(2),_(t.description)}}function et(e,c){if(e&1&&(n(0,"pui-table-cell")(1,"span",27),r(2),o()()),e&2){let t=c.$implicit;s(2),_(t.isbn)}}function tt(e,c){if(e&1&&(n(0,"pui-table-cell"),r(1," x "),n(2,"span",27),r(3),o()()),e&2){let t=c.$implicit;s(3),_(t.quantity)}}function it(e,c){if(e&1&&(n(0,"pui-table-cell",28),r(1," $ "),n(2,"span",27),r(3),o()()),e&2){let t=c.$implicit;s(3),_(t.totalPrice)}}function nt(e,c){if(e&1&&I(0,"pui-table-row",26),e&2){let t=c.$implicit;d("item",t)}}function ot(e,c){if(e&1&&(I(0,"pui-divider"),n(1,"h2"),r(2,"Contents"),o(),n(3,"pui-table",22),C(4,ze,2,0,"pui-table-header-cell",23)(5,Ke,2,0,"pui-table-header-cell",23)(6,Je,2,0,"pui-table-header-cell",23)(7,Xe,2,0,"pui-table-header-cell",23)(8,Ze,3,1,"pui-table-cell",24)(9,et,3,1,"pui-table-cell",24)(10,tt,4,1,"pui-table-cell",24)(11,it,4,1,"pui-table-cell",25),n(12,"pui-table-body"),I(13,"pui-table-header-row"),ne(14,nt,1,1,"pui-table-row",26,He),o()()),e&2){let t=g();s(3),d("itemHeight",48)("columns",re(10,$e)),s(),d("puiTableHeaderCellDef","description"),s(),d("puiTableHeaderCellDef","isbn"),s(),d("puiTableHeaderCellDef","quantity"),s(),d("puiTableHeaderCellDef","totalPrice"),s(),d("puiTableCellDef","description"),s(),d("puiTableCellDef","isbn"),s(),d("puiTableCellDef","quantity"),s(),d("puiTableCellDef","totalPrice"),s(3),oe(t.inventoryItem().contents)}}function rt(e,c){if(e&1){let t=j();n(0,"main",1)(1,"h2"),r(2,"Admin"),o(),n(3,"div",29)(4,"div",30)(5,"div",31)(6,"span",32),r(7,"Mark as Expired"),o(),n(8,"span",33),r(9,"Set the status to expired, preventing any future modifications"),o()(),n(10,"button",34),r(11,"Confirm"),o()(),I(12,"pui-divider"),n(13,"div",30)(14,"div",31)(15,"span",32),r(16,"Remove Inventory Item"),o(),n(17,"span",33),r(18,"This action cannot be undone"),o()(),n(19,"button",35),k("click",function(){E(t);let i=g();return D(i.onRemoveClick())}),r(20,"Remove"),o()()()()}}function at(e,c){if(e&1){let t=j();n(0,"pui-layout-control",37),k("click",function(){E(t);let i=g(2);return D(i.onCancelClick())}),o(),n(1,"pui-layout-control",38),k("click",function(){E(t);let i=g(2);return D(i.onSaveClick())}),o()}}function lt(e,c){if(e&1){let t=j();n(0,"pui-layout-control",39),k("click",function(){E(t);let i=g(2);return D(i.onEditClick())}),o()}}function st(e,c){if(e&1&&C(0,at,2,0)(1,lt,1,0,"pui-layout-control",36),e&2){let t=g();S(t.isEditing()?0:1)}}var Ne=(()=>{class e{constructor(){this.dataService=m(h),this.customerDataService=m(U),this.inventoryShelfService=m(je),this.route=m(le),this.actionDrawer=m(N),this.modalDialog=m(ye),this.list=u(this.dataService.getList()),this.customerList=u(this.customerDataService.getList()),this.inventoryShelfList=u(this.inventoryShelfService.getList()),this.id=u(this.route.params.pipe(O(t=>t.id))),this.inventoryItem=p(()=>this.list()?.find(t=>t.id==this.id())),this.customer=p(()=>this.customerList()?.find(t=>t.id==this.inventoryItem()?.belongsTo)),this.shelf=p(()=>this.inventoryShelfList()?.find(t=>t.id==this.inventoryItem()?.locatedIn)),this.showEditButton=p(()=>[x.OPEN,x.REPACKAGING].includes(this.inventoryItem()?.status)),this.isEditing=l(!1),this.updatedValues=l({})}onEditClick(){this.isEditing.set(!0),this.updatedValues.set({customer:null})}onCancelClick(){this.isEditing.set(!1),this.updatedValues.set({customer:null})}onSaveClick(){this.dataService.save($(T({},this.inventoryItem()),{belongsTo:this.updatedValues().customer?.id??this.inventoryItem().belongsTo})),this.isEditing.set(!1),this.updatedValues.set({customer:null})}onUpdateCustomerClick(){this.actionDrawer.open(Fe,{providers:[{provide:W,useExisting:F}],overlayData:{initialValue:new Set([this.updatedValues().customer??this.customer()].filter(ce)),onSave:t=>{this.updatedValues.update(a=>$(T({},a),{customer:t}))}}})}onRemoveClick(){let t=this.modalDialog.open({title:"Remove Inventory Item",detailsComponent:_e,onDetailsComponentAttached:a=>{a.setInput("stringToCheck","Inventory Item"),a.instance.matchChanged.subscribe(i=>{})},actions:[{label:"Cancel",onClick:()=>{t.close()}},{color:"red",label:"Confirm"}]})}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=ie({type:e,selectors:[["demo-inventory-item-info"]],hostAttrs:[1,"contents"],decls:55,vars:23,consts:[[1,"@container","grow","flex","flex-col","gap-8"],[1,"pui-card","rounded-4","p-8","flex","flex-col","gap-8"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","flex","flex-col","justify-center"],[1,"text-neutral-700","dark:text-neutral-300"],[1,"text-md"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start","text-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center","w-full"],[1,"icon-6","text-neutral-700","dark:text-neutral-300"],[1,"flex","flex-col"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center"],[1,"text-md","uppercase"],[1,"grid","items-center","grid-cols-[min-content_minmax(80px,1fr)]","gap-x-4","gap-y-3"],[1,"col-start-1","text-base","font-medium","whitespace-nowrap","text-neutral-700","dark:text-neutral-300"],[1,"col-start-2","text-md"],[3,"date","format"],[3,"date","mode"],[1,"icon-5","text-green-600","dark:text-green-400"],[1,"icon-5","text-red-600","dark:text-red-400"],[1,"spacer"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2",3,"click"],[3,"itemHeight","columns"],[4,"puiTableHeaderCellDef"],[4,"puiTableCellDef"],["class","tabular-nums",4,"puiTableCellDef"],[3,"item"],[1,"truncate"],[1,"tabular-nums"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-row","items-center","gap-8"],[1,"flex","flex-col","grow"],[1,"text-base","font-medium"],[1,"text-sm","dark:text-neutral-300"],["puiBorderedButton","","color","red",1,"rounded-full","px-4","py-2"],["puiFilledButton","","color","red",1,"rounded-full","px-4","py-2",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto"],["id","cancel","icon","close","label","Cancel","mode","low-emphasis",3,"click"],["id","save","icon","save","label","Save","mode","auto",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto",3,"click"]],template:function(a,i){if(a&1&&(n(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"h4",4),r(5,"Status"),o(),n(6,"p",5),r(7),o()(),n(8,"a",6)(9,"div",7)(10,"i",8),r(11,"person"),o(),n(12,"div",9)(13,"h4",4),r(14,"Customer"),o(),n(15,"p",5),r(16),o()(),C(17,qe,4,0),o()(),n(18,"a",10)(19,"div",11)(20,"i",8),r(21,"shelves"),o(),n(22,"div",9)(23,"h4",4),r(24,"Shelf"),o(),n(25,"p",12),r(26),o()()()()(),n(27,"div",13)(28,"span",14),r(29,"ID"),o(),n(30,"span",15),r(31),o(),n(32,"span",14),r(33,"Arrived at"),o(),n(34,"span",15),I(35,"pui-time-display",16),r(36," ("),I(37,"pui-time-display",17),r(38," ago ) "),o(),n(39,"span",14),r(40,"Net weight"),o(),n(41,"span",15),r(42),o(),n(43,"span",14),r(44,"Gross weight"),o(),n(45,"span",15),r(46),o(),n(47,"span",14),r(48,"Fragile"),o(),C(49,Ge,2,0,"i",18)(50,Ye,2,0,"i",19)(51,Qe,2,0,"span",15),o(),C(52,ot,16,11),o(),C(53,rt,21,0,"main",1),o(),C(54,st,2,1)),a&2){let b,X,v,Z,y,A,ee,te,V,R,L;s(7),_((b=(b=i.inventoryItem())==null?null:b.status)!==null&&b!==void 0?b:"--"),s(),d("hoverableEnabled",!i.isEditing()&&i.customer()!=null)("routerLink",!i.isEditing()&&i.customer()?G(19,Ue,(X=i.customer())==null?null:X.id):null),s(8),_((v=(v=(v=i.updatedValues().customer)==null?null:v.name)!==null&&v!==void 0?v:(v=i.customer())==null?null:v.name)!==null&&v!==void 0?v:"--"),s(),S(i.isEditing()?17:-1),s(),d("hoverableEnabled",!i.isEditing()&&i.shelf()!=null)("routerLink",!i.isEditing()&&i.shelf()?G(21,Me,(Z=i.shelf())==null?null:Z.id):null),s(8),_(i.shelf()?((y=i.shelf())==null||y.location==null?null:y.location.aisle)+((y=i.shelf())==null||y.location==null?null:y.location.row)+" - "+((y=i.shelf())==null||y.location==null?null:y.location.layer):"--"),s(5),_((A=(A=i.inventoryItem())==null?null:A.id)!==null&&A!==void 0?A:"---"),s(4),d("date",(ee=i.inventoryItem())==null?null:ee.arrivedAt)("format","yyyy-MM-dd HH:mm"),s(2),d("date",(te=i.inventoryItem())==null?null:te.arrivedAt)("mode","timeAgo"),s(5),q("",(V=(V=i.inventoryItem())==null?null:V.netWeight)!==null&&V!==void 0?V:"---"," g"),s(4),q("",(R=(R=i.inventoryItem())==null?null:R.grossWeight)!==null&&R!==void 0?R:"---"," g"),s(3),S(((L=i.inventoryItem())==null?null:L.isContainFragile)===!0?49:((L=i.inventoryItem())==null?null:L.isContainFragile)===!1?50:51),s(3),S(i.inventoryItem()?52:-1),s(),S(i.isEditing()?53:-1),s(),S(i.showEditButton()?54:-1)}},dependencies:[de,se,Ae,he,ve,De,ge,be,Ee,Te,Se,Ce,xe,Ie,fe,pe,ue],encapsulation:2})}}return e})();var Pe=(()=>{class e{constructor(){this.heading=l("Inventory Items"),this.tabs=l([])}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Be=(()=>{class e{constructor(){this.dataService=m(h),this.configuration={content:B},this.data=l(null),this.fieldConfiguration=l({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(x),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(M)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.controlsConfig=l([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=l(void 0),this.heading=l("Add Item")}registerUpdateState(t){this.updateState=t,this.updateState({isDirty:!0})}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,a){switch(t){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let i=this.updatedValue();i&&(i=Object.assign(i,{id:J.string.nanoid(),contents:i.contents.map(b=>Object.assign(b,{id:J.string.nanoid(12)}))}),this.dataService.add(i),this.overlayRef.close());break}}}onActionDrawerInit(t){this.overlayRef=t}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var We=(()=>{class e{constructor(){this.dataService=m(h),this.actionDrawer=m(N),this.rawData=u(this.dataService.getList()),this.configuration={id:"inventory-item-table",useVirtualScroll:!0},this.data=p(()=>(this.rawData()??[]).toSorted(this.sortFn())),this.columnsConfig=l([{key:"belongsTo",label:"Customer"},{key:"netWeight",label:"Net Weight (g)",fieldConfiguration:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",fieldConfiguration:{type:"number"}},{key:"isContainFragile",label:"Fragile",fieldConfiguration:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l({default:["belongsTo","status"],768:["belongsTo","netWeight","status","arrivedAt"],1280:["belongsTo","netWeight","grossWeight","isContainFragile","status","arrivedAt"]}),this.filterValue=l({}),this.sortFn=p(()=>Ve(this.columnsConfig()))}routeToDetail(t){return["detail",t.id]}onHeaderCellClick(t,a){this.columnsConfig.update(i=>Re(i,t))}onControlClick(t,a){switch(t){case"add":{this.actionDrawer.open(Be,{providers:[{provide:P,useExisting:F}]});break}}}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var _i=[{path:"",data:T({},Q({title:"Item"})),children:[{path:"detail/:id",component:K,data:T({},Q({titleFn:e=>e.params.pipe(O(c=>c.id))})),providers:[{provide:z,useClass:Le}],children:[{path:"info",component:Ne},{path:"raw",component:B,providers:[{provide:P,useClass:Oe}]},{path:"**",redirectTo:"info"}]},{path:"",component:K,providers:[{provide:z,useClass:Pe}],children:[{path:"",component:H,providers:[{provide:W,useClass:We}]}]}]}];export{_i as ROUTES};
