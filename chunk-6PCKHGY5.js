import{a as S,b as $,c as v}from"./chunk-PTHEY4YS.js";import{a as U}from"./chunk-UE3JD27G.js";import{a as we}from"./chunk-XZ6YCZWA.js";import{a as N,b as F,c as Te,d as Ee,e as P,f as xe,g as W,k as De,m as H,n as B,o as ke,p as Q,q as z}from"./chunk-AYVR6FRK.js";import{a as K}from"./chunk-5KUQE4MU.js";import{Fa as fe,I as u,Ja as he,Ka as ve,La as ye,Ma as _e,Na as Ce,Oa as Ie,Pa as be,Qa as ge,Sa as Se,da as se,ka as ce,na as de,pa as me,sa as pe,u as ae,ua as Y,x as le,ya as ue}from"./chunk-OTGN347X.js";import{$ as f,$b as oe,Ab as n,Bb as o,Ca as l,Cb as b,Eb as O,Hb as R,Ib as g,Qa as s,Tb as r,Ub as _,Vb as q,ac as G,db as te,fa as d,kb as I,oa as A,pa as V,q as L,rc as p,tb as m,uc as re,wb as E,yb as ie,zb as ne}from"./chunk-I76RA5B3.js";import{a as T,b as M}from"./chunk-EQDQRRRY.js";var Ae=(()=>{class e{constructor(){this.dataService=d(v),this.list=u(this.dataService.getList()),this.id=l(void 0),this.heading=p(()=>this.list()?.find(t=>t.id==this.id())?.id??"--"),this.tabs=l([{label:"Info",route:["info"]},{label:"Raw",route:["raw"]}])}onParamsChange(t,a){this.id.set(t.id)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Ve=(()=>{class e{constructor(){this.dataService=d(v),this.list=u(this.dataService.getList()),this.id=l(void 0),this.data=l(void 0),this.fieldConfiguration=l({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(S),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{id:{type:"string",description:"ID"},description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values($)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=p(()=>this.isDirty()?Ee:Te),re(()=>{this.data.set(structuredClone(this.list()?.find(t=>t.id==this.id())))})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(a=>t.isDirty??a)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,a){switch(t){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(i=>i.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let i=this.updatedValue();i&&(this.dataService.save(i),this.updateState({isDirty:!1}));break}}}onParamsChange(t,a){this.id.set(t.id)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Re=(()=>{class e{constructor(){this.dataService=d(U),this.overlayData=d(ce),this.configuration={content:B,useVirtualScroll:!1},this.data=u(this.dataService.getList(),{initialValue:[]}),this.columnsConfig=l([{key:"name",label:"Name",fieldConfiguration:{type:"string"}},{key:"phone",label:"Phone",fieldConfiguration:{type:"string"}}]),this.columnsToDisplay=l(["name","phone"]),this.selectionMode=l("single"),this.selectedItems=l(this.overlayData.initialValue),this.controlsConfig=p(()=>[{id:"select",label:this.selectedItems().size==0?"Select":`Select ${this.selectedItems().values().next().value.name}`,isDisabled:this.selectedItems().size==0}]),this.heading=l("Pick customer")}onControlClick(t,a){t=="select"&&(this.overlayData?.onSave(this.selectedItems().values().next().value),this.overlayRef.close())}compareFn(t,a){return t.id==a.id}onTableRowClick(t){this.selectedItems.set(new Set([t]))}onActionDrawerInit(t){this.overlayRef=t}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Fe=(e,c)=>c.id,Pe=e=>["/user","customer","detail",e],We=e=>["/inventory","shelf","detail",e],He=()=>["description","isbn","quantity","totalPrice"];function Be(e,c){if(e&1){let t=O();b(0,"div",20),n(1,"button",21),R("click",function(){A(t);let i=g();return V(i.onUpdateCustomerClick())}),n(2,"span"),r(3,"Update"),o()()}}function Ue(e,c){e&1&&(n(0,"i",18),r(1,"check"),o())}function $e(e,c){e&1&&(n(0,"i",19),r(1,"close"),o())}function Me(e,c){e&1&&(n(0,"span",15),r(1,"----"),o())}function qe(e,c){e&1&&(n(0,"pui-table-header-cell"),r(1,"Item"),o())}function Ge(e,c){e&1&&(n(0,"pui-table-header-cell"),r(1,"ISBN"),o())}function Ye(e,c){e&1&&(n(0,"pui-table-header-cell"),r(1,"Quantity"),o())}function Qe(e,c){e&1&&(n(0,"pui-table-header-cell"),r(1,"Total Price"),o())}function ze(e,c){if(e&1&&(n(0,"pui-table-cell")(1,"span",27),r(2),o()()),e&2){let t=c.$implicit;s(2),_(t.description)}}function Ke(e,c){if(e&1&&(n(0,"pui-table-cell")(1,"span",27),r(2),o()()),e&2){let t=c.$implicit;s(2),_(t.isbn)}}function Je(e,c){if(e&1&&(n(0,"pui-table-cell"),r(1," x "),n(2,"span",27),r(3),o()()),e&2){let t=c.$implicit;s(3),_(t.quantity)}}function Xe(e,c){if(e&1&&(n(0,"pui-table-cell",28),r(1," $ "),n(2,"span",27),r(3),o()()),e&2){let t=c.$implicit;s(3),_(t.totalPrice)}}function Ze(e,c){if(e&1&&b(0,"pui-table-row",26),e&2){let t=c.$implicit;m("item",t)}}function et(e,c){if(e&1&&(b(0,"pui-divider"),n(1,"h2"),r(2,"Contents"),o(),n(3,"pui-table",22),I(4,qe,2,0,"pui-table-header-cell",23)(5,Ge,2,0,"pui-table-header-cell",23)(6,Ye,2,0,"pui-table-header-cell",23)(7,Qe,2,0,"pui-table-header-cell",23)(8,ze,3,1,"pui-table-cell",24)(9,Ke,3,1,"pui-table-cell",24)(10,Je,4,1,"pui-table-cell",24)(11,Xe,4,1,"pui-table-cell",25),n(12,"pui-table-body"),b(13,"pui-table-header-row"),ie(14,Ze,1,1,"pui-table-row",26,Fe),o()()),e&2){let t=g();s(3),m("itemHeight",48)("columns",oe(10,He)),s(),m("puiTableHeaderCellDef","description"),s(),m("puiTableHeaderCellDef","isbn"),s(),m("puiTableHeaderCellDef","quantity"),s(),m("puiTableHeaderCellDef","totalPrice"),s(),m("puiTableCellDef","description"),s(),m("puiTableCellDef","isbn"),s(),m("puiTableCellDef","quantity"),s(),m("puiTableCellDef","totalPrice"),s(3),ne(t.inventoryItem().contents)}}function tt(e,c){if(e&1){let t=O();n(0,"pui-layout-control",30),R("click",function(){A(t);let i=g(2);return V(i.onCancelClick())}),o(),n(1,"pui-layout-control",31),R("click",function(){A(t);let i=g(2);return V(i.onSaveClick())}),o()}}function it(e,c){if(e&1){let t=O();n(0,"pui-layout-control",32),R("click",function(){A(t);let i=g(2);return V(i.onEditClick())}),o()}}function nt(e,c){if(e&1&&I(0,tt,2,0)(1,it,1,0,"pui-layout-control",29),e&2){let t=g();E(t.isEditing()?0:1)}}var je=(()=>{class e{constructor(){this.dataService=d(v),this.customerDataService=d(U),this.inventoryShelfService=d(we),this.route=d(ae),this.actionDrawer=d(F),this.list=u(this.dataService.getList()),this.customerList=u(this.customerDataService.getList()),this.inventoryShelfList=u(this.inventoryShelfService.getList()),this.id=u(this.route.params.pipe(L(t=>t.id))),this.inventoryItem=p(()=>this.list()?.find(t=>t.id==this.id())),this.customer=p(()=>this.customerList()?.find(t=>t.id==this.inventoryItem()?.belongsTo)),this.shelf=p(()=>this.inventoryShelfList()?.find(t=>t.id==this.inventoryItem()?.locatedIn)),this.showEditButton=p(()=>[S.OPEN,S.REPACKAGING].includes(this.inventoryItem()?.status)),this.isEditing=l(!1),this.updatedValues=l({})}onEditClick(){this.isEditing.set(!0),this.updatedValues.set({customer:null})}onCancelClick(){this.isEditing.set(!1),this.updatedValues.set({customer:null})}onSaveClick(){this.dataService.save(M(T({},this.inventoryItem()),{belongsTo:this.updatedValues().customer?.id??this.inventoryItem().belongsTo})),this.isEditing.set(!1),this.updatedValues.set({customer:null})}onUpdateCustomerClick(){this.actionDrawer.open(Re,{providers:[{provide:H,useExisting:N}],overlayData:{initialValue:new Set([this.updatedValues().customer??this.customer()].filter(se)),onSave:t=>{this.updatedValues.update(a=>M(T({},a),{customer:t}))}}})}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=te({type:e,selectors:[["demo-inventory-item-info"]],hostAttrs:[1,"contents"],decls:54,vars:22,consts:[[1,"@container","grow"],[1,"pui-card","rounded-4","p-8","flex","flex-col","gap-8"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","flex","flex-col","justify-center"],[1,"text-neutral-700","dark:text-neutral-300"],[1,"text-md"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start","text-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center","w-full"],[1,"icon-6","text-neutral-700","dark:text-neutral-300"],[1,"flex","flex-col"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center"],[1,"text-md","uppercase"],[1,"grid","items-center","grid-cols-[min-content_minmax(0,1fr)]","gap-x-4","gap-y-3"],[1,"col-start-1","text-base","font-medium","whitespace-nowrap","text-neutral-700","dark:text-neutral-300"],[1,"col-start-2","text-md"],[3,"date","format"],[3,"date","mode"],[1,"icon-5","text-green-600","dark:text-green-400"],[1,"icon-5","text-red-600","dark:text-red-400"],[1,"spacer"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2",3,"click"],[3,"itemHeight","columns"],[4,"puiTableHeaderCellDef"],[4,"puiTableCellDef"],["class","tabular-nums",4,"puiTableCellDef"],[3,"item"],[1,"truncate"],[1,"tabular-nums"],["id","edit","icon","edit","label","Edit","mode","auto"],["id","cancel","icon","close","label","Cancel","mode","low-emphasis",3,"click"],["id","save","icon","save","label","Save","mode","auto",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto",3,"click"]],template:function(a,i){if(a&1&&(n(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"h4",4),r(5,"Status"),o(),n(6,"p",5),r(7),o()(),n(8,"a",6)(9,"div",7)(10,"i",8),r(11,"person"),o(),n(12,"div",9)(13,"h4",4),r(14,"Customer"),o(),n(15,"p",5),r(16),o()(),I(17,Be,4,0),o()(),n(18,"a",10)(19,"div",11)(20,"i",8),r(21,"shelves"),o(),n(22,"div",9)(23,"h4",4),r(24,"Shelf"),o(),n(25,"p",12),r(26),o()()()()(),n(27,"div",13)(28,"span",14),r(29,"ID"),o(),n(30,"span",15),r(31),o(),n(32,"span",14),r(33,"Arrived at"),o(),n(34,"span",15),b(35,"pui-time-display",16),r(36," ("),b(37,"pui-time-display",17),r(38," ago ) "),o(),n(39,"span",14),r(40,"Net weight"),o(),n(41,"span",15),r(42),o(),n(43,"span",14),r(44,"Gross weight"),o(),n(45,"span",15),r(46),o(),n(47,"span",14),r(48,"Fragile"),o(),I(49,Ue,2,0,"i",18)(50,$e,2,0,"i",19)(51,Me,2,0,"span",15),o(),I(52,et,16,11),o()(),I(53,nt,2,1)),a&2){let C,J,h,X,y,D,Z,ee,k,w,j;s(7),_((C=(C=i.inventoryItem())==null?null:C.status)!==null&&C!==void 0?C:"--"),s(),m("hoverableEnabled",!i.isEditing()&&i.customer()!=null)("routerLink",!i.isEditing()&&i.customer()?G(18,Pe,(J=i.customer())==null?null:J.id):null),s(8),_((h=(h=(h=i.updatedValues().customer)==null?null:h.name)!==null&&h!==void 0?h:(h=i.customer())==null?null:h.name)!==null&&h!==void 0?h:"--"),s(),E(i.isEditing()?17:-1),s(),m("hoverableEnabled",!i.isEditing()&&i.shelf()!=null)("routerLink",!i.isEditing()&&i.shelf()?G(20,We,(X=i.shelf())==null?null:X.id):null),s(8),_(i.shelf()?((y=i.shelf())==null||y.location==null?null:y.location.aisle)+((y=i.shelf())==null||y.location==null?null:y.location.row)+" - "+((y=i.shelf())==null||y.location==null?null:y.location.layer):"--"),s(5),_((D=(D=i.inventoryItem())==null?null:D.id)!==null&&D!==void 0?D:"---"),s(4),m("date",(Z=i.inventoryItem())==null?null:Z.arrivedAt)("format","yyyy-MM-dd HH:mm"),s(2),m("date",(ee=i.inventoryItem())==null?null:ee.arrivedAt)("mode","timeAgo"),s(5),q("",(k=(k=i.inventoryItem())==null?null:k.netWeight)!==null&&k!==void 0?k:"---"," g"),s(4),q("",(w=(w=i.inventoryItem())==null?null:w.grossWeight)!==null&&w!==void 0?w:"---"," g"),s(3),E(((j=i.inventoryItem())==null?null:j.isContainFragile)===!0?49:((j=i.inventoryItem())==null?null:j.isContainFragile)===!1?50:51),s(3),E(i.inventoryItem()?52:-1),s(),E(i.showEditButton()?53:-1)}},dependencies:[de,le,xe,fe,ue,Se,ye,_e,ge,be,Ce,he,Ie,ve,pe,me],encapsulation:2})}}return e})();var Le=(()=>{class e{constructor(){this.heading=l("Inventory Items"),this.tabs=l([])}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Oe=(()=>{class e{constructor(){this.dataService=d(v),this.configuration={content:W},this.data=l(null),this.fieldConfiguration=l({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(S),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values($)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.controlsConfig=l([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=l(void 0),this.heading=l("Add Item")}registerUpdateState(t){this.updateState=t,this.updateState({isDirty:!0})}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,a){switch(t){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let i=this.updatedValue();i&&(i=Object.assign(i,{id:K.string.nanoid(),contents:i.contents.map(C=>Object.assign(C,{id:K.string.nanoid(12)}))}),this.dataService.add(i),this.overlayRef.close());break}}}onActionDrawerInit(t){this.overlayRef=t}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var Ne=(()=>{class e{constructor(){this.dataService=d(v),this.actionDrawer=d(F),this.rawData=u(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=p(()=>(this.rawData()??[]).toSorted(this.sortFn())),this.columnsConfig=l([{key:"belongsTo",label:"Customer"},{key:"netWeight",label:"Net Weight (g)",fieldConfiguration:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",fieldConfiguration:{type:"number"}},{key:"isContainFragile",label:"Fragile",fieldConfiguration:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l({default:["belongsTo","status"],768:["belongsTo","netWeight","status","arrivedAt"],1280:["belongsTo","netWeight","grossWeight","isContainFragile","status","arrivedAt"]}),this.filterValue=l({}),this.sortFn=p(()=>De(this.columnsConfig()))}routeToDetail(t){return["detail",t.id]}onHeaderCellClick(t,a){this.columnsConfig.update(i=>ke(i,t))}onControlClick(t,a){switch(t){case"add":{this.actionDrawer.open(Oe,{providers:[{provide:P,useExisting:N}]});break}}}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=f({token:e,factory:e.\u0275fac})}}return e})();var pi=[{path:"",data:T({},Y({title:"Item"})),children:[{path:"detail/:id",component:z,data:T({},Y({titleFn:e=>e.params.pipe(L(c=>c.id))})),providers:[{provide:Q,useClass:Ae}],children:[{path:"info",component:je},{path:"raw",component:W,providers:[{provide:P,useClass:Ve}]},{path:"**",redirectTo:"info"}]},{path:"",component:z,providers:[{provide:Q,useClass:Le}],children:[{path:"",component:B,providers:[{provide:H,useClass:Ne}]}]}]}];export{pi as ROUTES};
