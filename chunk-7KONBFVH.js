import{a as G,b as T,c as Y,d as _}from"./chunk-XP3XWPX4.js";import{a as Ee}from"./chunk-ZSR6BV7A.js";import{a as J}from"./chunk-IFNXH4R5.js";import{$ as O,Ab as M,Bb as q,C as p,Cb as z,D as ee,Db as K,G as j,H as R,Ha as re,Ja as le,M as c,P as l,Q as b,R as f,Ra as h,Sa as se,T as D,Ta as ce,Ua as me,V as te,Va as de,W as ie,X as r,Y as a,Ya as pe,Z as E,Za as Q,_ as P,a as I,aa as g,b as x,bb as ue,ca as s,cb as fe,da as S,ea as F,eb as he,fb as ve,gb as ye,ha as ne,hb as _e,i as N,ia as oe,ib as Ce,ja as ae,jb as Ie,kb as be,lb as ge,mb as Se,oa as u,pa as W,rb as B,sb as H,tb as Te,ub as xe,vb as U,wb as De,xb as $,y as v}from"./chunk-YM4RELYR.js";var ke=(()=>{let e=class e{constructor(){this.dataService=p(_),this.list=h(this.dataService.getList()),this.params=l({}),this.heading=u(()=>this.list()?.find(i=>i.id==this.params().id)?.id??"--"),this.tabs=l([{label:"Info",route:["info"]},{label:"Raw",route:["raw"]}])}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var we=(()=>{let e=class e{constructor(){this.dataService=p(_),this.list=h(this.dataService.getList()),this.params=l({}),this.data=l(this.list()?.find(i=>i.id==this.params().id)),this.jsonSchema=l({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(T),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{id:{type:"string",description:"ID"},description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(Y)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.isDirty=l(!1),this.updatedValue=l(void 0),this.controlsConfig=u(()=>this.isDirty()?xe:Te),W(()=>{this.data.set(structuredClone(this.list()?.find(i=>i.id==this.params().id)))},{allowSignalWrites:!0})}registerUpdateState(i){this.updateState=i}onStateChange(i){this.isDirty.update(o=>i.isDirty??o)}onValueChange(i){this.updatedValue.set(i)}onControlClick(i,o){switch(i){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(n=>n.id==this.params().id))),this.updateState({isDirty:!1});break}case"save":{let n=this.updatedValue();n&&(this.dataService.save(n),this.updateState({isDirty:!1}));break}}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Ae=(()=>{let e=class e{constructor(){this.dataService=p(G),this.overlayData=p(se),this.configuration={content:q,useVirtualScroll:!1},this.heading=l("Pick customer"),this.overlayRef=l(null),this.data=h(this.dataService.getList(),{initialValue:[]}),this.columnsConfig=l([{key:"name",label:"Name",jsonSchema:{type:"string"}},{key:"phone",label:"Phone",jsonSchema:{type:"string"}}]),this.columnsToDisplay=l(["name","phone"]),this.selectionMode=l("single"),this.selectedItems=l(this.overlayData.initialValue),this.controlsConfig=u(()=>[{id:"select",label:this.selectedItems().size==0?"Select":`Select ${this.selectedItems().values().next().value.name}`,isDisabled:this.selectedItems().size==0}])}onControlClick(i,o){i=="select"&&(this.overlayData?.onSave(this.selectedItems().values().next().value),this.overlayRef()?.close())}compareFn(i,o){return i.id==o.id}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Fe=(t,e)=>e.id,Le=t=>["/user","customer","detail",t],Ne=()=>["description","isbn","quantity","totalPrice"];function Pe(t,e){if(t&1){let m=P();E(0,"div",18),r(1,"button",19),O("click",function(){j(m);let o=g();return R(o.onUpdateCustomerClick())}),r(2,"span"),s(3,"Update"),a()()}}function We(t,e){t&1&&(r(0,"i",16),s(1,"check"),a())}function Be(t,e){t&1&&(r(0,"i",17),s(1,"close"),a())}function He(t,e){t&1&&(r(0,"span",14),s(1,"----"),a())}function Ue(t,e){t&1&&(r(0,"pui-table-header-cell"),s(1,"Item"),a())}function $e(t,e){t&1&&(r(0,"pui-table-header-cell"),s(1,"ISBN"),a())}function Me(t,e){t&1&&(r(0,"pui-table-header-cell"),s(1,"Quantity"),a())}function qe(t,e){t&1&&(r(0,"pui-table-header-cell"),s(1,"Total Price"),a())}function Ge(t,e){if(t&1&&(r(0,"pui-table-cell"),s(1),a()),t&2){let m=e.$implicit;c(),S(m.description)}}function Ye(t,e){if(t&1&&(r(0,"pui-table-cell"),s(1),a()),t&2){let m=e.$implicit;c(),S(m.isbn)}}function Qe(t,e){if(t&1&&(r(0,"pui-table-cell"),s(1),a()),t&2){let m=e.$implicit;c(),F("x ",m.quantity,"")}}function ze(t,e){if(t&1&&(r(0,"pui-table-cell",25),s(1),a()),t&2){let m=e.$implicit;c(),F("$ ",m.totalPrice,"")}}function Ke(t,e){if(t&1&&E(0,"pui-table-row",24),t&2){let m=e.$implicit;f("item",m)}}function Je(t,e){if(t&1&&(E(0,"pui-divider"),r(1,"h2"),s(2,"Contents"),a(),r(3,"pui-table",20),b(4,Ue,2,0,"pui-table-header-cell",21)(5,$e,2,0,"pui-table-header-cell",21)(6,Me,2,0,"pui-table-header-cell",21)(7,qe,2,0,"pui-table-header-cell",21)(8,Ge,2,1,"pui-table-cell",22)(9,Ye,2,1,"pui-table-cell",22)(10,Qe,2,1,"pui-table-cell",22)(11,ze,2,1,"pui-table-cell",23),r(12,"pui-table-body"),E(13,"pui-table-header-row"),te(14,Ke,1,1,"pui-table-row",24,Fe),a()()),t&2){let m=g();c(3),f("itemHeight",48)("columns",oe(10,Ne)),c(),f("puiTableHeaderCellDef","description"),c(),f("puiTableHeaderCellDef","isbn"),c(),f("puiTableHeaderCellDef","quantity"),c(),f("puiTableHeaderCellDef","totalPrice"),c(),f("puiTableCellDef","description"),c(),f("puiTableCellDef","isbn"),c(),f("puiTableCellDef","quantity"),c(),f("puiTableCellDef","totalPrice"),c(3),ie(m.inventoryItem().contents)}}function Xe(t,e){if(t&1){let m=P();r(0,"pui-layout-control",27),O("click",function(){j(m);let o=g(2);return R(o.onCancelClick())}),a(),r(1,"pui-layout-control",28),O("click",function(){j(m);let o=g(2);return R(o.onSaveClick())}),a()}}function Ze(t,e){if(t&1){let m=P();r(0,"pui-layout-control",29),O("click",function(){j(m);let o=g(2);return R(o.onEditClick())}),a()}}function et(t,e){if(t&1&&b(0,Xe,2,0)(1,Ze,1,0,"pui-layout-control",26),t&2){let m=g();D(m.isEditing()?0:1)}}var Ve=(()=>{let e=class e{constructor(){this.dataService=p(_),this.customerDataService=p(G),this.inventoryShelfService=p(Ee),this.route=p(re),this.actionDrawer=p(H),this.list=h(this.dataService.getList()),this.customerList=h(this.customerDataService.getList()),this.inventoryShelfList=h(this.inventoryShelfService.getList()),this.id=h(this.route.params.pipe(N(i=>i.id))),this.inventoryItem=u(()=>this.list()?.find(i=>i.id==this.id())),this.customer=u(()=>this.customerList()?.find(i=>i.id==this.inventoryItem()?.belongsTo)),this.shelf=u(()=>this.inventoryShelfList()?.find(i=>i.id==this.inventoryItem()?.locatedIn)),this.showEditButton=u(()=>[T.OPEN,T.REPACKAGING].includes(this.inventoryItem()?.status)),this.isEditing=l(!1),this.updatedValues=l({})}onEditClick(){this.isEditing.set(!0),this.updatedValues.set({customer:null})}onCancelClick(){this.isEditing.set(!1),this.updatedValues.set({customer:null})}onSaveClick(){this.dataService.save(x(I({},this.inventoryItem()),{belongsTo:this.updatedValues().customer?.id??this.inventoryItem().belongsTo})),this.isEditing.set(!1),this.updatedValues.set({customer:null})}onUpdateCustomerClick(){this.actionDrawer.open(Ae,{providers:[{provide:M,useExisting:B}],overlayData:{initialValue:new Set([this.updatedValues().customer??this.customer()].filter(pe)),onSave:i=>{this.updatedValues.update(o=>x(I({},o),{customer:i}))}}})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=ee({type:e,selectors:[["demo-inventory-item-info"]],hostAttrs:[1,"contents"],standalone:!0,features:[ne],decls:50,vars:16,consts:[[1,"@container"],[1,"grow","light-glass-bg","rounded-4","p-8","flex","flex-col","gap-8"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"light-glass-bg-subtle","rounded-4","px-8","py-4","overflow-hidden"],[1,"text-neutral-700","dark:text-neutral-300"],[1,"text-md"],["puiHoverable","",1,"light-glass-bg-subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start","text-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center","w-full"],[1,"icon-6","text-neutral-700","dark:text-neutral-300"],[1,"flex","flex-col"],[1,"flex","flex-row","gap-2","justify-start","items-center"],[1,"text-md","uppercase"],[1,"grid","items-center","grid-cols-[min-content_minmax(0,1fr)]","gap-x-4","gap-y-3"],[1,"col-start-1","text-base","font-medium","whitespace-nowrap","text-neutral-700","dark:text-neutral-300"],[1,"col-start-2","text-md"],[1,"col-start-2","text-md",3,"date","format"],[1,"icon-5","text-green-600","dark:text-green-400"],[1,"icon-5","text-red-600","dark:text-red-400"],[1,"spacer"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2",3,"click"],[3,"itemHeight","columns"],[4,"puiTableHeaderCellDef"],[4,"puiTableCellDef"],["class","tabular-nums",4,"puiTableCellDef"],[3,"item"],[1,"tabular-nums"],["id","edit","icon","edit","label","Edit","mode","auto"],["id","cancel","icon","close","label","Cancel","mode","low-emphasis",3,"click"],["id","save","icon","save","label","Save","mode","auto",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto",3,"click"]],template:function(o,n){if(o&1&&(r(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"h4",4),s(5,"Status"),a(),r(6,"p",5),s(7),a()(),r(8,"a",6)(9,"div",7)(10,"i",8),s(11,"person"),a(),r(12,"div",9)(13,"h4",4),s(14,"Customer"),a(),r(15,"p",5),s(16),a()(),b(17,Pe,4,0),a()(),r(18,"div",3)(19,"div",10)(20,"i",8),s(21,"shelves"),a(),r(22,"div",9)(23,"h4",4),s(24,"Shelf"),a(),r(25,"p",11),s(26),a()()()()(),r(27,"div",12)(28,"span",13),s(29,"ID"),a(),r(30,"span",14),s(31),a(),r(32,"span",13),s(33,"Arrived at"),a(),E(34,"pui-time-display",15),r(35,"span",13),s(36,"Net weight"),a(),r(37,"span",14),s(38),a(),r(39,"span",13),s(40,"Gross weight"),a(),r(41,"span",14),s(42),a(),r(43,"span",13),s(44,"Fragile"),a(),b(45,We,2,0,"i",16)(46,Be,2,0,"i",17)(47,He,2,0,"span",14),a(),b(48,Je,16,11),a()(),b(49,et,2,1)),o&2){let d,X,y,C,w,Z,A,V,L;c(7),S((d=(d=n.inventoryItem())==null?null:d.status)!==null&&d!==void 0?d:"--"),c(),f("hoverableEnabled",!n.isEditing()&&n.customer()!=null)("routerLink",!n.isEditing()&&n.customer()?ae(14,Le,(X=n.customer())==null?null:X.id):null),c(8),S((y=(y=(y=n.updatedValues().customer)==null?null:y.name)!==null&&y!==void 0?y:(y=n.customer())==null?null:y.name)!==null&&y!==void 0?y:"--"),c(),D(n.isEditing()?17:-1),c(9),S(n.shelf()?((C=n.shelf())==null||C.location==null?null:C.location.aisle)+((C=n.shelf())==null||C.location==null?null:C.location.row)+((C=n.shelf())==null||C.location==null?null:C.location.layer):"--"),c(5),S((w=(w=n.inventoryItem())==null?null:w.id)!==null&&w!==void 0?w:"---"),c(3),f("date",(Z=n.inventoryItem())==null?null:Z.arrivedAt)("format","yyyy-MM-dd HH:mm"),c(4),F("",(A=(A=n.inventoryItem())==null?null:A.netWeight)!==null&&A!==void 0?A:"---"," g"),c(4),F("",(V=(V=n.inventoryItem())==null?null:V.grossWeight)!==null&&V!==void 0?V:"---"," g"),c(3),D(((L=n.inventoryItem())==null?null:L.isContainFragile)===!0?45:((L=n.inventoryItem())==null?null:L.isContainFragile)===!1?46:47),c(3),D(n.inventoryItem()?48:-1),c(),D(n.showEditButton()?49:-1)}},dependencies:[ce,le,De,fe,ue,Se,ye,_e,ge,be,Ce,he,Ie,ve,de,me]});let t=e;return t})();var je=(()=>{let e=class e{constructor(){this.params=l({}),this.heading=l("Inventory Items"),this.tabs=l([])}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Re=(()=>{let e=class e{constructor(){this.dataService=p(_),this.configuration={content:$},this.data=l(null),this.jsonSchema=l({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(T),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(Y)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.controlsConfig=l([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=l(void 0),this.heading=l("Add Item"),this.overlayRef=l(null)}registerUpdateState(i){this.updateState=i,this.updateState({isDirty:!0})}onValueChange(i){this.updatedValue.set(i)}onControlClick(i,o){switch(i){case"cancel":{this.data.set({}),this.overlayRef()?.close();break}case"save":{let n=this.updatedValue();n&&(n=Object.assign(n,{id:J.string.nanoid(),contents:n.contents.map(d=>Object.assign(d,{id:J.string.nanoid(12)}))}),this.dataService.add(n),this.overlayRef()?.close());break}}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Oe=(()=>{let e=class e{constructor(){this.dataService=p(_),this.actionDrawer=p(H),this.rawData=h(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=l([]),this.columnsConfig=l([{key:"belongsTo",label:"Customer"},{key:"netWeight",label:"Net Weight (g)",jsonSchema:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",jsonSchema:{type:"number"}},{key:"isContainFragile",label:"Fragile",jsonSchema:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,jsonSchema:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=l(["belongsTo","netWeight","grossWeight","isContainFragile","status","arrivedAt"]),this.simpleFilterValue=l({}),this.sortFn=u(()=>{let i=this.columnsConfig().find(n=>n.isSortedAsc||n.isSortedDesc);if(!i)return()=>0;let o=i.isSortedDesc?-1:1;return(n,d)=>{switch(i.key){case"arrivedAt":return(n.arrivedAt.getTime()-d.arrivedAt.getTime())*o;default:return n[i.key]>d[i.key]?o:n[i.key]<d[i.key]?-1*o:0}}}),this.filterFn=u(()=>{let i=this.simpleFilterValue(),o=Object.values(i??{}).some(n=>!!n);return n=>!0}),W(()=>{let i=this.rawData();i&&this.data.set(i.filter(this.filterFn()).sort(this.sortFn()))},{allowSignalWrites:!0})}routeToDetail(i){return["detail",i.id]}onHeaderCellClick(i,o){this.columnsConfig.update(n=>n.map(d=>d.key==i?x(I({},d),{isSortedAsc:!d.isSortedAsc&&!d.isSortedDesc?!0:!!d.isSortedDesc,isSortedDesc:!!d.isSortedAsc}):x(I({},d),{isSortedAsc:!1,isSortedDesc:!1})))}onControlClick(i,o){switch(i){case"add":{this.actionDrawer.open(Re,{providers:[{provide:U,useExisting:B}]});break}}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var oi=[{path:"",data:I({},Q({title:"Item"})),children:[{path:"detail/:id",component:K,data:I({},Q({titleFn:t=>t.params.pipe(N(e=>e.id))})),providers:[{provide:z,useClass:ke}],children:[{path:"info",component:Ve},{path:"raw",component:$,providers:[{provide:U,useClass:we}]},{path:"**",redirectTo:"info"}]},{path:"",component:K,providers:[{provide:z,useClass:je}],children:[{path:"",component:q,providers:[{provide:M,useClass:Oe}]}]}]}];export{oi as ROUTES};
