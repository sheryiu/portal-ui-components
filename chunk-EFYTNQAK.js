import{a as p,b as g,c as d,e as c}from"./chunk-ZG6HPPGR.js";import{a as F}from"./chunk-BB5YHCCR.js";import{B as n,Jb as b,Kb as k,Lb as V,Mb as I,Nb as y,O as i,Pb as h,Rb as R,Sb as w,Tb as L,Ub as E,Va as f,Vb as A,a as u,b as S,fb as j,i as O,qb as C,ra as m,ta as D,u as T,y as o}from"./chunk-RX6RE7T5.js";var N=(()=>{let e=class e{constructor(){this.dataService=n(c),this.list=f(this.dataService.getList()),this.id=i(void 0),this.heading=m(()=>this.list()?.find(t=>t.id==this.id())?.name??"--"),this.tabs=i([])}onParamsChange(t,s){this.id.set(t.id)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var P=(()=>{let e=class e{constructor(){this.dataService=n(c),this.list=f(this.dataService.getList()),this.id=i(void 0),this.data=i(void 0),this.fieldConfiguration=i({type:"object",properties:{name:{type:"string",description:"Name"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},department:{type:"string",description:"Department",enum:Object.values(p)},position:{type:"string",description:"Position",enum:Object.values(g)},dateOfJoining:{type:"date-time",description:"Date of Joining"},dateOfLeaving:{type:"date-time",description:"Date of Leaving"},status:{type:"string",description:"Status",enum:Object.values(d)}}}),this.isDirty=i(!1),this.updatedValue=i(void 0),this.controlsConfig=m(()=>this.isDirty()?I:V),D(()=>{this.data.set(structuredClone(this.list()?.find(t=>t.id==this.id())))},{allowSignalWrites:!0})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(s=>t.isDirty??s)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,s){switch(t){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(a=>a.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let a=this.updatedValue();a&&(this.dataService.save(a),this.updateState({isDirty:!1}));break}}}onParamsChange(t,s){this.id.set(t.id)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var x=(()=>{let e=class e{constructor(){this.heading=i("Employees"),this.tabs=i([])}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var U=(()=>{let e=class e{constructor(){this.dataService=n(c),this.configuration={content:h},this.data=i(null),this.fieldConfiguration=i({type:"object",properties:{name:{type:"string",description:"Name"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},department:{type:"string",description:"Department",enum:Object.values(p)},position:{type:"string",description:"Position",enum:Object.values(g)},dateOfJoining:{type:"date-time",description:"Date of Joining"},dateOfLeaving:{type:"date-time",description:"Date of Leaving"},status:{type:"string",description:"Status",enum:Object.values(d)}}}),this.controlsConfig=i([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=i(void 0),this.heading=i("Add Employee")}registerUpdateState(t){this.updateState=t,this.updateState({isDirty:!0})}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,s){switch(t){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let a=this.updatedValue();a&&(a=Object.assign(a,{id:F.string.nanoid()}),this.dataService.add(a),this.overlayRef.close());break}}}onActionDrawerInit(t){this.overlayRef=t}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var B=(()=>{let e=class e{constructor(){this.overlayData=n(j,{optional:!0}),this.configuration={content:h},this.heading=i("Filter Employee"),this.data=i(this.overlayData?.filter??{}),this.fieldConfiguration=i({type:"object",properties:{department:{type:"string",description:"Department",enum:[""].concat(Object.values(p))},status:{type:"string",description:"Status",enum:[""].concat(Object.values(d))}}}),this.controlsConfig=i([{id:"cancel",label:"Cancel",icon:"close"},{id:"apply",label:"Apply",icon:"filter_alt"}]),this.updatedValue=i(void 0)}onActionDrawerInit(t){this.overlayRef=t}registerUpdateState(t){this.updateState=t,this.updateState({isDirty:!0})}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,s){switch(t){case"cancel":{this.overlayRef.close();break}case"apply":{let a=this.updatedValue();a&&(this.overlayData?.onFilterApply?.(a),this.overlayRef.close());break}}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var J=(()=>{let e=class e{constructor(){this.dataService=n(c),this.actionDrawer=n(k),this.rawData=f(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=i([]),this.columnsConfig=i([{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"department",label:"Department"},{key:"position",label:"Position"},{key:"status",label:"Status"}]),this.columnsToDisplay=i(["name","email","phone","department","position","status"]),this.filterConfig=i({type:"object",properties:{department:{type:"string",description:"Department",enum:[""].concat(Object.values(p))},status:{type:"string",description:"Status",enum:[""].concat(Object.values(d))}}}),this.filterValue=i({}),this.controlsConfig=i([{id:"filter",label:"Advance Filters",icon:"filter_alt"},...R]),this.sortFn=m(()=>{let t=this.columnsConfig().find(a=>a.isSortedAsc||a.isSortedDesc);if(!t)return()=>0;let s=t.isSortedDesc?-1:1;return(a,l)=>{switch(t.key){default:return a[t.key]>l[t.key]?s:a[t.key]<l[t.key]?-1*s:0}}}),this.filterFn=m(()=>{let t=this.filterValue(),s=Object.values(t??{}).some(a=>typeof a=="string"?!!a:a!=null);return a=>s&&t.status&&a.status!=t.status?!1:!(s&&t.department&&a.department!=t.department)}),D(()=>{let t=this.rawData();t&&this.data.set(t.filter(this.filterFn()).sort(this.sortFn()))},{allowSignalWrites:!0})}routeToDetail(t){return["detail",t.id]}onHeaderCellClick(t,s){this.columnsConfig.update(a=>a.map(l=>l.key==t?S(u({},l),{isSortedAsc:!l.isSortedAsc&&!l.isSortedDesc?!0:!!l.isSortedDesc,isSortedDesc:!!l.isSortedAsc}):S(u({},l),{isSortedAsc:!1,isSortedDesc:!1})))}onFilterChange(t){this.filterValue.set(t)}onControlClick(t,s){switch(t){case"add":{this.actionDrawer.open(U,{providers:[{provide:y,useExisting:b}]});break}case"filter":{this.actionDrawer.open(B,{overlayData:{filter:this.filterValue(),onFilterApply:a=>this.filterValue.set(a)},providers:[{provide:y,useExisting:b}]});break}}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var wt=[{path:"",data:u({},C({title:"Employee"})),children:[{path:"detail/:id",component:A,data:u({},C({deps:[c],titleFn:(r,e)=>r.params.pipe(T(Y=>e.getList().pipe(O(t=>t.find(s=>s.id==Y.id)?.name??"--"))))})),providers:[{provide:E,useClass:N}],children:[{path:"",component:h,providers:[{provide:y,useClass:P}]}]},{path:"",component:A,providers:[{provide:E,useClass:x}],children:[{path:"",component:L,providers:[{provide:w,useClass:J}]}]}]}];export{wt as ROUTES};
