import{a as l,b as h,c as p,e as s}from"./chunk-57673U52.js";import{a as D,b as O,c as A,d as V,e as u,g as m,j,k as M,l as k,m as I,n as L,o as R,p as b,q as C}from"./chunk-PWUYYVRI.js";import{a as F}from"./chunk-QLEH2ZB5.js";import{Ca as y,K as v,P as c,qa as T}from"./chunk-UG5YWBUR.js";import{R as S,X as n,aa as r,lc as d,p as E,pa as i,ra as N}from"./chunk-456UTSJA.js";import{a as g}from"./chunk-C6Q5SG76.js";var w=(()=>{class t{constructor(){this.dataService=r(s),this.list=c(this.dataService.getList()),this.id=i(void 0),this.heading=d(()=>this.list()?.find(e=>e.id==this.id())?.name??"--"),this.tabs=i([])}onParamsChange(e,a){this.id.set(e.id)}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=n({token:t,factory:t.\u0275fac})}}return t})();var P=(()=>{class t{constructor(){this.dataService=r(s),this.list=c(this.dataService.getList()),this.id=i(void 0),this.data=i(void 0),this.fieldConfiguration=i({type:"object",properties:{name:{type:"string",description:"Name"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},department:{type:"string",description:"Department",enum:Object.values(l)},position:{type:"string",description:"Position",enum:Object.values(h)},dateOfJoining:{type:"date-time",description:"Date of Joining"},dateOfLeaving:{type:"date-time",description:"Date of Leaving"},status:{type:"string",description:"Status",enum:Object.values(p)}}}),this.isDirty=i(!1),this.updatedValue=i(void 0),this.controlsConfig=d(()=>this.isDirty()?V:A),N(()=>{this.data.set(v(this.list()?.find(e=>e.id==this.id())))})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(a=>e.isDirty??a)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,a){switch(e){case"refresh":case"cancel":{this.data.set(v(this.list()?.find(o=>o.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let o=this.updatedValue();o&&(this.dataService.save(this.id(),o),this.updateState({isDirty:!1}));break}}}onParamsChange(e,a){this.id.set(e.id)}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=n({token:t,factory:t.\u0275fac})}}return t})();var _=(()=>{class t{constructor(){this.heading=i("Employees"),this.tabs=i([])}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=n({token:t,factory:t.\u0275fac})}}return t})();var x=(()=>{class t{constructor(){this.dataService=r(s),this.configuration={content:m,isEnterToSubmit:!0},this.data=i(null),this.fieldConfiguration=i({type:"object",properties:{name:{type:"string",description:"Name"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},department:{type:"string",description:"Department",enum:Object.values(l)},position:{type:"string",description:"Position",enum:Object.values(h)},dateOfJoining:{type:"date-time",description:"Date of Joining"},dateOfLeaving:{type:"date-time",description:"Date of Leaving"},status:{type:"string",description:"Status",enum:Object.values(p)}}}),this.controlsConfig=i([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=i(void 0),this.heading=i("Add Employee")}registerUpdateState(e){this.updateState=e,this.updateState({isDirty:!0})}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,a){switch(e){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let o=this.updatedValue();o&&(o=Object.assign(o,{id:F.string.nanoid()}),this.dataService.add(o),this.overlayRef.close());break}}}onActionDrawerInit(e){this.overlayRef=e}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=n({token:t,factory:t.\u0275fac})}}return t})();var U=(()=>{class t{constructor(){this.overlayData=r(T,{optional:!0}),this.configuration={content:m,isEnterToSubmit:!0},this.heading=i("Filter Employee"),this.data=i(this.overlayData?.filter??{}),this.fieldConfiguration=i({type:"object",properties:{department:{type:"string",description:"Department",enum:[""].concat(Object.values(l))},status:{type:"string",description:"Status",enum:[""].concat(Object.values(p))}}}),this.controlsConfig=i([{id:"cancel",label:"Cancel",icon:"close"},{id:"apply",label:"Apply",icon:"filter_alt"}]),this.updatedValue=i(void 0)}onActionDrawerInit(e){this.overlayRef=e}registerUpdateState(e){this.updateState=e,this.updateState({isDirty:!0})}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,a){switch(e){case"cancel":{this.overlayRef.close();break}case"apply":{let o=this.updatedValue();o&&(this.overlayData?.onFilterApply?.(o),this.overlayRef.close());break}}}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=n({token:t,factory:t.\u0275fac})}}return t})();var B=(()=>{class t{constructor(){this.dataService=r(s),this.actionDrawer=r(O),this.rawData=c(this.dataService.getList()),this.configuration={id:"employee-table",useVirtualScroll:!0},this.data=d(()=>(this.rawData()??[]).filter(this.filterFn()).toSorted(this.sortFn())),this.columnsConfig=i([{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"department",label:"Department"},{key:"position",label:"Position"},{key:"status",label:"Status"}]),this.columnsToDisplay=i(["name","email","phone","department","position","status"]),this.filterConfig=i({type:"object",properties:{department:{type:"string",description:"Department",enum:[""].concat(Object.values(l))},status:{type:"string",description:"Status",enum:[""].concat(Object.values(p))}}}),this.filterValue=i({}),this.controlsConfig=i([{id:"filter",label:"Advance Filters",icon:"filter_alt"},...k]),this.sortFn=d(()=>M(this.columnsConfig())),this.filterFn=d(()=>j(this.filterValue(),{department:(e,a,o)=>!!o&&e.department==o,status:(e,a,o)=>!!o&&e.status==o}))}routeToDetail(e){return["detail",e.id]}onHeaderCellClick(e,a){this.columnsConfig.update(o=>R(o,e))}onFilterChange(e){this.filterValue.set(e)}onControlClick(e,a){switch(e){case"add":{this.actionDrawer.open(x,{providers:[{provide:u,useExisting:D}]});break}case"filter":{this.actionDrawer.open(U,{overlayData:{filter:this.filterValue(),onFilterApply:o=>this.filterValue.set(o)},providers:[{provide:u,useExisting:D}]});break}}}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=n({token:t,factory:t.\u0275fac})}}return t})();var Fe=[{path:"",data:g({},y({title:"Employee"})),children:[{path:"detail/:id",component:C,data:g({},y({deps:[s],titleFn:(t,J)=>t.params.pipe(S(e=>J.getList().pipe(E(a=>a.find(o=>o.id==e.id)?.name??"--"))))})),providers:[{provide:b,useClass:w}],children:[{path:"",component:m,providers:[{provide:u,useClass:P}]}]},{path:"",component:C,providers:[{provide:b,useClass:_}],children:[{path:"",component:L,providers:[{provide:I,useClass:B}]}]}]}];export{Fe as ROUTES};
