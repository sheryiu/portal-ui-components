import{a as e}from"./chunk-QLEH2ZB5.js";import{M as f}from"./chunk-WX3TDQFG.js";import{I as d,L as h,X as p,aa as m,f as n,jb as u,y as c}from"./chunk-456UTSJA.js";import{a as o,b as l}from"./chunk-C6Q5SG76.js";var S=(()=>{class r{constructor(){this.appRef=m(u),this.list=new n([]),this.isLoading=new n(!1),this.isLoading$=this.isLoading.asObservable(),this.isInitialized=!1}createMockAddress(){return{line1:e.location.secondaryAddress(),line2:e.location.streetAddress(),city:e.location.city(),state:e.location.state(),country:e.location.country(),postalCode:e.location.zipCode()}}createMock(){let i=e.person.firstName(),t=e.person.lastName();return{id:e.string.nanoid(),profile:{color:e.color.colorByCSSColorSpace().map(s=>s*255).join(" "),icon:e.helpers.arrayElement(["pentagon","square","hexagon","shapes","stack","lightbulb","all_out"])},name:e.person.fullName({firstName:i,lastName:t}),username:e.helpers.maybe(()=>e.internet.username({firstName:i,lastName:t}))??e.internet.username(),email:e.internet.email({firstName:i,lastName:t}),phone:e.phone.number(),address:this.createMockAddress(),savedAddresses:Array(e.helpers.rangeToNumber({min:1,max:6})).fill(0).map(()=>this.createMockAddress()),registeredSince:e.date.past({years:9})}}initialize(){this.isInitialized||(this.isInitialized=!0,this.list.next(Array(20).fill(0).map(()=>this.createMock()).sort((i,t)=>t.registeredSince.getTime()-i.registeredSince.getTime())),this.isLoading.next(!1))}getList(){return this.isLoading.value==!0||this.list.value.length>0?this.list:(this.isLoading.next(!0),this.appRef.isStable.pipe(h(i=>i),d(500)).subscribe(()=>{this.initialize()}),this.list)}refresh(){this.isLoading.value!=!0&&(this.isLoading.next(!0),c(1e3).subscribe(()=>{this.isInitialized=!1,this.initialize()}))}loadMore(){this.list.next(this.list.value.concat(...Array(2).fill(0).map(()=>this.createMock())))}save(i,t){this.list.next(this.list.value.map(s=>s.id==i?f(s,t):s))}updateAddress(i,t,s){this.list.next(this.list.value.map(a=>a.id==i?l(o({},a),{savedAddresses:a.savedAddresses.toSpliced(t,1,s)}):a))}add(i){this.list.next(this.list.value.toSpliced(0,0,i))}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{S as a};
