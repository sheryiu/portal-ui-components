import{c as d,d as u}from"./chunk-4MPBWOIJ.js";import{a as t}from"./chunk-F44LKQXD.js";import{B as c,N as n,Na as b,Xa as A,a as l,b as m,e as f,ka as D,ma as y,na as E,r as S,s as h,wb as I,xb as g,y as p,yb as C,zb as T}from"./chunk-YY5SQUU6.js";var R=(()=>{let a=class a{constructor(){this.heading=n("Access Control Management"),this.tabs=n([])}};a.\u0275fac=function(i){return new(i||a)},a.\u0275prov=p({token:a,factory:a.\u0275fac});let o=a;return o})();var k=(()=>{let a=class a{constructor(){this.appRef=c(D),this.list=new f([]),this.employeeData=c(u),this.isInitialized=!1}createMock(e,i){return{id:t.string.nanoid(),userNumber:String(i).padStart(4,"0"),employeeId:e.id,isEnabled:e.status!=d.INACTIVE&&e.status!=d.TERMINATED&&e.status!=d.RETIRED,permissions:{customer:{canCreate:t.datatype.boolean(),canRead:t.datatype.boolean(),canWrite:t.datatype.boolean(),canDelete:t.datatype.boolean()},employee:{canCreate:t.datatype.boolean(),canRead:t.datatype.boolean(),canWrite:t.datatype.boolean(),canDelete:t.datatype.boolean()},inventoryItem:{canCreate:t.datatype.boolean(),canRead:t.datatype.boolean(),canWrite:t.datatype.boolean(),canDelete:t.datatype.boolean()}},conditions:{location:{isEnabled:t.datatype.boolean(),allowedIps:t.helpers.maybe(()=>Array(t.helpers.rangeToNumber(5)).fill(0).map(()=>t.internet.ip()))??null,countries:t.helpers.maybe(()=>Array(t.helpers.rangeToNumber(2)).fill(0).map(()=>t.location.country()),{probability:.2})??null},timeRange:{isEnabled:t.datatype.boolean(),allowedAfter:t.helpers.maybe(()=>t.helpers.rangeToNumber(23).toString().padStart(2,"0")+"00")??null,allowedBefore:t.helpers.maybe(()=>t.helpers.rangeToNumber(23).toString().padStart(2,"0")+"00")??null}}}}initialize(){this.isInitialized||(this.isInitialized=!0,this.employeeData.getList().pipe(h(e=>e.length>0)).subscribe(e=>{this.list.next(e.map((i,r)=>this.createMock(i,r)))}))}getList(){return this.appRef.isStable.pipe(h(e=>e),S(1e3)).subscribe(()=>{this.initialize()}),this.list}save(e){this.list.next(this.list.value.map(i=>i.id==e.id?e:i))}};a.\u0275fac=function(i){return new(i||a)},a.\u0275prov=p({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var N=(()=>{let a=class a{constructor(){this.dataService=c(k),this.employeeDataService=c(u),this.rawData=b(this.dataService.getList()),this.employeeList=b(this.employeeDataService.getList()),this.configuration={useVirtualScroll:!0},this.data=n([]),this.columnsConfig=n([{key:"userNumber",label:"#",isSortedAsc:!0},{key:"employeeName",label:"Employee",path:"employee.name"},{key:"isEnabled",label:"Enabled",jsonSchema:{type:"boolean"}}]),this.columnsToDisplay=n(["userNumber","employeeName","isEnabled"]),this.simpleFilterConfig=n({type:"object",properties:{isEnabled:{description:"Enabled",type:"boolean"}}}),this.simpleFilterValue=n({isEnabled:!0}),this.controlsConfig=n([{id:"refresh",icon:"refresh",label:"Refresh",mode:"low-emphasis"}]),this.sortFn=y(()=>{let e=this.columnsConfig().find(r=>r.isSortedAsc||r.isSortedDesc);if(!e)return()=>0;let i=e.isSortedDesc?-1:1;return(r,s)=>{switch(e.key){case"employeeName":return r.employee?.name>s.employee?.name?i:r.employee?.name<s.employee?.name?-1*i:0;default:return r[e.key]>s[e.key]?i:r[e.key]<s[e.key]?-1*i:0}}}),this.filterFn=y(()=>{let e=this.simpleFilterValue(),i=Object.values(e??{}).some(r=>typeof r=="string"?!!r:r!=null);return r=>!(i&&e.isEnabled!=null&&e.isEnabled!=r.isEnabled)}),E(()=>{let e=this.rawData(),i=this.employeeList();!e||!i||this.data.set(e.map(r=>m(l({},r),{employee:i.find(s=>s.id==r.employeeId)})).filter(this.filterFn()).sort(this.sortFn()))},{allowSignalWrites:!0})}routeToDetail(e){return["detail",e.id]}onHeaderCellClick(e,i){this.columnsConfig.update(r=>r.map(s=>s.key==e?m(l({},s),{isSortedAsc:!s.isSortedAsc&&!s.isSortedDesc?!0:!!s.isSortedDesc,isSortedDesc:!!s.isSortedAsc}):m(l({},s),{isSortedAsc:!1,isSortedDesc:!1})))}onUpdateSimpleFilter(e){this.simpleFilterValue.set(e)}};a.\u0275fac=function(i){return new(i||a)},a.\u0275prov=p({token:a,factory:a.\u0275fac});let o=a;return o})();var X=[{path:"",data:l({},A({title:"Access Control"})),children:[{path:"",component:T,providers:[{provide:C,useClass:R}],children:[{path:"",component:g,providers:[{provide:I,useClass:N}]}]}]}];export{X as ROUTES};
