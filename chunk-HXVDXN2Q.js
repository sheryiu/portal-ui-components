import{$ as at,$a as yt,A as X,Aa as bt,B as Te,Ba as gt,Da as Z,Ea as Ee,Ha as Fe,Ia as vt,J as ye,Ka as Ve,La as Ae,N as k,O as De,P as xe,_a as Tt,a as fe,aa as rt,ab as Dt,b as it,c as Ce,db as xt,eb as wt,fa as we,fb as St,g as nt,gb as kt,hb as Et,ib as Ft,ja as lt,jb as Vt,ka as st,kb as At,la as ct,lb as $t,ma as dt,mb as Mt,n as he,na as pt,nb as Nt,o as be,oa as ut,ob as Pt,pa as _t,pb as It,q as G,qa as mt,r as q,ra as ft,s as ge,sa as Ct,ta as ht,ua as Se,w as ve,wa as ke,x as ot,y as W,ya as K,z as J}from"./chunk-47XLWSBX.js";import{$b as _e,Aa as ze,B as ne,Db as h,Eb as l,Fb as We,G as oe,Gb as ce,Ha as c,Mb as Ke,N as Le,Nb as Ye,Ob as de,Pb as pe,Q as Be,Qb as Qe,R as je,Rb as C,Sb as T,Vb as Je,X as ae,Xa as V,Yb as ue,Za as Ue,Zb as z,_ as P,_b as w,aa as u,bb as H,dc as A,e as Ie,fa as g,fc as U,ga as v,gc as me,ha as re,hc as Xe,ia as He,ja as le,kb as Ge,lb as m,lc as _,mb as f,mc as Q,nb as qe,oc as Ze,p as R,pa as F,pb as D,pc as S,q as L,qb as x,qc as et,ra as B,rb as p,sa as j,sb as s,tb as d,ub as b,w as Oe,wa as se,y as Re,yb as I,yc as tt,zb as y}from"./chunk-456UTSJA.js";import{a as E,b as N}from"./chunk-C6Q5SG76.js";var Ut=(t,n)=>({"pui-action-drawer-layout__toolbar__most-emphasized":t,"pui-action-drawer-layout__toolbar__normal":n}),ie=(t,n)=>n.id;function Gt(t,n){if(t&1&&I(0,3),t&2){let e=l();p("ngComponentOutlet",e.configuration.content)("ngComponentOutletInputs",e.contentInputs())}}function qt(t,n){if(t&1&&(s(0,"i"),C(1),d()),t&2){let e=l().$implicit;c(),T(e.icon)}}function Wt(t,n){if(t&1&&I(0,7),t&2){let e=l().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Kt(t,n){if(t&1){let e=y();s(0,"button",6),h("click",function(o){let a=g(e).$implicit,r=l();return v(r.layoutService.controlOnClick(a.id,o))}),m(1,qt,2,1,"i")(2,Wt,1,1,"ng-container",7),s(3,"span"),C(4),d()()}if(t&2){let e=n.$implicit,i=l();p("color",e.color??"accent")("ngClass",_e(8,Ut,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled)("puiTooltip",e.label)("puiTooltipPosition","top"),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),T(e.label)}}var ee=t=>({enum:t}),Yt=t=>({format:t}),Qt=t=>({"date-time":t}),Ot=()=>({}),$e=(t,n)=>n.key;function Jt(t,n){if(t&1&&b(0,"pui-field-def",3),t&2){let e=n.$implicit;p("key",e.key)("fieldType",e.fieldConfiguration.type)("label",e.fieldConfiguration.description??e.key)("fieldConfig",e.fieldConfiguration.type=="string"?w(4,ee,e.fieldConfiguration.enum):e.fieldConfiguration.type=="number"?w(6,ee,e.fieldConfiguration.enum):e.fieldConfiguration.type=="date-time"?w(10,Qt,w(8,Yt,e.fieldConfiguration.format)):z(12,Ot))}}function Xt(t,n){if(t&1){let e=y();s(0,"form",1),h("submit",function(o){g(e);let a=l();return v(a.onSubmit(o))}),s(1,"pui-fieldset",2),h("valueChange",function(o){g(e);let a=l();return v(a.onValueChange(o))}),D(2,Jt,1,13,"pui-field-def",3,$e),d(),b(4,"button",4),d()}if(t&2){let e=l();c(),p("value",e.data())("disabled",e.disabled()),c(),x(e.flattenedControls())}}function Zt(t,n){if(t&1){let e=y();s(0,"pui-layout-control",5),h("click",function(o){let a=g(e).$implicit,r=l();return v(r.onControlClick(a.id,o))}),d()}if(t&2){let e=n.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var Rt=()=>[],ei=t=>({peek:t}),ti=t=>({outlets:t}),ii=t=>[t];function ni(t,n){if(t&1&&(s(0,"a",1)(1,"i"),C(2,"open_in_full"),d()()),t&2){let e=l();p("routerLink",e.routeToFullContent())}}var oi=[[["",8,"pui-root-sidenav__header__logo"]],[["",8,"pui-root-sidenav__nav"]]],ai=[".pui-root-sidenav__header__logo",".pui-root-sidenav__nav"];function ri(t,n){if(t&1&&b(0,"pui-field-def",5),t&2){let e=n.$implicit;p("key",e.key)("fieldType",e.fieldConfiguration.type)("label",e.fieldConfiguration.description??e.key)("fieldConfig",e.fieldConfiguration.type=="string"?w(5,ee,e.fieldConfiguration.enum):e.fieldConfiguration.type=="number"?w(7,ee,e.fieldConfiguration.enum):z(9,Ot))("isNullable",!1)}}function li(t,n){if(t&1){let e=y();s(0,"pui-fieldset",4),h("valueChange",function(o){g(e);let a=l();return v(a.onFilterValueChange(o))}),D(1,ri,1,10,"pui-field-def",5,$e),d()}if(t&2){let e=l();p("value",e.filterValue()),c(),x(e.flattenFilterDef())}}function si(t,n){if(t&1&&b(0,"pui-loading-panel"),t&2){let e=l();p("@loading",void 0)("@.disabled",e.isInitial())}}function ci(t,n){if(t&1){let e=y();s(0,"pui-table-header-cell",9),h("cellClick",function(o){g(e);let a=l().$implicit,r=l(2);return v(r.onHeaderClick(a.key,o))}),C(1),d()}if(t&2){let e=l().$implicit;p("centerAligned",e.isAlignCenter??!1)("rightAligned",e.isAlignEnd??!1)("sortedAsc",e.isSortedAsc??!1)("sortedDesc",e.isSortedDesc??!1),c(),T(e.label)}}function di(t,n){t&1&&C(0," \xA0ago ")}function pi(t,n){if(t&1&&(s(0,"pui-time-display",12),A(1,"lodashGet"),s(2,"span"),C(3,"--"),d()(),m(4,di,1,0)),t&2){let e=l(2).$implicit,i=l().$implicit;p("mode",i.fieldConfiguration.format=="timeAgo"?"timeAgo":"normal")("format",i.fieldConfiguration.format)("date",U(1,4,e,i.path??i.key)),c(4),f(i.fieldConfiguration.format=="timeAgo"?4:-1)}}function ui(t,n){if(t&1&&(Je(0),A(1,"lodashGet"),s(2,"i",13),C(3),d()),t&2){let e=l(2).$implicit,i=l().$implicit,o=U(1,3,e,i.path??i.key);c(2),Qe("pui-table-cell__boolean-content--true",o===!0),c(),T(o===!0?"check":o===!1?"close":"")}}function _i(t,n){if(t&1&&(s(0,"span"),C(1),A(2,"lodashGet"),d()),t&2){let e=l(2).$implicit,i=l().$implicit;c(),T(U(2,1,e,i.path??i.key))}}function mi(t,n){if(t&1&&m(0,pi,5,7)(1,ui,4,6,"i",11)(2,_i,3,4,"span"),t&2){let e,i=l(2).$implicit;f((e=i.fieldConfiguration.type)==="date-time"?0:e==="boolean"?1:2)}}function fi(t,n){if(t&1&&(s(0,"span"),C(1),A(2,"lodashGet"),d()),t&2){let e=l().$implicit,i=l().$implicit;c(),T(U(2,1,e,i.path??i.key))}}function Ci(t,n){if(t&1&&(s(0,"pui-table-cell",10),m(1,mi,3,1)(2,fi,3,4,"span"),d()),t&2){let e=l().$implicit;p("centerAligned",e.isAlignCenter??!1)("rightAligned",e.isAlignEnd??!1),c(),f(e.fieldConfiguration?1:2)}}function hi(t,n){if(t&1&&H(0,ci,2,5,"pui-table-header-cell",7)(1,Ci,3,3,"pui-table-cell",8),t&2){let e=n.$implicit;p("puiTableHeaderCellDef",e.key),c(),p("puiTableCellDef",e.key)}}function bi(t,n){if(t&1){let e=y();s(0,"pui-table-row",17),A(1,"isInSet"),h("click",function(){let o=g(e).$implicit,a=l(4);return v(a.onRowClick(o))}),d()}if(t&2){let e=n.$implicit,i=l(4);pe("height",48,"px"),p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",me(1,5,e,i.selectedItems(),i.cmpFn))}}function gi(t,n){if(t&1&&(s(0,"cdk-virtual-scroll-viewport",15),H(1,bi,2,9,"pui-table-row",16),d()),t&2){let e=l(3);pe("height",e.data().length*48,"px"),c(),p("cdkVirtualForOf",e.data())("cdkVirtualForTrackBy",e.trackingFn)("cdkVirtualForTemplateCacheSize",0)}}function vi(t,n){if(t&1&&m(0,gi,2,5,"cdk-virtual-scroll-viewport",14),t&2){let e=l(2);f(e.isBrowser?0:-1)}}function Ti(t,n){if(t&1){let e=y();s(0,"pui-table-row",17),A(1,"isInSet"),h("click",function(){let o=g(e).$implicit,a=l(3);return v(a.onRowClick(o))}),d()}if(t&2){let e=n.$implicit,i=l(3);p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",me(1,3,e,i.selectedItems(),i.cmpFn))}}function yi(t,n){if(t&1&&D(0,Ti,2,7,"pui-table-row",18,qe),t&2){let e=l(2);x(e.data())}}function Di(t,n){if(t&1){let e=y();s(0,"pui-table",2),D(1,hi,2,2,null,null,$e),s(3,"pui-table-body")(4,"div",6),h("skippedChanged",function(o){g(e);let a=l();return v(a.scrolledToTop.set(!o))}),d(),b(5,"pui-table-header-row"),m(6,vi,1,1)(7,yi,2,0),s(8,"div",6),h("skippedChanged",function(o){g(e);let a=l();return v(a.scrolledToBottom.set(!o))}),d()()()}if(t&2){let e=l();p("@loading",void 0)("@.disabled",e.isInitial())("id",e.configuration==null?null:e.configuration.id)("itemHeight",48)("columns",e.columnsToDisplay())("columnWidths",z(8,Rt))("selectionMode",e.selectionMode()),c(),x(e.columnConfig()),c(5),f(e.configuration!=null&&e.configuration.useVirtualScroll?6:7)}}function xi(t,n){if(t&1){let e=y();s(0,"pui-layout-control",19),h("click",function(o){let a=g(e).$implicit,r=l();return v(r.onControlClick(a.id,o))}),d()}if(t&2){let e=n.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var wi=["container"],Si=(t,n)=>({"pui-vertical-layout__toolbar__most-emphasized":t,"pui-vertical-layout__toolbar__normal":n}),ki=(t,n)=>n.label;function Ei(t,n){if(t&1&&(s(0,"header",5)(1,"div",4),b(2,"pui-breadcrumbs"),s(3,"h1"),C(4),d()(),I(5,7),d()),t&2){let e=l(),i=de(13);p("@floatingHeader",void 0),c(4),T(e.heading()),c(),p("ngTemplateOutlet",i)}}function Fi(t,n){if(t&1&&(s(0,"a",11),C(1),d()),t&2){let e=l().$implicit;p("routerLink",e.route),c(),T(e.label)}}function Vi(t,n){if(t&1&&H(0,Fi,2,2,"a",12),t&2){let e=n.$implicit;p("puiTab",e.label)("puiTabHidden",e.hidden??!1)}}function Ai(t,n){if(t&1){let e=y();s(0,"pui-tab-bar",10),h("tabChange",function(o){g(e);let a=l(2);return v(a.onTabChanged(o))}),D(1,Vi,1,2,"a",11,ki),d()}if(t&2){let e=l(2);p("currentTab",e.activeTab()),c(),x(e.tabs())}}function $i(t,n){t&1&&b(0,"div",9)}function Mi(t,n){if(t&1&&(s(0,"header",6),m(1,Ai,3,1,"pui-tab-bar",8),m(2,$i,1,0,"div",9),I(3,7),d()),t&2){let e=l(),i=de(13);c(),f(e.tabs().length>0?1:-1),c(),f(e.controls().length>0?2:-1),c(),p("ngTemplateOutlet",i)}}function Ni(t,n){if(t&1&&(s(0,"i"),C(1),d()),t&2){let e=l().$implicit;c(),T(e.icon)}}function Pi(t,n){if(t&1&&I(0,7),t&2){let e=l().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Ii(t,n){if(t&1){let e=y();s(0,"button",15),h("click",function(o){let a=g(e).$implicit,r=l(3);return v(r.layoutService.controlOnClick(a.id,o))}),m(1,Ni,2,1,"i")(2,Pi,1,1,"ng-container",7),s(3,"span"),C(4),d()()}if(t&2){let e=n.$implicit,i=l(3);p("color",e.color??"accent")("ngClass",_e(7,Si,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("puiTooltip",e.label)("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),T(e.label)}}function Oi(t,n){if(t&1&&(s(0,"div",13),D(1,Ii,5,10,"button",14,ie),d()),t&2){let e=l(2);c(),x(e.controls())}}function Ri(t,n){if(t&1&&m(0,Oi,3,0,"div",13),t&2){let e=l();f(e.controls().length>0?0:-1)}}var Y=(()=>{class t{constructor(){this._controls=F([]),this.controls=_(()=>this._controls().toSorted((e,i)=>(e.weight??0)-(i.weight??0))),this.mostEmphasizedControlId=_(()=>this.controls().filter(e=>!e.mode||e.mode=="auto").at(-1)?.id),this.eventsMap={}}registerControl(e,i){return this._controls.update(o=>[...o,E({},e)]),this.eventsMap[e.id]=i,{update:o=>{this._controls.update(a=>a.map(r=>r.id==o.id?E(E({},r),o):r))},dispose:()=>{this._controls.update(o=>o.filter(a=>a.id!=e.id))}}}controlOnClick(e,i){this.eventsMap[e]?.click?.(i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=ae({token:t,factory:t.\u0275fac})}}return t})(),Li=(()=>{class t{constructor(){this.overlayRef=u(ft),this.dataProvider=u(Lt),this.layoutService=u(Y,{self:!0}),this.configuration=this.dataProvider?.configuration,this.heading=_(()=>this.dataProvider.heading()),this.contentInputs=_(()=>this.dataProvider.contentInputs?.()??{}),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.dataProvider.onActionDrawerInit?.(this.overlayRef)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=V({type:t,selectors:[["pui-action-drawer-layout"]],hostAttrs:[1,"pui-action-drawer-layout"],features:[ue([Y])],decls:10,vars:2,consts:[[1,"@container/layout"],[1,"pui-action-drawer-layout__heading"],["cdkTrapFocus","","cdkTrapFocusAutoCapture","",1,"pui-action-drawer-layout__content"],[3,"ngComponentOutlet","ngComponentOutletInputs"],[1,"pui-action-drawer-layout__toolbar"],["puiFilledButton","",3,"color","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],["puiFilledButton","",3,"click","color","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],[3,"ngTemplateOutlet"]],template:function(i,o){i&1&&(s(0,"div",0)(1,"header",1),b(2,"pui-breadcrumbs"),s(3,"h1"),C(4),d()(),s(5,"div",2),m(6,Gt,1,2,"ng-container",3),d(),s(7,"div",4),D(8,Kt,5,11,"button",5,ie),d()()),i&2&&(c(4),T(o.heading()),c(2),f(o.configuration&&o.configuration.content?6:-1),c(2),x(o.controls()))},dependencies:[Ee,it,Ce,K,ke,Z,fe,gt,bt],encapsulation:2})}}return t})(),Lt=new P("action drawer layout data provider"),fn=(()=>{class t{constructor(){this.overlay=u(Ct),this.injector=u(re)}open(e,i={width:"480px"}){return this.overlay.open(Li,{positionStrategy:this.overlay.position().global().right("0").centerVertically(),maxWidth:"90vw",width:i.width??"480px",height:"100%",hasBackdrop:!0,backdropClass:"pui-action-drawer-backdrop",closeOnBackdropClick:i.manualClose!==!0,disposeOnNavigation:i.manualClose!==!0,closeOnEscapeKeydown:i.manualClose!==!0,animation:"slideInEnd",data:i.overlayData,parentInjector:re.create({providers:[{provide:mt,useValue:i.overlayData},{provide:Lt,useClass:e},...i.providers??[]],parent:i.parent??this.injector})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=ae({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Bi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}],Cn=[{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}],ji=new P("editable content data provider");function te(t,n,e,i){return Object.entries(t.properties).flatMap(([a,r])=>{if(r.type=="object")return te(r,n,`${e?`${e}.`:""}${a}`,`${i}${r.description??""} / `);if(r.type=="array"){let $=ye(n,`${e?`${e}.`:""}${a}`);return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:N(E({},r),{description:`${i}${r.description??""}`})},...Array.isArray($)?$.flatMap((Me,M)=>r.items.type=="object"?[...te(r.items,n,`${e?`${e}.`:""}${a}[${M}]`,`${i}${r.description??""} / #${M} / `)]:[{key:`${e?`${e}.`:""}${a}[${M}]`,fieldConfiguration:N(E({},r.items),{description:`${i}${r.description??""} / #${M}`})}]):[]]}return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:N(E({},r),{description:i+r.description})}]})}var Bt=(()=>{class t{constructor(){if(this.layoutService=u(Y,{optional:!0}),this.destroyRef=u(le),this.id=S.required(),this.label=S.required(),this.weight=S(0),this.icon=S(),this.iconTemplateRef=S(),this.disabled=S(!1,{transform:tt}),this.mode=S(void 0),this.color=S(),this.click=Ze(),!this.layoutService)return;let e,i;B(()=>{let o=this.id(),a=this.label(),r=this.disabled(),$=this.icon(),Me=this.iconTemplateRef(),M=this.mode(),jt=this.weight(),Ht=this.color(),Ne={id:o,label:a,isDisabled:r,icon:$,iconTemplateRef:Me,weight:jt,mode:M,color:Ht};if(e)e(Ne);else{let Pe=this.layoutService.registerControl(Ne,{click:zt=>this.click.emit(zt)});e=Pe.update,i=Pe.dispose}}),this.destroyRef.onDestroy(()=>{i?.()})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=Ue({type:t,selectors:[["pui-layout-control"]],hostAttrs:[1,"pui-layout-control"],inputs:{id:[1,"id"],label:[1,"label"],weight:[1,"weight"],icon:[1,"icon"],iconTemplateRef:[1,"iconTemplateRef"],disabled:[1,"disabled"],mode:[1,"mode"],color:[1,"color"]},outputs:{click:"click"}})}}return t})(),hn=(()=>{class t{constructor(){this.route=u(W),this.dataProvider=u(ji),this.data=Q(()=>this.dataProvider.data()),this.fieldConfiguration=_(()=>this.dataProvider.fieldConfiguration()),this.flattenedControls=_(()=>{let e=this.fieldConfiguration(),i=this.data();return e?te(e,i,"",e.description?`${e.description} / `:""):[]}),this.controlsConfig=_(()=>this.dataProvider.controlsConfig?.()??Bi),this.isDirty=F(!1),this.isDisabled=S(!1,{alias:"disabled"}),this.disabled=Q(()=>this.isDisabled()),L([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.dataProvider.registerUpdateState?.(e=>{j(()=>{e?.isDirty===!1?this.isDirty.set(!1):e?.isDirty===!0&&this.isDirty.set(!0),e?.isDisabled===!1?this.disabled.set(!1):e?.isDisabled===!0&&this.disabled.set(!0)})}),B(()=>{let e=this.isDirty();j(()=>{this.dataProvider.onStateChange?.({isDirty:e})})})}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}onValueChange(e){this.data.set(e),this.isDirty.set(!0),this.dataProvider.onValueChange?.(e)}onSubmit(e){e.preventDefault(),this.dataProvider.configuration?.isEnterToSubmit===!0&&this.dataProvider.onControlClick?.("save",e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=V({type:t,selectors:[["pui-editable-content"]],hostAttrs:[1,"pui-editable-content"],inputs:{isDisabled:[1,"disabled","isDisabled"]},decls:4,vars:1,consts:[[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"submit"],[3,"valueChange","value","disabled"],[3,"key","fieldType","label","fieldConfig"],["type","submit","hidden",""],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,o){i&1&&(s(0,"main"),m(1,Xt,5,2,"form"),d(),D(2,Zt,1,7,"pui-layout-control",0,ie)),i&2&&(c(),f(o.flattenedControls().length>0?1:-1),c(),x(o.controlsConfig()))},dependencies:[Ae,Ve,Fe,Bt],encapsulation:2})}}return t})(),Hi=new P("peekable addon data provider"),zi=(()=>{class t{constructor(){this.dataProvider=u(Hi,{optional:!0}),this.route=u(W),this.router=u(X),this.overlayKeyboardDispatcher=u(ut),this.routeToFullContent=_(()=>this.dataProvider?.routeToFullContent()??null),this._keydownEvents=new Ie,L([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([e,i])=>this.dataProvider?.onParamsChange?.(e,i)),this.overlayKeyboardDispatcher.add(this),u(le).onDestroy(()=>{this.overlayKeyboardDispatcher.ngOnDestroy(),this._keydownEvents.complete()}),this._keydownEvents.pipe(k()).subscribe(e=>{e.key=="Escape"&&this.onEscapePress(e)})}onEscapePress(e){this.route.snapshot.parent?.children.some(i=>i.outlet=="peek")&&this.router.navigate([{outlets:{peek:[]}}],{relativeTo:this.route.parent})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=V({type:t,selectors:[["pui-peekable-addon"]],hostAttrs:[1,"pui-peekable-addon"],decls:8,vars:9,consts:[[1,"pui-peekable-addon__nav"],["puiBaseButton","","puiTooltip","View in full",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"spacer"],["puiBaseButton","","puiTooltip","Close peek window",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"pui-peekable-addon__content"],["name","peek"]],template:function(i,o){i&1&&(s(0,"nav",0),m(1,ni,3,1,"a",1),b(2,"div",2),s(3,"a",3)(4,"i"),C(5,"close"),d()()(),s(6,"main",4),b(7,"router-outlet",5),d()),i&2&&(c(),f(o.routeToFullContent()?1:-1),c(2),p("routerLink",w(7,ii,w(5,ti,w(3,ei,z(2,Rt))))))},dependencies:[J,Te,K,Se,Z],encapsulation:2})}}return t})(),bn=(()=>{class t{constructor(){this.router=u(X,{optional:!0}),this.isSidenavVisible=F(!1),this.router?.events.pipe(ne(e=>e instanceof ve),oe(50),k()).subscribe(()=>{this.isSidenavVisible.set(!1)})}toggleSidenav(e){this.isSidenavVisible.update(i=>e??!i)}onContentClick(e){e.target==e.currentTarget&&this.isSidenavVisible.set(!1)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=V({type:t,selectors:[["pui-root-sidenav"]],ngContentSelectors:ai,decls:12,vars:1,consts:[[1,"pui-root-sidenav"],[1,"pui-root-sidenav__header"],["puiBaseButton","",1,"pui-root-sidenav__header__hamburger",3,"click"],[1,"spacer"],[1,"pui-root-sidenav__nav-wrapper"],[1,"pui-root-sidenav__content-wrapper"],[1,"pui-root-sidenav__content",3,"click"]],template:function(i,o){i&1&&(We(oi),s(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return o.toggleSidenav()}),s(3,"i"),C(4,"menu"),d()(),b(5,"div",3),ce(6),d(),s(7,"div",4),ce(8,1),d()(),s(9,"div",5)(10,"div",6),h("click",function(r){return o.onContentClick(r)}),b(11,"router-outlet"),d()()),i&2&&(c(10),Ge("data-sidenav",o.isSidenavVisible()?"visible":"hidden"))},dependencies:[K,Se,J],encapsulation:2})}}return t})();function gn(t,n,e=!1){let i=Object.values(t??{}).some(a=>typeof a=="string"?!!a:a!=null),o=Object.keys(t??{});return a=>{if(!i)return!0;if(e){for(let r of o)if(r in n&&n[r]!=null){if(typeof t[r]=="string"&&t[r].trim()=="")continue;if(!n[r](a,r,t[r],t))return!1}return!0}else{for(let r of o)if(r in n&&n[r]!=null){if(typeof t[r]=="string"&&t[r].trim()=="")continue;if(n[r](a,r,t[r],t))return!0}return!1}}}function vn(t){let n=t.find(i=>i.isSortedAsc||i.isSortedDesc);if(!n)return()=>0;let e=n.isSortedDesc?-1:1;return n.fieldConfiguration?.type=="date-time"?(i,o)=>{let a=O(i,n),r=O(o,n);return a==null&&r==null?0:a instanceof Date&&r instanceof Date?(a.getTime()-r.getTime())*e:a instanceof Date?1*e:-1*e}:(i,o)=>{switch(n.key){default:return O(i,n)>O(o,n)?e:O(i,n)<O(o,n)?-1*e:0}}}function O(t,n){return n.path?ye(t,n.path):t[n.key]}var Ui=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"},{id:"add",label:"Add new",icon:"add"}],Gi=new P("table content data provider"),Tn=(()=>{class t{constructor(){this.route=u(W),this.dataProvider=u(Gi),this.isBrowser=nt(u(ze)),this.ROUTE_TO_DETAIL=Symbol(),this.configuration=this.dataProvider.configuration,this.isLoading=_(()=>this.dataProvider.isLoading?.()??!1),this.data=_(()=>{let e=this.dataProvider.data(),i=this.dataProvider.routeToDetail;return e?.map(o=>Object.assign({},o,{[this.ROUTE_TO_DETAIL]:i?.bind(this.dataProvider)?.(o)}))}),this.columnConfig=_(()=>this.dataProvider.columnsConfig()),this.columnsToDisplay=_(()=>this.dataProvider.columnsToDisplay()),this.selectionMode=_(()=>this.dataProvider.selectionMode?.()??null),this.selectedItems=_(()=>this.dataProvider.selectedItems?.()??new Set),this.controlsConfig=_(()=>this.dataProvider.controlsConfig?.()??Ui),this.flattenFilterDef=_(()=>{let e=this.dataProvider.filterConfig?.();return e?te(e,{},"",e.description?`${e.description} / `:""):[]}),this.filterValue=Q(()=>this.dataProvider.filterValue?.()),this.isInitial=xe(Re(100).pipe(R(()=>!1)),{initialValue:!0}),this.scrolledToTop=F(!1),this.scrolledToBottom=F(!1),this.cmpFn=this.dataProvider.compareFn??((e,i)=>e==i),L([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.dataProvider.onScrolledToTop&&B(()=>{this.isLoading()||this.scrolledToTop()&&j(()=>this.dataProvider.onScrolledToTop())}),this.dataProvider.onScrolledToBottom&&B(()=>{this.isLoading()||this.scrolledToBottom()&&j(()=>this.dataProvider.onScrolledToBottom())}),De(this.data).pipe(oe(100),k()).subscribe(()=>{this.scrolledToTop()&&this.dataProvider.onScrolledToTop?.(),this.scrolledToBottom()&&this.dataProvider.onScrolledToBottom?.()})}ngOnInit(){this.dataProvider?.onInit?.()}ngOnDestroy(){this.dataProvider?.onDestroy?.()}onRowClick(e){this.dataProvider.onTableRowClick?.(e)}onHeaderClick(e,i){this.dataProvider.onHeaderCellClick?.(e,i)}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}onFilterValueChange(e){this.filterValue.set(e),this.dataProvider.onFilterChange?.(e)}onScrolled(e,i){e=="top"?this.scrolledToTop.set(!i):this.scrolledToBottom.set(!i)}trackingFn(e,i){return e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=V({type:t,selectors:[["pui-table-content"]],hostAttrs:[1,"pui-table-content"],decls:8,vars:2,consts:[[3,"value"],[1,"pui-table-content__content-wrapper"],[3,"id","itemHeight","columns","columnWidths","selectionMode"],[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"valueChange","value"],[3,"key","fieldType","label","fieldConfig","isNullable"],["puiContentVisibilityDetector","",3,"skippedChanged"],[3,"centerAligned","rightAligned","sortedAsc","sortedDesc","cellClick",4,"puiTableHeaderCellDef"],[3,"centerAligned","rightAligned",4,"puiTableCellDef"],[3,"cellClick","centerAligned","rightAligned","sortedAsc","sortedDesc"],[3,"centerAligned","rightAligned"],[1,"pui-table-cell__boolean-content",3,"pui-table-cell__boolean-content--true"],[3,"mode","format","date"],[1,"pui-table-cell__boolean-content"],["itemSize","48","scrollWindow","",3,"height"],["itemSize","48","scrollWindow",""],["puiHoverable","",3,"item","route","height","selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["puiHoverable","",3,"click","item","route","selected"],["puiHoverable","",3,"item","route","selected"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,o){if(i&1&&(s(0,"main")(1,"div"),m(2,li,3,1,"pui-fieldset",0),s(3,"div",1),m(4,si,1,2,"pui-loading-panel")(5,Di,9,9,"pui-table",2),d()()(),D(6,xi,1,7,"pui-layout-control",3,ie)),i&2){let a=o.flattenFilterDef();c(2),f(a.length>0?2:-1),c(2),f(o.isLoading()?4:5),c(2),x(o.controlsConfig())}},dependencies:[It,Ft,Pt,Vt,Nt,Mt,At,kt,$t,Et,ht,Bt,vt,pt,lt,ct,st,dt,Ae,Ve,Fe,Tt,_t,rt,at],encapsulation:2,data:{animation:[he("loading",[q(":enter",ge(Dt)),q(":leave",ge(yt))])]}})}}return t})();function yn(t,n,e=!0){return t.map(i=>i.key==n?N(E({},i),{isSortedAsc:!i.isSortedAsc&&!i.isSortedDesc?e:!!i.isSortedDesc,isSortedDesc:!i.isSortedAsc&&!i.isSortedDesc?!e:!!i.isSortedAsc}):N(E({},i),{isSortedAsc:!1,isSortedDesc:!1}))}var qi=new P("vertical layout data provider"),Dn=(()=>{class t{constructor(){this.dataProvider=u(qi),this.layoutService=u(Y,{self:!0}),this.router=u(X),this.route=u(W),this.document=u(He),this.containerDiv=et("container",{read:se}),this.activeTab=F(null),this.heading=_(()=>this.dataProvider.heading()),this.tabs=_(()=>this.dataProvider.tabs()),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.scrollState=xe(De(this.containerDiv).pipe(R(e=>e?.nativeElement?.closest(".pui-peekable-addon")??this.document),je(e=>Oe(e,"scroll")),R(e=>e.currentTarget instanceof Document?e.currentTarget.scrollingElement?.scrollTop:e.currentTarget.scrollTop),we(),Le(),R(([e,i])=>({direction:i-e>0?"down":"up",currentTop:i})),k())),L([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.router.events.pipe(ne(e=>e instanceof ve||e instanceof ot),Be(this.router.lastSuccessfulNavigation()?.finalUrl),we(),k()).subscribe(()=>{let e=this.tabs();if(!e)return;let i=e.find(a=>{let r=this.router.createUrlTree(a.route,{relativeTo:this.route});return this.router.isActive(r,{paths:"subset",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})});if(!i)return;this.activeTab.set(Object.assign(i.label,{[Symbol()]:null}));let o=this.route.routeConfig?.children?.find(a=>a.path=="**");o&&(o.redirectTo=i.route.map(a=>String(a).replaceAll("..%2F","").replaceAll(".%2F","")).join("/"))})}onTabChanged(e){let i=this.tabs()?.find(o=>o.label==e);i&&this.router.navigate(i.route,{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=V({type:t,selectors:[["pui-vertical-layout"]],viewQuery:function(i,o){i&1&&Ke(o.containerDiv,wi,5,se),i&2&&Ye()},hostAttrs:[1,"pui-vertical-layout"],features:[ue([Y])],decls:14,vars:3,consts:[["container",""],["controlsTemplate",""],[1,"@container/layout"],[1,"pui-vertical-layout__heading"],[1,"pui-vertical-layout__navigation"],[1,"pui-vertical-layout__heading--floating"],[1,"pui-vertical-layout__controls"],[3,"ngTemplateOutlet"],[1,"pui-vertical-layout__tabs",3,"currentTab"],[1,"spacer"],[1,"pui-vertical-layout__tabs",3,"tabChange","currentTab"],[3,"routerLink"],[3,"routerLink",4,"puiTab","puiTabHidden"],[1,"pui-vertical-layout__toolbar"],["puiFilledButton","",3,"color","ngClass","puiTooltip","disabled","hoverableEnabled"],["puiFilledButton","",3,"click","color","ngClass","puiTooltip","disabled","hoverableEnabled"]],template:function(i,o){if(i&1&&(s(0,"div",2,0)(2,"div")(3,"header",3)(4,"div",4),b(5,"pui-breadcrumbs"),s(6,"h1"),C(7),d()()(),m(8,Ei,6,3,"header",5),m(9,Mi,4,3,"header",6),b(10,"router-outlet")(11,"pui-peekable-addon"),d()(),H(12,Ri,1,1,"ng-template",null,1,Xe)),i&2){let a;c(7),T(o.heading()),c(),f(((a=o.scrollState())==null?null:a.direction)=="up"&&((a=o.scrollState())==null?null:a.currentTop)>240?8:-1),c(),f(o.tabs().length>0||o.controls().length>0?9:-1)}},dependencies:[J,Ee,K,ke,St,wt,xt,Te,Ce,zi,Z,fe],encapsulation:2,data:{animation:[he("floatingHeader",[q(":enter",[G({transform:"translate(0, -100%)"}),be("150ms ease-in-out",G({transform:"translate(0, 0)"}))]),q(":leave",[G({transform:"translate(0, 0)"}),be("150ms ease-in-out",G({transform:"translate(0, -100%)"}))])])]}})}}return t})();export{Lt as a,fn as b,Bi as c,Cn as d,ji as e,Bt as f,hn as g,Hi as h,bn as i,gn as j,vn as k,Ui as l,Gi as m,Tn as n,yn as o,qi as p,Dn as q};
