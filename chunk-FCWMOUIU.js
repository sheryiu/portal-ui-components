import{a as y}from"./chunk-6ZRQSSJ4.js";import{a as de}from"./chunk-EFAB4OXU.js";import{B as _,Ca as j,Cd as pe,D as V,Da as C,Ea as f,Gc as ee,Hc as te,Ja as s,L as x,La as Z,M as g,Na as v,Pb as Q,Pc as ie,R as M,Ra as h,S as F,Sa as L,Ta as q,Y as N,a as z,bd as ne,c as w,ca as u,cb as G,db as H,e as I,ec as W,fa as J,h as b,ia as K,k as D,ka as p,m as k,mc as X,oa as U,oc as Y,p as E,rd as oe,s as $,sa as c,sd as ae,t as B,v as P,x as T,xa as a,xd as re,ya as o,yd as le,z as R,za as d,zd as se}from"./chunk-GGV4OHPW.js";import"./chunk-CZC3PYQ3.js";import{a as S}from"./chunk-EQDQRRRY.js";function fe(t,i){if(t&1&&d(0,"pui-linear-progress-display",9),t&2){let r=f();U("value",r.completedRows*100/r.totalRows)}}function be(t,i){t&1&&p(0,fe,1,1,"pui-linear-progress-display",9),t&2&&c(i.totalRows>0?0:-1)}function _e(t,i){if(t&1){let r=j();a(0,"button",10),C("click",function(){M(r);let e=f();return F(e.onDownloadClick())}),s(1,"Download"),o()}}function xe(t,i){if(t&1&&d(0,"pui-linear-progress-display",9),t&2){let r=f();U("value",r.completedRows*100/r.totalRows)}}function ge(t,i){t&1&&p(0,xe,1,1,"pui-linear-progress-display",9),t&2&&c(i.totalRows>0?0:-1)}function Ce(t,i){if(t&1){let r=j();a(0,"button",10),C("click",function(){M(r);let e=f();return F(e.onUploadClick())}),s(1,"Upload"),o()}}function ve(t,i){if(t&1&&(a(0,"span",7),s(1),h(2,"number"),a(3,"span",11),s(4,"KB"),o()()),t&2){let r;u(),Z("",q(2,1,((r=i.used)!==null&&r!==void 0?r:0)/1024,"1.2-2")," ")}}var me=(()=>{let i=class i extends W{constructor(){super(),this.service=x(de),this.zone=x(N),this.renderer=x(J),this._downloadProgress$=new w(void 0),this.downloadProgress$=this._downloadProgress$.pipe(T(),$(([l,e])=>k(l==null||e?.completedRows==0?0:300).pipe(b(()=>e))),R(1)),this._uploadProgress$=new w(void 0),this.uploadProgress$=this._uploadProgress$.pipe(T(),$(([l,e])=>k(l==null||e?.completedRows==0?0:300).pipe(b(()=>e))),R(1)),this.onDownloadClick=this.createEffectFn(l=>l.pipe(P(()=>I(this.service.export({progressCallback:e=>(this.zone.run(()=>{this._downloadProgress$.next(S({},e)),e.done&&this._downloadProgress$.next(void 0)}),!0)})).pipe(_(e=>D(()=>this.downloadProgress$.pipe(E(n=>n==null),B(1),b(()=>e)))),V(e=>{let n=this.renderer.createElement("a");n.download="download.json",n.href=URL.createObjectURL(new Blob([e])),n.click(),URL.revokeObjectURL(n.href)}))))),this.onUploadClick=this.createEffectFn(l=>l.pipe(P(()=>new z(e=>{let n=this.renderer.createElement("input");n.type="file",n.accept="application/json",n.addEventListener("change",()=>{let m=new FileReader;m.addEventListener("load",()=>{e.next(m.result),e.complete()}),m.readAsArrayBuffer(n.files[0])}),n.click()}).pipe(_(e=>this.service.import(new Blob([e]),{clearTablesBeforeImport:!0,progressCallback:n=>(this.zone.run(()=>{this._uploadProgress$.next(S({},n)),n.done&&this._uploadProgress$.next(void 0)}),!0)})),_(()=>D(()=>this.uploadProgress$.pipe(E(e=>e==null),B(1)))))))),!(this.service.isServer||!this.service.bytesUsed$)&&(this.bytesUsed$$=Q(this.service.bytesUsed$))}onDeleteAllClick(){this.service.emptyDatabase()}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=g({type:i,selectors:[["demo-settings-database"]],standalone:!0,features:[K,v],decls:29,vars:7,consts:[[1,"flex","flex-col","px-4"],[1,"flex","py-3","gap-6","justify-between","items-center"],[1,"flex","flex-col","gap-px"],[1,"font-bold","tracking-tight","text-primary-800","dark:text-primary-200"],[1,"font-light","text-secondary"],["puiFilledButton","","color","primary",1,"rounded-1","px-3","py-2"],[1,"flex","gap-4","items-center"],[1,"font-bold"],["puiFilledButton","","color","red",1,"rounded-1","px-3","py-2",3,"click"],[1,"h-6","max-w-120","my-0.5",3,"value"],["puiFilledButton","","color","primary",1,"rounded-1","px-3","py-2",3,"click"],[1,"text-secondary","text-sm","font-normal"]],template:function(e,n){if(e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),s(4,"Export Database"),o(),a(5,"span",4),s(6,"Download the database as one JSON file"),o()(),p(7,be,1,1),h(8,"async"),p(9,_e,2,0,"button",5),o(),d(10,"pui-divider"),a(11,"div",1)(12,"div",2)(13,"span",3),s(14,"Import Database"),o(),a(15,"span",4),s(16,"Upload a JSON file"),o()(),p(17,ge,1,1),h(18,"async"),p(19,Ce,2,0,"button",5),o(),d(20,"pui-divider"),a(21,"div",1)(22,"div",2)(23,"span",3),s(24,"Database Size"),o()(),a(25,"div",6),p(26,ve,5,4,"span",7),a(27,"button",8),C("click",function(){return n.onDeleteAllClick()}),s(28,"Delete All"),o()()()()),e&2){let m,A,O;u(7),c((m=L(8,3,n.downloadProgress$))?7:9,m),u(10),c((A=L(18,5,n.uploadProgress$))?17:19,A),u(9),c((O=n.bytesUsed$$==null?null:n.bytesUsed$$())?26:-1,O)}},dependencies:[y,G,H,ie,te,Y,X]});let t=i;return t})();function he(t,i){t&1&&(a(0,"div",3)(1,"div",4)(2,"span"),s(3,"Database"),o()(),d(4,"demo-settings-database"),o())}var je=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=g({type:i,selectors:[["app-settings"]],standalone:!0,features:[v],decls:6,vars:0,consts:[["puiSidebarContainer",""],["puiSidebarBreadcrumbs",""],["puiTabBarContainer","","class","flex flex-col gap-4 pe-6 py-6",4,"puiSidebarMain"],["puiTabBarContainer","",1,"flex","flex-col","gap-4","pe-6","py-6"],[1,"bg-hover","text-primary-700","dark:text-primary-500","text-base","font-medium","me-4","border","border-s-0","rounded-e-1","py-1","ps-4","pe-2","min-h-11","flex","justify-between","items-center","gap-2"]],template:function(e,n){e&1&&(a(0,"pui-layered-container")(1,"div",0)(2,"div",1),d(3,"pui-breadcrumbs"),o(),a(4,"pui-sidebar-content"),p(5,he,5,0,"div",2),o()()())},dependencies:[y,ee,me,ne,se,ae,oe,le,re,pe]});let t=i;return t})();export{je as SettingsComponent};
