import{$ as at,A as X,B as Te,Ba as Z,Ca as Ee,Fa as Fe,Ga as bt,Ia as Ve,J as ye,Ja as Ae,N as k,O as De,P as xe,Ya as gt,Za as vt,_a as Tt,a as fe,aa as rt,b as it,bb as yt,c as Ce,cb as Dt,db as xt,eb as wt,fa as we,fb as St,g as nt,gb as kt,hb as Et,ib as Ft,ja as lt,jb as Vt,ka as st,kb as At,la as dt,lb as $t,ma as ct,mb as Nt,n as he,na as pt,nb as Mt,o as be,oa as ut,pa as _t,q as G,qa as mt,r as q,ra as ft,s as ge,sa as Ct,ta as ht,ua as Se,w as ve,wa as ke,x as ot,y as W,ya as K,z as J}from"./chunk-YLZ6PUFM.js";import{$ as ae,C as ne,Cb as O,Da as ze,Db as D,Ec as tt,H as oe,Hb as h,Ib as l,Jb as We,Ka as d,Kb as de,Q as Le,Qb as Ke,Rb as Ye,Sb as ce,Tb as pe,U as Be,Ub as Qe,V as je,Vb as C,Wb as y,Zb as Je,ab as A,ac as ue,bc as j,ca as I,cb as Ue,cc as S,dc as _e,ea as u,f as Oe,gb as B,hc as $,ja as v,jc as H,ka as T,kc as me,la as re,lc as Xe,ma as He,na as le,ob as Ge,pb as m,pc as z,q as R,qb as f,qc as _,r as L,ra as V,rb as qe,rc as U,sc as Q,tb as x,ub as w,uc as Ze,vb as p,vc as F,wb as s,wc as et,x as Pe,xb as c,yb as b,z as Re,za as se}from"./chunk-LVH4HSPS.js";import{a as E,b as M}from"./chunk-C6Q5SG76.js";var Ht=(t,n)=>({"pui-action-drawer-layout__toolbar__most-emphasized":t,"pui-action-drawer-layout__toolbar__normal":n}),ie=(t,n)=>n.id;function zt(t,n){if(t&1&&O(0,3),t&2){let e=l();p("ngComponentOutlet",e.configuration.content)("ngComponentOutletInputs",e.contentInputs())}}function Ut(t,n){if(t&1&&(s(0,"i"),C(1),c()),t&2){let e=l().$implicit;d(),y(e.icon)}}function Gt(t,n){if(t&1&&O(0,7),t&2){let e=l().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function qt(t,n){if(t&1){let e=D();s(0,"button",6),h("click",function(o){let a=v(e).$implicit,r=l();return T(r.layoutService.controlOnClick(a.id,o))}),m(1,Ut,2,1,"i")(2,Gt,1,1,"ng-container",7),s(3,"span"),C(4),c()()}if(t&2){let e=n.$implicit,i=l();p("ngClass",_e(7,Ht,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled)("puiTooltip",e.label)("puiTooltipPosition","top"),d(),f(e.icon?1:e.iconTemplateRef?2:-1),d(3),y(e.label)}}var ee=t=>({enum:t}),Wt=t=>({format:t}),Kt=t=>({"date-time":t}),It=()=>({}),$e=(t,n)=>n.key;function Yt(t,n){if(t&1&&b(0,"pui-field-def",3),t&2){let e=n.$implicit;p("key",e.key)("fieldType",e.fieldConfiguration.type)("label",e.fieldConfiguration.description??e.key)("fieldConfig",e.fieldConfiguration.type=="string"?S(4,ee,e.fieldConfiguration.enum):e.fieldConfiguration.type=="number"?S(6,ee,e.fieldConfiguration.enum):e.fieldConfiguration.type=="date-time"?S(10,Kt,S(8,Wt,e.fieldConfiguration.format)):j(12,It))}}function Qt(t,n){if(t&1){let e=D();s(0,"form",1),h("submit",function(o){v(e);let a=l();return T(a.onSubmit(o))}),s(1,"pui-fieldset",2),h("valueChange",function(o){v(e);let a=l();return T(a.onValueChange(o))}),x(2,Yt,1,13,"pui-field-def",3,$e),c(),b(4,"button",4),c()}if(t&2){let e=l();d(),p("value",e.data())("disabled",e.disabled()),d(),w(e.flattenedControls())}}function Jt(t,n){if(t&1){let e=D();s(0,"pui-layout-control",5),h("click",function(o){let a=v(e).$implicit,r=l();return T(r.onControlClick(a.id,o))}),c()}if(t&2){let e=n.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var Ot=()=>[],Xt=t=>({peek:t}),Zt=t=>({outlets:t}),ei=t=>[t];function ti(t,n){if(t&1&&(s(0,"a",1)(1,"i"),C(2,"open_in_full"),c()()),t&2){let e=l();p("routerLink",e.routeToFullContent())}}var ii=[[["",8,"pui-root-sidenav__header__logo"]],[["",8,"pui-root-sidenav__nav"]]],ni=[".pui-root-sidenav__header__logo",".pui-root-sidenav__nav"];function oi(t,n){if(t&1&&b(0,"pui-field-def",5),t&2){let e=n.$implicit;p("key",e.key)("fieldType",e.fieldConfiguration.type)("label",e.fieldConfiguration.description??e.key)("fieldConfig",e.fieldConfiguration.type=="string"?S(5,ee,e.fieldConfiguration.enum):e.fieldConfiguration.type=="number"?S(7,ee,e.fieldConfiguration.enum):j(9,It))("isNullable",!1)}}function ai(t,n){if(t&1){let e=D();s(0,"pui-fieldset",4),h("valueChange",function(o){v(e);let a=l();return T(a.onFilterValueChange(o))}),x(1,oi,1,10,"pui-field-def",5,$e),c()}if(t&2){let e=l();p("value",e.filterValue()),d(),w(e.flattenFilterDef())}}function ri(t,n){if(t&1&&b(0,"pui-loading-panel"),t&2){let e=l();p("@loading",void 0)("@.disabled",e.isInitial())}}function li(t,n){if(t&1){let e=D();s(0,"pui-table-header-cell",9),h("cellClick",function(o){v(e);let a=l().$implicit,r=l(2);return T(r.onHeaderClick(a.key,o))}),C(1),c()}if(t&2){let e=l().$implicit;p("centerAligned",e.isAlignCenter??!1)("rightAligned",e.isAlignEnd??!1)("sortedAsc",e.isSortedAsc??!1)("sortedDesc",e.isSortedDesc??!1),d(),y(e.label)}}function si(t,n){t&1&&C(0," \xA0ago ")}function di(t,n){if(t&1&&(s(0,"pui-time-display",12),$(1,"lodashGet"),s(2,"span"),C(3,"--"),c()(),m(4,si,1,0)),t&2){let e=l(2).$implicit,i=l().$implicit;p("mode",i.fieldConfiguration.format=="timeAgo"?"timeAgo":"normal")("format",i.fieldConfiguration.format)("date",H(1,4,e,i.path??i.key)),d(4),f(i.fieldConfiguration.format=="timeAgo"?4:-1)}}function ci(t,n){if(t&1&&(Je(0),$(1,"lodashGet"),s(2,"i",13),C(3),c()),t&2){let e=l(2).$implicit,i=l().$implicit,o=H(1,3,e,i.path??i.key);d(2),Qe("pui-table-cell__boolean-content--true",o===!0),d(),y(o===!0?"check":o===!1?"close":"")}}function pi(t,n){if(t&1&&(s(0,"span"),C(1),$(2,"lodashGet"),c()),t&2){let e=l(2).$implicit,i=l().$implicit;d(),y(H(2,1,e,i.path??i.key))}}function ui(t,n){if(t&1&&m(0,di,5,7)(1,ci,4,6,"i",11)(2,pi,3,4,"span"),t&2){let e,i=l(2).$implicit;f((e=i.fieldConfiguration.type)==="date-time"?0:e==="boolean"?1:2)}}function _i(t,n){if(t&1&&(s(0,"span"),C(1),$(2,"lodashGet"),c()),t&2){let e=l().$implicit,i=l().$implicit;d(),y(H(2,1,e,i.path??i.key))}}function mi(t,n){if(t&1&&(s(0,"pui-table-cell",10),m(1,ui,3,1)(2,_i,3,4,"span"),c()),t&2){let e=l().$implicit;p("centerAligned",e.isAlignCenter??!1)("rightAligned",e.isAlignEnd??!1),d(),f(e.fieldConfiguration?1:2)}}function fi(t,n){if(t&1&&B(0,li,2,5,"pui-table-header-cell",7)(1,mi,3,3,"pui-table-cell",8),t&2){let e=n.$implicit;p("puiTableHeaderCellDef",e.key),d(),p("puiTableCellDef",e.key)}}function Ci(t,n){if(t&1){let e=D();s(0,"pui-table-row",17),$(1,"isInSet"),h("click",function(){let o=v(e).$implicit,a=l(4);return T(a.onRowClick(o))}),c()}if(t&2){let e=n.$implicit,i=l(4);pe("height",48,"px"),p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",me(1,5,e,i.selectedItems(),i.cmpFn))}}function hi(t,n){if(t&1&&(s(0,"cdk-virtual-scroll-viewport",15),B(1,Ci,2,9,"pui-table-row",16),c()),t&2){let e=l(3);pe("height",e.data().length*48,"px"),d(),p("cdkVirtualForOf",e.data())("cdkVirtualForTrackBy",e.trackingFn)("cdkVirtualForTemplateCacheSize",0)}}function bi(t,n){if(t&1&&m(0,hi,2,5,"cdk-virtual-scroll-viewport",14),t&2){let e=l(2);f(e.isBrowser?0:-1)}}function gi(t,n){if(t&1){let e=D();s(0,"pui-table-row",17),$(1,"isInSet"),h("click",function(){let o=v(e).$implicit,a=l(3);return T(a.onRowClick(o))}),c()}if(t&2){let e=n.$implicit,i=l(3);p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",me(1,3,e,i.selectedItems(),i.cmpFn))}}function vi(t,n){if(t&1&&x(0,gi,2,7,"pui-table-row",18,qe),t&2){let e=l(2);w(e.data())}}function Ti(t,n){if(t&1){let e=D();s(0,"pui-table",2),x(1,fi,2,2,null,null,$e),s(3,"pui-table-body")(4,"div",6),h("skippedChanged",function(o){v(e);let a=l();return T(a.scrolledToTop.set(!o))}),c(),b(5,"pui-table-header-row"),m(6,bi,1,1)(7,vi,2,0),s(8,"div",6),h("skippedChanged",function(o){v(e);let a=l();return T(a.scrolledToBottom.set(!o))}),c()()()}if(t&2){let e=l();p("@loading",void 0)("@.disabled",e.isInitial())("id",e.configuration==null?null:e.configuration.id)("itemHeight",48)("columns",e.columnsToDisplay())("columnWidths",j(8,Ot))("selectionMode",e.selectionMode()),d(),w(e.columnConfig()),d(5),f(e.configuration!=null&&e.configuration.useVirtualScroll?6:7)}}function yi(t,n){if(t&1){let e=D();s(0,"pui-layout-control",19),h("click",function(o){let a=v(e).$implicit,r=l();return T(r.onControlClick(a.id,o))}),c()}if(t&2){let e=n.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var Di=["container"],xi=(t,n)=>({"pui-vertical-layout__toolbar__most-emphasized":t,"pui-vertical-layout__toolbar__normal":n}),wi=(t,n)=>n.label;function Si(t,n){if(t&1&&(s(0,"header",5)(1,"div",4),b(2,"pui-breadcrumbs"),s(3,"h1"),C(4),c()(),O(5,7),c()),t&2){let e=l(),i=ce(13);p("@floatingHeader",void 0),d(4),y(e.heading()),d(),p("ngTemplateOutlet",i)}}function ki(t,n){if(t&1&&(s(0,"a",11),C(1),c()),t&2){let e=l().$implicit;p("routerLink",e.route),d(),y(e.label)}}function Ei(t,n){if(t&1&&B(0,ki,2,2,"a",12),t&2){let e=n.$implicit;p("puiTab",e.label)("puiTabHidden",e.hidden??!1)}}function Fi(t,n){if(t&1){let e=D();s(0,"pui-tab-bar",10),h("tabChange",function(o){v(e);let a=l(2);return T(a.onTabChanged(o))}),x(1,Ei,1,2,"a",11,wi),c()}if(t&2){let e=l(2);p("currentTab",e.activeTab()),d(),w(e.tabs())}}function Vi(t,n){t&1&&b(0,"div",9)}function Ai(t,n){if(t&1&&(s(0,"header",6),m(1,Fi,3,1,"pui-tab-bar",8),m(2,Vi,1,0,"div",9),O(3,7),c()),t&2){let e=l(),i=ce(13);d(),f(e.tabs().length>0?1:-1),d(),f(e.controls().length>0?2:-1),d(),p("ngTemplateOutlet",i)}}function $i(t,n){if(t&1&&(s(0,"i"),C(1),c()),t&2){let e=l().$implicit;d(),y(e.icon)}}function Ni(t,n){if(t&1&&O(0,7),t&2){let e=l().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Mi(t,n){if(t&1){let e=D();s(0,"button",15),h("click",function(o){let a=v(e).$implicit,r=l(3);return T(r.layoutService.controlOnClick(a.id,o))}),m(1,$i,2,1,"i")(2,Ni,1,1,"ng-container",7),s(3,"span"),C(4),c()()}if(t&2){let e=n.$implicit,i=l(3);p("color",e.color??"accent")("ngClass",_e(7,xi,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("puiTooltip",e.label)("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled),d(),f(e.icon?1:e.iconTemplateRef?2:-1),d(3),y(e.label)}}function Ii(t,n){if(t&1&&(s(0,"div",13),x(1,Mi,5,10,"button",14,ie),c()),t&2){let e=l(2);d(),w(e.controls())}}function Oi(t,n){if(t&1&&m(0,Ii,3,0,"div",13),t&2){let e=l();f(e.controls().length>0?0:-1)}}var Y=(()=>{let n=class n{constructor(){this._controls=V([]),this.controls=_(()=>this._controls().toSorted((i,o)=>(i.weight??0)-(o.weight??0))),this.mostEmphasizedControlId=_(()=>this.controls().filter(i=>!i.mode||i.mode=="auto").at(-1)?.id),this.eventsMap={}}registerControl(i,o){return this._controls.update(a=>[...a,E({},i)]),this.eventsMap[i.id]=o,{update:a=>{this._controls.update(r=>r.map(g=>g.id==a.id?E(E({},g),a):g))},dispose:()=>{this._controls.update(a=>a.filter(r=>r.id!=i.id))}}}controlOnClick(i,o){this.eventsMap[i]?.click?.(o)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ae({token:n,factory:n.\u0275fac});let t=n;return t})(),Pi=(()=>{let n=class n{constructor(){this.overlayRef=u(ft),this.dataProvider=u(Pt),this.layoutService=u(Y,{self:!0}),this.configuration=this.dataProvider?.configuration,this.heading=_(()=>this.dataProvider.heading()),this.contentInputs=_(()=>this.dataProvider.contentInputs?.()??{}),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.dataProvider.onActionDrawerInit?.(this.overlayRef)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-action-drawer-layout"]],hostAttrs:[1,"pui-action-drawer-layout"],features:[ue([Y])],decls:10,vars:2,consts:[[1,"@container/layout"],[1,"pui-action-drawer-layout__heading"],[1,"pui-action-drawer-layout__content"],[3,"ngComponentOutlet","ngComponentOutletInputs"],[1,"pui-action-drawer-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],["puiFilledButton","","color","accent",3,"click","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],[3,"ngTemplateOutlet"]],template:function(o,a){o&1&&(s(0,"div",0)(1,"header",1),b(2,"pui-breadcrumbs"),s(3,"h1"),C(4),c()(),s(5,"div",2),m(6,zt,1,2,"ng-container",3),c(),s(7,"div",4),x(8,qt,5,10,"button",5,ie),c()()),o&2&&(d(4),y(a.heading()),d(2),f(a.configuration&&a.configuration.content?6:-1),d(2),w(a.controls()))},dependencies:[Ee,it,Ce,K,ke,Z,fe],encapsulation:2});let t=n;return t})(),Pt=new I("action drawer layout data provider"),un=(()=>{let n=class n{constructor(){this.overlay=u(Ct),this.injector=u(re)}open(i,o={width:"480px"}){return this.overlay.open(Pi,{positionStrategy:this.overlay.position().global().right("0").centerVertically(),maxWidth:"90vw",width:o.width??"480px",height:"100%",hasBackdrop:!0,backdropClass:"pui-action-drawer-backdrop",closeOnBackdropClick:!0,disposeOnNavigation:!0,closeOnEscapeKeydown:!0,animation:"slideInEnd",data:o.overlayData,parentInjector:re.create({providers:[{provide:mt,useValue:o.overlayData},{provide:Pt,useClass:i},...o.providers??[]],parent:o.parent??this.injector})})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=ae({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})(),Ri=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}],_n=[{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}],Li=new I("editable content data provider");function te(t,n,e,i){return Object.entries(t.properties).flatMap(([a,r])=>{if(r.type=="object")return te(r,n,`${e?`${e}.`:""}${a}`,`${i}${r.description??""} / `);if(r.type=="array"){let g=ye(n,`${e?`${e}.`:""}${a}`);return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:M(E({},r),{description:`${i}${r.description??""}`})},...Array.isArray(g)?g.flatMap((Ne,N)=>r.items.type=="object"?[...te(r.items,n,`${e?`${e}.`:""}${a}[${N}]`,`${i}${r.description??""} / #${N} / `)]:[{key:`${e?`${e}.`:""}${a}[${N}]`,fieldConfiguration:M(E({},r.items),{description:`${i}${r.description??""} / #${N}`})}]):[]]}return[{key:`${e?`${e}.`:""}${a}`,fieldConfiguration:M(E({},r),{description:i+r.description})}]})}var Rt=(()=>{let n=class n{constructor(){if(this.layoutService=u(Y,{optional:!0}),this.destroyRef=u(le),this.id=F.required(),this.label=F.required(),this.weight=F(0),this.icon=F(),this.iconTemplateRef=F(),this.disabled=F(!1,{transform:tt}),this.mode=F(void 0),this.click=Ze(),!this.layoutService)return;let i,o;U(()=>{let a=this.id(),r=this.label(),g=this.disabled(),Ne=this.icon(),N=this.iconTemplateRef(),Lt=this.mode(),Bt=this.weight(),Me={id:a,label:r,isDisabled:g,icon:Ne,iconTemplateRef:N,weight:Bt,mode:Lt};if(i)i(Me);else{let Ie=this.layoutService.registerControl(Me,{click:jt=>this.click.emit(jt)});i=Ie.update,o=Ie.dispose}}),this.destroyRef.onDestroy(()=>{o?.()})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275dir=Ue({type:n,selectors:[["pui-layout-control"]],hostAttrs:[1,"pui-layout-control"],inputs:{id:[1,"id"],label:[1,"label"],weight:[1,"weight"],icon:[1,"icon"],iconTemplateRef:[1,"iconTemplateRef"],disabled:[1,"disabled"],mode:[1,"mode"]},outputs:{click:"click"}});let t=n;return t})(),mn=(()=>{let n=class n{constructor(){this.route=u(W),this.dataProvider=u(Li),this.data=Q(()=>this.dataProvider.data()),this.fieldConfiguration=_(()=>this.dataProvider.fieldConfiguration()),this.flattenedControls=_(()=>{let i=this.fieldConfiguration(),o=this.data();return i?te(i,o,"",i.description?`${i.description} / `:""):[]}),this.controlsConfig=_(()=>this.dataProvider.controlsConfig?.()??Ri),this.isDirty=V(!1),this.isDisabled=F(!1,{alias:"disabled"}),this.disabled=Q(()=>this.isDisabled()),L([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([i,o])=>this.dataProvider.onParamsChange?.(i,o)),this.dataProvider.registerUpdateState?.(i=>{z(()=>{i?.isDirty===!1?this.isDirty.set(!1):i?.isDirty===!0&&this.isDirty.set(!0),i?.isDisabled===!1?this.disabled.set(!1):i?.isDisabled===!0&&this.disabled.set(!0)})}),U(()=>{let i=this.isDirty();z(()=>{this.dataProvider.onStateChange?.({isDirty:i})})})}onControlClick(i,o){this.dataProvider.onControlClick?.(i,o)}onValueChange(i){this.data.set(i),this.isDirty.set(!0),this.dataProvider.onValueChange?.(i)}onSubmit(i){i.preventDefault(),this.dataProvider.configuration?.isEnterToSubmit===!0&&this.dataProvider.onControlClick?.("save",i)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-editable-content"]],hostAttrs:[1,"pui-editable-content"],inputs:{isDisabled:[1,"disabled","isDisabled"]},decls:4,vars:1,consts:[[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"submit"],[3,"valueChange","value","disabled"],[3,"key","fieldType","label","fieldConfig"],["type","submit","hidden",""],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(o,a){o&1&&(s(0,"main"),m(1,Qt,5,2,"form"),c(),x(2,Jt,1,7,"pui-layout-control",0,ie)),o&2&&(d(),f(a.flattenedControls().length>0?1:-1),d(),w(a.controlsConfig()))},dependencies:[Ae,Ve,Fe,Rt],encapsulation:2});let t=n;return t})(),Bi=new I("peekable addon data provider"),ji=(()=>{let n=class n{constructor(){this.dataProvider=u(Bi,{optional:!0}),this.route=u(W),this.router=u(X),this.overlayKeyboardDispatcher=u(ut),this.routeToFullContent=_(()=>this.dataProvider?.routeToFullContent()??null),this._keydownEvents=new Oe,L([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([i,o])=>this.dataProvider?.onParamsChange?.(i,o)),this.overlayKeyboardDispatcher.add(this),u(le).onDestroy(()=>{this.overlayKeyboardDispatcher.ngOnDestroy(),this._keydownEvents.complete()}),this._keydownEvents.pipe(k()).subscribe(i=>{i.key=="Escape"&&this.onEscapePress(i)})}onEscapePress(i){this.route.snapshot.parent?.children.some(o=>o.outlet=="peek")&&this.router.navigate([{outlets:{peek:[]}}],{relativeTo:this.route.parent})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-peekable-addon"]],hostAttrs:[1,"pui-peekable-addon"],decls:8,vars:9,consts:[[1,"pui-peekable-addon__nav"],["puiBaseButton","","puiTooltip","View in full",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"spacer"],["puiBaseButton","","puiTooltip","Close peek window",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"pui-peekable-addon__content"],["name","peek"]],template:function(o,a){o&1&&(s(0,"nav",0),m(1,ti,3,1,"a",1),b(2,"div",2),s(3,"a",3)(4,"i"),C(5,"close"),c()()(),s(6,"main",4),b(7,"router-outlet",5),c()),o&2&&(d(),f(a.routeToFullContent()?1:-1),d(2),p("routerLink",S(7,ei,S(5,Zt,S(3,Xt,j(2,Ot))))))},dependencies:[J,Te,K,Se,Z],encapsulation:2});let t=n;return t})(),fn=(()=>{let n=class n{constructor(){this.router=u(X,{optional:!0}),this.isSidenavVisible=V(!1),this.router?.events.pipe(ne(i=>i instanceof ve),oe(50),k()).subscribe(()=>{this.isSidenavVisible.set(!1)})}toggleSidenav(i){this.isSidenavVisible.update(o=>i??!o)}onContentClick(i){i.target==i.currentTarget&&this.isSidenavVisible.set(!1)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-root-sidenav"]],ngContentSelectors:ni,decls:12,vars:1,consts:[[1,"pui-root-sidenav"],[1,"pui-root-sidenav__header"],["puiBaseButton","",1,"pui-root-sidenav__header__hamburger",3,"click"],[1,"spacer"],[1,"pui-root-sidenav__nav-wrapper"],[1,"pui-root-sidenav__content-wrapper"],[1,"pui-root-sidenav__content",3,"click"]],template:function(o,a){o&1&&(We(ii),s(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return a.toggleSidenav()}),s(3,"i"),C(4,"menu"),c()(),b(5,"div",3),de(6),c(),s(7,"div",4),de(8,1),c()(),s(9,"div",5)(10,"div",6),h("click",function(g){return a.onContentClick(g)}),b(11,"router-outlet"),c()()),o&2&&(d(10),Ge("data-sidenav",a.isSidenavVisible()?"visible":"hidden"))},dependencies:[K,Se,J],encapsulation:2});let t=n;return t})();function Cn(t,n,e=!1){let i=Object.values(t??{}).some(a=>typeof a=="string"?!!a:a!=null),o=Object.keys(t??{});return a=>{if(!i)return!0;if(e){for(let r of o)if(r in n&&n[r]!=null){if(typeof t[r]=="string"&&t[r].trim()=="")continue;if(!n[r](a,r,t[r],t))return!1}return!0}else{for(let r of o)if(r in n&&n[r]!=null){if(typeof t[r]=="string"&&t[r].trim()=="")continue;if(n[r](a,r,t[r],t))return!0}return!1}}}function hn(t){let n=t.find(i=>i.isSortedAsc||i.isSortedDesc);if(!n)return()=>0;let e=n.isSortedDesc?-1:1;return n.fieldConfiguration?.type=="date-time"?(i,o)=>{let a=P(i,n),r=P(o,n);return a==null&&r==null?0:a instanceof Date&&r instanceof Date?(a.getTime()-r.getTime())*e:a instanceof Date?1*e:-1*e}:(i,o)=>{switch(n.key){default:return P(i,n)>P(o,n)?e:P(i,n)<P(o,n)?-1*e:0}}}function P(t,n){return n.path?ye(t,n.path):t[n.key]}var Hi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"},{id:"add",label:"Add new",icon:"add"}],zi=new I("table content data provider"),bn=(()=>{let n=class n{constructor(){this.route=u(W),this.dataProvider=u(zi),this.isBrowser=nt(u(ze)),this.ROUTE_TO_DETAIL=Symbol(),this.configuration=this.dataProvider.configuration,this.isLoading=_(()=>this.dataProvider.isLoading?.()??!1),this.data=_(()=>{let i=this.dataProvider.data(),o=this.dataProvider.routeToDetail;return i?.map(a=>Object.assign({},a,{[this.ROUTE_TO_DETAIL]:o?.bind(this.dataProvider)?.(a)}))}),this.columnConfig=_(()=>this.dataProvider.columnsConfig()),this.columnsToDisplay=_(()=>this.dataProvider.columnsToDisplay()),this.selectionMode=_(()=>this.dataProvider.selectionMode?.()??null),this.selectedItems=_(()=>this.dataProvider.selectedItems?.()??new Set),this.controlsConfig=_(()=>this.dataProvider.controlsConfig?.()??Hi),this.flattenFilterDef=_(()=>{let i=this.dataProvider.filterConfig?.();return i?te(i,{},"",i.description?`${i.description} / `:""):[]}),this.filterValue=Q(()=>this.dataProvider.filterValue?.()),this.isInitial=xe(Re(100).pipe(R(()=>!1)),{initialValue:!0}),this.scrolledToTop=V(!1),this.scrolledToBottom=V(!1),this.cmpFn=this.dataProvider.compareFn??((i,o)=>i==o),L([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([i,o])=>this.dataProvider.onParamsChange?.(i,o)),this.dataProvider.onScrolledToTop&&U(()=>{this.isLoading()||this.scrolledToTop()&&z(()=>this.dataProvider.onScrolledToTop())}),this.dataProvider.onScrolledToBottom&&U(()=>{this.isLoading()||this.scrolledToBottom()&&z(()=>this.dataProvider.onScrolledToBottom())}),De(this.data).pipe(oe(100),k()).subscribe(()=>{this.scrolledToTop()&&this.dataProvider.onScrolledToTop?.(),this.scrolledToBottom()&&this.dataProvider.onScrolledToBottom?.()})}ngOnInit(){this.dataProvider?.onInit?.()}ngOnDestroy(){this.dataProvider?.onDestroy?.()}onRowClick(i){this.dataProvider.onTableRowClick?.(i)}onHeaderClick(i,o){this.dataProvider.onHeaderCellClick?.(i,o)}onControlClick(i,o){this.dataProvider.onControlClick?.(i,o)}onFilterValueChange(i){this.filterValue.set(i),this.dataProvider.onFilterChange?.(i)}onScrolled(i,o){i=="top"?this.scrolledToTop.set(!o):this.scrolledToBottom.set(!o)}trackingFn(i,o){return i}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-table-content"]],hostAttrs:[1,"pui-table-content"],decls:8,vars:2,consts:[[3,"value"],[1,"pui-table-content__content-wrapper"],[3,"id","itemHeight","columns","columnWidths","selectionMode"],[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"valueChange","value"],[3,"key","fieldType","label","fieldConfig","isNullable"],["puiContentVisibilityDetector","",3,"skippedChanged"],[3,"centerAligned","rightAligned","sortedAsc","sortedDesc","cellClick",4,"puiTableHeaderCellDef"],[3,"centerAligned","rightAligned",4,"puiTableCellDef"],[3,"cellClick","centerAligned","rightAligned","sortedAsc","sortedDesc"],[3,"centerAligned","rightAligned"],[1,"pui-table-cell__boolean-content",3,"pui-table-cell__boolean-content--true"],[3,"mode","format","date"],[1,"pui-table-cell__boolean-content"],["itemSize","48","scrollWindow","",3,"height"],["itemSize","48","scrollWindow",""],["puiHoverable","",3,"item","route","height","selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["puiHoverable","",3,"click","item","route","selected"],["puiHoverable","",3,"item","route","selected"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(o,a){if(o&1&&(s(0,"main")(1,"div"),m(2,ai,3,1,"pui-fieldset",0),s(3,"div",1),m(4,ri,1,2,"pui-loading-panel")(5,Ti,9,9,"pui-table",2),c()()(),x(6,yi,1,7,"pui-layout-control",3,ie)),o&2){let r=a.flattenFilterDef();d(2),f(r.length>0?2:-1),d(2),f(a.isLoading()?4:5),d(2),w(a.controlsConfig())}},dependencies:[Mt,kt,Nt,Et,$t,At,Ft,wt,Vt,St,ht,Rt,bt,pt,lt,dt,st,ct,Ae,Ve,Fe,gt,_t,rt,at],encapsulation:2,data:{animation:[he("loading",[q(":enter",ge(Tt)),q(":leave",ge(vt))])]}});let t=n;return t})();function gn(t,n,e=!0){return t.map(i=>i.key==n?M(E({},i),{isSortedAsc:!i.isSortedAsc&&!i.isSortedDesc?e:!!i.isSortedDesc,isSortedDesc:!i.isSortedAsc&&!i.isSortedDesc?!e:!!i.isSortedAsc}):M(E({},i),{isSortedAsc:!1,isSortedDesc:!1}))}var Ui=new I("vertical layout data provider"),vn=(()=>{let n=class n{constructor(){this.dataProvider=u(Ui),this.layoutService=u(Y,{self:!0}),this.router=u(X),this.route=u(W),this.document=u(He),this.containerDiv=et("container",{read:se}),this.activeTab=V(null),this.heading=_(()=>this.dataProvider.heading()),this.tabs=_(()=>this.dataProvider.tabs()),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.scrollState=xe(De(this.containerDiv).pipe(R(i=>i?.nativeElement?.closest(".pui-peekable-addon")??this.document),je(i=>Pe(i,"scroll")),R(i=>i.currentTarget instanceof Document?i.currentTarget.scrollingElement?.scrollTop:i.currentTarget.scrollTop),we(),Le(),R(([i,o])=>({direction:o-i>0?"down":"up",currentTop:o})),k())),L([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([i,o])=>this.dataProvider.onParamsChange?.(i,o)),this.router.events.pipe(ne(i=>i instanceof ve||i instanceof ot),Be(this.router.lastSuccessfulNavigation?.finalUrl),we(),k()).subscribe(()=>{let i=this.tabs();if(!i)return;let o=i.find(r=>{let g=this.router.createUrlTree(r.route,{relativeTo:this.route});return this.router.isActive(g,{paths:"subset",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})});if(!o)return;this.activeTab.set(Object.assign(o.label,{[Symbol()]:null}));let a=this.route.routeConfig?.children?.find(r=>r.path=="**");a&&(a.redirectTo=o.route.map(r=>String(r).replaceAll("..%2F","").replaceAll(".%2F","")).join("/"))})}onTabChanged(i){let o=this.tabs()?.find(a=>a.label==i);o&&this.router.navigate(o.route,{relativeTo:this.route})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=A({type:n,selectors:[["pui-vertical-layout"]],viewQuery:function(o,a){o&1&&Ke(a.containerDiv,Di,5,se),o&2&&Ye()},hostAttrs:[1,"pui-vertical-layout"],features:[ue([Y])],decls:14,vars:3,consts:[["container",""],["controlsTemplate",""],[1,"@container/layout"],[1,"pui-vertical-layout__heading"],[1,"pui-vertical-layout__navigation"],[1,"pui-vertical-layout__heading","pui-vertical-layout__heading--floating"],[1,"pui-vertical-layout__controls"],[3,"ngTemplateOutlet"],[1,"pui-vertical-layout__tabs",3,"currentTab"],[1,"spacer"],[1,"pui-vertical-layout__tabs",3,"tabChange","currentTab"],[3,"routerLink"],[3,"routerLink",4,"puiTab","puiTabHidden"],[1,"pui-vertical-layout__toolbar"],["puiFilledButton","",3,"color","ngClass","puiTooltip","disabled","hoverableEnabled"],["puiFilledButton","",3,"click","color","ngClass","puiTooltip","disabled","hoverableEnabled"]],template:function(o,a){if(o&1&&(s(0,"div",2,0)(2,"div")(3,"header",3)(4,"div",4),b(5,"pui-breadcrumbs"),s(6,"h1"),C(7),c()()(),m(8,Si,6,3,"header",5),m(9,Ai,4,3,"header",6),b(10,"router-outlet")(11,"pui-peekable-addon"),c()(),B(12,Oi,1,1,"ng-template",null,1,Xe)),o&2){let r;d(7),y(a.heading()),d(),f(((r=a.scrollState())==null?null:r.direction)=="up"&&((r=a.scrollState())==null?null:r.currentTop)>240?8:-1),d(),f(a.tabs().length>0||a.controls().length>0?9:-1)}},dependencies:[J,Ee,K,ke,xt,Dt,yt,Te,Ce,ji,Z,fe],encapsulation:2,data:{animation:[he("floatingHeader",[q(":enter",[G({transform:"translate(0, -100%)"}),be("150ms ease-in-out",G({transform:"translate(0, 0)"}))]),q(":leave",[G({transform:"translate(0, 0)"}),be("150ms ease-in-out",G({transform:"translate(0, -100%)"}))])])]}});let t=n;return t})();export{Pt as a,un as b,Ri as c,_n as d,Li as e,Rt as f,mn as g,Bi as h,fn as i,Cn as j,hn as k,Hi as l,zi as m,bn as n,gn as o,Ui as p,vn as q};
