import{a as g}from"./chunk-EFAB4OXU.js";import{B as y,H as S,L as m,Qb as k,dc as w,e as i,f as h,h as d,ha as c,xb as j,yc as B,zc as l}from"./chunk-GGV4OHPW.js";import{b as f}from"./chunk-CZC3PYQ3.js";import{a as u}from"./chunk-EQDQRRRY.js";var N=(()=>{let r=class r{constructor(){this.data=m(g),this.router=m(j),this.mainListFilter$$=c({}),this.mainListSort$$=c({}),this.create=t=>{let e=new Date;return i(this.data.armorSetBonuses.add(u({id:k(),createdAt:e,updatedAt:e,effects:[]},t)))},this.update=(t,e)=>i(this.data.armorSetBonuses.update(t,u({updatedAt:new Date},e))),this.remove=t=>i(this.data.armorSetBonuses.delete(t))}list(t,e){return i(f(()=>{if(this.data.isServer)return[];let n;if(t?.name!=null){let s=t.name.toLowerCase();n=this.data.armorSetBonuses.filter(o=>!!(o.name?.en?.toLowerCase()?.includes(s)||o.name?.jp?.toLowerCase()?.includes(s)))}else t?.skillId!=null?n=this.data.armorSetBonuses.where("skillId").equals(t.skillId):n=this.data.armorSetBonuses.toCollection();if(e&&Object.values(e).filter(s=>s=="asc"||s=="desc").length>0){let s=Object.entries(e).filter(([o,p])=>p=="asc"||p=="desc")[0][0];return e[s]==="desc"?n.reverse().sortBy(s):n.sortBy(s)}else return n.toArray()}))}count(){return this.data.isServer?h(0):i(this.data.armorSetBonuses.count())}getOne(t){return i(f(()=>{if(!this.data.isServer)return this.data.armorSetBonuses.get(t)}))}getSuggestions(t){return t.pipe(y(e=>this.list().pipe(d(n=>new w(n,{includeScore:!0,includeMatches:!0,keys:["name.jp","name.en"]}).search(e)))),d(e=>e.map(({item:n,score:s,matches:o})=>({title:I(n,o),category:"Armor Set Bonus",score:s,onClick:()=>this.router.navigate(["mhw","armor-set-bonus",n.id])}))))}};r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=S({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();function I(a,r=[]){let v=r.some(e=>e.key==="name.jp")&&a.name?.jp?l(a.name.jp,r.find(e=>e.key==="name.jp")?.indices):void 0,t=r.some(e=>e.key==="name.en")&&a.name?.en?l(a.name.en,r.find(e=>e.key==="name.en")?.indices):void 0;return[v,t].filter(B).join(" / ")}export{N as a};
