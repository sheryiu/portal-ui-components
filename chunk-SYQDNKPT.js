import{$a as bt,A as me,Ca as Y,Da as ge,Ga as ye,I as fe,Ia as xe,Ja as De,L as S,M as He,N as Ce,Oa as ct,P as he,Pa as dt,Q as Ue,Qa as pt,R as Ge,Ra as ut,S as We,T as qe,U as Ye,V as be,Wa as _t,Xa as mt,Ya as ft,Za as Ct,_ as Ke,_a as ht,ab as vt,b as se,ba as Je,bb as Tt,c as Me,ca as Qe,cb as gt,d as ce,db as yt,eb as xt,fb as Dt,gb as wt,h as je,ha as Xe,la as Ze,ma as et,na as tt,o as ze,oa as it,pa as nt,qa as ot,r as de,ra as rt,s as pe,sa as at,ta as lt,ua as st,va as ve,w as ue,x as z,xa as Te,y as q,z as _e,za as H}from"./chunk-MI5UECCZ.js";import{$ as ee,Ab as x,Bb as D,C as G,Cb as s,Da as L,Db as d,Eb as h,Fb as W,Gb as y,H as Z,Ha as Pe,Jb as b,Kb as l,Lb as Be,Mb as ne,Ra as c,V as Ve,Vb as C,Wb as g,Zb as oe,ac as re,bc as M,ca as R,cc as F,dc as ae,fa as u,fb as E,hb as Ie,hc as V,jc as j,kc as le,mb as m,oa as v,pa as T,q as X,r as N,sa as te,sc as Ne,ta as $e,ub as Re,uc as _,vb as p,wb as ie,wc as O,xb as Le,xc as $,ya as Ae,yb as f,z as Ee,za as k,zb as Oe}from"./chunk-O5WS6LKQ.js";import{a as w,b as I}from"./chunk-EQDQRRRY.js";var Q=(t,o)=>o.id,At=(t,o)=>({"pui-action-drawer-layout__toolbar__most-emphasized":t,"pui-action-drawer-layout__toolbar__normal":o});function Pt(t,o){if(t&1&&W(0,3),t&2){let e=l();p("ngComponentOutlet",e.configuration.content)("ngComponentOutletInputs",e.contentInputs())}}function It(t,o){if(t&1&&(s(0,"i"),C(1),d()),t&2){let e=l().$implicit;c(),g(e.icon)}}function Rt(t,o){if(t&1&&W(0,7),t&2){let e=l().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Lt(t,o){if(t&1){let e=y();s(0,"button",6),b("click",function(n){let r=v(e).$implicit,a=l();return T(a.layoutService.controlOnClick(r.id,n))}),m(1,It,2,1,"i")(2,Rt,1,1,"ng-container",7),s(3,"span"),C(4),d()()}if(t&2){let e=o.$implicit,i=l();p("ngClass",ae(7,At,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled)("puiTooltip",e.label)("puiTooltipPosition","top"),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),g(e.label)}}var we=(t,o)=>o.key,K=t=>({enum:t}),St=()=>({});function Ot(t,o){if(t&1&&h(0,"pui-field-def",2),t&2){let e,i=o.$implicit;p("key",i.key)("fieldType",i.fieldConfiguration.type)("label",(e=i.fieldConfiguration.description)!==null&&e!==void 0?e:i.key)("fieldConfig",i.fieldConfiguration.type=="string"?F(4,K,i.fieldConfiguration.enum):i.fieldConfiguration.type=="number"?F(6,K,i.fieldConfiguration.enum):M(8,St))}}function Bt(t,o){if(t&1&&(s(0,"form")(1,"pui-fieldset",1),x(2,Ot,1,9,"pui-field-def",2,we),d()()),t&2){let e=l();c(),p("formControl",e.formControl),c(),D(e.flattenedControls())}}function Nt(t,o){if(t&1){let e=y();s(0,"pui-layout-control",3),b("click",function(n){let r=v(e).$implicit,a=l();return T(a.onControlClick(r.id,n))}),d()}if(t&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var kt=()=>[],Mt=t=>({peek:t}),jt=t=>({outlets:t}),zt=t=>[t];function Ht(t,o){if(t&1&&(s(0,"a",1)(1,"i"),C(2,"open_in_full"),d()()),t&2){let e=l();p("routerLink",e.routeToFullContent())}}var Ut=[[["",8,"pui-root-sidenav__header__logo"]],[["",8,"pui-root-sidenav__nav"]]],Gt=[".pui-root-sidenav__header__logo",".pui-root-sidenav__nav"];function Wt(t,o){if(t&1&&h(0,"pui-field-def",5),t&2){let e,i=o.$implicit;p("key",i.key)("fieldType",i.fieldConfiguration.type)("label",(e=i.fieldConfiguration.description)!==null&&e!==void 0?e:i.key)("fieldConfig",i.fieldConfiguration.type=="string"?F(5,K,i.fieldConfiguration.enum):i.fieldConfiguration.type=="number"?F(7,K,i.fieldConfiguration.enum):M(9,St))("isNullable",!1)}}function qt(t,o){if(t&1){let e=y();s(0,"pui-fieldset",4),b("valueChange",function(n){v(e);let r=l();return T(r.onFilterValueChange(n))}),x(1,Wt,1,10,"pui-field-def",5,we),d()}if(t&2){let e=l();p("formControl",e.filterFormControl),c(),D(e.flattenFilterDef())}}function Yt(t,o){if(t&1&&h(0,"pui-loading-panel"),t&2){let e=l();p("@loading",void 0)("@.disabled",e.isInitial())}}function Kt(t,o){if(t&1){let e=y();s(0,"pui-table-header-cell",9),b("cellClick",function(n){v(e);let r=l().$implicit,a=l(2);return T(a.onHeaderClick(r.key,n))}),C(1),d()}if(t&2){let e,i,n,r=l().$implicit;p("rightAligned",(e=r.isAlignEnd)!==null&&e!==void 0?e:!1)("sortedAsc",(i=r.isSortedAsc)!==null&&i!==void 0?i:!1)("sortedDesc",(n=r.isSortedDesc)!==null&&n!==void 0?n:!1),c(),g(r.label)}}function Jt(t,o){t&1&&C(0," \xA0ago ")}function Qt(t,o){if(t&1&&(h(0,"pui-time-display",12),V(1,"lodashGet"),m(2,Jt,1,0)),t&2){let e,i=l(2).$implicit,n=l().$implicit;p("mode",n.fieldConfiguration.format=="timeAgo"?"timeAgo":"normal")("format",n.fieldConfiguration.format)("date",j(1,4,i,(e=n.path)!==null&&e!==void 0?e:n.key)),c(2),f(n.fieldConfiguration.format=="timeAgo"?2:-1)}}function Xt(t,o){if(t&1&&(oe(0),V(1,"lodashGet"),s(2,"i",13),C(3),d()),t&2){let e,i=l(2).$implicit,n=l().$implicit,r=j(1,3,i,(e=n.path)!==null&&e!==void 0?e:n.key);c(2),Le("pui-table-cell__boolean-content--true",r===!0),c(),g(r===!0?"check":r===!1?"close":"")}}function Zt(t,o){if(t&1&&(s(0,"span"),C(1),V(2,"lodashGet"),d()),t&2){let e,i=l(2).$implicit,n=l().$implicit;c(),g(j(2,1,i,(e=n.path)!==null&&e!==void 0?e:n.key))}}function ei(t,o){if(t&1&&m(0,Qt,3,7)(1,Xt,4,6,"i",11)(2,Zt,3,4,"span"),t&2){let e,i=l(2).$implicit;f((e=i.fieldConfiguration.type)==="date-time"?0:e==="boolean"?1:2)}}function ti(t,o){if(t&1&&(s(0,"span"),C(1),V(2,"lodashGet"),d()),t&2){let e,i=l().$implicit,n=l().$implicit;c(),g(j(2,1,i,(e=n.path)!==null&&e!==void 0?e:n.key))}}function ii(t,o){if(t&1&&(s(0,"pui-table-cell",10),m(1,ei,3,1)(2,ti,3,4,"span"),d()),t&2){let e,i=l().$implicit;p("rightAligned",(e=i.isAlignEnd)!==null&&e!==void 0?e:!1),c(),f(i.fieldConfiguration?1:2)}}function ni(t,o){if(t&1&&m(0,Kt,2,4,"pui-table-header-cell",7)(1,ii,3,2,"pui-table-cell",8),t&2){let e=o.$implicit;p("puiTableHeaderCellDef",e.key),c(),p("puiTableCellDef",e.key)}}function oi(t,o){if(t&1){let e=y();s(0,"pui-table-row",17),V(1,"isInSet"),b("click",function(){let n=v(e).$implicit,r=l(4);return T(r.onRowClick(n))}),d()}if(t&2){let e=o.$implicit,i=l(4);ie("height",48,"px"),p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",le(1,5,e,i.selectedItems(),i.cmpFn))}}function ri(t,o){if(t&1&&(s(0,"cdk-virtual-scroll-viewport",15),m(1,oi,2,9,"pui-table-row",16),d()),t&2){let e=l(3);ie("height",e.data().length*48,"px"),c(),p("cdkVirtualForOf",e.data())("cdkVirtualForTrackBy",e.trackingFn)("cdkVirtualForTemplateCacheSize",0)}}function ai(t,o){if(t&1&&m(0,ri,2,5,"cdk-virtual-scroll-viewport",14),t&2){let e=l(2);f(e.isBrowser?0:-1)}}function li(t,o){if(t&1){let e=y();s(0,"pui-table-row",17),V(1,"isInSet"),b("click",function(){let n=v(e).$implicit,r=l(3);return T(r.onRowClick(n))}),d()}if(t&2){let e=o.$implicit,i=l(3);p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",le(1,3,e,i.selectedItems(),i.cmpFn))}}function si(t,o){if(t&1&&x(0,li,2,7,"pui-table-row",18,Oe),t&2){let e=l(2);D(e.data())}}function ci(t,o){if(t&1){let e=y();s(0,"pui-table",2),x(1,ni,2,2,null,null,we),s(3,"pui-table-body")(4,"div",6),b("skippedChanged",function(n){v(e);let r=l();return T(r.scrolledToTop.set(!n))}),d(),h(5,"pui-table-header-row"),m(6,ai,1,1)(7,si,2,0),s(8,"div",6),b("skippedChanged",function(n){v(e);let r=l();return T(r.scrolledToBottom.set(!n))}),d()()()}if(t&2){let e=l();p("@loading",void 0)("@.disabled",e.isInitial())("id",e.configuration==null?null:e.configuration.id)("itemHeight",48)("columns",e.columnsToDisplay())("columnWidths",M(8,kt))("selectionMode",e.selectionMode()),c(),D(e.columnConfig()),c(5),f(e.configuration!=null&&e.configuration.useVirtualScroll?6:7)}}function di(t,o){if(t&1){let e=y();s(0,"pui-layout-control",19),b("click",function(n){let r=v(e).$implicit,a=l();return T(a.onControlClick(r.id,n))}),d()}if(t&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var pi=(t,o)=>o.label,ui=(t,o)=>({"pui-vertical-layout__toolbar__most-emphasized":t,"pui-vertical-layout__toolbar__normal":o});function _i(t,o){if(t&1&&(s(0,"a",5),C(1),d()),t&2){let e=l().$implicit;p("routerLink",e.route),c(),g(e.label)}}function mi(t,o){if(t&1&&m(0,_i,2,2,"a",6),t&2){let e=o.$implicit;p("puiTab",e.label)}}function fi(t,o){if(t&1){let e=y();s(0,"pui-tab-bar",4),b("tabChange",function(n){v(e);let r=l(2);return T(r.onTabChanged(n))}),x(1,mi,1,1,"a",5,pi),d()}if(t&2){let e=l(2);p("currentTab",e.activeTab()),c(),D(e.tabs())}}function Ci(t,o){if(t&1&&(s(0,"i"),C(1),d()),t&2){let e=l().$implicit;c(),g(e.icon)}}function hi(t,o){if(t&1&&W(0,11),t&2){let e=l().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function bi(t,o){if(t&1){let e=y();s(0,"button",10),b("click",function(n){let r=v(e).$implicit,a=l(3);return T(a.layoutService.controlOnClick(r.id,n))}),m(1,Ci,2,1,"i")(2,hi,1,1,"ng-container",11),s(3,"span"),C(4),d()()}if(t&2){let e=o.$implicit,i=l(3);p("ngClass",ae(6,ui,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("puiTooltip",e.label)("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled),c(),f(e.icon?1:e.iconTemplateRef?2:-1),c(3),g(e.label)}}function vi(t,o){if(t&1&&(h(0,"div",7),s(1,"div",8),x(2,bi,5,9,"button",9,Q),d()),t&2){let e=l(2);c(2),D(e.controls())}}function Ti(t,o){if(t&1&&(s(0,"header",2),m(1,fi,3,1,"pui-tab-bar",3)(2,vi,4,0),d()),t&2){let e=l();c(),f(e.tabs().length>0?1:-1),c(),f(e.controls().length>0?2:-1)}}var U=(()=>{class t{constructor(){this._controls=L([]),this.controls=_(()=>this._controls().toSorted((e,i)=>(e.weight??0)-(i.weight??0))),this.mostEmphasizedControlId=_(()=>this.controls().filter(e=>!e.mode||e.mode=="auto").at(-1)?.id),this.eventsMap={}}registerControl(e,i){return this._controls.update(n=>[...n,w({},e)]),this.eventsMap[e.id]=i,{update:n=>{this._controls.update(r=>r.map(a=>a.id==n.id?w(w({},a),n):a))},dispose:()=>{this._controls.update(n=>n.filter(r=>r.id!=e.id))}}}controlOnClick(e,i){this.eventsMap[e]?.click?.(i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})(),gi=(()=>{class t{constructor(){this.overlayRef=u(at),this.dataProvider=u(Ft),this.layoutService=u(U,{self:!0}),this.configuration=this.dataProvider?.configuration,this.heading=_(()=>this.dataProvider.heading()),this.contentInputs=_(()=>this.dataProvider.contentInputs?.()??{}),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.dataProvider.onActionDrawerInit?.(this.overlayRef)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-action-drawer-layout"]],hostAttrs:[1,"pui-action-drawer-layout"],features:[re([U])],decls:10,vars:2,consts:[[1,"@container/layout"],[1,"pui-action-drawer-layout__heading"],[1,"pui-action-drawer-layout__content"],[3,"ngComponentOutlet","ngComponentOutletInputs"],[1,"pui-action-drawer-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],["puiFilledButton","","color","accent",3,"click","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],[3,"ngTemplateOutlet"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"header",1),h(2,"pui-breadcrumbs"),s(3,"h1"),C(4),d()(),s(5,"div",2),m(6,Pt,1,2,"ng-container",3),d(),s(7,"div",4),x(8,Lt,5,10,"button",5,Q),d()()),i&2&&(c(4),g(n.heading()),c(2),f(n.configuration&&n.configuration.content?6:-1),c(2),D(n.controls()))},dependencies:[ge,Me,ce,H,Te,Y,se],encapsulation:2})}}return t})(),Ft=new R("action drawer layout data provider"),Ki=(()=>{class t{constructor(){this.overlay=u(lt),this.injector=u(te)}open(e,i={width:"480px"}){return this.overlay.open(gi,{positionStrategy:this.overlay.position().global().right("0").centerVertically(),maxWidth:"90vw",width:i.width??"480px",height:"100%",hasBackdrop:!0,backdropClass:"pui-action-drawer-backdrop",closeOnBackdropClick:!0,disposeOnNavigation:!0,closeOnEscapeKeydown:!0,animation:"slideInEnd",data:i.overlayData,parentInjector:te.create({providers:[{provide:rt,useValue:i.overlayData},{provide:Ft,useClass:e},...i.providers??[]],parent:i.parent??this.injector})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),yi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}],Ji=[{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}],xi=new R("editable content data provider");function J(t,o,e,i){return Object.entries(t.properties).flatMap(([r,a])=>{if(a.type=="object")return J(a,o,`${e?`${e}.`:""}${r}`,`${i}${a.description??""} / `);if(a.type=="array"){let A=fe(o,`${e?`${e}.`:""}${r}`);return[{key:`${e?`${e}.`:""}${r}`,fieldConfiguration:I(w({},a),{description:`${i}${a.description??""}`})},...Array.isArray(A)?A.flatMap((Se,P)=>a.items.type=="object"?[...J(a.items,o,`${e?`${e}.`:""}${r}[${P}]`,`${i}${a.description??""} / #${P} / `)]:[{key:`${e?`${e}.`:""}${r}[${P}]`,fieldConfiguration:I(w({},a.items),{description:`${i}${a.description??""} / #${P}`})}]):[]]}return[{key:`${e?`${e}.`:""}${r}`,fieldConfiguration:I(w({},a),{description:i+a.description})}]})}var Et=(()=>{class t{constructor(){if(this.layoutService=u(U,{optional:!0}),this.destroyRef=u($e),this.id=k.required(),this.label=k.required(),this.weight=k(0),this.icon=k(),this.iconTemplateRef=k(),this.disabled=k(!1,{transform:Ne}),this.mode=k(void 0),this.click=Ae(),!this.layoutService)return;let e,i;$(()=>{let n=this.id(),r=this.label(),a=this.disabled(),A=this.icon(),Se=this.iconTemplateRef(),P=this.mode(),Vt=this.weight(),ke={id:n,label:r,isDisabled:a,icon:A,iconTemplateRef:Se,weight:Vt,mode:P};if(e)e(ke);else{let Fe=this.layoutService.registerControl(ke,{click:$t=>this.click.emit($t)});e=Fe.update,i=Fe.dispose}}),this.destroyRef.onDestroy(()=>{i?.()})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=Ie({type:t,selectors:[["pui-layout-control"]],inputs:{id:[1,"id"],label:[1,"label"],weight:[1,"weight"],icon:[1,"icon"],iconTemplateRef:[1,"iconTemplateRef"],disabled:[1,"disabled"],mode:[1,"mode"]},outputs:{click:"click"}})}}return t})(),Qi=(()=>{class t{constructor(){this.route=u(z),this.dataProvider=u(xi),this.formControl=new qe(void 0),this.data=_(()=>this.dataProvider.data()),this.fieldConfiguration=_(()=>this.dataProvider.fieldConfiguration()),this.formControlValue=Ce(this.formControl.events.pipe(G(e=>e instanceof Ge),X(e=>e.value))),this.flattenedControls=_(()=>{let e=this.fieldConfiguration(),i=this.formControlValue();return e?J(e,i,"",e.description?`${e.description} / `:""):[]}),this.controlsConfig=_(()=>this.dataProvider.controlsConfig?.()??yi),$(()=>{let e=this.data();O(()=>this.formControl.setValue(e))}),$(()=>{let e=this.formControlValue();O(()=>this.dataProvider.onValueChange?.(e))}),N([this.route.params,this.route.queryParams]).pipe(S()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.formControl.events.pipe(S()).subscribe(()=>{this.dataProvider.onStateChange?.({isValid:this.formControl.valid,isDisabled:this.formControl.disabled,isDirty:this.formControl.dirty})}),this.dataProvider.registerUpdateState?.(e=>{O(()=>{e?.isDirty===!1?this.formControl.markAsPristine():e?.isDirty===!0&&this.formControl.markAsDirty(),e?.isDisabled===!1?this.formControl.enable():e?.isDisabled===!0&&this.formControl.disable()})})}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-editable-content"]],hostAttrs:[1,"pui-editable-content"],decls:4,vars:1,consts:[[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"formControl"],[3,"key","fieldType","label","fieldConfig"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,n){i&1&&(s(0,"main"),m(1,Bt,4,1,"form"),d(),x(2,Nt,1,7,"pui-layout-control",0,Q)),i&2&&(c(),f(n.flattenedControls().length>0?1:-1),c(),D(n.controlsConfig()))},dependencies:[De,xe,ye,Ye,he,Ue,We,be,Et],encapsulation:2})}}return t})(),Di=new R("peekable addon data provider"),wi=(()=>{class t{constructor(){this.dataProvider=u(Di,{optional:!0}),this.route=u(z),this.routeToFullContent=_(()=>this.dataProvider?.routeToFullContent()??null),N([this.route.params,this.route.queryParams]).pipe(S()).subscribe(([e,i])=>this.dataProvider?.onParamsChange?.(e,i))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-peekable-addon"]],hostAttrs:[1,"pui-peekable-addon"],decls:8,vars:9,consts:[[1,"pui-peekable-addon__nav"],["puiBaseButton","","puiTooltip","View in full",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"spacer"],["puiBaseButton","","puiTooltip","Close peek window",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"pui-peekable-addon__content"],["name","peek"]],template:function(i,n){i&1&&(s(0,"nav",0),m(1,Ht,3,1,"a",1),h(2,"div",2),s(3,"a",3)(4,"i"),C(5,"close"),d()()(),s(6,"main",4),h(7,"router-outlet",5),d()),i&2&&(c(),f(n.routeToFullContent()?1:-1),c(2),p("routerLink",F(7,zt,F(5,jt,F(3,Mt,M(2,kt))))))},dependencies:[q,me,H,ve,Y],encapsulation:2})}}return t})(),Xi=(()=>{class t{constructor(){this.router=u(_e,{optional:!0}),this.isSidenavVisible=L(!1),this.router?.events.pipe(G(e=>e instanceof ue),Z(150),S()).subscribe(()=>{this.isSidenavVisible.set(!1)})}toggleSidenav(e){this.isSidenavVisible.update(i=>e??!i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-root-sidenav"]],ngContentSelectors:Gt,decls:12,vars:1,consts:[[1,"pui-root-sidenav"],[1,"pui-root-sidenav__header"],["puiBaseButton","",1,"pui-root-sidenav__header__hamburger",3,"click"],[1,"spacer"],[1,"pui-root-sidenav__nav-wrapper"],[1,"pui-root-sidenav__content-wrapper"],[1,"pui-root-sidenav__content"]],template:function(i,n){i&1&&(Be(Ut),s(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return n.toggleSidenav()}),s(3,"i"),C(4,"menu"),d()(),h(5,"div",3),ne(6),d(),s(7,"div",4),ne(8,1),d()(),s(9,"div",5)(10,"div",6),h(11,"router-outlet"),d()()),i&2&&(c(10),Re("data-sidenav",n.isSidenavVisible()?"visible":"hidden"))},dependencies:[H,ve,q],encapsulation:2})}}return t})();function Zi(t,o,e=!0){let i=Object.values(t??{}).some(r=>typeof r=="string"?!!r:r!=null),n=Object.keys(t??{});return r=>{if(!i)return!0;if(e){for(let a of n)if(a in o&&o[a]!=null&&!o[a](r,a,t[a],t))return!1;return!0}else{for(let a of n)if(a in o&&o[a]!=null&&o[a](r,a,t[a],t))return!0;return!1}}}function en(t){let o=t.find(i=>i.isSortedAsc||i.isSortedDesc);if(!o)return()=>0;let e=o.isSortedDesc?-1:1;return o.fieldConfiguration?.type=="date-time"?(i,n)=>{let r=B(i,o),a=B(n,o);return r==null&&a==null?0:r instanceof Date&&a instanceof Date?(r.getTime()-a.getTime())*e:r instanceof Date?1*e:-1*e}:(i,n)=>{switch(o.key){default:return B(i,o)>B(n,o)?e:B(i,o)<B(n,o)?-1*e:0}}}function B(t,o){return o.path?fe(t,o.path):t[o.key]}var Si=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"},{id:"add",label:"Add new",icon:"add"}],ki=new R("table content data provider"),tn=(()=>{class t{constructor(){this.route=u(z),this.dataProvider=u(ki),this.isBrowser=je(u(Pe)),this.ROUTE_TO_DETAIL=Symbol(),this.configuration=this.dataProvider.configuration,this.isLoading=_(()=>this.dataProvider.isLoading?.()??!1),this.data=_(()=>{let e=this.dataProvider.data(),i=this.dataProvider.routeToDetail;return e?.map(n=>Object.assign({},n,{[this.ROUTE_TO_DETAIL]:i?.bind(this.dataProvider)?.(n)}))}),this.columnConfig=_(()=>this.dataProvider.columnsConfig()),this.columnsToDisplay=_(()=>this.dataProvider.columnsToDisplay()),this.selectionMode=_(()=>this.dataProvider.selectionMode?.()??null),this.selectedItems=_(()=>this.dataProvider.selectedItems?.()??new Set),this.controlsConfig=_(()=>this.dataProvider.controlsConfig?.()??Si),this.flattenFilterDef=_(()=>{let e=this.dataProvider.filterConfig?.();return e?J(e,{},"",e.description?`${e.description} / `:""):[]}),this.filterFormControl=u(Ke).nonNullable.control({}),this.isInitial=Ce(Ee(100).pipe(X(()=>!1)),{initialValue:!0}),this.scrolledToTop=L(!1),this.scrolledToBottom=L(!1),this.cmpFn=this.dataProvider.compareFn??((e,i)=>e==i),N([this.route.params,this.route.queryParams]).pipe(S()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),$(()=>{this.dataProvider.filterValue&&this.filterFormControl.setValue(this.dataProvider.filterValue?.(),{emitEvent:!1})}),this.dataProvider.onScrolledToTop&&$(()=>{this.isLoading()||this.scrolledToTop()&&O(()=>this.dataProvider.onScrolledToTop())}),this.dataProvider.onScrolledToBottom&&$(()=>{this.isLoading()||this.scrolledToBottom()&&O(()=>this.dataProvider.onScrolledToBottom())}),He(this.data).pipe(Z(100),S()).subscribe(()=>{this.scrolledToTop()&&this.dataProvider.onScrolledToTop?.(),this.scrolledToBottom()&&this.dataProvider.onScrolledToBottom?.()})}ngOnInit(){this.dataProvider?.onInit?.()}ngOnDestroy(){this.dataProvider?.onDestroy?.()}onRowClick(e){this.dataProvider.onTableRowClick?.(e)}onHeaderClick(e,i){this.dataProvider.onHeaderCellClick?.(e,i)}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}onFilterValueChange(e){this.dataProvider.onFilterChange?.(e)}onScrolled(e,i){e=="top"?this.scrolledToTop.set(!i):this.scrolledToBottom.set(!i)}trackingFn(e,i){return e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-table-content"]],hostAttrs:[1,"pui-table-content"],decls:9,vars:2,consts:[[3,"formControl"],[1,"pui-table-content__content-wrapper"],[3,"id","itemHeight","columns","columnWidths","selectionMode"],[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"valueChange","formControl"],[3,"key","fieldType","label","fieldConfig","isNullable"],["puiContentVisibilityDetector","",3,"skippedChanged"],[3,"rightAligned","sortedAsc","sortedDesc","cellClick",4,"puiTableHeaderCellDef"],[3,"rightAligned",4,"puiTableCellDef"],[3,"cellClick","rightAligned","sortedAsc","sortedDesc"],[3,"rightAligned"],[1,"pui-table-cell__boolean-content",3,"pui-table-cell__boolean-content--true"],[3,"mode","format","date"],[1,"pui-table-cell__boolean-content"],["itemSize","48","scrollWindow","",3,"height"],["itemSize","48","scrollWindow",""],["puiHoverable","",3,"item","route","height","selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["puiHoverable","",3,"click","item","route","selected"],["puiHoverable","",3,"item","route","selected"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,n){if(i&1&&(s(0,"main")(1,"div"),oe(2),m(3,qt,3,1,"pui-fieldset",0),s(4,"div",1),m(5,Yt,1,2,"pui-loading-panel")(6,ci,9,9,"pui-table",2),d()()(),x(7,di,1,7,"pui-layout-control",3,Q)),i&2){let r=n.flattenFilterDef();c(3),f(r.length>0?3:-1),c(2),f(n.isLoading()?5:6),c(2),D(n.controlsConfig())}},dependencies:[wt,bt,Dt,vt,xt,yt,Tt,Ct,gt,ht,st,Et,ct,Qe,nt,Ze,tt,et,it,De,xe,ye,he,be,Je,dt,ot],encapsulation:2,data:{animation:[ze("loading",[de(":enter",pe(ut)),de(":leave",pe(pt))])]}})}}return t})();function nn(t,o,e=!0){return t.map(i=>i.key==o?I(w({},i),{isSortedAsc:!i.isSortedAsc&&!i.isSortedDesc?e:!!i.isSortedDesc,isSortedDesc:!i.isSortedAsc&&!i.isSortedDesc?!e:!!i.isSortedAsc}):I(w({},i),{isSortedAsc:!1,isSortedDesc:!1}))}var Fi=new R("vertical layout data provider"),on=(()=>{class t{constructor(){this.dataProvider=u(Fi),this.layoutService=u(U,{self:!0}),this.router=u(_e),this.route=u(z),this.activeTab=L(null),this.heading=_(()=>this.dataProvider.heading()),this.tabs=_(()=>this.dataProvider.tabs()),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,N([this.route.params,this.route.queryParams]).pipe(S()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.router.events.pipe(G(e=>e instanceof ue),Ve(this.router.lastSuccessfulNavigation?.finalUrl),Xe(),S()).subscribe(()=>{let e=this.tabs();if(!e)return;let i=e.find(r=>{let a=this.router.createUrlTree(r.route,{relativeTo:this.route});return this.router.isActive(a,{paths:"subset",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})});if(!i)return;this.activeTab.set(i.label);let n=this.route.routeConfig?.children?.find(r=>r.path=="**");n&&(n.redirectTo=i.route.map(r=>String(r).replaceAll("..%2F","").replaceAll(".%2F","")).join("/"))})}onTabChanged(e){let i=this.tabs()?.find(n=>n.label==e);i&&this.router.navigate(i.route,{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-vertical-layout"]],hostAttrs:[1,"pui-vertical-layout"],features:[re([U])],decls:8,vars:2,consts:[[1,"@container/layout"],[1,"pui-vertical-layout__heading"],[1,"pui-vertical-layout__controls"],[1,"pui-vertical-layout__tabs",3,"currentTab"],[1,"pui-vertical-layout__tabs",3,"tabChange","currentTab"],[3,"routerLink"],[3,"routerLink",4,"puiTab"],[1,"spacer"],[1,"pui-vertical-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","puiTooltip","disabled","hoverableEnabled"],["puiFilledButton","","color","accent",3,"click","ngClass","puiTooltip","disabled","hoverableEnabled"],[3,"ngTemplateOutlet"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"header",1),h(2,"pui-breadcrumbs"),s(3,"h1"),C(4),d()(),m(5,Ti,3,2,"header",2),h(6,"router-outlet")(7,"pui-peekable-addon"),d()),i&2&&(c(4),g(n.heading()),c(),f(n.tabs().length>0||n.controls().length>0?5:-1))},dependencies:[q,ge,H,Te,ft,mt,_t,me,ce,wi,Y,se],encapsulation:2})}}return t})();export{Ft as a,Ki as b,yi as c,Ji as d,xi as e,Et as f,Qi as g,Di as h,Xi as i,Zi as j,en as k,Si as l,ki as m,tn as n,nn as o,Fi as p,on as q};
