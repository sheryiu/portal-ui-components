import{a as M,b as T,c as q,d as _}from"./chunk-QU7ZDOFD.js";import{a as we}from"./chunk-ETUUKZY6.js";import{a as J}from"./chunk-A7X6ERW6.js";import{$ as S,Ab as ye,B as p,Bb as _e,C as te,Cb as Ce,Db as Ie,E as R,Eb as be,F as j,Fb as ge,Gb as Se,Hb as Te,L as c,Mb as P,Na as le,Nb as W,O as s,Ob as xe,P as g,Pb as Ee,Q as u,Qa as se,Qb as H,Rb as De,S as E,Sb as B,U as ie,V as ne,Vb as ke,W as o,X as r,Xb as U,Y as D,Ya as h,Yb as $,Z as N,Zb as z,_ as O,_b as K,a as I,b as x,ba as l,ca as b,da as G,ga as oe,ha as ae,i as F,ia as Y,ib as ce,mb as de,ob as pe,pb as me,rb as ue,ta as f,tb as Q,va as re,wb as fe,xb as he,y as v,zb as ve}from"./chunk-Q665FWTK.js";var Ae=(()=>{let e=class e{constructor(){this.dataService=p(_),this.list=h(this.dataService.getList()),this.id=s(void 0),this.heading=f(()=>this.list()?.find(i=>i.id==this.id())?.id??"--"),this.tabs=s([{label:"Info",route:["info"]},{label:"Raw",route:["raw"]}])}onParamsChange(i,a){this.id.set(i.id)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Ve=(()=>{let e=class e{constructor(){this.dataService=p(_),this.list=h(this.dataService.getList()),this.id=s(void 0),this.data=s(void 0),this.fieldConfiguration=s({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(T),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{id:{type:"string",description:"ID"},description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(q)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.isDirty=s(!1),this.updatedValue=s(void 0),this.controlsConfig=f(()=>this.isDirty()?Ee:xe),re(()=>{this.data.set(structuredClone(this.list()?.find(i=>i.id==this.id())))},{allowSignalWrites:!0})}registerUpdateState(i){this.updateState=i}onStateChange(i){this.isDirty.update(a=>i.isDirty??a)}onValueChange(i){this.updatedValue.set(i)}onControlClick(i,a){switch(i){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(n=>n.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let n=this.updatedValue();n&&(this.dataService.save(n),this.updateState({isDirty:!1}));break}}}onParamsChange(i,a){this.id.set(i.id)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Re=(()=>{let e=class e{constructor(){this.dataService=p(M),this.overlayData=p(ce),this.configuration={content:$,useVirtualScroll:!1},this.data=h(this.dataService.getList(),{initialValue:[]}),this.columnsConfig=s([{key:"name",label:"Name",fieldConfiguration:{type:"string"}},{key:"phone",label:"Phone",fieldConfiguration:{type:"string"}}]),this.columnsToDisplay=s(["name","phone"]),this.selectionMode=s("single"),this.selectedItems=s(this.overlayData.initialValue),this.controlsConfig=f(()=>[{id:"select",label:this.selectedItems().size==0?"Select":`Select ${this.selectedItems().values().next().value.name}`,isDisabled:this.selectedItems().size==0}]),this.heading=s("Pick customer")}onControlClick(i,a){i=="select"&&(this.overlayData?.onSave(this.selectedItems().values().next().value),this.overlayRef.close())}compareFn(i,a){return i.id==a.id}onTableRowClick(i){this.selectedItems.set(new Set([i]))}onActionDrawerInit(i){this.overlayRef=i}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Ne=(t,e)=>e.id,Pe=t=>["/user","customer","detail",t],We=t=>["/inventory","shelf","detail",t],He=()=>["description","isbn","quantity","totalPrice"];function Be(t,e){if(t&1){let d=N();D(0,"div",19),o(1,"button",20),O("click",function(){R(d);let a=S();return j(a.onUpdateCustomerClick())}),o(2,"span"),l(3,"Update"),r()()}}function Ue(t,e){t&1&&(o(0,"i",17),l(1,"check"),r())}function $e(t,e){t&1&&(o(0,"i",18),l(1,"close"),r())}function Me(t,e){t&1&&(o(0,"span",15),l(1,"----"),r())}function qe(t,e){t&1&&(o(0,"pui-table-header-cell"),l(1,"Item"),r())}function Ge(t,e){t&1&&(o(0,"pui-table-header-cell"),l(1,"ISBN"),r())}function Ye(t,e){t&1&&(o(0,"pui-table-header-cell"),l(1,"Quantity"),r())}function Qe(t,e){t&1&&(o(0,"pui-table-header-cell"),l(1,"Total Price"),r())}function ze(t,e){if(t&1&&(o(0,"pui-table-cell")(1,"span",26),l(2),r()()),t&2){let d=e.$implicit;c(2),b(d.description)}}function Ke(t,e){if(t&1&&(o(0,"pui-table-cell")(1,"span",26),l(2),r()()),t&2){let d=e.$implicit;c(2),b(d.isbn)}}function Je(t,e){if(t&1&&(o(0,"pui-table-cell"),l(1," x "),o(2,"span",26),l(3),r()()),t&2){let d=e.$implicit;c(3),b(d.quantity)}}function Xe(t,e){if(t&1&&(o(0,"pui-table-cell",27),l(1," $ "),o(2,"span",26),l(3),r()()),t&2){let d=e.$implicit;c(3),b(d.totalPrice)}}function Ze(t,e){if(t&1&&D(0,"pui-table-row",25),t&2){let d=e.$implicit;u("item",d)}}function et(t,e){if(t&1&&(D(0,"pui-divider"),o(1,"h2"),l(2,"Contents"),r(),o(3,"pui-table",21),g(4,qe,2,0,"pui-table-header-cell",22)(5,Ge,2,0,"pui-table-header-cell",22)(6,Ye,2,0,"pui-table-header-cell",22)(7,Qe,2,0,"pui-table-header-cell",22)(8,ze,3,1,"pui-table-cell",23)(9,Ke,3,1,"pui-table-cell",23)(10,Je,4,1,"pui-table-cell",23)(11,Xe,4,1,"pui-table-cell",24),o(12,"pui-table-body"),D(13,"pui-table-header-row"),ie(14,Ze,1,1,"pui-table-row",25,Ne),r()()),t&2){let d=S();c(3),u("itemHeight",48)("columns",ae(10,He)),c(),u("puiTableHeaderCellDef","description"),c(),u("puiTableHeaderCellDef","isbn"),c(),u("puiTableHeaderCellDef","quantity"),c(),u("puiTableHeaderCellDef","totalPrice"),c(),u("puiTableCellDef","description"),c(),u("puiTableCellDef","isbn"),c(),u("puiTableCellDef","quantity"),c(),u("puiTableCellDef","totalPrice"),c(3),ne(d.inventoryItem().contents)}}function tt(t,e){if(t&1){let d=N();o(0,"pui-layout-control",29),O("click",function(){R(d);let a=S(2);return j(a.onCancelClick())}),r(),o(1,"pui-layout-control",30),O("click",function(){R(d);let a=S(2);return j(a.onSaveClick())}),r()}}function it(t,e){if(t&1){let d=N();o(0,"pui-layout-control",31),O("click",function(){R(d);let a=S(2);return j(a.onEditClick())}),r()}}function nt(t,e){if(t&1&&g(0,tt,2,0)(1,it,1,0,"pui-layout-control",28),t&2){let d=S();E(d.isEditing()?0:1)}}var je=(()=>{let e=class e{constructor(){this.dataService=p(_),this.customerDataService=p(M),this.inventoryShelfService=p(we),this.route=p(le),this.actionDrawer=p(W),this.list=h(this.dataService.getList()),this.customerList=h(this.customerDataService.getList()),this.inventoryShelfList=h(this.inventoryShelfService.getList()),this.id=h(this.route.params.pipe(F(i=>i.id))),this.inventoryItem=f(()=>this.list()?.find(i=>i.id==this.id())),this.customer=f(()=>this.customerList()?.find(i=>i.id==this.inventoryItem()?.belongsTo)),this.shelf=f(()=>this.inventoryShelfList()?.find(i=>i.id==this.inventoryItem()?.locatedIn)),this.showEditButton=f(()=>[T.OPEN,T.REPACKAGING].includes(this.inventoryItem()?.status)),this.isEditing=s(!1),this.updatedValues=s({})}onEditClick(){this.isEditing.set(!0),this.updatedValues.set({customer:null})}onCancelClick(){this.isEditing.set(!1),this.updatedValues.set({customer:null})}onSaveClick(){this.dataService.save(x(I({},this.inventoryItem()),{belongsTo:this.updatedValues().customer?.id??this.inventoryItem().belongsTo})),this.isEditing.set(!1),this.updatedValues.set({customer:null})}onUpdateCustomerClick(){this.actionDrawer.open(Re,{providers:[{provide:U,useExisting:P}],overlayData:{initialValue:new Set([this.updatedValues().customer??this.customer()].filter(ue)),onSave:i=>{this.updatedValues.update(a=>x(I({},a),{customer:i}))}}})}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=te({type:e,selectors:[["demo-inventory-item-info"]],hostAttrs:[1,"contents"],standalone:!0,features:[oe],decls:50,vars:20,consts:[[1,"@container","grow"],[1,"pui-card","rounded-4","p-8","flex","flex-col","gap-8"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","flex","flex-col","justify-center"],[1,"text-neutral-700","dark:text-neutral-300"],[1,"text-md"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start","text-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center","w-full"],[1,"icon-6","text-neutral-700","dark:text-neutral-300"],[1,"flex","flex-col"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center"],[1,"text-md","uppercase"],[1,"grid","items-center","grid-cols-[min-content_minmax(0,1fr)]","gap-x-4","gap-y-3"],[1,"col-start-1","text-base","font-medium","whitespace-nowrap","text-neutral-700","dark:text-neutral-300"],[1,"col-start-2","text-md"],[1,"col-start-2","text-md",3,"date","format"],[1,"icon-5","text-green-600","dark:text-green-400"],[1,"icon-5","text-red-600","dark:text-red-400"],[1,"spacer"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2",3,"click"],[3,"itemHeight","columns"],[4,"puiTableHeaderCellDef"],[4,"puiTableCellDef"],["class","tabular-nums",4,"puiTableCellDef"],[3,"item"],[1,"truncate"],[1,"tabular-nums"],["id","edit","icon","edit","label","Edit","mode","auto"],["id","cancel","icon","close","label","Cancel","mode","low-emphasis",3,"click"],["id","save","icon","save","label","Save","mode","auto",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto",3,"click"]],template:function(a,n){if(a&1&&(o(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"h4",4),l(5,"Status"),r(),o(6,"p",5),l(7),r()(),o(8,"a",6)(9,"div",7)(10,"i",8),l(11,"person"),r(),o(12,"div",9)(13,"h4",4),l(14,"Customer"),r(),o(15,"p",5),l(16),r()(),g(17,Be,4,0),r()(),o(18,"a",10)(19,"div",11)(20,"i",8),l(21,"shelves"),r(),o(22,"div",9)(23,"h4",4),l(24,"Shelf"),r(),o(25,"p",12),l(26),r()()()()(),o(27,"div",13)(28,"span",14),l(29,"ID"),r(),o(30,"span",15),l(31),r(),o(32,"span",14),l(33,"Arrived at"),r(),D(34,"pui-time-display",16),o(35,"span",14),l(36,"Net weight"),r(),o(37,"span",15),l(38),r(),o(39,"span",14),l(40,"Gross weight"),r(),o(41,"span",15),l(42),r(),o(43,"span",14),l(44,"Fragile"),r(),g(45,Ue,2,0,"i",17)(46,$e,2,0,"i",18)(47,Me,2,0,"span",15),r(),g(48,et,16,11),r()(),g(49,nt,2,1)),a&2){let m,X,y,Z,C,w,ee,A,V,L;c(7),b((m=(m=n.inventoryItem())==null?null:m.status)!==null&&m!==void 0?m:"--"),c(),u("hoverableEnabled",!n.isEditing()&&n.customer()!=null)("routerLink",!n.isEditing()&&n.customer()?Y(16,Pe,(X=n.customer())==null?null:X.id):null),c(8),b((y=(y=(y=n.updatedValues().customer)==null?null:y.name)!==null&&y!==void 0?y:(y=n.customer())==null?null:y.name)!==null&&y!==void 0?y:"--"),c(),E(n.isEditing()?17:-1),c(),u("hoverableEnabled",!n.isEditing()&&n.shelf()!=null)("routerLink",!n.isEditing()&&n.shelf()?Y(18,We,(Z=n.shelf())==null?null:Z.id):null),c(8),b(n.shelf()?((C=n.shelf())==null||C.location==null?null:C.location.aisle)+((C=n.shelf())==null||C.location==null?null:C.location.row)+" - "+((C=n.shelf())==null||C.location==null?null:C.location.layer):"--"),c(5),b((w=(w=n.inventoryItem())==null?null:w.id)!==null&&w!==void 0?w:"---"),c(3),u("date",(ee=n.inventoryItem())==null?null:ee.arrivedAt)("format","yyyy-MM-dd HH:mm"),c(4),G("",(A=(A=n.inventoryItem())==null?null:A.netWeight)!==null&&A!==void 0?A:"---"," g"),c(4),G("",(V=(V=n.inventoryItem())==null?null:V.grossWeight)!==null&&V!==void 0?V:"---"," g"),c(3),E(((L=n.inventoryItem())==null?null:L.isContainFragile)===!0?45:((L=n.inventoryItem())==null?null:L.isContainFragile)===!1?46:47),c(3),E(n.inventoryItem()?48:-1),c(),E(n.showEditButton()?49:-1)}},dependencies:[de,se,De,he,fe,Te,_e,Ce,Se,ge,Ie,ve,be,ye,me,pe]});let t=e;return t})();var Oe=(()=>{let e=class e{constructor(){this.heading=s("Inventory Items"),this.tabs=s([])}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Le=(()=>{let e=class e{constructor(){this.dataService=p(_),this.configuration={content:B},this.data=s(null),this.fieldConfiguration=s({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(T),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(q)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.controlsConfig=s([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=s(void 0),this.heading=s("Add Item")}registerUpdateState(i){this.updateState=i,this.updateState({isDirty:!0})}onValueChange(i){this.updatedValue.set(i)}onControlClick(i,a){switch(i){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let n=this.updatedValue();n&&(n=Object.assign(n,{id:J.string.nanoid(),contents:n.contents.map(m=>Object.assign(m,{id:J.string.nanoid(12)}))}),this.dataService.add(n),this.overlayRef.close());break}}}onActionDrawerInit(i){this.overlayRef=i}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var Fe=(()=>{let e=class e{constructor(){this.dataService=p(_),this.actionDrawer=p(W),this.rawData=h(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=f(()=>(this.rawData()??[]).toSorted(this.sortFn())),this.columnsConfig=s([{key:"belongsTo",label:"Customer"},{key:"netWeight",label:"Net Weight (g)",fieldConfiguration:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",fieldConfiguration:{type:"number"}},{key:"isContainFragile",label:"Fragile",fieldConfiguration:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=s({default:["belongsTo","status"],768:["belongsTo","netWeight","status","arrivedAt"],1280:["belongsTo","netWeight","grossWeight","isContainFragile","status","arrivedAt"]}),this.filterValue=s({}),this.sortFn=f(()=>ke(this.columnsConfig()))}routeToDetail(i){return["detail",i.id]}onHeaderCellClick(i,a){this.columnsConfig.update(n=>n.map(m=>m.key==i?x(I({},m),{isSortedAsc:!m.isSortedAsc&&!m.isSortedDesc?!0:!!m.isSortedDesc,isSortedDesc:!!m.isSortedAsc}):x(I({},m),{isSortedAsc:!1,isSortedDesc:!1})))}onControlClick(i,a){switch(i){case"add":{this.actionDrawer.open(Le,{providers:[{provide:H,useExisting:P}]});break}}}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac});let t=e;return t})();var li=[{path:"",data:I({},Q({title:"Item"})),children:[{path:"detail/:id",component:K,data:I({},Q({titleFn:t=>t.params.pipe(F(e=>e.id))})),providers:[{provide:z,useClass:Ae}],children:[{path:"info",component:je},{path:"raw",component:B,providers:[{provide:H,useClass:Ve}]},{path:"**",redirectTo:"info"}]},{path:"",component:K,providers:[{provide:z,useClass:Oe}],children:[{path:"",component:$,providers:[{provide:U,useClass:Fe}]}]}]}];export{li as ROUTES};
