import{a as u,b as Q,d as Ee}from"./chunk-M2IP5V26.js";import"./chunk-XQ5JT4DM.js";import{a as be}from"./chunk-TDEUGD5O.js";import{$ as le,B as m,C as F,Da as P,Ea as pe,Fa as me,Ga as ce,K as d,N as s,Na as f,O as te,P as b,Q as ie,R as re,Ra as ue,S as ne,Sa as he,T as se,Ta as fe,U as ae,V as l,Va as V,W as a,X as h,Ya as ye,Za as ve,_ as oe,a as C,aa as o,b as G,ba as g,ca as _,da as L,ea as de,fa as N,gb as ge,ha as J,i as S,ia as z,lb as Ce,ma as c,mb as Se,na as E,nb as M,ob as B,pa as O,pb as R,rb as j,sb as xe,u as K,ub as U,vb as W,wb as H,x as ee,xb as q,y as v}from"./chunk-EH6MM57D.js";var De=(()=>{let t=class t{constructor(){this.dataService=m(u),this.list=f(this.dataService.getList()),this.params=s({}),this.queryParams=s({}),this.data=s(this.list()?.find(e=>e.id==this.params().id)?.savedAddresses.at(Number(this.params().index))),this.jsonSchema=s({type:"object",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}),this.isDirty=s(!1),this.updatedValue=s(void 0),this.controlsConfig=c(()=>this.isDirty()?B:M),E(()=>{this.data.set(structuredClone(this.list()?.find(e=>e.id==this.params().id)?.savedAddresses.at(Number(this.params().index))))},{allowSignalWrites:!0})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(r=>e.isDirty??r)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,r){switch(e){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(i=>i.id==this.params().id)?.savedAddresses.at(Number(this.params().index)))),this.updateState({isDirty:!1});break}case"save":{let i=this.updatedValue();i&&(this.dataService.updateAddress(this.params().id,this.params().index,i),this.updateState({isDirty:!1}));break}}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac});let n=t;return n})();var Re=n=>["./",n],je=n=>({"border-primary-300 dark:border-primary-700 bg-hover":n});function Fe(n,t){if(n&1&&(l(0,"a",4,0)(2,"div",5)(3,"span",6),o(4),a(),l(5,"span",6),o(6),a(),l(7,"span",7),o(8),a()()()),n&2){let y=t.$implicit,e=t.$index,r=le(1);b("routerLink",J(6,Re,e))("ngClass",J(8,je,r.isActive)),d(4),_(" ",y.line1," "),d(2),_(" ",y.line2," "),d(2),L("",y.city,", ",y.state,"")}}var ke=(()=>{let t=class t{constructor(){this.dataService=m(u),this.route=m(P),this.list=f(this.dataService.getList()),this.id=f(this.route.params.pipe(S(e=>e.id))),this.data=c(()=>this.list()?.find(e=>e.id==this.id())?.savedAddresses??[])}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=F({type:t,selectors:[["demo-customer-address"]],hostAttrs:[1,"contents"],standalone:!0,features:[N],decls:6,vars:0,consts:[["active","routerLinkActive"],[1,"flex","flex-row","gap-8","grow"],[1,"light-glass-bg","rounded-4","basis-80","shrink-0","grow-0","p-4","h-fit","max-h-[calc(100svh_-_8.5rem)]","overflow-y-auto","sticky","top-26"],[1,"flex","flex-col","gap-4"],["routerLinkActive","","puiHoverable","",1,"rounded-3","light-glass-bg-subtle","border","p-4","text-start","justify-start",3,"routerLink","ngClass"],[1,"flex","flex-col"],[1,"text-base","truncate"],[1,"text-sm","truncate","font-medium","text-neutral-800","dark:text-neutral-200"]],template:function(r,i){r&1&&(l(0,"div",1)(1,"div",2)(2,"div",3),se(3,Fe,9,10,"a",4,ne),a()(),h(5,"router-outlet"),a()),r&2&&(d(3),ae(i.data()))},dependencies:[ge,ue,me,ce,O,pe]});let n=t;return n})();var Y=(()=>{let t=class t{constructor(){this.dataService=m(u),this.list=f(this.dataService.getList()),this.params=s({}),this.queryParams=s({}),this.heading=c(()=>this.list()?.find(e=>e.id==this.params().id)?.name??"--"),this.tabs=s([{label:"Info",route:["info"]},{label:"Addresses",route:["address"]},{label:"Raw",route:["raw"]}]),this.routeToFullContent=c(()=>["/","user","customer",{outlets:{primary:["detail",this.params().id],peek:null}}])}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac});let n=t;return n})();var Ie=(()=>{let t=class t{constructor(){this.dataService=m(u),this.list=f(this.dataService.getList()),this.params=s({}),this.queryParams=s({}),this.data=s(this.list()?.find(e=>e.id==this.params().id)),this.jsonSchema=s({type:"object",properties:{name:{type:"string",description:"Name"},username:{type:"string",description:"Username"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},address:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}},registeredSince:{type:"date-time",description:"Registered Since"}}}),this.isDirty=s(!1),this.updatedValue=s(void 0),this.controlsConfig=c(()=>this.isDirty()?B:M),E(()=>{this.data.set(structuredClone(this.list()?.find(e=>e.id==this.params().id)))},{allowSignalWrites:!0})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(r=>e.isDirty??r)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,r){switch(e){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(i=>i.id==this.params().id))),this.updateState({isDirty:!1});break}case"save":{let i=this.updatedValue();i&&(this.dataService.save(i),this.updateState({isDirty:!1}));break}}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac});let n=t;return n})();var Ne=(n,t)=>({"bg-emerald-300 dark:bg-emerald-800":n,"border-emerald-300/70 dark:border-emerald-800/70":t}),Oe=(n,t)=>({"bg-amber-300 dark:bg-amber-800":n,"border-amber-300/70 dark:border-amber-800/70":t});function Pe(n,t){if(n&1&&(l(0,"span",28),o(1),a(),l(2,"span",28),o(3),a(),l(4,"span",28),o(5),a(),l(6,"span",28),o(7),a()),n&2){let y,e,r,i,p=oe();d(),g((y=p.customer())==null||y.address==null?null:y.address.line1),d(2),g((e=p.customer())==null||e.address==null?null:e.address.line2),d(2),L("",(r=p.customer())==null||r.address==null?null:r.address.city,", ",(r=p.customer())==null||r.address==null?null:r.address.state,""),d(2),L("",(i=p.customer())==null||i.address==null?null:i.address.country," ",(i=p.customer())==null||i.address==null?null:i.address.postalCode,"")}}function Ve(n,t){n&1&&(l(0,"span",28),o(1,"----"),a())}var we=(()=>{let t=class t{constructor(){this.dataService=m(u),this.inventoryItemService=m(Ee),this.route=m(P),this.list=f(this.dataService.getList()),this.id=f(this.route.params.pipe(S(e=>e.id))),this.allInventoryItems=f(this.inventoryItemService.getList()),this.customer=c(()=>this.list()?.find(e=>e.id==this.id())),this.inventoryItems=c(()=>this.allInventoryItems()?.filter(e=>e.belongsTo==this.customer()?.id)??[]),this.awaitingPaymentsCount=c(()=>this.inventoryItems()?.filter(e=>e.status==Q.OPEN).length),this.repackageCount=c(()=>this.inventoryItems()?.filter(e=>e.status==Q.REPACKAGING).length),this.data=c(()=>this.inventoryItems().slice(0,5)),this.columnsConfig=s([{key:"netWeight",label:"Net Weight (g)",jsonSchema:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",jsonSchema:{type:"number"}},{key:"isContainFragile",label:"Fragile",jsonSchema:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,jsonSchema:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=s(["netWeight","grossWeight","isContainFragile","status","arrivedAt"]),this.controlsConfig=s([])}routeToDetail(e){return["/","inventory","item","detail",e.id]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=F({type:t,selectors:[["demo-customer-info"]],hostAttrs:[1,"contents"],standalone:!0,features:[de([{provide:U,useExisting:ee(()=>t)}]),N],decls:96,vars:23,consts:[[1,"@container"],[1,"grow","light-glass-bg","rounded-4","p-8"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"light-glass-bg-subtle","rounded-4","p-8","overflow-hidden","@screen-md:col-span-2"],[1,"flex","flex-row","gap-4","items-stretch","h-full","overflow-x-auto"],[1,"rounded-3","flex-1","border","dark:bg-blue-800","flex","flex-col","p-4","transition-colors"],[1,"dark:text-blue-200"],[1,"spacer"],[1,"text-2xl","font-bold","self-end","text-end","tabular-nums"],[1,"rounded-3","flex-1","border","dark:bg-emerald-800","flex","flex-col","p-4","transition-colors",3,"ngClass"],[1,"dark:text-emerald-200"],[1,"rounded-3","flex-1","border","flex","flex-col","p-4","transition-colors",3,"ngClass"],[1,"text-amber-700","dark:text-amber-200"],[1,"light-glass-bg-subtle","rounded-4","p-8","overflow-hidden"],[1,"flex","flex-col","items-center","gap-2"],[1,"p-4","rounded-full","bg-neutral-500","shadow-md","shadow-neutral-500","transition-colors"],[1,"icon-10","font-variation-fill"],[1,"w-full","text-center","break-anywhere","whitespace-normal"],[1,"text-sm","text-center","text-neutral-800","dark:text-neutral-200","before:content-['#']"],[1,"text-base","text-center"],[3,"date","format"],[1,"flex","flex-row","justify-end","items-center"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2"],[1,"flex","flex-col","pt-6","gap-4"],[1,"flex","flex-row","items-center","gap-2"],[1,"icon-6","font-variation-weight-light","text-neutral-800","dark:text-neutral-200"],[1,"flex","flex-col","gap-1"],[1,"text-sm","text-neutral-800","dark:text-neutral-200"],[1,"text-base"],[1,"text-base","break-anywhere"]],template:function(r,i){if(r&1&&(l(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),o(7,"Completed"),h(8,"br"),o(9,"Sales"),a(),h(10,"div",7),l(11,"span",8),o(12,"$2,000"),a()(),l(13,"div",9)(14,"h3",10),o(15,"Awaiting"),h(16,"br"),o(17,"Payments"),a(),h(18,"div",7),l(19,"span",8),o(20),a()(),l(21,"div",11)(22,"h3",12),o(23,"Repackage"),h(24,"br"),o(25,"Requests"),a(),h(26,"div",7),l(27,"span",8),o(28),a()()()(),l(29,"div",13)(30,"div",14)(31,"div",15)(32,"i",16),o(33),a()(),l(34,"h2",17),o(35),a(),l(36,"span",18),o(37),a(),l(38,"span",19),o(39,"Joined since "),h(40,"pui-time-display",20),a()()(),l(41,"div",3)(42,"h3"),o(43,"Recent Inventory"),a(),h(44,"pui-table-content"),l(45,"div",21)(46,"button",22),o(47),a()()(),l(48,"div",13)(49,"h3"),o(50,"Detailed information"),a(),l(51,"div",23)(52,"div",24)(53,"i",25),o(54,"person"),a(),l(55,"div",26)(56,"span",27),o(57,"Fullname"),a(),l(58,"span",28),o(59),a()()(),h(60,"pui-divider"),l(61,"div",24)(62,"i",25),o(63,"person"),a(),l(64,"div",26)(65,"span",27),o(66,"Username"),a(),l(67,"span",29),o(68),a()()(),h(69,"pui-divider"),l(70,"div",24)(71,"i",25),o(72,"phone"),a(),l(73,"div",26)(74,"span",27),o(75,"Phone number"),a(),l(76,"span",29),o(77),a()()(),h(78,"pui-divider"),l(79,"div",24)(80,"i",25),o(81,"email"),a(),l(82,"div",26)(83,"span",27),o(84,"Email address"),a(),l(85,"span",29),o(86),a()()(),h(87,"pui-divider"),l(88,"div",24)(89,"i",25),o(90,"location_on"),a(),l(91,"div",26)(92,"span",27),o(93,"Main address"),a(),te(94,Pe,8,6)(95,Ve,2,0,"span",28),a()()()()()()()),r&2){let p,$,D,k,X,I,w,A,T,Z;d(13),b("ngClass",z(17,Ne,i.awaitingPaymentsCount()>0,i.awaitingPaymentsCount()==0)),d(7),g(i.awaitingPaymentsCount()),d(),b("ngClass",z(20,Oe,i.repackageCount()>0,i.repackageCount()==0)),d(7),g(i.repackageCount()),d(3),ie("--color-neutral-500",(p=i.customer())==null||p.profile==null?null:p.profile.color),d(2),g(($=i.customer())==null||$.profile==null?null:$.profile.icon),d(2),g((D=(D=i.customer())==null?null:D.username)!==null&&D!==void 0?D:"---"),d(2),g((k=(k=i.customer())==null?null:k.id)!==null&&k!==void 0?k:"----"),d(3),b("date",(X=i.customer())==null?null:X.registeredSince)("format","dd MMM yyyy"),d(7),_(" View all (",i.inventoryItems().length,") "),d(12),g((I=(I=i.customer())==null?null:I.name)!==null&&I!==void 0?I:"----"),d(9),g((w=(w=i.customer())==null?null:w.username)!==null&&w!==void 0?w:"----"),d(9),g((A=(A=i.customer())==null?null:A.phone)!==null&&A!==void 0?A:"----"),d(9),g((T=(T=i.customer())==null?null:T.email)!==null&&T!==void 0?T:"----"),d(8),re((Z=i.customer())!=null&&Z.address?94:95)}},dependencies:[ve,ye,W,fe,he,O],styles:["demo-customer-info .pui-table-content main{background-color:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);-webkit-backdrop-filter:none;backdrop-filter:none;padding-left:0;padding-right:0}"]});let n=t;return n})();var Ae=(()=>{let t=class t{constructor(){this.params=s({}),this.queryParams=s({}),this.heading=s("Customers"),this.tabs=s([])}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac});let n=t;return n})();var Te=(()=>{let t=class t{constructor(){this.dataService=m(u),this.configuration={content:j},this.data=s(null),this.jsonSchema=s({type:"object",properties:{name:{type:"string",description:"Name"},username:{type:"string",description:"Username"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},address:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}},savedAddresses:{type:"array",description:"Saved Addresses",items:{type:"object",description:"Address",properties:{line1:{type:"string",description:"Line 1"},line2:{type:"string",description:"Line 2"},city:{type:"string",description:"City"},state:{type:"string",description:"State"},postalCode:{type:"string",description:"Postal Code"},country:{type:"string",description:"Country"}}}},registeredSince:{type:"date-time",description:"Registered Since"}}}),this.controlsConfig=s([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=s(void 0),this.heading=s("Add Customer"),this.overlayRef=s(null)}registerUpdateState(e){this.updateState=e,this.updateState({isDirty:!0})}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,r){switch(e){case"cancel":{this.data.set({}),this.overlayRef()?.close();break}case"save":{let i=this.updatedValue();i&&(i=Object.assign(i,{id:be.string.nanoid()}),this.dataService.add(i),this.overlayRef()?.close());break}}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac});let n=t;return n})();var _e=(()=>{let t=class t{constructor(){this.dataService=m(u),this.actionDrawer=m(Se),this.rawData=f(this.dataService.getList()),this.configuration={},this.data=s([]),this.columnsConfig=s([{key:"name",label:"Name"},{key:"username",label:"Username"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"line2",path:"address.line2",label:"Address (Line 2)"},{key:"registeredSince",label:"Registered",isAlignEnd:!0,isSortedDesc:!0,jsonSchema:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=s(["name","username","email","phone","line2","registeredSince"]),this.simpleFilterConfig=s({type:"object",properties:{name:{type:"string",description:"Name"},id:{type:"string",description:"ID"}}}),this.simpleFilterValue=s({}),this.sortFn=c(()=>{let e=this.columnsConfig().find(i=>i.isSortedAsc||i.isSortedDesc);if(!e)return()=>0;let r=e.isSortedDesc?-1:1;return(i,p)=>{switch(e.key){case"registeredSince":return(i.registeredSince.getTime()-p.registeredSince.getTime())*r;case"line2":return i.address[e.key]>p.address[e.key]?r:i.address[e.key]<p.address[e.key]?-1*r:0;default:return i[e.key]>p[e.key]?r:i[e.key]<p[e.key]?-1*r:0}}}),this.filterFn=c(()=>{let e=this.simpleFilterValue(),r=Object.values(e??{}).some(i=>!!i);return i=>r&&e.id&&!i.id.toLowerCase().includes(e.id.toLowerCase())?!1:!(r&&e.name&&!(i.username.toLowerCase().includes(e.name.toLowerCase())||i.name.toLowerCase().includes(e.name.toLowerCase())))}),E(()=>{let e=this.rawData();e&&this.data.set(e.filter(this.filterFn()).sort(this.sortFn()))},{allowSignalWrites:!0})}routeToDetail(e){return["/user","customer",{outlets:{peek:[e.id]}}]}onHeaderCellClick(e,r){this.columnsConfig.update(i=>i.map(p=>p.key==e?G(C({},p),{isSortedAsc:!p.isSortedAsc&&!p.isSortedDesc?!0:!!p.isSortedDesc,isSortedDesc:!!p.isSortedAsc}):G(C({},p),{isSortedAsc:!1,isSortedDesc:!1})))}onUpdateSimpleFilter(e){this.simpleFilterValue.set(e)}onControlClick(e,r){switch(e){case"add":{this.actionDrawer.open(Te,{providers:[{provide:R,useExisting:Ce}]});break}}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac});let n=t;return n})();var Le=[{path:"info",component:we},{path:"address",component:ke,children:[{path:":index",component:j,providers:[{provide:R,useClass:De}]}]},{path:"raw",component:j,providers:[{provide:R,useClass:Ie}]},{path:"**",redirectTo:"info"}],zt=[{path:"",data:C({},V({title:"Customer"})),children:[{path:"detail/:id",component:q,data:C({},V({deps:[u],titleFn:(n,t)=>n.params.pipe(K(y=>t.getList().pipe(S(e=>e.find(r=>r.id==y.id)?.name??"--"))))})),providers:[{provide:H,useClass:Y}],children:Le},{path:"",component:q,providers:[{provide:H,useClass:Ae},{provide:xe,useClass:Y}],children:[{path:":id",outlet:"peek",component:q,data:C({},V({deps:[u],titleFn:(n,t)=>n.params.pipe(K(y=>t.getList().pipe(S(e=>e.find(r=>r.id==y.id)?.name??"--"))))})),providers:[{provide:H,useClass:Y}],children:Le},{path:"",component:W,providers:[{provide:U,useClass:_e}]}]}]}];export{zt as ROUTES};
