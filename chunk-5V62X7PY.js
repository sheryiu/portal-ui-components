import{a as l,b as h,c,e as n}from"./chunk-UR6FENV6.js";import{a as D,b as A,c as j,d as V,e as u,g as m,j as k,k as I,l as L,m as R,n as F,o as w,p as E,q as b}from"./chunk-MNOYPFLK.js";import{a as N}from"./chunk-5KUQE4MU.js";import{Ba as g,J as v,N as d,ra as O}from"./chunk-YMJKTHWP.js";import{$ as r,Da as i,W as S,fa as s,q as C,uc as p,xc as T}from"./chunk-O5WS6LKQ.js";import{a as y}from"./chunk-EQDQRRRY.js";var P=(()=>{class e{constructor(){this.dataService=s(n),this.list=d(this.dataService.getList()),this.id=i(void 0),this.heading=p(()=>this.list()?.find(t=>t.id==this.id())?.name??"--"),this.tabs=i([])}onParamsChange(t,a){this.id.set(t.id)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=r({token:e,factory:e.\u0275fac})}}return e})();var _=(()=>{class e{constructor(){this.dataService=s(n),this.list=d(this.dataService.getList()),this.id=i(void 0),this.data=i(void 0),this.fieldConfiguration=i({type:"object",properties:{name:{type:"string",description:"Name"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},department:{type:"string",description:"Department",enum:Object.values(l)},position:{type:"string",description:"Position",enum:Object.values(h)},dateOfJoining:{type:"date-time",description:"Date of Joining"},dateOfLeaving:{type:"date-time",description:"Date of Leaving"},status:{type:"string",description:"Status",enum:Object.values(c)}}}),this.isDirty=i(!1),this.updatedValue=i(void 0),this.controlsConfig=p(()=>this.isDirty()?V:j),T(()=>{this.data.set(v(this.list()?.find(t=>t.id==this.id())))})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(a=>t.isDirty??a)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,a){switch(t){case"refresh":case"cancel":{this.data.set(v(this.list()?.find(o=>o.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let o=this.updatedValue();o&&(this.dataService.save(o),this.updateState({isDirty:!1}));break}}}onParamsChange(t,a){this.id.set(t.id)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=r({token:e,factory:e.\u0275fac})}}return e})();var x=(()=>{class e{constructor(){this.heading=i("Employees"),this.tabs=i([])}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=r({token:e,factory:e.\u0275fac})}}return e})();var U=(()=>{class e{constructor(){this.dataService=s(n),this.configuration={content:m},this.data=i(null),this.fieldConfiguration=i({type:"object",properties:{name:{type:"string",description:"Name"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},department:{type:"string",description:"Department",enum:Object.values(l)},position:{type:"string",description:"Position",enum:Object.values(h)},dateOfJoining:{type:"date-time",description:"Date of Joining"},dateOfLeaving:{type:"date-time",description:"Date of Leaving"},status:{type:"string",description:"Status",enum:Object.values(c)}}}),this.controlsConfig=i([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=i(void 0),this.heading=i("Add Employee")}registerUpdateState(t){this.updateState=t,this.updateState({isDirty:!0})}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,a){switch(t){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let o=this.updatedValue();o&&(o=Object.assign(o,{id:N.string.nanoid()}),this.dataService.add(o),this.overlayRef.close());break}}}onActionDrawerInit(t){this.overlayRef=t}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=r({token:e,factory:e.\u0275fac})}}return e})();var B=(()=>{class e{constructor(){this.overlayData=s(O,{optional:!0}),this.configuration={content:m},this.heading=i("Filter Employee"),this.data=i(this.overlayData?.filter??{}),this.fieldConfiguration=i({type:"object",properties:{department:{type:"string",description:"Department",enum:[""].concat(Object.values(l))},status:{type:"string",description:"Status",enum:[""].concat(Object.values(c))}}}),this.controlsConfig=i([{id:"cancel",label:"Cancel",icon:"close"},{id:"apply",label:"Apply",icon:"filter_alt"}]),this.updatedValue=i(void 0)}onActionDrawerInit(t){this.overlayRef=t}registerUpdateState(t){this.updateState=t,this.updateState({isDirty:!0})}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,a){switch(t){case"cancel":{this.overlayRef.close();break}case"apply":{let o=this.updatedValue();o&&(this.overlayData?.onFilterApply?.(o),this.overlayRef.close());break}}}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=r({token:e,factory:e.\u0275fac})}}return e})();var J=(()=>{class e{constructor(){this.dataService=s(n),this.actionDrawer=s(A),this.rawData=d(this.dataService.getList()),this.configuration={id:"employee-table",useVirtualScroll:!0},this.data=p(()=>(this.rawData()??[]).filter(this.filterFn()).toSorted(this.sortFn())),this.columnsConfig=i([{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"department",label:"Department"},{key:"position",label:"Position"},{key:"status",label:"Status"}]),this.columnsToDisplay=i(["name","email","phone","department","position","status"]),this.filterConfig=i({type:"object",properties:{department:{type:"string",description:"Department",enum:[""].concat(Object.values(l))},status:{type:"string",description:"Status",enum:[""].concat(Object.values(c))}}}),this.filterValue=i({}),this.controlsConfig=i([{id:"filter",label:"Advance Filters",icon:"filter_alt"},...L]),this.sortFn=p(()=>I(this.columnsConfig())),this.filterFn=p(()=>k(this.filterValue(),{department:(t,a,o)=>!!o&&t.department==o,status:(t,a,o)=>!!o&&t.status==o}))}routeToDetail(t){return["detail",t.id]}onHeaderCellClick(t,a){this.columnsConfig.update(o=>w(o,t))}onFilterChange(t){this.filterValue.set(t)}onControlClick(t,a){switch(t){case"add":{this.actionDrawer.open(U,{providers:[{provide:u,useExisting:D}]});break}case"filter":{this.actionDrawer.open(B,{overlayData:{filter:this.filterValue(),onFilterApply:o=>this.filterValue.set(o)},providers:[{provide:u,useExisting:D}]});break}}}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275prov=r({token:e,factory:e.\u0275fac})}}return e})();var Nt=[{path:"",data:y({},g({title:"Employee"})),children:[{path:"detail/:id",component:b,data:y({},g({deps:[n],titleFn:(e,Y)=>e.params.pipe(S(t=>Y.getList().pipe(C(a=>a.find(o=>o.id==t.id)?.name??"--"))))})),providers:[{provide:E,useClass:P}],children:[{path:"",component:m,providers:[{provide:u,useClass:_}]}]},{path:"",component:b,providers:[{provide:E,useClass:x}],children:[{path:"",component:F,providers:[{provide:R,useClass:J}]}]}]}];export{Nt as ROUTES};
