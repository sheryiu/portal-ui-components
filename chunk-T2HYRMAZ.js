import{a as o,b as u}from"./chunk-OEZ5EYFZ.js";import{d as O,e as N}from"./chunk-QZALCDFC.js";import{c as S,d as g,e as T,g as b,k as L,m as A,n as I,o as F,p as m,q as f}from"./chunk-3Q27JUUI.js";import"./chunk-5KUQE4MU.js";import{$a as D,Ea as h,L as c,P as l}from"./chunk-JASHVRJB.js";import{$ as p,Da as a,W as v,fa as s,q as C,vc as n,yc as E}from"./chunk-SJLNDPFN.js";import{a as d,b as y}from"./chunk-EQDQRRRY.js";var k=(()=>{class t{constructor(){this.dataService=s(o),this.list=l(this.dataService.getList()),this.id=a(void 0),this.heading=n(()=>this.list()?.find(e=>e.id==this.id())?.label??"--"),this.tabs=a([])}onParamsChange(e,i){this.id.set(e.id)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})();var R=(()=>{class t{constructor(){this.dataService=s(o),this.list=l(this.dataService.getList()),this.id=a(void 0),this.data=a(void 0),this.fieldConfiguration=a({type:"object",properties:{employeeId:{type:"string",description:"Employee ID"},startsFrom:{type:"date-time",description:"Starts From"},endsAt:{type:"date-time",description:"Ends At"},isFullDay:{type:"boolean",description:"Full Day"},label:{type:"string",description:"Label"},type:{type:"string",description:"Type",enum:Object.values(O)}}}),this.isDirty=a(!1),this.updatedValue=a(void 0),this.controlsConfig=n(()=>this.isDirty()?g:S),E(()=>{this.data.set(c(this.list()?.find(e=>e.id==this.id())))})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(i=>e.isDirty??i)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,i){switch(e){case"refresh":case"cancel":{this.data.set(c(this.list()?.find(r=>r.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let r=this.updatedValue();r&&(this.dataService.save(r),this.updateState({isDirty:!1}));break}}}onParamsChange(e,i){this.id.set(e.id)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})();var V=(()=>{class t{constructor(){this.dataService=s(o),this.rawData=l(this.dataService.getList()),this.employeeDataService=s(N),this.employeeList=l(this.employeeDataService.getList()),this.configuration={id:"employee-calendar-table",useVirtualScroll:!0},this.data=n(()=>{let e=this.rawData(),i=this.employeeList();return!e||!i?[]:e.map(r=>y(d({},r),{employee:i.find(_=>_.id==r.employeeId)})).toSorted(this.sortFn())}),this.columnsConfig=a([{key:"employeeName",label:"Employee",path:"employee.name"},{key:"label",label:"Label"},{key:"startsFrom",label:"Starts",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isSortedDesc:!0},{key:"endsAt",label:"Ends",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isAlignEnd:!0}]),this.columnsToDisplay=a(["employeeName","label","startsFrom","endsAt"]),this.controlsConfig=a([]),this.sortFn=n(()=>L(this.columnsConfig()))}routeToDetail(e){return["../detail",e.id]}onHeaderCellClick(e,i){this.columnsConfig.update(r=>F(r,e))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})();var ce=[{path:"",data:d({},h({title:"Calendar"})),children:[{path:"detail/:id",component:f,data:d({},h({deps:[o],titleFn:(t,w)=>t.params.pipe(v(e=>w.getList().pipe(C(i=>i.find(r=>r.id==e.id)?.label??"--"))))})),providers:[{provide:m,useClass:k}],children:[{path:"raw",component:b,canDeactivate:[D],providers:[{provide:T,useClass:R}]},{path:"**",redirectTo:"raw"}]},{path:"",component:f,providers:[{provide:m,useClass:u}],children:[{path:"monthly/:timestamp",loadComponent:()=>import("./chunk-E5TGSP35.js").then(t=>t.EmployeeCalendarMonthlyComponent),providers:[{provide:u,useExisting:m}]},{path:"data",component:I,providers:[{provide:A,useClass:V}]},{path:"**",redirectTo:"monthly/-1"}]}]}];export{ce as ROUTES};
