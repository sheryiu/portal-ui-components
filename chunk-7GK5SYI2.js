import{A as m,B as u,H as d,L as l,a as o,aa as p,e as a,h as n,jb as c}from"./chunk-R6PKS6RY.js";import{a as s}from"./chunk-EYYPJTXZ.js";var g=(()=>{let t=class t extends s{constructor(){super("database"),this.platformId=l(p),this.isServer=c(this.platformId),!this.isServer&&(import("./chunk-HB23S4RE.js"),this.version(8).stores({armors:"id, armorSetId",armorSets:"id, rarity, setBonusId",armorSetBonuses:"id, skillId",skills:"id"}),this.bytesUsed$=new o(e=>{if(this.isServer)return;let r=()=>{e.next(null)};return s.on("storagemutated",r),()=>s.on("storagemutated").unsubscribe(r)}).pipe(m(null),u(()=>a(navigator.storage.estimate())),n(e=>({used:e.usage,percentage:(e.usage??0)/(e.quota??1)}))))}emptyDatabase(){return this.delete().then(()=>{location.reload()})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();export{g as a};
