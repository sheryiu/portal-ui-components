import{a as d}from"./chunk-IADFRAWW.js";import"./chunk-PUMXHUDU.js";import{Ab as E,Bb as j,C as p,Cb as S,D,Db as v,P as a,Ra as m,X as b,Y as w,Za as y,a as c,b as f,ca as g,ha as T,i as C,oa as l,pa as h,tb as A,ub as I,vb as k,xb as F,y as n}from"./chunk-YM4RELYR.js";var L=(()=>{let e=class e{constructor(){this.dataService=p(d),this.list=m(this.dataService.getList()),this.params=a({}),this.heading=l(()=>{let t=this.list()?.find(i=>i.id==this.params().id)?.location;return t?`${t.aisle.toUpperCase()}${t.row} - ${t.layer}`:"--"}),this.tabs=a([{label:"Raw",route:["./"]}])}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac});let r=e;return r})();var R=(()=>{let e=class e{constructor(){this.dataService=p(d),this.list=m(this.dataService.getList()),this.params=a({}),this.data=a(this.list()?.find(t=>t.id==this.params().id)),this.jsonSchema=a({type:"object",properties:{location:{type:"object",description:"Shelf Location",properties:{aisle:{type:"string",description:"Aisle"},row:{type:"number",description:"Row"},layer:{type:"number",description:"Layer"}}},maxCapacity:{type:"number",description:"Maximum Capacity (grams)"},isAllowFragileItems:{type:"boolean",description:"Allows Fragile Items Inside"},dimensions:{type:"object",description:"Dimension",properties:{width:{type:"number",description:"Width (millimeters)"},depth:{type:"number",description:"Depth (millimeters)"},height:{type:"number",description:"Height (millimeters)"}}}}}),this.isDirty=a(!1),this.updatedValue=a(void 0),this.controlsConfig=l(()=>this.isDirty()?I:A),h(()=>{this.data.set(structuredClone(this.list()?.find(t=>t.id==this.params().id)))},{allowSignalWrites:!0})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(i=>t.isDirty??i)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,i){switch(t){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(s=>s.id==this.params().id))),this.updateState({isDirty:!1});break}case"save":{let s=this.updatedValue();s&&(this.dataService.save(s),this.updateState({isDirty:!1}));break}}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac});let r=e;return r})();var O=(()=>{let e=class e{constructor(){this.params=a({}),this.heading=a("Warehouse Shelves"),this.tabs=a([{label:"Map",route:["map"]},{label:"Data",route:["data"]}])}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac});let r=e;return r})();var x=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=D({type:e,selectors:[["demo-inventory-shelf-map"]],standalone:!0,features:[T],decls:2,vars:0,template:function(i,s){i&1&&(b(0,"p"),g(1,"inventory-shelf-map works!"),w())}});let r=e;return r})();var V=(()=>{let e=class e{constructor(){this.dataService=p(d),this.rawData=m(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=a([]),this.columnsConfig=a([{key:"aisle",path:"location.aisle",label:"Aisle"},{key:"row",path:"location.row",label:"Row"},{key:"layer",path:"location.layer",label:"Layer"},{key:"maxCapacity",label:"Maximum Capacity (g)",jsonSchema:{type:"number"}},{key:"isAllowFragileItems",label:"Allows Fragile",jsonSchema:{type:"boolean"}}]),this.columnsToDisplay=a(["aisle","row","layer","maxCapacity","isAllowFragileItems"]),this.controlsConfig=a([{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}]),this.simpleFilterValue=a({}),this.sortFn=l(()=>{let t=this.columnsConfig().find(s=>s.isSortedAsc||s.isSortedDesc);if(!t)return()=>0;let i=t.isSortedDesc?-1:1;return(s,o)=>{switch(t.key){case"aisle":case"row":case"layer":return s.location[t.key]>o.location[t.key]?i:s.location[t.key]<o.location[t.key]?-1*i:0;default:return s[t.key]>o[t.key]?i:s[t.key]<o[t.key]?-1*i:0}}}),this.filterFn=l(()=>{let t=this.simpleFilterValue(),i=Object.values(t??{}).some(s=>!!s);return s=>!0}),h(()=>{let t=this.rawData();t&&this.data.set(t.filter(this.filterFn()).sort(this.sortFn()))},{allowSignalWrites:!0})}onHeaderCellClick(t,i){this.columnsConfig.update(s=>s.map(o=>o.key==t?f(c({},o),{isSortedAsc:!o.isSortedAsc&&!o.isSortedDesc?!0:!!o.isSortedDesc,isSortedDesc:!!o.isSortedAsc}):f(c({},o),{isSortedAsc:!1,isSortedDesc:!1})))}routeToDetail(t){return["../","detail",t.id]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac});let r=e;return r})();var pt=[{path:"",data:c({},y({title:"Shelf"})),children:[{path:"detail/:id",component:v,data:c({},y({titleFn:r=>r.params.pipe(C(e=>e.id))})),providers:[{provide:S,useClass:L}],children:[{path:"",component:F,providers:[{provide:k,useClass:R}]}]},{path:"",component:v,providers:[{provide:S,useClass:O}],children:[{path:"map",component:x},{path:"data",component:j,providers:[{provide:E,useClass:V}]},{path:"**",redirectTo:"map"}]}]}];export{pt as ROUTES};
