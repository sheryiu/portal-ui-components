import{$a as bt,A as me,Ca as Y,Da as ge,Ga as ye,Ha as ct,I as fe,Ja as xe,Ka as De,L as k,M as ze,N as Ce,P as he,Pa as dt,Q as Ue,Qa as pt,R as Ge,Ra as ut,S as We,T as qe,U as Ye,V as be,Wa as _t,Xa as mt,Ya as ft,Za as Ct,_ as Ke,_a as ht,ab as vt,b as se,ba as Je,bb as Tt,c as Me,ca as Qe,cb as gt,d as ce,db as yt,eb as xt,fb as Dt,gb as wt,h as je,ha as Xe,la as Ze,ma as et,na as tt,o as He,oa as it,pa as nt,qa as ot,r as de,ra as rt,s as pe,sa as at,ta as lt,ua as st,va as ve,w as ue,x as H,xa as Te,y as q,z as _e,za as z}from"./chunk-YMJKTHWP.js";import{$ as ee,Ab as x,Bb as D,C as G,Cb as l,Da as L,Db as d,Eb as h,Fb as W,Gb as y,H as Z,Ha as Pe,Jb as b,Kb as s,Lb as Be,Mb as ne,Ra as c,V as Ae,Vb as f,Wb as g,Zb as oe,ac as re,bc as M,ca as R,cc as w,dc as ae,fa as u,fb as E,hb as Ie,hc as A,jc as j,kc as le,mb as m,oa as v,pa as T,q as X,r as N,sa as te,sc as Ne,ta as Ve,ub as Re,uc as _,vb as p,wb as ie,wc as O,xb as Le,xc as V,ya as $e,yb as C,z as Ee,za as F,zb as Oe}from"./chunk-O5WS6LKQ.js";import{a as S,b as I}from"./chunk-EQDQRRRY.js";var Q=(t,o)=>o.id,$t=(t,o)=>({"pui-action-drawer-layout__toolbar__most-emphasized":t,"pui-action-drawer-layout__toolbar__normal":o});function Pt(t,o){if(t&1&&W(0,3),t&2){let e=s();p("ngComponentOutlet",e.configuration.content)("ngComponentOutletInputs",e.contentInputs())}}function It(t,o){if(t&1&&(l(0,"i"),f(1),d()),t&2){let e=s().$implicit;c(),g(e.icon)}}function Rt(t,o){if(t&1&&W(0,7),t&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Lt(t,o){if(t&1){let e=y();l(0,"button",6),b("click",function(n){let r=v(e).$implicit,a=s();return T(a.layoutService.controlOnClick(r.id,n))}),m(1,It,2,1,"i")(2,Rt,1,1,"ng-container",7),l(3,"span"),f(4),d()()}if(t&2){let e=o.$implicit,i=s();p("ngClass",ae(7,$t,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled)("puiTooltip",e.label)("puiTooltipPosition","top"),c(),C(e.icon?1:e.iconTemplateRef?2:-1),c(3),g(e.label)}}var we=(t,o)=>o.key,K=t=>({enum:t}),Ot=t=>({format:t}),Bt=t=>({"date-time":t}),St=()=>({});function Nt(t,o){if(t&1&&h(0,"pui-field-def",2),t&2){let e,i=o.$implicit;p("key",i.key)("fieldType",i.fieldConfiguration.type)("label",(e=i.fieldConfiguration.description)!==null&&e!==void 0?e:i.key)("fieldConfig",i.fieldConfiguration.type=="string"?w(4,K,i.fieldConfiguration.enum):i.fieldConfiguration.type=="number"?w(6,K,i.fieldConfiguration.enum):i.fieldConfiguration.type=="date-time"?w(10,Bt,w(8,Ot,i.fieldConfiguration.format)):M(12,St))}}function Mt(t,o){if(t&1&&(l(0,"form")(1,"pui-fieldset",1),x(2,Nt,1,13,"pui-field-def",2,we),d()()),t&2){let e=s();c(),p("formControl",e.formControl),c(),D(e.flattenedControls())}}function jt(t,o){if(t&1){let e=y();l(0,"pui-layout-control",3),b("click",function(n){let r=v(e).$implicit,a=s();return T(a.onControlClick(r.id,n))}),d()}if(t&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var kt=()=>[],Ht=t=>({peek:t}),zt=t=>({outlets:t}),Ut=t=>[t];function Gt(t,o){if(t&1&&(l(0,"a",1)(1,"i"),f(2,"open_in_full"),d()()),t&2){let e=s();p("routerLink",e.routeToFullContent())}}var Wt=[[["",8,"pui-root-sidenav__header__logo"]],[["",8,"pui-root-sidenav__nav"]]],qt=[".pui-root-sidenav__header__logo",".pui-root-sidenav__nav"];function Yt(t,o){if(t&1&&h(0,"pui-field-def",5),t&2){let e,i=o.$implicit;p("key",i.key)("fieldType",i.fieldConfiguration.type)("label",(e=i.fieldConfiguration.description)!==null&&e!==void 0?e:i.key)("fieldConfig",i.fieldConfiguration.type=="string"?w(5,K,i.fieldConfiguration.enum):i.fieldConfiguration.type=="number"?w(7,K,i.fieldConfiguration.enum):M(9,St))("isNullable",!1)}}function Kt(t,o){if(t&1){let e=y();l(0,"pui-fieldset",4),b("valueChange",function(n){v(e);let r=s();return T(r.onFilterValueChange(n))}),x(1,Yt,1,10,"pui-field-def",5,we),d()}if(t&2){let e=s();p("formControl",e.filterFormControl),c(),D(e.flattenFilterDef())}}function Jt(t,o){if(t&1&&h(0,"pui-loading-panel"),t&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())}}function Qt(t,o){if(t&1){let e=y();l(0,"pui-table-header-cell",9),b("cellClick",function(n){v(e);let r=s().$implicit,a=s(2);return T(a.onHeaderClick(r.key,n))}),f(1),d()}if(t&2){let e,i,n,r,a=s().$implicit;p("centerAligned",(e=a.isAlignCenter)!==null&&e!==void 0?e:!1)("rightAligned",(i=a.isAlignEnd)!==null&&i!==void 0?i:!1)("sortedAsc",(n=a.isSortedAsc)!==null&&n!==void 0?n:!1)("sortedDesc",(r=a.isSortedDesc)!==null&&r!==void 0?r:!1),c(),g(a.label)}}function Xt(t,o){t&1&&f(0," \xA0ago ")}function Zt(t,o){if(t&1&&(l(0,"pui-time-display",12),A(1,"lodashGet"),l(2,"span"),f(3,"--"),d()(),m(4,Xt,1,0)),t&2){let e,i=s(2).$implicit,n=s().$implicit;p("mode",n.fieldConfiguration.format=="timeAgo"?"timeAgo":"normal")("format",n.fieldConfiguration.format)("date",j(1,4,i,(e=n.path)!==null&&e!==void 0?e:n.key)),c(4),C(n.fieldConfiguration.format=="timeAgo"?4:-1)}}function ei(t,o){if(t&1&&(oe(0),A(1,"lodashGet"),l(2,"i",13),f(3),d()),t&2){let e,i=s(2).$implicit,n=s().$implicit,r=j(1,3,i,(e=n.path)!==null&&e!==void 0?e:n.key);c(2),Le("pui-table-cell__boolean-content--true",r===!0),c(),g(r===!0?"check":r===!1?"close":"")}}function ti(t,o){if(t&1&&(l(0,"span"),f(1),A(2,"lodashGet"),d()),t&2){let e,i=s(2).$implicit,n=s().$implicit;c(),g(j(2,1,i,(e=n.path)!==null&&e!==void 0?e:n.key))}}function ii(t,o){if(t&1&&m(0,Zt,5,7)(1,ei,4,6,"i",11)(2,ti,3,4,"span"),t&2){let e,i=s(2).$implicit;C((e=i.fieldConfiguration.type)==="date-time"?0:e==="boolean"?1:2)}}function ni(t,o){if(t&1&&(l(0,"span"),f(1),A(2,"lodashGet"),d()),t&2){let e,i=s().$implicit,n=s().$implicit;c(),g(j(2,1,i,(e=n.path)!==null&&e!==void 0?e:n.key))}}function oi(t,o){if(t&1&&(l(0,"pui-table-cell",10),m(1,ii,3,1)(2,ni,3,4,"span"),d()),t&2){let e,i,n=s().$implicit;p("centerAligned",(e=n.isAlignCenter)!==null&&e!==void 0?e:!1)("rightAligned",(i=n.isAlignEnd)!==null&&i!==void 0?i:!1),c(),C(n.fieldConfiguration?1:2)}}function ri(t,o){if(t&1&&m(0,Qt,2,5,"pui-table-header-cell",7)(1,oi,3,3,"pui-table-cell",8),t&2){let e=o.$implicit;p("puiTableHeaderCellDef",e.key),c(),p("puiTableCellDef",e.key)}}function ai(t,o){if(t&1){let e=y();l(0,"pui-table-row",17),A(1,"isInSet"),b("click",function(){let n=v(e).$implicit,r=s(4);return T(r.onRowClick(n))}),d()}if(t&2){let e=o.$implicit,i=s(4);ie("height",48,"px"),p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",le(1,5,e,i.selectedItems(),i.cmpFn))}}function li(t,o){if(t&1&&(l(0,"cdk-virtual-scroll-viewport",15),m(1,ai,2,9,"pui-table-row",16),d()),t&2){let e=s(3);ie("height",e.data().length*48,"px"),c(),p("cdkVirtualForOf",e.data())("cdkVirtualForTrackBy",e.trackingFn)("cdkVirtualForTemplateCacheSize",0)}}function si(t,o){if(t&1&&m(0,li,2,5,"cdk-virtual-scroll-viewport",14),t&2){let e=s(2);C(e.isBrowser?0:-1)}}function ci(t,o){if(t&1){let e=y();l(0,"pui-table-row",17),A(1,"isInSet"),b("click",function(){let n=v(e).$implicit,r=s(3);return T(r.onRowClick(n))}),d()}if(t&2){let e=o.$implicit,i=s(3);p("item",e)("route",e[i.ROUTE_TO_DETAIL])("selected",le(1,3,e,i.selectedItems(),i.cmpFn))}}function di(t,o){if(t&1&&x(0,ci,2,7,"pui-table-row",18,Oe),t&2){let e=s(2);D(e.data())}}function pi(t,o){if(t&1){let e=y();l(0,"pui-table",2),x(1,ri,2,2,null,null,we),l(3,"pui-table-body")(4,"div",6),b("skippedChanged",function(n){v(e);let r=s();return T(r.scrolledToTop.set(!n))}),d(),h(5,"pui-table-header-row"),m(6,si,1,1)(7,di,2,0),l(8,"div",6),b("skippedChanged",function(n){v(e);let r=s();return T(r.scrolledToBottom.set(!n))}),d()()()}if(t&2){let e=s();p("@loading",void 0)("@.disabled",e.isInitial())("id",e.configuration==null?null:e.configuration.id)("itemHeight",48)("columns",e.columnsToDisplay())("columnWidths",M(8,kt))("selectionMode",e.selectionMode()),c(),D(e.columnConfig()),c(5),C(e.configuration!=null&&e.configuration.useVirtualScroll?6:7)}}function ui(t,o){if(t&1){let e=y();l(0,"pui-layout-control",19),b("click",function(n){let r=v(e).$implicit,a=s();return T(a.onControlClick(r.id,n))}),d()}if(t&2){let e=o.$implicit;p("id",e.id)("label",e.label)("icon",e.icon)("iconTemplateRef",e.iconTemplateRef)("disabled",e.isDisabled)("weight",e.weight)("mode",e.mode)}}var _i=(t,o)=>o.label,mi=(t,o)=>({"pui-vertical-layout__toolbar__most-emphasized":t,"pui-vertical-layout__toolbar__normal":o});function fi(t,o){if(t&1&&(l(0,"a",5),f(1),d()),t&2){let e=s().$implicit;p("routerLink",e.route),c(),g(e.label)}}function Ci(t,o){if(t&1&&m(0,fi,2,2,"a",6),t&2){let e,i=o.$implicit;p("puiTab",i.label)("puiTabHidden",(e=i.hidden)!==null&&e!==void 0?e:!1)}}function hi(t,o){if(t&1){let e=y();l(0,"pui-tab-bar",4),b("tabChange",function(n){v(e);let r=s(2);return T(r.onTabChanged(n))}),x(1,Ci,1,2,"a",5,_i),d()}if(t&2){let e=s(2);p("currentTab",e.activeTab()),c(),D(e.tabs())}}function bi(t,o){if(t&1&&(l(0,"i"),f(1),d()),t&2){let e=s().$implicit;c(),g(e.icon)}}function vi(t,o){if(t&1&&W(0,11),t&2){let e=s().$implicit;p("ngTemplateOutlet",e.iconTemplateRef)}}function Ti(t,o){if(t&1){let e=y();l(0,"button",10),b("click",function(n){let r=v(e).$implicit,a=s(3);return T(a.layoutService.controlOnClick(r.id,n))}),m(1,bi,2,1,"i")(2,vi,1,1,"ng-container",11),l(3,"span"),f(4),d()()}if(t&2){let e=o.$implicit,i=s(3);p("ngClass",ae(6,mi,e.id==i.mostEmphasizedControlId(),e.id!=i.mostEmphasizedControlId()&&(e.icon||e.iconTemplateRef)))("puiTooltip",e.label)("disabled",e.isDisabled)("hoverableEnabled",!e.isDisabled),c(),C(e.icon?1:e.iconTemplateRef?2:-1),c(3),g(e.label)}}function gi(t,o){if(t&1&&(h(0,"div",7),l(1,"div",8),x(2,Ti,5,9,"button",9,Q),d()),t&2){let e=s(2);c(2),D(e.controls())}}function yi(t,o){if(t&1&&(l(0,"header",2),m(1,hi,3,1,"pui-tab-bar",3)(2,gi,4,0),d()),t&2){let e=s();c(),C(e.tabs().length>0?1:-1),c(),C(e.controls().length>0?2:-1)}}var U=(()=>{class t{constructor(){this._controls=L([]),this.controls=_(()=>this._controls().toSorted((e,i)=>(e.weight??0)-(i.weight??0))),this.mostEmphasizedControlId=_(()=>this.controls().filter(e=>!e.mode||e.mode=="auto").at(-1)?.id),this.eventsMap={}}registerControl(e,i){return this._controls.update(n=>[...n,S({},e)]),this.eventsMap[e.id]=i,{update:n=>{this._controls.update(r=>r.map(a=>a.id==n.id?S(S({},a),n):a))},dispose:()=>{this._controls.update(n=>n.filter(r=>r.id!=e.id))}}}controlOnClick(e,i){this.eventsMap[e]?.click?.(i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac})}}return t})(),xi=(()=>{class t{constructor(){this.overlayRef=u(at),this.dataProvider=u(Ft),this.layoutService=u(U,{self:!0}),this.configuration=this.dataProvider?.configuration,this.heading=_(()=>this.dataProvider.heading()),this.contentInputs=_(()=>this.dataProvider.contentInputs?.()??{}),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,this.dataProvider.onActionDrawerInit?.(this.overlayRef)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-action-drawer-layout"]],hostAttrs:[1,"pui-action-drawer-layout"],features:[re([U])],decls:10,vars:2,consts:[[1,"@container/layout"],[1,"pui-action-drawer-layout__heading"],[1,"pui-action-drawer-layout__content"],[3,"ngComponentOutlet","ngComponentOutletInputs"],[1,"pui-action-drawer-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],["puiFilledButton","","color","accent",3,"click","ngClass","disabled","hoverableEnabled","puiTooltip","puiTooltipPosition"],[3,"ngTemplateOutlet"]],template:function(i,n){i&1&&(l(0,"div",0)(1,"header",1),h(2,"pui-breadcrumbs"),l(3,"h1"),f(4),d()(),l(5,"div",2),m(6,Pt,1,2,"ng-container",3),d(),l(7,"div",4),x(8,Lt,5,10,"button",5,Q),d()()),i&2&&(c(4),g(n.heading()),c(2),C(n.configuration&&n.configuration.content?6:-1),c(2),D(n.controls()))},dependencies:[ge,Me,ce,z,Te,Y,se],encapsulation:2})}}return t})(),Ft=new R("action drawer layout data provider"),Qi=(()=>{class t{constructor(){this.overlay=u(lt),this.injector=u(te)}open(e,i={width:"480px"}){return this.overlay.open(xi,{positionStrategy:this.overlay.position().global().right("0").centerVertically(),maxWidth:"90vw",width:i.width??"480px",height:"100%",hasBackdrop:!0,backdropClass:"pui-action-drawer-backdrop",closeOnBackdropClick:!0,disposeOnNavigation:!0,closeOnEscapeKeydown:!0,animation:"slideInEnd",data:i.overlayData,parentInjector:te.create({providers:[{provide:rt,useValue:i.overlayData},{provide:Ft,useClass:e},...i.providers??[]],parent:i.parent??this.injector})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Di=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"}],Xi=[{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}],wi=new R("editable content data provider");function J(t,o,e,i){return Object.entries(t.properties).flatMap(([r,a])=>{if(a.type=="object")return J(a,o,`${e?`${e}.`:""}${r}`,`${i}${a.description??""} / `);if(a.type=="array"){let $=fe(o,`${e?`${e}.`:""}${r}`);return[{key:`${e?`${e}.`:""}${r}`,fieldConfiguration:I(S({},a),{description:`${i}${a.description??""}`})},...Array.isArray($)?$.flatMap((Se,P)=>a.items.type=="object"?[...J(a.items,o,`${e?`${e}.`:""}${r}[${P}]`,`${i}${a.description??""} / #${P} / `)]:[{key:`${e?`${e}.`:""}${r}[${P}]`,fieldConfiguration:I(S({},a.items),{description:`${i}${a.description??""} / #${P}`})}]):[]]}return[{key:`${e?`${e}.`:""}${r}`,fieldConfiguration:I(S({},a),{description:i+a.description})}]})}var Et=(()=>{class t{constructor(){if(this.layoutService=u(U,{optional:!0}),this.destroyRef=u(Ve),this.id=F.required(),this.label=F.required(),this.weight=F(0),this.icon=F(),this.iconTemplateRef=F(),this.disabled=F(!1,{transform:Ne}),this.mode=F(void 0),this.click=$e(),!this.layoutService)return;let e,i;V(()=>{let n=this.id(),r=this.label(),a=this.disabled(),$=this.icon(),Se=this.iconTemplateRef(),P=this.mode(),At=this.weight(),ke={id:n,label:r,isDisabled:a,icon:$,iconTemplateRef:Se,weight:At,mode:P};if(e)e(ke);else{let Fe=this.layoutService.registerControl(ke,{click:Vt=>this.click.emit(Vt)});e=Fe.update,i=Fe.dispose}}),this.destroyRef.onDestroy(()=>{i?.()})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=Ie({type:t,selectors:[["pui-layout-control"]],inputs:{id:[1,"id"],label:[1,"label"],weight:[1,"weight"],icon:[1,"icon"],iconTemplateRef:[1,"iconTemplateRef"],disabled:[1,"disabled"],mode:[1,"mode"]},outputs:{click:"click"}})}}return t})(),Zi=(()=>{class t{constructor(){this.route=u(H),this.dataProvider=u(wi),this.formControl=new qe(void 0),this.data=_(()=>this.dataProvider.data()),this.fieldConfiguration=_(()=>this.dataProvider.fieldConfiguration()),this.formControlValue=Ce(this.formControl.events.pipe(G(e=>e instanceof Ge),X(e=>e.value))),this.flattenedControls=_(()=>{let e=this.fieldConfiguration(),i=this.formControlValue();return e?J(e,i,"",e.description?`${e.description} / `:""):[]}),this.controlsConfig=_(()=>this.dataProvider.controlsConfig?.()??Di),V(()=>{let e=this.data();O(()=>this.formControl.setValue(e))}),V(()=>{let e=this.formControlValue();O(()=>this.dataProvider.onValueChange?.(e))}),N([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.formControl.events.pipe(k()).subscribe(()=>{this.dataProvider.onStateChange?.({isValid:this.formControl.valid,isDisabled:this.formControl.disabled,isDirty:this.formControl.dirty})}),this.dataProvider.registerUpdateState?.(e=>{O(()=>{e?.isDirty===!1?this.formControl.markAsPristine():e?.isDirty===!0&&this.formControl.markAsDirty(),e?.isDisabled===!1?this.formControl.enable():e?.isDisabled===!0&&this.formControl.disable()})})}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-editable-content"]],hostAttrs:[1,"pui-editable-content"],decls:4,vars:1,consts:[[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"formControl"],[3,"key","fieldType","label","fieldConfig"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,n){i&1&&(l(0,"main"),m(1,Mt,4,1,"form"),d(),x(2,jt,1,7,"pui-layout-control",0,Q)),i&2&&(c(),C(n.flattenedControls().length>0?1:-1),c(),D(n.controlsConfig()))},dependencies:[De,xe,ye,Ye,he,Ue,We,be,Et],encapsulation:2})}}return t})(),Si=new R("peekable addon data provider"),ki=(()=>{class t{constructor(){this.dataProvider=u(Si,{optional:!0}),this.route=u(H),this.routeToFullContent=_(()=>this.dataProvider?.routeToFullContent()??null),N([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([e,i])=>this.dataProvider?.onParamsChange?.(e,i))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-peekable-addon"]],hostAttrs:[1,"pui-peekable-addon"],decls:8,vars:9,consts:[[1,"pui-peekable-addon__nav"],["puiBaseButton","","puiTooltip","View in full",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"spacer"],["puiBaseButton","","puiTooltip","Close peek window",1,"pui-peekable-addon__nav-button",3,"routerLink"],[1,"pui-peekable-addon__content"],["name","peek"]],template:function(i,n){i&1&&(l(0,"nav",0),m(1,Gt,3,1,"a",1),h(2,"div",2),l(3,"a",3)(4,"i"),f(5,"close"),d()()(),l(6,"main",4),h(7,"router-outlet",5),d()),i&2&&(c(),C(n.routeToFullContent()?1:-1),c(2),p("routerLink",w(7,Ut,w(5,zt,w(3,Ht,M(2,kt))))))},dependencies:[q,me,z,ve,Y],encapsulation:2})}}return t})(),en=(()=>{class t{constructor(){this.router=u(_e,{optional:!0}),this.isSidenavVisible=L(!1),this.router?.events.pipe(G(e=>e instanceof ue),Z(150),k()).subscribe(()=>{this.isSidenavVisible.set(!1)})}toggleSidenav(e){this.isSidenavVisible.update(i=>e??!i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-root-sidenav"]],ngContentSelectors:qt,decls:12,vars:1,consts:[[1,"pui-root-sidenav"],[1,"pui-root-sidenav__header"],["puiBaseButton","",1,"pui-root-sidenav__header__hamburger",3,"click"],[1,"spacer"],[1,"pui-root-sidenav__nav-wrapper"],[1,"pui-root-sidenav__content-wrapper"],[1,"pui-root-sidenav__content"]],template:function(i,n){i&1&&(Be(Wt),l(0,"div",0)(1,"div",1)(2,"button",2),b("click",function(){return n.toggleSidenav()}),l(3,"i"),f(4,"menu"),d()(),h(5,"div",3),ne(6),d(),l(7,"div",4),ne(8,1),d()(),l(9,"div",5)(10,"div",6),h(11,"router-outlet"),d()()),i&2&&(c(10),Re("data-sidenav",n.isSidenavVisible()?"visible":"hidden"))},dependencies:[z,ve,q],encapsulation:2})}}return t})();function tn(t,o,e=!0){let i=Object.values(t??{}).some(r=>typeof r=="string"?!!r:r!=null),n=Object.keys(t??{});return r=>{if(!i)return!0;if(e){for(let a of n)if(a in o&&o[a]!=null&&!o[a](r,a,t[a],t))return!1;return!0}else{for(let a of n)if(a in o&&o[a]!=null&&o[a](r,a,t[a],t))return!0;return!1}}}function nn(t){let o=t.find(i=>i.isSortedAsc||i.isSortedDesc);if(!o)return()=>0;let e=o.isSortedDesc?-1:1;return o.fieldConfiguration?.type=="date-time"?(i,n)=>{let r=B(i,o),a=B(n,o);return r==null&&a==null?0:r instanceof Date&&a instanceof Date?(r.getTime()-a.getTime())*e:r instanceof Date?1*e:-1*e}:(i,n)=>{switch(o.key){default:return B(i,o)>B(n,o)?e:B(i,o)<B(n,o)?-1*e:0}}}function B(t,o){return o.path?fe(t,o.path):t[o.key]}var Fi=[{id:"refresh",label:"Refresh",icon:"refresh",mode:"low-emphasis"},{id:"add",label:"Add new",icon:"add"}],Ei=new R("table content data provider"),on=(()=>{class t{constructor(){this.route=u(H),this.dataProvider=u(Ei),this.isBrowser=je(u(Pe)),this.ROUTE_TO_DETAIL=Symbol(),this.configuration=this.dataProvider.configuration,this.isLoading=_(()=>this.dataProvider.isLoading?.()??!1),this.data=_(()=>{let e=this.dataProvider.data(),i=this.dataProvider.routeToDetail;return e?.map(n=>Object.assign({},n,{[this.ROUTE_TO_DETAIL]:i?.bind(this.dataProvider)?.(n)}))}),this.columnConfig=_(()=>this.dataProvider.columnsConfig()),this.columnsToDisplay=_(()=>this.dataProvider.columnsToDisplay()),this.selectionMode=_(()=>this.dataProvider.selectionMode?.()??null),this.selectedItems=_(()=>this.dataProvider.selectedItems?.()??new Set),this.controlsConfig=_(()=>this.dataProvider.controlsConfig?.()??Fi),this.flattenFilterDef=_(()=>{let e=this.dataProvider.filterConfig?.();return e?J(e,{},"",e.description?`${e.description} / `:""):[]}),this.filterFormControl=u(Ke).nonNullable.control({}),this.isInitial=Ce(Ee(100).pipe(X(()=>!1)),{initialValue:!0}),this.scrolledToTop=L(!1),this.scrolledToBottom=L(!1),this.cmpFn=this.dataProvider.compareFn??((e,i)=>e==i),N([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),V(()=>{this.dataProvider.filterValue&&this.filterFormControl.setValue(this.dataProvider.filterValue?.(),{emitEvent:!1})}),this.dataProvider.onScrolledToTop&&V(()=>{this.isLoading()||this.scrolledToTop()&&O(()=>this.dataProvider.onScrolledToTop())}),this.dataProvider.onScrolledToBottom&&V(()=>{this.isLoading()||this.scrolledToBottom()&&O(()=>this.dataProvider.onScrolledToBottom())}),ze(this.data).pipe(Z(100),k()).subscribe(()=>{this.scrolledToTop()&&this.dataProvider.onScrolledToTop?.(),this.scrolledToBottom()&&this.dataProvider.onScrolledToBottom?.()})}ngOnInit(){this.dataProvider?.onInit?.()}ngOnDestroy(){this.dataProvider?.onDestroy?.()}onRowClick(e){this.dataProvider.onTableRowClick?.(e)}onHeaderClick(e,i){this.dataProvider.onHeaderCellClick?.(e,i)}onControlClick(e,i){this.dataProvider.onControlClick?.(e,i)}onFilterValueChange(e){this.dataProvider.onFilterChange?.(e)}onScrolled(e,i){e=="top"?this.scrolledToTop.set(!i):this.scrolledToBottom.set(!i)}trackingFn(e,i){return e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-table-content"]],hostAttrs:[1,"pui-table-content"],decls:9,vars:2,consts:[[3,"formControl"],[1,"pui-table-content__content-wrapper"],[3,"id","itemHeight","columns","columnWidths","selectionMode"],[3,"id","label","icon","iconTemplateRef","disabled","weight","mode"],[3,"valueChange","formControl"],[3,"key","fieldType","label","fieldConfig","isNullable"],["puiContentVisibilityDetector","",3,"skippedChanged"],[3,"centerAligned","rightAligned","sortedAsc","sortedDesc","cellClick",4,"puiTableHeaderCellDef"],[3,"centerAligned","rightAligned",4,"puiTableCellDef"],[3,"cellClick","centerAligned","rightAligned","sortedAsc","sortedDesc"],[3,"centerAligned","rightAligned"],[1,"pui-table-cell__boolean-content",3,"pui-table-cell__boolean-content--true"],[3,"mode","format","date"],[1,"pui-table-cell__boolean-content"],["itemSize","48","scrollWindow","",3,"height"],["itemSize","48","scrollWindow",""],["puiHoverable","",3,"item","route","height","selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["puiHoverable","",3,"click","item","route","selected"],["puiHoverable","",3,"item","route","selected"],[3,"click","id","label","icon","iconTemplateRef","disabled","weight","mode"]],template:function(i,n){if(i&1&&(l(0,"main")(1,"div"),oe(2),m(3,Kt,3,1,"pui-fieldset",0),l(4,"div",1),m(5,Jt,1,2,"pui-loading-panel")(6,pi,9,9,"pui-table",2),d()()(),x(7,ui,1,7,"pui-layout-control",3,Q)),i&2){let r=n.flattenFilterDef();c(3),C(r.length>0?3:-1),c(2),C(n.isLoading()?5:6),c(2),D(n.controlsConfig())}},dependencies:[wt,bt,Dt,vt,xt,yt,Tt,Ct,gt,ht,st,Et,ct,Qe,nt,Ze,tt,et,it,De,xe,ye,he,be,Je,dt,ot],encapsulation:2,data:{animation:[He("loading",[de(":enter",pe(ut)),de(":leave",pe(pt))])]}})}}return t})();function rn(t,o,e=!0){return t.map(i=>i.key==o?I(S({},i),{isSortedAsc:!i.isSortedAsc&&!i.isSortedDesc?e:!!i.isSortedDesc,isSortedDesc:!i.isSortedAsc&&!i.isSortedDesc?!e:!!i.isSortedAsc}):I(S({},i),{isSortedAsc:!1,isSortedDesc:!1}))}var Ai=new R("vertical layout data provider"),an=(()=>{class t{constructor(){this.dataProvider=u(Ai),this.layoutService=u(U,{self:!0}),this.router=u(_e),this.route=u(H),this.activeTab=L(null),this.heading=_(()=>this.dataProvider.heading()),this.tabs=_(()=>this.dataProvider.tabs()),this.controls=this.layoutService.controls,this.mostEmphasizedControlId=this.layoutService.mostEmphasizedControlId,N([this.route.params,this.route.queryParams]).pipe(k()).subscribe(([e,i])=>this.dataProvider.onParamsChange?.(e,i)),this.router.events.pipe(G(e=>e instanceof ue),Ae(this.router.lastSuccessfulNavigation?.finalUrl),Xe(),k()).subscribe(()=>{let e=this.tabs();if(!e)return;let i=e.find(r=>{let a=this.router.createUrlTree(r.route,{relativeTo:this.route});return this.router.isActive(a,{paths:"subset",queryParams:"subset",fragment:"ignored",matrixParams:"ignored"})});if(!i)return;this.activeTab.set(i.label);let n=this.route.routeConfig?.children?.find(r=>r.path=="**");n&&(n.redirectTo=i.route.map(r=>String(r).replaceAll("..%2F","").replaceAll(".%2F","")).join("/"))})}onTabChanged(e){let i=this.tabs()?.find(n=>n.label==e);i&&this.router.navigate(i.route,{relativeTo:this.route})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=E({type:t,selectors:[["pui-vertical-layout"]],hostAttrs:[1,"pui-vertical-layout"],features:[re([U])],decls:8,vars:2,consts:[[1,"@container/layout"],[1,"pui-vertical-layout__heading"],[1,"pui-vertical-layout__controls"],[1,"pui-vertical-layout__tabs",3,"currentTab"],[1,"pui-vertical-layout__tabs",3,"tabChange","currentTab"],[3,"routerLink"],[3,"routerLink",4,"puiTab","puiTabHidden"],[1,"spacer"],[1,"pui-vertical-layout__toolbar"],["puiFilledButton","","color","accent",3,"ngClass","puiTooltip","disabled","hoverableEnabled"],["puiFilledButton","","color","accent",3,"click","ngClass","puiTooltip","disabled","hoverableEnabled"],[3,"ngTemplateOutlet"]],template:function(i,n){i&1&&(l(0,"div",0)(1,"header",1),h(2,"pui-breadcrumbs"),l(3,"h1"),f(4),d()(),m(5,yi,3,2,"header",2),h(6,"router-outlet")(7,"pui-peekable-addon"),d()),i&2&&(c(4),g(n.heading()),c(),C(n.tabs().length>0||n.controls().length>0?5:-1))},dependencies:[q,ge,z,Te,ft,mt,_t,me,ce,ki,Y,se],encapsulation:2})}}return t})();export{Ft as a,Qi as b,Di as c,Xi as d,wi as e,Et as f,Zi as g,Si as h,en as i,tn as j,nn as k,Fi as l,Ei as m,on as n,rn as o,Ai as p,an as q};
