import{a as U,b as X}from"./chunk-ZXDIRYVI.js";import{c as Z,d as s,e as ee,f as te,g as ne,h as ie,k as O,l as oe,m as re}from"./chunk-G5536VX4.js";import"./chunk-3SZSZSPF.js";import{f as Q}from"./chunk-LPOYXDON.js";import"./chunk-54KRQ4XJ.js";import{A as q,B as G,O as F,a as R,d as T,f as V,wa as J,xa as K,y as z}from"./chunk-IVXI4S32.js";import{Hb as M,Ib as A,Ka as a,Vb as u,Wb as f,ab as b,cc as H,dc as k,ea as v,gc as Y,hc as h,jc as y,kc as j,pb as B,pc as C,q as w,qb as I,rb as S,tb as x,ub as g,uc as P,vb as m,wb as l,xb as d,yb as E}from"./chunk-PPNSUE6H.js";import{a as N,b as $}from"./chunk-EQDQRRRY.js";function ae(t,e,i){let{years:n=0,months:o=0,weeks:r=0,days:p=0,hours:c=0,minutes:ue=0,seconds:fe=0}=e,W=s(t,i?.in),L=o||n?te(W,o+n*12):W,he=p||r?ee(L,p+r*7):L,ye=ue+c*60,ve=(fe+ye*60)*1e3;return Z(i?.in||t,+he+ve)}function se(t,e){let i=s(t,e?.in).getDay();return i===0||i===6}function le(t,e){let i=s(t,e?.in),n=i.getMonth();return i.setFullYear(i.getFullYear(),n+1,0),i.setHours(23,59,59,999),i}function de(t,e){let i=s(t,e?.in);return i.setDate(1),i.setHours(0,0,0,0),i}function pe(t,e){let i=ne(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=s(t,e?.in),r=o.getDay(),p=(r<n?-7:0)+6-(r-n);return o.setDate(o.getDate()+p),o.setHours(23,59,59,999),o}function ce(t,e){return s(t,e?.in).getDate()}function _(t,e){return s(t,e?.in).getMonth()}function D(t,e){return s(t,e?.in).getFullYear()}var ge=t=>["../../","detail",t],_e=(t,e)=>e.id;function De(t,e){if(t&1&&(l(0,"a",1)(1,"span",2),u(2),h(3,"date"),d(),l(4,"span",3),u(5),d()()),t&2){let i=e.$implicit;m("routerLink",H(6,ge,i.id)),a(2),f(y(3,3,i.startsFrom,"HH:mm")),a(3),f(i.label)}}var me=(()=>{let e=class e{constructor(){this.events=P.required()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=b({type:e,selectors:[["demo-calendar-events"]],hostAttrs:[1,"contents"],inputs:{events:[1,"events"]},decls:3,vars:0,consts:[[1,"flex","flex-col","gap-0.5","py-1","overflow-hidden","w-full"],["type","button","puiBaseButton","",1,"justify-start","text-start","text-sm","ps-1","pe-2","py-0.5","gap-1",3,"routerLink"],[1,"tabular-nums","dark:text-neutral-400","font-medium"],[1,"truncate"]],template:function(o,r){o&1&&(l(0,"div",0),x(1,De,6,8,"a",1,_e),d()),o&2&&(a(),g(r.events()))},dependencies:[K,G,T],encapsulation:2});let t=e;return t})();var be=(t,e)=>({"grid-rows-[min-content_repeat(6,1fr)]":t,"grid-rows-[min-content_repeat(5,1fr)]":e}),Me=(t,e)=>({"border-r":t,"dark:text-red-400":e}),ke=(t,e)=>({"border-b":t,"border-r":e}),Ce=(t,e,i,n,o)=>({"dark:text-neutral-400":t,"font-black opacity-20":e,"font-medium opacity-10":i,"dark:text-primary-50 before:rounded-full before:-top-2 before:-bottom-2 before:-left-6 before:-right-6 before:absolute before:-z-10 before:bg-primary-700":n,"dark:text-red-400":o});function Te(t,e){if(t&1&&(l(0,"div",5),u(1),h(2,"date"),d()),t&2){let i=e.$implicit,n=e.$index,o=e.$count;m("ngClass",k(5,Me,n!==o-1,i.isWeekend)),a(),f(y(2,2,i.date,"EE"))}}function we(t,e){if(t&1&&(l(0,"span",12),u(1),h(2,"date"),d(),E(3,"br")),t&2){let i=A().$implicit;a(),f(y(2,1,i.date,"MMM"))}}function Se(t,e){if(t&1&&(l(0,"div",6)(1,"span",10),B(2,we,4,4),l(3,"span"),u(4),h(5,"date"),d()(),E(6,"demo-calendar-events",11),d()),t&2){let i=e.$implicit,n=e.$index,o=e.$count;m("ngClass",k(8,ke,n<o-7,n%7!=6)),a(),m("ngClass",Y(11,Ce,(i.isLastMonth||i.isNextMonth)&&!i.isToday,!i.isLastMonth&&!i.isNextMonth,i.isLastMonth||i.isNextMonth,i.isToday,i.isWeekend)),a(),I(i.isStartOfMonth?2:-1),a(2),f(y(5,5,i.date,"dd")),a(2),m("events",i.events)}}var ft=(()=>{let e=class e{constructor(){this.route=v(z),this.router=v(q),this.timestamp=F(this.route.params.pipe(w(n=>n.timestamp),w(n=>Number(n)))),this.dataService=v(U),this.rawData=F(this.dataService.getList()),this.listService=v(X),this.selectedTime=C(()=>{let n=this.timestamp();return n!=null&&n!=-1?new Date(n):n==-1?new Date(this.listService.storedSelectedTime):new Date}),this.daysVisible=C(()=>{let n=this.selectedTime();if(n==null)return[];let o=new Date,r=ie(de(n),{weekStartsOn:0}),p=pe(le(n),{weekStartsOn:0});return oe({start:r,end:p}).map(c=>({date:c,isLastMonth:_(c)<_(n)?!0:D(c)<D(n),isNextMonth:_(c)>_(n)?!0:D(c)>D(n),isStartOfMonth:ce(c)==1,isToday:O(c,o),isWeekend:se(c)}))}),this.daysWithData=C(()=>{let n=this.daysVisible(),o=this.rawData()??[];return n.map(r=>$(N({},r),{events:o.filter(p=>O(p.startsFrom,r.date)).sort((p,c)=>p.startsFrom.getTime()-c.startsFrom.getTime())}))})}onNextMonthClick(){let n=this.selectedTime(),o=ae(n,{months:1});this.listService.updateSelectedTime(o),this.router.navigate(["../",o.getTime()],{relativeTo:this.route})}onLastMonthClick(){let n=this.selectedTime(),o=re(n,{months:1});this.listService.updateSelectedTime(o),this.router.navigate(["../",o.getTime()],{relativeTo:this.route})}onTodayClick(){let n=new Date;this.listService.updateSelectedTime(n),this.router.navigate(["../",n.getTime()],{relativeTo:this.route})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=b({type:e,selectors:[["demo-employee-calendar-monthly"]],hostAttrs:[1,"contents"],decls:15,vars:15,consts:[[1,"@container","grow","flex","flex-col"],[1,"pui-card","rounded-4","h-full","grow","overflow-hidden","flex","flex-col"],[1,"rounded-t-4","px-8","pt-6","pb-12","bg-linear-to-br","from-primary-800/20","to-primary-900/20"],[1,"text-xl","font-display"],[1,"grow","-mt-6","bg-neutral-800","rounded-t-4","border-t","grid","grid-cols-7",3,"ngClass"],[1,"text-center","pt-2","pb-1","uppercase","font-bold","text-base/none",3,"ngClass"],["puiHoverable","",1,"flex","flex-col","items-center","justify-start","gap-1.5","relative","min-h-32",3,"ngClass"],["id","lastMonth","label","Last month","mode","low-emphasis","icon","arrow_back",3,"click","weight"],["id","today","label","Today","mode","auto","icon","today",3,"click","weight"],["id","nextMonth","label","Next month","mode","low-emphasis","icon","arrow_forward",3,"click","weight"],[1,"mt-2","text-[36px]/none","@screen-md:text-[48px]/none","@screen-xl:text-[64px]/none","@screen-2xl:text-[78px]/none","text-end","absolute","z-0","-bottom-2","-right-1","whitespace-nowrap","font-display","pointer-events-none","select-none",3,"ngClass"],[3,"events"],[1,"text-[24px]/none","@screen-md:text-[32px]/none","@screen-xl:text-[40px]/none","@screen-2xl:text-[54px]/none"]],template:function(o,r){o&1&&(l(0,"div",0)(1,"main",1)(2,"div",2)(3,"span",3),u(4),h(5,"date"),d()(),l(6,"div",4),x(7,Te,3,8,"div",5,S),h(9,"slice"),x(10,Se,7,17,"div",6,S),d()()(),l(12,"pui-layout-control",7),M("click",function(){return r.onLastMonthClick()}),d(),l(13,"pui-layout-control",8),M("click",function(){return r.onTodayClick()}),d(),l(14,"pui-layout-control",9),M("click",function(){return r.onNextMonthClick()}),d()),o&2&&(a(4),f(y(5,5,r.selectedTime(),"MMMM yyyy")),a(2),m("ngClass",k(12,be,r.daysWithData().length>35,r.daysWithData().length<=35)),a(),g(j(9,8,r.daysWithData(),0,7)),a(3),g(r.daysWithData()),a(2),m("weight",-100),a(),m("weight",0),a(),m("weight",100))},dependencies:[Q,J,R,me,T,V],encapsulation:2});let t=e;return t})();export{ft as EmployeeCalendarMonthlyComponent};
