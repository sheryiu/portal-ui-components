import{a as $,b as S,c as M,d as y}from"./chunk-EIQCALGI.js";import{a as Ae}from"./chunk-HUQQFLCT.js";import{a as J}from"./chunk-KCMED6EJ.js";import{$ as g,$b as K,Ab as ye,B as p,Bb as _e,C as te,Cb as Ce,Db as Ie,E as V,Eb as be,F as R,Fb as ge,Gb as Se,Hb as Te,L as c,Mb as N,Na as le,Nb as P,O as s,Ob as xe,P as b,Pb as Ee,Q as m,Qa as se,Qb as W,Rb as De,S as x,Sb as H,U as ie,V as ne,Vb as ke,W as o,X as r,Xb as B,Y as E,Ya as f,Yb as U,Z as F,Zb as we,_ as j,_b as z,a as T,b as q,ba as l,ca as C,da as G,ga as oe,ha as ae,i as L,ia as Y,ib as ce,mb as de,ob as pe,pb as me,rb as ue,ta as u,tb as Q,va as re,wb as fe,xb as he,y as h,zb as ve}from"./chunk-REEGPD33.js";var Ve=(()=>{let e=class e{constructor(){this.dataService=p(y),this.list=f(this.dataService.getList()),this.id=s(void 0),this.heading=u(()=>this.list()?.find(i=>i.id==this.id())?.id??"--"),this.tabs=s([{label:"Info",route:["info"]},{label:"Raw",route:["raw"]}])}onParamsChange(i,a){this.id.set(i.id)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac});let t=e;return t})();var Re=(()=>{let e=class e{constructor(){this.dataService=p(y),this.list=f(this.dataService.getList()),this.id=s(void 0),this.data=s(void 0),this.fieldConfiguration=s({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(S),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{id:{type:"string",description:"ID"},description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(M)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.isDirty=s(!1),this.updatedValue=s(void 0),this.controlsConfig=u(()=>this.isDirty()?Ee:xe),re(()=>{this.data.set(structuredClone(this.list()?.find(i=>i.id==this.id())))},{allowSignalWrites:!0})}registerUpdateState(i){this.updateState=i}onStateChange(i){this.isDirty.update(a=>i.isDirty??a)}onValueChange(i){this.updatedValue.set(i)}onControlClick(i,a){switch(i){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(n=>n.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let n=this.updatedValue();n&&(this.dataService.save(n),this.updateState({isDirty:!1}));break}}}onParamsChange(i,a){this.id.set(i.id)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac});let t=e;return t})();var je=(()=>{let e=class e{constructor(){this.dataService=p($),this.overlayData=p(ce),this.configuration={content:U,useVirtualScroll:!1},this.data=f(this.dataService.getList(),{initialValue:[]}),this.columnsConfig=s([{key:"name",label:"Name",fieldConfiguration:{type:"string"}},{key:"phone",label:"Phone",fieldConfiguration:{type:"string"}}]),this.columnsToDisplay=s(["name","phone"]),this.selectionMode=s("single"),this.selectedItems=s(this.overlayData.initialValue),this.controlsConfig=u(()=>[{id:"select",label:this.selectedItems().size==0?"Select":`Select ${this.selectedItems().values().next().value.name}`,isDisabled:this.selectedItems().size==0}]),this.heading=s("Pick customer")}onControlClick(i,a){i=="select"&&(this.overlayData?.onSave(this.selectedItems().values().next().value),this.overlayRef.close())}compareFn(i,a){return i.id==a.id}onTableRowClick(i){this.selectedItems.set(new Set([i]))}onActionDrawerInit(i){this.overlayRef=i}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac});let t=e;return t})();var Pe=(t,e)=>e.id,We=t=>["/user","customer","detail",t],He=t=>["/inventory","shelf","detail",t],Be=()=>["description","isbn","quantity","totalPrice"];function Ue(t,e){if(t&1){let d=F();E(0,"div",19),o(1,"button",20),j("click",function(){V(d);let a=g();return R(a.onUpdateCustomerClick())}),o(2,"span"),l(3,"Update"),r()()}}function $e(t,e){t&1&&(o(0,"i",17),l(1,"check"),r())}function Me(t,e){t&1&&(o(0,"i",18),l(1,"close"),r())}function qe(t,e){t&1&&(o(0,"span",15),l(1,"----"),r())}function Ge(t,e){t&1&&(o(0,"pui-table-header-cell"),l(1,"Item"),r())}function Ye(t,e){t&1&&(o(0,"pui-table-header-cell"),l(1,"ISBN"),r())}function Qe(t,e){t&1&&(o(0,"pui-table-header-cell"),l(1,"Quantity"),r())}function ze(t,e){t&1&&(o(0,"pui-table-header-cell"),l(1,"Total Price"),r())}function Ke(t,e){if(t&1&&(o(0,"pui-table-cell")(1,"span",26),l(2),r()()),t&2){let d=e.$implicit;c(2),C(d.description)}}function Je(t,e){if(t&1&&(o(0,"pui-table-cell")(1,"span",26),l(2),r()()),t&2){let d=e.$implicit;c(2),C(d.isbn)}}function Xe(t,e){if(t&1&&(o(0,"pui-table-cell"),l(1," x "),o(2,"span",26),l(3),r()()),t&2){let d=e.$implicit;c(3),C(d.quantity)}}function Ze(t,e){if(t&1&&(o(0,"pui-table-cell",27),l(1," $ "),o(2,"span",26),l(3),r()()),t&2){let d=e.$implicit;c(3),C(d.totalPrice)}}function et(t,e){if(t&1&&E(0,"pui-table-row",25),t&2){let d=e.$implicit;m("item",d)}}function tt(t,e){if(t&1&&(E(0,"pui-divider"),o(1,"h2"),l(2,"Contents"),r(),o(3,"pui-table",21),b(4,Ge,2,0,"pui-table-header-cell",22)(5,Ye,2,0,"pui-table-header-cell",22)(6,Qe,2,0,"pui-table-header-cell",22)(7,ze,2,0,"pui-table-header-cell",22)(8,Ke,3,1,"pui-table-cell",23)(9,Je,3,1,"pui-table-cell",23)(10,Xe,4,1,"pui-table-cell",23)(11,Ze,4,1,"pui-table-cell",24),o(12,"pui-table-body"),E(13,"pui-table-header-row"),ie(14,et,1,1,"pui-table-row",25,Pe),r()()),t&2){let d=g();c(3),m("itemHeight",48)("columns",ae(10,Be)),c(),m("puiTableHeaderCellDef","description"),c(),m("puiTableHeaderCellDef","isbn"),c(),m("puiTableHeaderCellDef","quantity"),c(),m("puiTableHeaderCellDef","totalPrice"),c(),m("puiTableCellDef","description"),c(),m("puiTableCellDef","isbn"),c(),m("puiTableCellDef","quantity"),c(),m("puiTableCellDef","totalPrice"),c(3),ne(d.inventoryItem().contents)}}function it(t,e){if(t&1){let d=F();o(0,"pui-layout-control",29),j("click",function(){V(d);let a=g(2);return R(a.onCancelClick())}),r(),o(1,"pui-layout-control",30),j("click",function(){V(d);let a=g(2);return R(a.onSaveClick())}),r()}}function nt(t,e){if(t&1){let d=F();o(0,"pui-layout-control",31),j("click",function(){V(d);let a=g(2);return R(a.onEditClick())}),r()}}function ot(t,e){if(t&1&&b(0,it,2,0)(1,nt,1,0,"pui-layout-control",28),t&2){let d=g();x(d.isEditing()?0:1)}}var Oe=(()=>{let e=class e{constructor(){this.dataService=p(y),this.customerDataService=p($),this.inventoryShelfService=p(Ae),this.route=p(le),this.actionDrawer=p(P),this.list=f(this.dataService.getList()),this.customerList=f(this.customerDataService.getList()),this.inventoryShelfList=f(this.inventoryShelfService.getList()),this.id=f(this.route.params.pipe(L(i=>i.id))),this.inventoryItem=u(()=>this.list()?.find(i=>i.id==this.id())),this.customer=u(()=>this.customerList()?.find(i=>i.id==this.inventoryItem()?.belongsTo)),this.shelf=u(()=>this.inventoryShelfList()?.find(i=>i.id==this.inventoryItem()?.locatedIn)),this.showEditButton=u(()=>[S.OPEN,S.REPACKAGING].includes(this.inventoryItem()?.status)),this.isEditing=s(!1),this.updatedValues=s({})}onEditClick(){this.isEditing.set(!0),this.updatedValues.set({customer:null})}onCancelClick(){this.isEditing.set(!1),this.updatedValues.set({customer:null})}onSaveClick(){this.dataService.save(q(T({},this.inventoryItem()),{belongsTo:this.updatedValues().customer?.id??this.inventoryItem().belongsTo})),this.isEditing.set(!1),this.updatedValues.set({customer:null})}onUpdateCustomerClick(){this.actionDrawer.open(je,{providers:[{provide:B,useExisting:N}],overlayData:{initialValue:new Set([this.updatedValues().customer??this.customer()].filter(ue)),onSave:i=>{this.updatedValues.update(a=>q(T({},a),{customer:i}))}}})}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=te({type:e,selectors:[["demo-inventory-item-info"]],hostAttrs:[1,"contents"],standalone:!0,features:[oe],decls:50,vars:20,consts:[[1,"@container","grow"],[1,"pui-card","rounded-4","p-8","flex","flex-col","gap-8"],[1,"grid","@screen-md:grid-cols-3","gap-8"],[1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","flex","flex-col","justify-center"],[1,"text-neutral-700","dark:text-neutral-300"],[1,"text-md"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start","text-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center","w-full"],[1,"icon-6","text-neutral-700","dark:text-neutral-300"],[1,"flex","flex-col"],["puiHoverable","",1,"pui-card--subtle","rounded-4","px-8","py-4","overflow-hidden","justify-start",3,"hoverableEnabled","routerLink"],[1,"flex","flex-row","gap-2","justify-start","items-center"],[1,"text-md","uppercase"],[1,"grid","items-center","grid-cols-[min-content_minmax(0,1fr)]","gap-x-4","gap-y-3"],[1,"col-start-1","text-base","font-medium","whitespace-nowrap","text-neutral-700","dark:text-neutral-300"],[1,"col-start-2","text-md"],[1,"col-start-2","text-md",3,"date","format"],[1,"icon-5","text-green-600","dark:text-green-400"],[1,"icon-5","text-red-600","dark:text-red-400"],[1,"spacer"],["puiBorderedButton","","color","primary",1,"rounded-full","px-4","py-2",3,"click"],[3,"itemHeight","columns"],[4,"puiTableHeaderCellDef"],[4,"puiTableCellDef"],["class","tabular-nums",4,"puiTableCellDef"],[3,"item"],[1,"truncate"],[1,"tabular-nums"],["id","edit","icon","edit","label","Edit","mode","auto"],["id","cancel","icon","close","label","Cancel","mode","low-emphasis",3,"click"],["id","save","icon","save","label","Save","mode","auto",3,"click"],["id","edit","icon","edit","label","Edit","mode","auto",3,"click"]],template:function(a,n){if(a&1&&(o(0,"div",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"h4",4),l(5,"Status"),r(),o(6,"p",5),l(7),r()(),o(8,"a",6)(9,"div",7)(10,"i",8),l(11,"person"),r(),o(12,"div",9)(13,"h4",4),l(14,"Customer"),r(),o(15,"p",5),l(16),r()(),b(17,Ue,4,0),r()(),o(18,"a",10)(19,"div",11)(20,"i",8),l(21,"shelves"),r(),o(22,"div",9)(23,"h4",4),l(24,"Shelf"),r(),o(25,"p",12),l(26),r()()()()(),o(27,"div",13)(28,"span",14),l(29,"ID"),r(),o(30,"span",15),l(31),r(),o(32,"span",14),l(33,"Arrived at"),r(),E(34,"pui-time-display",16),o(35,"span",14),l(36,"Net weight"),r(),o(37,"span",15),l(38),r(),o(39,"span",14),l(40,"Gross weight"),r(),o(41,"span",15),l(42),r(),o(43,"span",14),l(44,"Fragile"),r(),b(45,$e,2,0,"i",17)(46,Me,2,0,"i",18)(47,qe,2,0,"span",15),r(),b(48,tt,16,11),r()(),b(49,ot,2,1)),a&2){let I,X,v,Z,_,k,ee,w,A,O;c(7),C((I=(I=n.inventoryItem())==null?null:I.status)!==null&&I!==void 0?I:"--"),c(),m("hoverableEnabled",!n.isEditing()&&n.customer()!=null)("routerLink",!n.isEditing()&&n.customer()?Y(16,We,(X=n.customer())==null?null:X.id):null),c(8),C((v=(v=(v=n.updatedValues().customer)==null?null:v.name)!==null&&v!==void 0?v:(v=n.customer())==null?null:v.name)!==null&&v!==void 0?v:"--"),c(),x(n.isEditing()?17:-1),c(),m("hoverableEnabled",!n.isEditing()&&n.shelf()!=null)("routerLink",!n.isEditing()&&n.shelf()?Y(18,He,(Z=n.shelf())==null?null:Z.id):null),c(8),C(n.shelf()?((_=n.shelf())==null||_.location==null?null:_.location.aisle)+((_=n.shelf())==null||_.location==null?null:_.location.row)+" - "+((_=n.shelf())==null||_.location==null?null:_.location.layer):"--"),c(5),C((k=(k=n.inventoryItem())==null?null:k.id)!==null&&k!==void 0?k:"---"),c(3),m("date",(ee=n.inventoryItem())==null?null:ee.arrivedAt)("format","yyyy-MM-dd HH:mm"),c(4),G("",(w=(w=n.inventoryItem())==null?null:w.netWeight)!==null&&w!==void 0?w:"---"," g"),c(4),G("",(A=(A=n.inventoryItem())==null?null:A.grossWeight)!==null&&A!==void 0?A:"---"," g"),c(3),x(((O=n.inventoryItem())==null?null:O.isContainFragile)===!0?45:((O=n.inventoryItem())==null?null:O.isContainFragile)===!1?46:47),c(3),x(n.inventoryItem()?48:-1),c(),x(n.showEditButton()?49:-1)}},dependencies:[de,se,De,he,fe,Te,_e,Ce,Se,ge,Ie,ve,be,ye,me,pe]});let t=e;return t})();var Le=(()=>{let e=class e{constructor(){this.heading=s("Inventory Items"),this.tabs=s([])}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac});let t=e;return t})();var Fe=(()=>{let e=class e{constructor(){this.dataService=p(y),this.configuration={content:H},this.data=s(null),this.fieldConfiguration=s({type:"object",properties:{netWeight:{type:"number",description:"Net Weight (grams)"},grossWeight:{type:"number",description:"Gross Weight (grams)"},isContainFragile:{type:"boolean",description:"Contains Fragile Contents"},arrivedAt:{type:"date-time",description:"Arrival Time"},belongsTo:{type:"string",description:"User"},status:{type:"string",enum:Object.values(S),description:"Status"},contents:{type:"array",description:"Content",items:{type:"object",properties:{description:{type:"string",description:"Description"},isbn:{type:"string",description:"ISBN"},type:{type:"string",description:"Type",enum:Object.values(M)},quantity:{type:"number",description:"Quantity"},totalPrice:{type:"number",description:"Total Price ($)"}}}}}}),this.controlsConfig=s([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=s(void 0),this.heading=s("Add Item")}registerUpdateState(i){this.updateState=i,this.updateState({isDirty:!0})}onValueChange(i){this.updatedValue.set(i)}onControlClick(i,a){switch(i){case"cancel":{this.data.set({}),this.overlayRef.close();break}case"save":{let n=this.updatedValue();n&&(n=Object.assign(n,{id:J.string.nanoid(),contents:n.contents.map(I=>Object.assign(I,{id:J.string.nanoid(12)}))}),this.dataService.add(n),this.overlayRef.close());break}}}onActionDrawerInit(i){this.overlayRef=i}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac});let t=e;return t})();var Ne=(()=>{let e=class e{constructor(){this.dataService=p(y),this.actionDrawer=p(P),this.rawData=f(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=u(()=>(this.rawData()??[]).toSorted(this.sortFn())),this.columnsConfig=s([{key:"belongsTo",label:"Customer"},{key:"netWeight",label:"Net Weight (g)",fieldConfiguration:{type:"number"}},{key:"grossWeight",label:"Gross Weight (g)",fieldConfiguration:{type:"number"}},{key:"isContainFragile",label:"Fragile",fieldConfiguration:{type:"boolean"}},{key:"status",label:"Status"},{key:"arrivedAt",label:"Arrived",isAlignEnd:!0,isSortedDesc:!0,fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"}}]),this.columnsToDisplay=s({default:["belongsTo","status"],768:["belongsTo","netWeight","status","arrivedAt"],1280:["belongsTo","netWeight","grossWeight","isContainFragile","status","arrivedAt"]}),this.filterValue=s({}),this.sortFn=u(()=>ke(this.columnsConfig()))}routeToDetail(i){return["detail",i.id]}onHeaderCellClick(i,a){this.columnsConfig.update(n=>we(n,i))}onControlClick(i,a){switch(i){case"add":{this.actionDrawer.open(Fe,{providers:[{provide:W,useExisting:N}]});break}}}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac});let t=e;return t})();var li=[{path:"",data:T({},Q({title:"Item"})),children:[{path:"detail/:id",component:K,data:T({},Q({titleFn:t=>t.params.pipe(L(e=>e.id))})),providers:[{provide:z,useClass:Ve}],children:[{path:"info",component:Oe},{path:"raw",component:H,providers:[{provide:W,useClass:Re}]},{path:"**",redirectTo:"info"}]},{path:"",component:K,providers:[{provide:z,useClass:Le}],children:[{path:"",component:U,providers:[{provide:B,useClass:Ne}]}]}]}];export{li as ROUTES};
