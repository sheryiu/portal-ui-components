import{a as c,b as S,c as m,d as p}from"./chunk-RBBBWHIJ.js";import{a as w}from"./chunk-NQD4MLEJ.js";import{B as n,Eb as E,Fb as k,Gb as V,Hb as F,Ib as y,Kb as f,Mb as R,N as i,Nb as I,Ob as L,Pb as C,Qa as h,Qb as O,a as u,ab as j,b as g,i as T,lb as b,oa as d,qa as D,u as A,y as o}from"./chunk-EDS5CUQ7.js";var N=(()=>{let e=class e{constructor(){this.dataService=n(p),this.list=h(this.dataService.getList()),this.params=i({}),this.queryParams=i({}),this.heading=d(()=>this.list()?.find(t=>t.id==this.params().id)?.name??"--"),this.tabs=i([])}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var P=(()=>{let e=class e{constructor(){this.dataService=n(p),this.list=h(this.dataService.getList()),this.params=i({}),this.queryParams=i({}),this.data=i(this.list()?.find(t=>t.id==this.params().id)),this.jsonSchema=i({type:"object",properties:{name:{type:"string",description:"Name"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},department:{type:"string",description:"Department",enum:Object.values(c)},position:{type:"string",description:"Position",enum:Object.values(S)},dateOfJoining:{type:"date-time",description:"Date of Joining"},dateOfLeaving:{type:"date-time",description:"Date of Leaving"},status:{type:"string",description:"Status",enum:Object.values(m)}}}),this.isDirty=i(!1),this.updatedValue=i(void 0),this.controlsConfig=d(()=>this.isDirty()?F:V),D(()=>{this.data.set(structuredClone(this.list()?.find(t=>t.id==this.params().id)))},{allowSignalWrites:!0})}registerUpdateState(t){this.updateState=t}onStateChange(t){this.isDirty.update(s=>t.isDirty??s)}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,s){switch(t){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(a=>a.id==this.params().id))),this.updateState({isDirty:!1});break}case"save":{let a=this.updatedValue();a&&(this.dataService.save(a),this.updateState({isDirty:!1}));break}}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var x=(()=>{let e=class e{constructor(){this.params=i({}),this.queryParams=i({}),this.heading=i("Employees"),this.tabs=i([])}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var U=(()=>{let e=class e{constructor(){this.dataService=n(p),this.configuration={content:f},this.data=i(null),this.jsonSchema=i({type:"object",properties:{name:{type:"string",description:"Name"},email:{type:"string",description:"Email"},phone:{type:"string",description:"Phone"},department:{type:"string",description:"Department",enum:Object.values(c)},position:{type:"string",description:"Position",enum:Object.values(S)},dateOfJoining:{type:"date-time",description:"Date of Joining"},dateOfLeaving:{type:"date-time",description:"Date of Leaving"},status:{type:"string",description:"Status",enum:Object.values(m)}}}),this.controlsConfig=i([{id:"cancel",label:"Cancel",icon:"close",mode:"low-emphasis"},{id:"save",label:"Save",icon:"save"}]),this.updatedValue=i(void 0),this.heading=i("Add Employee"),this.overlayRef=i(null)}registerUpdateState(t){this.updateState=t,this.updateState({isDirty:!0})}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,s){switch(t){case"cancel":{this.data.set({}),this.overlayRef()?.close();break}case"save":{let a=this.updatedValue();a&&(a=Object.assign(a,{id:w.string.nanoid()}),this.dataService.add(a),this.overlayRef()?.close());break}}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var B=(()=>{let e=class e{constructor(){this.overlayData=n(j,{optional:!0}),this.configuration={content:f},this.heading=i("Filter Employee"),this.overlayRef=i(null),this.data=i(this.overlayData?.filter??{}),this.jsonSchema=i({type:"object",properties:{department:{type:"string",description:"Department",enum:[""].concat(Object.values(c))},status:{type:"string",description:"Status",enum:[""].concat(Object.values(m))}}}),this.controlsConfig=i([{id:"cancel",label:"Cancel",icon:"close"},{id:"apply",label:"Apply",icon:"filter_alt"}]),this.updatedValue=i(void 0)}registerUpdateState(t){this.updateState=t,this.updateState({isDirty:!0})}onValueChange(t){this.updatedValue.set(t)}onControlClick(t,s){switch(t){case"cancel":{this.overlayRef()?.close();break}case"apply":{let a=this.updatedValue();a&&(this.overlayData?.onFilterApply?.(a),this.overlayRef()?.close());break}}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var J=(()=>{let e=class e{constructor(){this.dataService=n(p),this.actionDrawer=n(k),this.rawData=h(this.dataService.getList()),this.configuration={useVirtualScroll:!0},this.data=i([]),this.columnsConfig=i([{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"department",label:"Department"},{key:"position",label:"Position"},{key:"status",label:"Status"}]),this.columnsToDisplay=i(["name","email","phone","department","position","status"]),this.simpleFilterConfig=i({type:"object",properties:{department:{type:"string",description:"Department",enum:[""].concat(Object.values(c))},status:{type:"string",description:"Status",enum:[""].concat(Object.values(m))}}}),this.simpleFilterValue=i({}),this.controlsConfig=i([{id:"filter",label:"Advance Filters",icon:"filter_alt"},...R]),this.sortFn=d(()=>{let t=this.columnsConfig().find(a=>a.isSortedAsc||a.isSortedDesc);if(!t)return()=>0;let s=t.isSortedDesc?-1:1;return(a,l)=>{switch(t.key){default:return a[t.key]>l[t.key]?s:a[t.key]<l[t.key]?-1*s:0}}}),this.filterFn=d(()=>{let t=this.simpleFilterValue(),s=Object.values(t??{}).some(a=>typeof a=="string"?!!a:a!=null);return a=>s&&t.status&&a.status!=t.status?!1:!(s&&t.department&&a.department!=t.department)}),D(()=>{let t=this.rawData();t&&this.data.set(t.filter(this.filterFn()).sort(this.sortFn()))},{allowSignalWrites:!0})}routeToDetail(t){return["detail",t.id]}onHeaderCellClick(t,s){this.columnsConfig.update(a=>a.map(l=>l.key==t?g(u({},l),{isSortedAsc:!l.isSortedAsc&&!l.isSortedDesc?!0:!!l.isSortedDesc,isSortedDesc:!!l.isSortedAsc}):g(u({},l),{isSortedAsc:!1,isSortedDesc:!1})))}onUpdateSimpleFilter(t){this.simpleFilterValue.set(t)}onControlClick(t,s){switch(t){case"add":{this.actionDrawer.open(U,{providers:[{provide:y,useExisting:E}]});break}case"filter":{this.actionDrawer.open(B,{overlayData:{filter:this.simpleFilterValue(),onFilterApply:a=>this.simpleFilterValue.set(a)},providers:[{provide:y,useExisting:E}]});break}}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=o({token:e,factory:e.\u0275fac});let r=e;return r})();var It=[{path:"",data:u({},b({title:"Employee"})),children:[{path:"detail/:id",component:O,data:u({},b({deps:[p],titleFn:(r,e)=>r.params.pipe(A(Y=>e.getList().pipe(T(t=>t.find(s=>s.id==Y.id)?.name??"--"))))})),providers:[{provide:C,useClass:N}],children:[{path:"",component:f,providers:[{provide:y,useClass:P}]}]},{path:"",component:O,providers:[{provide:C,useClass:x}],children:[{path:"",component:L,providers:[{provide:I,useClass:J}]}]}]}];export{It as ROUTES};
