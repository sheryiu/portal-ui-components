import{a as M,b as ce}from"./chunk-X3RRXTK5.js";import{Da as Y,Ha as Z,Ia as ee,J as U,Ja as te,Ka as ie,La as ne,Ma as ae,Na as oe,Oa as re,Pa as le,Qa as pe,Ra as de,Ta as me,b as O,f as P,oa as K,pa as I,qa as J,ta as $,wa as Q,y as W,za as X}from"./chunk-MW3KZHK7.js";import{$a as H,Cb as g,Db as c,Ea as S,Fa as u,Ob as d,Pa as B,Pb as L,Qb as k,Sa as p,Wb as w,Xb as x,Yb as R,_b as z,bc as G,dc as j,ga as q,ka as y,kb as s,ob as m,rb as f,tb as D,ua as b,ub as E,va as C,vb as o,wb as r,wc as v,xb as _,yc as N,zb as T}from"./chunk-O4SB2AXP.js";var se=(e,t)=>t.id,xe=e=>["../",e];function be(e,t){e&1&&(o(0,"h3",2),d(1,"Folders"),r())}function Ce(e,t){if(e&1){let i=T();o(0,"a",7),g("click",function(){let a=b(i).$implicit,l=c();return C(l.navigateWithRouter()?{}:l.navigateTo.emit(a))}),o(1,"i",8),d(2,"folder"),r(),o(3,"span",9),d(4),r()()}if(e&2){let i=t.$implicit,n=c();m("routerLink",n.navigateWithRouter()?R(2,xe,i.id):null),p(4),L(i.filename)}}function Te(e,t){if(e&1&&_(0,"img",10),e&2){let i=c().$implicit;m("src",i.thumbnail,B)}}function Me(e,t){e&1&&(o(0,"div",11)(1,"i",13),d(2,"files"),r()())}function ye(e,t){if(e&1&&(o(0,"button",5),s(1,Te,1,1,"img",10)(2,Me,3,0,"div",11),o(3,"div",12)(4,"i",8),d(5,"draft"),r(),o(6,"span",9),d(7),r()()()),e&2){let i=t.$implicit;p(),f(i.thumbnail!=null?1:2),p(6),L(i.filename)}}function we(e,t){e&1&&(o(0,"div",6)(1,"i",14),d(2,"document_search"),r(),o(3,"span",15),d(4,"No files here"),r()())}var ue=(()=>{let t=class t{constructor(){this.media=u.required(),this.navigateWithRouter=u.required(),this.navigateTo=S(),this.processed=v(()=>this.media().toSorted((n,a)=>n.filename<a.filename?-1:n.filename>a.filename?1:0)),this.folders=v(()=>this.processed().filter(n=>n.type==M.FOLDER)),this.files=v(()=>this.processed().filter(n=>n.type==M.FILE))}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=y({type:t,selectors:[["demo-media-manager-grid"]],inputs:{media:[1,"media"],navigateWithRouter:[1,"navigateWithRouter"]},outputs:{navigateTo:"navigateTo"},standalone:!0,features:[w],decls:10,vars:2,consts:[[1,"flex","flex-col","gap-4"],[1,"grid","gap-4",2,"grid-template-columns","repeat(auto-fit, minmax(240px, 1fr))"],[1,"col-span-full"],["puiBaseButton","",1,"basis-[240px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","justify-start","py-3","px-6","gap-3",3,"routerLink"],[1,"pt-2","col-span-full"],["puiBaseButton","",1,"basis-[240px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","items-start","flex-col"],[1,"col-span-full","flex","flex-col","gap-6","justify-center","items-center","py-12"],["puiBaseButton","",1,"basis-[240px]","grow","shrink-0","overflow-hidden","rounded-2","bg-hover","justify-start","py-3","px-6","gap-3",3,"click","routerLink"],[1,"icon-6","font-variation-fill","opacity-70"],[1,"truncate"],[1,"aspect-[21/9]","@screen-sm:aspect-video","w-full","object-cover","bg-hover",3,"src"],[1,"aspect-[21/9]","@screen-sm:aspect-video","w-full","bg-hover","flex","justify-center","items-center"],[1,"flex","flex-row","py-3","px-6","gap-3","items-center","w-full"],[1,"icon-12","font-variation-weight-bold","font-variation-fill","dark:text-primary-600"],[1,"icon-24","opacity-30"],[1,"text-xl","font-medium","opacity-30"]],template:function(a,l){a&1&&(o(0,"div",0)(1,"div",1),s(2,be,2,0,"h3",2),D(3,Ce,5,4,"a",3,se),o(5,"h3",4),d(6,"Files"),r(),D(7,ye,8,2,"button",5,se,!1,we,5,0,"div",6),r()()),a&2&&(p(2),f(l.folders().length>0?2:-1),p(),E(l.folders()),p(4),E(l.files()))},dependencies:[$,I,W]});let e=t;return e})();var Se=(e,t)=>t.id,De=()=>["thumbnail","filename"],Ee=()=>["thumbnail","filename","size"],Le=()=>["thumbnail","filename","size","createdAt"],fe=(e,t,i)=>({default:e,640:t,1280:i}),Re=()=>["64px","minmax(0, 1fr)"],Be=()=>["64px","minmax(0, 1fr)","minmax(0, 1fr)"],ke=()=>["64px","minmax(0, 1fr)","minmax(0, 1fr)","minmax(0, 1fr)"],We=e=>["../",e];function Ie(e,t){if(e&1&&_(0,"img",9),e&2){let i=c(2).$implicit;m("src",i.thumbnail,B)}}function $e(e,t){e&1&&(o(0,"i",8),d(1,"draft"),r())}function Ve(e,t){if(e&1&&s(0,Ie,1,1,"img",9)(1,$e,2,0,"i",8),e&2){let i=c().$implicit;f(i.thumbnail!=null?0:1)}}function He(e,t){e&1&&(o(0,"i",8),d(1,"folder"),r())}function ze(e,t){if(e&1&&(o(0,"pui-table-cell",7),s(1,Ve,2,1)(2,He,2,0,"i",8),r()),e&2){let i=t.$implicit,n=c();p(),f(i.type==n.mediaType.FILE?1:2)}}function Ge(e,t){if(e&1&&(o(0,"pui-table-cell")(1,"span"),d(2),r()()),e&2){let i=t.$implicit;p(2),L(i.filename)}}function je(e,t){if(e&1&&(o(0,"span"),d(1),G(2,"number"),r()),e&2){let i=c().$implicit;p(),k("",j(2,1,i.sizeBytes/1024/1024,"1.0-0")," MB")}}function Ae(e,t){if(e&1&&(o(0,"span"),d(1),G(2,"number"),r()),e&2){let i=c().$implicit;p(),k("",j(2,1,i.sizeBytes/1024,"1.0-0")," KB")}}function qe(e,t){if(e&1&&(o(0,"span"),d(1),r()),e&2){let i=c().$implicit;p(),k("",i.sizeBytes," Bytes")}}function Ne(e,t){if(e&1&&(o(0,"pui-table-cell"),s(1,je,3,4,"span")(2,Ae,3,4,"span")(3,qe,2,1,"span"),r()),e&2){let i=t.$implicit;p(),f(i.sizeBytes>1048576?1:i.sizeBytes>1024?2:i.sizeBytes!=null?3:-1)}}function Oe(e,t){if(e&1&&(o(0,"pui-table-cell",10),_(1,"pui-time-display",11),r()),e&2){let i=t.$implicit;m("rightAligned",!0),p(),m("date",i.createdAt)("format","yyyy MMM dd, HH:mm")}}function Pe(e,t){e&1&&_(0,"pui-table-header-cell")}function Ue(e,t){e&1&&(o(0,"pui-table-header-cell"),d(1,"Name"),r())}function Ke(e,t){e&1&&(o(0,"pui-table-header-cell"),d(1,"Size"),r())}function Je(e,t){e&1&&(o(0,"pui-table-header-cell",10),d(1,"Date created"),r()),e&2&&m("rightAligned",!0)}function Qe(e,t){if(e&1){let i=T();o(0,"pui-table-row",12),g("rowClick",function(){let a=b(i).$implicit,l=c();return C(l.navigateWithRouter()?{}:l.navigateTo.emit(a))}),r()}if(e&2){let i=t.$implicit,n=c();m("item",i)("route",n.navigateWithRouter()?R(2,We,i.id):void 0)}}var _e=(()=>{let t=class t{constructor(){this.media=u.required(),this.navigateWithRouter=u.required(),this.navigateTo=S(),this.processed=v(()=>this.media().toSorted((n,a)=>n.filename<a.filename?-1:n.filename>a.filename?1:0).toSorted((n,a)=>n.type==a.type?0:n.type==M.FOLDER?-1:a.type==M.FOLDER?1:0)),this.folders=v(()=>this.processed().filter(n=>n.type==M.FOLDER)),this.files=v(()=>this.processed().filter(n=>n.type==M.FILE)),this.mediaType=M}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=y({type:t,selectors:[["demo-media-manager-list"]],inputs:{media:[1,"media"],navigateWithRouter:[1,"navigateWithRouter"]},outputs:{navigateTo:"navigateTo"},standalone:!0,features:[w],decls:13,vars:29,consts:[[3,"itemHeight","columns","columnWidths"],["class","p-0 justify-center",4,"puiTableCellDef","puiTableCellDefType"],[4,"puiTableCellDef","puiTableCellDefType"],[3,"rightAligned",4,"puiTableCellDef","puiTableCellDefType"],[4,"puiTableHeaderCellDef"],[3,"rightAligned",4,"puiTableHeaderCellDef"],["puiHoverable","",3,"item","route"],[1,"p-0","justify-center"],[1,"icon-8","font-variation-fill","opacity-70"],[1,"aspect-square","h-16","object-cover",3,"src"],[3,"rightAligned"],[3,"date","format"],["puiHoverable","",3,"rowClick","item","route"]],template:function(a,l){a&1&&(o(0,"pui-table",0),s(1,ze,3,1,"pui-table-cell",1)(2,Ge,3,1,"pui-table-cell",2)(3,Ne,4,1,"pui-table-cell",2)(4,Oe,2,3,"pui-table-cell",3)(5,Pe,1,0,"pui-table-header-cell",4)(6,Ue,2,0,"pui-table-header-cell",4)(7,Ke,2,0,"pui-table-header-cell",4)(8,Je,2,1,"pui-table-header-cell",5),o(9,"pui-table-body"),_(10,"pui-table-header-row"),D(11,Qe,1,4,"pui-table-row",6,Se),r()()),a&2&&(m("itemHeight",64)("columns",z(18,fe,x(15,De),x(16,Ee),x(17,Le)))("columnWidths",z(25,fe,x(22,Re),x(23,Be),x(24,ke))),p(),m("puiTableCellDef","thumbnail")("puiTableCellDefType",l.rowType),p(),m("puiTableCellDef","filename")("puiTableCellDefType",l.rowType),p(),m("puiTableCellDef","size")("puiTableCellDefType",l.rowType),p(),m("puiTableCellDef","createdAt")("puiTableCellDefType",l.rowType),p(),m("puiTableHeaderCellDef","thumbnail"),p(),m("puiTableHeaderCellDef","filename"),p(),m("puiTableHeaderCellDef","size"),p(),m("puiTableHeaderCellDef","createdAt"),p(3),E(l.processed()))},dependencies:[me,ae,oe,de,pe,re,ie,le,ne,K,P,Y]});let e=t;return e})();var Xe=(e,t)=>t==null?null:t.id,Ye=e=>({"bg-hover":e}),Ze=e=>["../",e];function et(e,t){e&1&&(o(0,"i",13),d(1,"home"),r(),o(2,"span",14),d(3,"Home"),r())}function tt(e,t){if(e&1&&(o(0,"span",11),d(1),r()),e&2){let i=c().$implicit;p(),L(i.filename)}}function it(e,t){e&1&&(o(0,"i",12),d(1,"chevron_right"),r())}function nt(e,t){if(e&1){let i=T();o(0,"a",10),g("click",function(){let a=b(i).$implicit,l=c();return C(l.navigateTo.emit(a))}),s(1,et,4,0)(2,tt,2,1,"span",11),r(),s(3,it,2,0,"i",12)}if(e&2){let i,n=t.$implicit,a=t.$index,l=t.$count,F=c();m("ngClass",R(4,Ye,a===0))("routerLink",F.navigateWithRouter()?R(6,Ze,(i=n==null?null:n.id)!==null&&i!==void 0?i:null):null),p(),f(n==null?1:2),p(2),f(a!==l-1?3:-1)}}function at(e,t){e&1&&(o(0,"div",15)(1,"i",16),d(2,"grid_view"),r()())}function ot(e,t){e&1&&(o(0,"div",17)(1,"i",18),d(2,"list"),r()())}var ge=(()=>{let t=class t{constructor(){this.parentFolders=u.required(),this.navigateWithRouter=u.required(),this.viewMode=u.required(),this.navigateTo=S(),this.viewModeChange=S()}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=y({type:t,selectors:[["demo-media-manager-toolbar"]],inputs:{parentFolders:[1,"parentFolders"],navigateWithRouter:[1,"navigateWithRouter"],viewMode:[1,"viewMode"]},outputs:{navigateTo:"navigateTo",viewModeChange:"viewModeChange"},standalone:!0,features:[w],decls:15,vars:3,consts:[[1,"@container"],[1,"flex","flex-row","flex-wrap","@screen-sm:flex-nowrap","gap-x-3","gap-y-4"],[1,"overflow-x-auto","flex","items-center","basis-full"],[1,"flex","flex-row-reverse","items-center","gap-1","overflow-x-auto"],[1,"shrink","grow","basis-48","hidden","@screen-sm:block"],["puiBorderedButton","","puiTooltip","Sort by filename",1,"rounded-full","flex-row","px-4","gap-2","flex-none"],[1,"icon-4","font-variation-weight-light","rotate-180","-scale-x-100"],[1,"flex-none",3,"tabChange","currentTab"],["puiTooltip","Grid View",4,"puiTab"],["puiTooltip","List View",4,"puiTab"],["puiBaseButton","",1,"rounded-1","px-4","py-2","@screen-sm:px-2","gap-2","items-center","flex-none",3,"click","ngClass","routerLink"],[1,"text-base/none"],[1,"icon-4","font-variation-weight-bold","dark:text-primary-50"],[1,"icon-4","font-variation-fill"],[1,"font-medium","text-base/none","pt-px"],["puiTooltip","Grid View"],[1,"icon-5","font-variation-weight-light"],["puiTooltip","List View"],[1,"icon-5","font-variation-weight-bold"]],template:function(a,l){a&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),D(4,nt,4,8,null,null,Xe),r()(),_(6,"div",4),o(7,"button",5)(8,"i",6),d(9,"sort"),r(),o(10,"span"),d(11,"Filename"),r()(),o(12,"pui-tab-bar",7),g("tabChange",function(h){return l.viewModeChange.emit(h)}),s(13,at,3,0,"div",8)(14,ot,3,0,"div",9),r()()()),a&2&&(p(4),E(l.parentFolders()),p(8),m("currentTab",l.viewMode()),p(),m("puiTab","grid"),p(),m("puiTab","list"))},dependencies:[te,ee,Z,Q,$,I,J,W,O],styles:["[_nghost-%COMP%]     pui-tab-bar .pui-tab-bar-tabs{background:#bfbfbf0d;box-shadow:inset #ffffff08 0 0 4px,#0000001a 4px 2px 3px}"]});let e=t;return e})();var ve=()=>[];function rt(e,t){if(e&1){let i=T();o(0,"demo-media-manager-grid",3),g("navigateTo",function(a){b(i);let l=c();return C(l.onNavigateTo(a))}),r()}if(e&2){let i,n=c();m("media",(i=n.children())!==null&&i!==void 0?i:x(2,ve))("navigateWithRouter",n.navigateWithRouter())}}function lt(e,t){if(e&1){let i=T();o(0,"demo-media-manager-list",3),g("navigateTo",function(a){b(i);let l=c();return C(l.onNavigateTo(a))}),r()}if(e&2){let i,n=c();m("media",(i=n.children())!==null&&i!==void 0?i:x(2,ve))("navigateWithRouter",n.navigateWithRouter())}}var $t=(()=>{let t=class t{constructor(){this.dataService=q(ce),this.folderId=u(),this.currentFolderId=H(null),this.navigateWithRouter=u(!0),this.viewMode=H("grid"),this.allMedia=U(this.dataService.getList()),this.children=v(()=>this.allMedia()?.filter(n=>n.belongsInFolderId==this.currentFolderId())),this.parentFolders=v(()=>{let n=this.currentFolderId(),a=this.allMedia();if(a==null)return[];let l=a.find(V=>V.id==n)??null,F=l?.belongsInFolderId??null,h=[];do{if(h=h.toSpliced(h.length,0,l??null),l==null)break;l=a.find(V=>V.id==F)??null,F=l?.belongsInFolderId??null}while(!0);return h}),N(()=>{this.currentFolderId.set(this.folderId()??null)},{allowSignalWrites:!0})}onNavigateTo(n){this.currentFolderId.set(n?.id??null)}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=y({type:t,selectors:[["demo-media-manager-folder"]],inputs:{folderId:[1,"folderId"],navigateWithRouter:[1,"navigateWithRouter"]},standalone:!0,features:[w],decls:5,vars:4,consts:[[1,"flex","flex-col","gap-4"],[3,"navigateTo","viewModeChange","parentFolders","navigateWithRouter","viewMode"],[3,"media","navigateWithRouter"],[3,"navigateTo","media","navigateWithRouter"]],template:function(a,l){a&1&&(o(0,"div",0)(1,"demo-media-manager-toolbar",1),g("navigateTo",function(h){return l.onNavigateTo(h)})("viewModeChange",function(h){return l.viewMode.set(h)}),r(),_(2,"pui-divider"),s(3,rt,1,3,"demo-media-manager-grid",2)(4,lt,1,3,"demo-media-manager-list",2),r()),a&2&&(p(),m("parentFolders",l.parentFolders())("navigateWithRouter",l.navigateWithRouter())("viewMode",l.viewMode()),p(2),f(l.viewMode()=="grid"?3:4))},dependencies:[ge,X,ue,_e]});let e=t;return e})();export{$t as a};
