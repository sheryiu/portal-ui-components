import{a as o,b as u}from"./chunk-NFH6WZVZ.js";import{d as I,e as F}from"./chunk-33BX6FVD.js";import{c as E,d as S,e as D,g,k as T,m as b,n as L,o as A,p as m,q as h}from"./chunk-AYVR6FRK.js";import"./chunk-5KUQE4MU.js";import{I as l,ua as c}from"./chunk-OTGN347X.js";import{$ as d,Ca as a,W as C,fa as s,q as y,rc as n,uc as v}from"./chunk-I76RA5B3.js";import{a as p,b as f}from"./chunk-EQDQRRRY.js";var N=(()=>{class t{constructor(){this.dataService=s(o),this.list=l(this.dataService.getList()),this.id=a(void 0),this.heading=n(()=>this.list()?.find(e=>e.id==this.id())?.label??"--"),this.tabs=a([])}onParamsChange(e,i){this.id.set(e.id)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=d({token:t,factory:t.\u0275fac})}}return t})();var j=(()=>{class t{constructor(){this.dataService=s(o),this.list=l(this.dataService.getList()),this.id=a(void 0),this.data=a(void 0),this.fieldConfiguration=a({type:"object",properties:{employeeId:{type:"string",description:"Employee ID"},startsFrom:{type:"date-time",description:"Starts From"},endsAt:{type:"date-time",description:"Ends At"},isFullDay:{type:"boolean",description:"Full Day"},label:{type:"string",description:"Label"},type:{type:"string",description:"Type",enum:Object.values(I)}}}),this.isDirty=a(!1),this.updatedValue=a(void 0),this.controlsConfig=n(()=>this.isDirty()?S:E),v(()=>{this.data.set(structuredClone(this.list()?.find(e=>e.id==this.id())))})}registerUpdateState(e){this.updateState=e}onStateChange(e){this.isDirty.update(i=>e.isDirty??i)}onValueChange(e){this.updatedValue.set(e)}onControlClick(e,i){switch(e){case"refresh":case"cancel":{this.data.set(structuredClone(this.list()?.find(r=>r.id==this.id()))),this.updateState({isDirty:!1});break}case"save":{let r=this.updatedValue();r&&(this.dataService.save(r),this.updateState({isDirty:!1}));break}}}onParamsChange(e,i){this.id.set(e.id)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=d({token:t,factory:t.\u0275fac})}}return t})();var k=(()=>{class t{constructor(){this.dataService=s(o),this.rawData=l(this.dataService.getList()),this.employeeDataService=s(F),this.employeeList=l(this.employeeDataService.getList()),this.configuration={useVirtualScroll:!0},this.data=n(()=>{let e=this.rawData(),i=this.employeeList();return!e||!i?[]:e.map(r=>f(p({},r),{employee:i.find(V=>V.id==r.employeeId)})).toSorted(this.sortFn())}),this.columnsConfig=a([{key:"employeeName",label:"Employee",path:"employee.name"},{key:"label",label:"Label"},{key:"startsFrom",label:"Starts",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isSortedDesc:!0},{key:"endsAt",label:"Ends",fieldConfiguration:{type:"date-time",format:"yyyy-MM-dd HH:mm"},isAlignEnd:!0}]),this.columnsToDisplay=a(["employeeName","label","startsFrom","endsAt"]),this.controlsConfig=a([]),this.sortFn=n(()=>T(this.columnsConfig()))}routeToDetail(e){return["../detail",e.id]}onHeaderCellClick(e,i){this.columnsConfig.update(r=>A(r,e))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=d({token:t,factory:t.\u0275fac})}}return t})();var de=[{path:"",data:p({},c({title:"Calendar"})),children:[{path:"detail/:id",component:h,data:p({},c({deps:[o],titleFn:(t,R)=>t.params.pipe(C(e=>R.getList().pipe(y(i=>i.find(r=>r.id==e.id)?.label??"--"))))})),providers:[{provide:m,useClass:N}],children:[{path:"raw",component:g,providers:[{provide:D,useClass:j}]},{path:"**",redirectTo:"raw"}]},{path:"",component:h,providers:[{provide:m,useClass:u}],children:[{path:"monthly/:timestamp",loadComponent:()=>import("./chunk-37BPHWNQ.js").then(t=>t.EmployeeCalendarMonthlyComponent),providers:[{provide:u,useExisting:m}]},{path:"data",component:L,providers:[{provide:b,useClass:k}]},{path:"**",redirectTo:"monthly/-1"}]}]}];export{de as ROUTES};
